#!/usr/bin/env node

const H = require('nano-http');
const FS = require('fs');

const SOURCE_DRAW_JS = 'LyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xNC4wCiAqIHJlYWN0LnByb2R1Y3Rpb24ubWluLmpzCiAqCiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi8KJ3VzZSBzdHJpY3QnOyhmdW5jdGlvbihkLHIpeyJvYmplY3QiPT09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT09dHlwZW9mIG1vZHVsZT9yKGV4cG9ydHMpOiJmdW5jdGlvbiI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImV4cG9ydHMiXSxyKTooZD1kfHxzZWxmLHIoZC5SZWFjdD17fSkpfSkodGhpcyxmdW5jdGlvbihkKXtmdW5jdGlvbiByKGEpe2Zvcih2YXIgYj0iaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9IithLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWIrPSImYXJnc1tdPSIrZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tjXSk7cmV0dXJuIk1pbmlmaWVkIFJlYWN0IGVycm9yICMiK2ErIjsgdmlzaXQgIitiKyIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycyBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLiJ9CmZ1bmN0aW9uIHcoYSxiLGMpe3RoaXMucHJvcHM9YTt0aGlzLmNvbnRleHQ9Yjt0aGlzLnJlZnM9YmE7dGhpcy51cGRhdGVyPWN8fGNhfWZ1bmN0aW9uIGRhKCl7fWZ1bmN0aW9uIEwoYSxiLGMpe3RoaXMucHJvcHM9YTt0aGlzLmNvbnRleHQ9Yjt0aGlzLnJlZnM9YmE7dGhpcy51cGRhdGVyPWN8fGNhfWZ1bmN0aW9uIGVhKGEsYixjKXt2YXIgZyxlPXt9LGZhPW51bGwsZD1udWxsO2lmKG51bGwhPWIpZm9yKGcgaW4gdm9pZCAwIT09Yi5yZWYmJihkPWIucmVmKSx2b2lkIDAhPT1iLmtleSYmKGZhPSIiK2Iua2V5KSxiKWhhLmNhbGwoYixnKSYmIWlhLmhhc093blByb3BlcnR5KGcpJiYoZVtnXT1iW2ddKTt2YXIgaD1hcmd1bWVudHMubGVuZ3RoLTI7aWYoMT09PWgpZS5jaGlsZHJlbj1jO2Vsc2UgaWYoMTxoKXtmb3IodmFyIGs9QXJyYXkoaCksZj0wO2Y8aDtmKyspa1tmXT1hcmd1bWVudHNbZisyXTtlLmNoaWxkcmVuPWt9aWYoYSYmYS5kZWZhdWx0UHJvcHMpZm9yKGcgaW4gaD1hLmRlZmF1bHRQcm9wcywKaCl2b2lkIDA9PT1lW2ddJiYoZVtnXT1oW2ddKTtyZXR1cm57JCR0eXBlb2Y6eCx0eXBlOmEsa2V5OmZhLHJlZjpkLHByb3BzOmUsX293bmVyOk0uY3VycmVudH19ZnVuY3Rpb24gdmEoYSxiKXtyZXR1cm57JCR0eXBlb2Y6eCx0eXBlOmEudHlwZSxrZXk6YixyZWY6YS5yZWYscHJvcHM6YS5wcm9wcyxfb3duZXI6YS5fb3duZXJ9fWZ1bmN0aW9uIE4oYSl7cmV0dXJuIm9iamVjdCI9PT10eXBlb2YgYSYmbnVsbCE9PWEmJmEuJCR0eXBlb2Y9PT14fWZ1bmN0aW9uIHdhKGEpe3ZhciBiPXsiPSI6Ij0wIiwiOiI6Ij0yIn07cmV0dXJuIiQiKygiIithKS5yZXBsYWNlKC9bPTpdL2csZnVuY3Rpb24oYSl7cmV0dXJuIGJbYV19KX1mdW5jdGlvbiBqYShhLGIsYyxnKXtpZihDLmxlbmd0aCl7dmFyIGU9Qy5wb3AoKTtlLnJlc3VsdD1hO2Uua2V5UHJlZml4PWI7ZS5mdW5jPWM7ZS5jb250ZXh0PWc7ZS5jb3VudD0wO3JldHVybiBlfXJldHVybntyZXN1bHQ6YSxrZXlQcmVmaXg6YixmdW5jOmMsCmNvbnRleHQ6Zyxjb3VudDowfX1mdW5jdGlvbiBrYShhKXthLnJlc3VsdD1udWxsO2Eua2V5UHJlZml4PW51bGw7YS5mdW5jPW51bGw7YS5jb250ZXh0PW51bGw7YS5jb3VudD0wOzEwPkMubGVuZ3RoJiZDLnB1c2goYSl9ZnVuY3Rpb24gTyhhLGIsYyxnKXt2YXIgZT10eXBlb2YgYTtpZigidW5kZWZpbmVkIj09PWV8fCJib29sZWFuIj09PWUpYT1udWxsO3ZhciBkPSExO2lmKG51bGw9PT1hKWQ9ITA7ZWxzZSBzd2l0Y2goZSl7Y2FzZSAic3RyaW5nIjpjYXNlICJudW1iZXIiOmQ9ITA7YnJlYWs7Y2FzZSAib2JqZWN0Ijpzd2l0Y2goYS4kJHR5cGVvZil7Y2FzZSB4OmNhc2UgeGE6ZD0hMH19aWYoZClyZXR1cm4gYyhnLGEsIiI9PT1iPyIuIitQKGEsMCk6YiksMTtkPTA7Yj0iIj09PWI/Ii4iOmIrIjoiO2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspe2U9YVtmXTt2YXIgaD1iK1AoZSxmKTtkKz1PKGUsaCxjLGcpfWVsc2UgaWYobnVsbD09PWF8fAoib2JqZWN0IiE9PXR5cGVvZiBhP2g9bnVsbDooaD1sYSYmYVtsYV18fGFbIkBAaXRlcmF0b3IiXSxoPSJmdW5jdGlvbiI9PT10eXBlb2YgaD9oOm51bGwpLCJmdW5jdGlvbiI9PT10eXBlb2YgaClmb3IoYT1oLmNhbGwoYSksZj0wOyEoZT1hLm5leHQoKSkuZG9uZTspZT1lLnZhbHVlLGg9YitQKGUsZisrKSxkKz1PKGUsaCxjLGcpO2Vsc2UgaWYoIm9iamVjdCI9PT1lKXRocm93IGM9IiIrYSxFcnJvcihyKDMxLCJbb2JqZWN0IE9iamVjdF0iPT09Yz8ib2JqZWN0IHdpdGgga2V5cyB7IitPYmplY3Qua2V5cyhhKS5qb2luKCIsICIpKyJ9IjpjLCIiKSk7cmV0dXJuIGR9ZnVuY3Rpb24gUShhLGIsYyl7cmV0dXJuIG51bGw9PWE/MDpPKGEsIiIsYixjKX1mdW5jdGlvbiBQKGEsYil7cmV0dXJuIm9iamVjdCI9PT10eXBlb2YgYSYmbnVsbCE9PWEmJm51bGwhPWEua2V5P3dhKGEua2V5KTpiLnRvU3RyaW5nKDM2KX1mdW5jdGlvbiB5YShhLGIsYyl7YS5mdW5jLmNhbGwoYS5jb250ZXh0LGIsCmEuY291bnQrKyl9ZnVuY3Rpb24gemEoYSxiLGMpe3ZhciBnPWEucmVzdWx0LGU9YS5rZXlQcmVmaXg7YT1hLmZ1bmMuY2FsbChhLmNvbnRleHQsYixhLmNvdW50KyspO0FycmF5LmlzQXJyYXkoYSk/UihhLGcsYyxmdW5jdGlvbihhKXtyZXR1cm4gYX0pOm51bGwhPWEmJihOKGEpJiYoYT12YShhLGUrKCFhLmtleXx8YiYmYi5rZXk9PT1hLmtleT8iIjooIiIrYS5rZXkpLnJlcGxhY2UobWEsIiQmLyIpKyIvIikrYykpLGcucHVzaChhKSl9ZnVuY3Rpb24gUihhLGIsYyxnLGUpe3ZhciBkPSIiO251bGwhPWMmJihkPSgiIitjKS5yZXBsYWNlKG1hLCIkJi8iKSsiLyIpO2I9amEoYixkLGcsZSk7UShhLHphLGIpO2thKGIpfWZ1bmN0aW9uIHQoKXt2YXIgYT1uYS5jdXJyZW50O2lmKG51bGw9PT1hKXRocm93IEVycm9yKHIoMzIxKSk7cmV0dXJuIGF9ZnVuY3Rpb24gUyhhLGIpe3ZhciBjPWEubGVuZ3RoO2EucHVzaChiKTthOmZvcig7Oyl7dmFyIGc9Yy0xPj4+MSxlPWFbZ107aWYodm9pZCAwIT09CmUmJjA8RChlLGIpKWFbZ109YixhW2NdPWUsYz1nO2Vsc2UgYnJlYWsgYX19ZnVuY3Rpb24gbihhKXthPWFbMF07cmV0dXJuIHZvaWQgMD09PWE/bnVsbDphfWZ1bmN0aW9uIEUoYSl7dmFyIGI9YVswXTtpZih2b2lkIDAhPT1iKXt2YXIgYz1hLnBvcCgpO2lmKGMhPT1iKXthWzBdPWM7YTpmb3IodmFyIGc9MCxlPWEubGVuZ3RoO2c8ZTspe3ZhciBkPTIqKGcrMSktMSxmPWFbZF0saD1kKzEsaz1hW2hdO2lmKHZvaWQgMCE9PWYmJjA+RChmLGMpKXZvaWQgMCE9PWsmJjA+RChrLGYpPyhhW2ddPWssYVtoXT1jLGc9aCk6KGFbZ109ZixhW2RdPWMsZz1kKTtlbHNlIGlmKHZvaWQgMCE9PWsmJjA+RChrLGMpKWFbZ109ayxhW2hdPWMsZz1oO2Vsc2UgYnJlYWsgYX19cmV0dXJuIGJ9cmV0dXJuIG51bGx9ZnVuY3Rpb24gRChhLGIpe3ZhciBjPWEuc29ydEluZGV4LWIuc29ydEluZGV4O3JldHVybiAwIT09Yz9jOmEuaWQtYi5pZH1mdW5jdGlvbiBGKGEpe2Zvcih2YXIgYj1uKHUpO251bGwhPT0KYjspe2lmKG51bGw9PT1iLmNhbGxiYWNrKUUodSk7ZWxzZSBpZihiLnN0YXJ0VGltZTw9YSlFKHUpLGIuc29ydEluZGV4PWIuZXhwaXJhdGlvblRpbWUsUyhwLGIpO2Vsc2UgYnJlYWs7Yj1uKHUpfX1mdW5jdGlvbiBUKGEpe3k9ITE7RihhKTtpZighdilpZihudWxsIT09bihwKSl2PSEwLHooVSk7ZWxzZXt2YXIgYj1uKHUpO251bGwhPT1iJiZHKFQsYi5zdGFydFRpbWUtYSl9fWZ1bmN0aW9uIFUoYSxiKXt2PSExO3kmJih5PSExLFYoKSk7SD0hMDt2YXIgYz1tO3RyeXtGKGIpO2ZvcihsPW4ocCk7bnVsbCE9PWwmJighKGwuZXhwaXJhdGlvblRpbWU+Yil8fGEmJiFXKCkpOyl7dmFyIGc9bC5jYWxsYmFjaztpZihudWxsIT09Zyl7bC5jYWxsYmFjaz1udWxsO209bC5wcmlvcml0eUxldmVsO3ZhciBlPWcobC5leHBpcmF0aW9uVGltZTw9Yik7Yj1xKCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBlP2wuY2FsbGJhY2s9ZTpsPT09bihwKSYmRShwKTtGKGIpfWVsc2UgRShwKTtsPW4ocCl9aWYobnVsbCE9PQpsKXZhciBkPSEwO2Vsc2V7dmFyIGY9bih1KTtudWxsIT09ZiYmRyhULGYuc3RhcnRUaW1lLWIpO2Q9ITF9cmV0dXJuIGR9ZmluYWxseXtsPW51bGwsbT1jLEg9ITF9fWZ1bmN0aW9uIG9hKGEpe3N3aXRjaChhKXtjYXNlIDE6cmV0dXJuLTE7Y2FzZSAyOnJldHVybiAyNTA7Y2FzZSA1OnJldHVybiAxMDczNzQxODIzO2Nhc2UgNDpyZXR1cm4gMUU0O2RlZmF1bHQ6cmV0dXJuIDVFM319dmFyIGY9ImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5mb3IseD1mP1N5bWJvbC5mb3IoInJlYWN0LmVsZW1lbnQiKTo2MDEwMyx4YT1mP1N5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpOjYwMTA2LEFhPWY/U3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKTo2MDEwNyxCYT1mP1N5bWJvbC5mb3IoInJlYWN0LnN0cmljdF9tb2RlIik6NjAxMDgsQ2E9Zj9TeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpOjYwMTE0LERhPWY/U3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKTo2MDEwOSwKRWE9Zj9TeW1ib2wuZm9yKCJyZWFjdC5jb250ZXh0Iik6NjAxMTAsRmE9Zj9TeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpOjYwMTEyLEdhPWY/U3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKTo2MDExMyxIYT1mP1N5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKTo2MDExNSxJYT1mP1N5bWJvbC5mb3IoInJlYWN0LmxhenkiKTo2MDExNixsYT0iZnVuY3Rpb24iPT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsSmE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxLYT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLEk9ZnVuY3Rpb24oKXt0cnl7aWYoIU9iamVjdC5hc3NpZ24pcmV0dXJuITE7dmFyIGE9bmV3IFN0cmluZygiYWJjIik7YVs1XT0iZGUiO2lmKCI1Ij09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpWzBdKXJldHVybiExO3ZhciBiPXt9O2ZvcihhPTA7MTA+YTthKyspYlsiXyIrClN0cmluZy5mcm9tQ2hhckNvZGUoYSldPWE7aWYoIjAxMjM0NTY3ODkiIT09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBiW2FdfSkuam9pbigiIikpcmV0dXJuITE7dmFyIGM9e307ImFiY2RlZmdoaWprbG1ub3BxcnN0Ii5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdPWF9KTtyZXR1cm4iYWJjZGVmZ2hpamtsbW5vcHFyc3QiIT09T2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSxjKSkuam9pbigiIik/ITE6ITB9Y2F0Y2goZyl7cmV0dXJuITF9fSgpP09iamVjdC5hc3NpZ246ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09YXx8dm9pZCAwPT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCIpO3ZhciBjPU9iamVjdChhKTtmb3IodmFyIGcsZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBkPU9iamVjdChhcmd1bWVudHNbZV0pOwpmb3IodmFyIGYgaW4gZClKYS5jYWxsKGQsZikmJihjW2ZdPWRbZl0pO2lmKHBhKXtnPXBhKGQpO2Zvcih2YXIgaD0wO2g8Zy5sZW5ndGg7aCsrKUthLmNhbGwoZCxnW2hdKSYmKGNbZ1toXV09ZFtnW2hdXSl9fXJldHVybiBjfSxjYT17aXNNb3VudGVkOmZ1bmN0aW9uKGEpe3JldHVybiExfSxlbnF1ZXVlRm9yY2VVcGRhdGU6ZnVuY3Rpb24oYSxiLGMpe30sZW5xdWV1ZVJlcGxhY2VTdGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt9LGVucXVldWVTZXRTdGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt9fSxiYT17fTt3LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50PXt9O3cucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKGEsYil7aWYoIm9iamVjdCIhPT10eXBlb2YgYSYmImZ1bmN0aW9uIiE9PXR5cGVvZiBhJiZudWxsIT1hKXRocm93IEVycm9yKHIoODUpKTt0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFN0YXRlKHRoaXMsYSxiLCJzZXRTdGF0ZSIpfTt3LnByb3RvdHlwZS5mb3JjZVVwZGF0ZT0KZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzLGEsImZvcmNlVXBkYXRlIil9O2RhLnByb3RvdHlwZT13LnByb3RvdHlwZTtmPUwucHJvdG90eXBlPW5ldyBkYTtmLmNvbnN0cnVjdG9yPUw7SShmLHcucHJvdG90eXBlKTtmLmlzUHVyZVJlYWN0Q29tcG9uZW50PSEwO3ZhciBNPXtjdXJyZW50Om51bGx9LGhhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaWE9e2tleTohMCxyZWY6ITAsX19zZWxmOiEwLF9fc291cmNlOiEwfSxtYT0vXC8rL2csQz1bXSxuYT17Y3VycmVudDpudWxsfSxYO2lmKCJ1bmRlZmluZWQiPT09dHlwZW9mIHdpbmRvd3x8ImZ1bmN0aW9uIiE9PXR5cGVvZiBNZXNzYWdlQ2hhbm5lbCl7dmFyIEE9bnVsbCxxYT1udWxsLHJhPWZ1bmN0aW9uKCl7aWYobnVsbCE9PUEpdHJ5e3ZhciBhPXEoKTtBKCEwLGEpO0E9bnVsbH1jYXRjaChiKXt0aHJvdyBzZXRUaW1lb3V0KHJhLDApLGI7fX0sTGE9RGF0ZS5ub3coKTt2YXIgcT0KZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1MYX07dmFyIHo9ZnVuY3Rpb24oYSl7bnVsbCE9PUE/c2V0VGltZW91dCh6LDAsYSk6KEE9YSxzZXRUaW1lb3V0KHJhLDApKX07dmFyIEc9ZnVuY3Rpb24oYSxiKXtxYT1zZXRUaW1lb3V0KGEsYil9O3ZhciBWPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHFhKX07dmFyIFc9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zj1YPWZ1bmN0aW9uKCl7fX1lbHNle3ZhciBZPXdpbmRvdy5wZXJmb3JtYW5jZSxzYT13aW5kb3cuRGF0ZSxNYT13aW5kb3cuc2V0VGltZW91dCxOYT13aW5kb3cuY2xlYXJUaW1lb3V0OyJ1bmRlZmluZWQiIT09dHlwZW9mIGNvbnNvbGUmJihmPXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSwiZnVuY3Rpb24iIT09dHlwZW9mIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUmJmNvbnNvbGUuZXJyb3IoIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLiBNYWtlIHN1cmUgdGhhdCB5b3UgbG9hZCBhIHBvbHlmaWxsIGluIG9sZGVyIGJyb3dzZXJzLiBodHRwczovL2ZiLm1lL3JlYWN0LXBvbHlmaWxscyIpLAoiZnVuY3Rpb24iIT09dHlwZW9mIGYmJmNvbnNvbGUuZXJyb3IoIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgY2FuY2VsQW5pbWF0aW9uRnJhbWUuIE1ha2Ugc3VyZSB0aGF0IHlvdSBsb2FkIGEgcG9seWZpbGwgaW4gb2xkZXIgYnJvd3NlcnMuIGh0dHBzOi8vZmIubWUvcmVhY3QtcG9seWZpbGxzIikpO2lmKCJvYmplY3QiPT09dHlwZW9mIFkmJiJmdW5jdGlvbiI9PT10eXBlb2YgWS5ub3cpcT1mdW5jdGlvbigpe3JldHVybiBZLm5vdygpfTtlbHNle3ZhciBPYT1zYS5ub3coKTtxPWZ1bmN0aW9uKCl7cmV0dXJuIHNhLm5vdygpLU9hfX12YXIgSj0hMSxLPW51bGwsWj0tMSx0YT01LHVhPTA7Vz1mdW5jdGlvbigpe3JldHVybiBxKCk+PXVhfTtmPWZ1bmN0aW9uKCl7fTtYPWZ1bmN0aW9uKGEpezA+YXx8MTI1PGE/Y29uc29sZS5lcnJvcigiZm9yY2VGcmFtZVJhdGUgdGFrZXMgYSBwb3NpdGl2ZSBpbnQgYmV0d2VlbiAwIGFuZCAxMjUsIGZvcmNpbmcgZnJhbWVyYXRlcyBoaWdoZXIgdGhhbiAxMjUgZnBzIGlzIG5vdCB1bnN1cHBvcnRlZCIpOgp0YT0wPGE/TWF0aC5mbG9vcigxRTMvYSk6NX07dmFyIEI9bmV3IE1lc3NhZ2VDaGFubmVsLGFhPUIucG9ydDI7Qi5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtpZihudWxsIT09Syl7dmFyIGE9cSgpO3VhPWErdGE7dHJ5e0soITAsYSk/YWEucG9zdE1lc3NhZ2UobnVsbCk6KEo9ITEsSz1udWxsKX1jYXRjaChiKXt0aHJvdyBhYS5wb3N0TWVzc2FnZShudWxsKSxiO319ZWxzZSBKPSExfTt6PWZ1bmN0aW9uKGEpe0s9YTtKfHwoSj0hMCxhYS5wb3N0TWVzc2FnZShudWxsKSl9O0c9ZnVuY3Rpb24oYSxiKXtaPU1hKGZ1bmN0aW9uKCl7YShxKCkpfSxiKX07Vj1mdW5jdGlvbigpe05hKFopO1o9LTF9fXZhciBwPVtdLHU9W10sUGE9MSxsPW51bGwsbT0zLEg9ITEsdj0hMSx5PSExLFFhPTA7Qj17UmVhY3RDdXJyZW50RGlzcGF0Y2hlcjpuYSxSZWFjdEN1cnJlbnRPd25lcjpNLElzU29tZVJlbmRlcmVyQWN0aW5nOntjdXJyZW50OiExfSxhc3NpZ246SX07SShCLHtTY2hlZHVsZXI6e19fcHJvdG9fXzpudWxsLAp1bnN0YWJsZV9JbW1lZGlhdGVQcmlvcml0eToxLHVuc3RhYmxlX1VzZXJCbG9ja2luZ1ByaW9yaXR5OjIsdW5zdGFibGVfTm9ybWFsUHJpb3JpdHk6Myx1bnN0YWJsZV9JZGxlUHJpb3JpdHk6NSx1bnN0YWJsZV9Mb3dQcmlvcml0eTo0LHVuc3RhYmxlX3J1bldpdGhQcmlvcml0eTpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDE6Y2FzZSAyOmNhc2UgMzpjYXNlIDQ6Y2FzZSA1OmJyZWFrO2RlZmF1bHQ6YT0zfXZhciBjPW07bT1hO3RyeXtyZXR1cm4gYigpfWZpbmFsbHl7bT1jfX0sdW5zdGFibGVfbmV4dDpmdW5jdGlvbihhKXtzd2l0Y2gobSl7Y2FzZSAxOmNhc2UgMjpjYXNlIDM6dmFyIGI9MzticmVhaztkZWZhdWx0OmI9bX12YXIgYz1tO209Yjt0cnl7cmV0dXJuIGEoKX1maW5hbGx5e209Y319LHVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2s6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXEoKTtpZigib2JqZWN0Ij09PXR5cGVvZiBjJiZudWxsIT09Yyl7dmFyIGU9Yy5kZWxheTsKZT0ibnVtYmVyIj09PXR5cGVvZiBlJiYwPGU/ZCtlOmQ7Yz0ibnVtYmVyIj09PXR5cGVvZiBjLnRpbWVvdXQ/Yy50aW1lb3V0Om9hKGEpfWVsc2UgYz1vYShhKSxlPWQ7Yz1lK2M7YT17aWQ6UGErKyxjYWxsYmFjazpiLHByaW9yaXR5TGV2ZWw6YSxzdGFydFRpbWU6ZSxleHBpcmF0aW9uVGltZTpjLHNvcnRJbmRleDotMX07ZT5kPyhhLnNvcnRJbmRleD1lLFModSxhKSxudWxsPT09bihwKSYmYT09PW4odSkmJih5P1YoKTp5PSEwLEcoVCxlLWQpKSk6KGEuc29ydEluZGV4PWMsUyhwLGEpLHZ8fEh8fCh2PSEwLHooVSkpKTtyZXR1cm4gYX0sdW5zdGFibGVfY2FuY2VsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7YS5jYWxsYmFjaz1udWxsfSx1bnN0YWJsZV93cmFwQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9bTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz1tO209Yjt0cnl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7bT1jfX19LHVuc3RhYmxlX2dldEN1cnJlbnRQcmlvcml0eUxldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIG19LAp1bnN0YWJsZV9zaG91bGRZaWVsZDpmdW5jdGlvbigpe3ZhciBhPXEoKTtGKGEpO3ZhciBiPW4ocCk7cmV0dXJuIGIhPT1sJiZudWxsIT09bCYmbnVsbCE9PWImJm51bGwhPT1iLmNhbGxiYWNrJiZiLnN0YXJ0VGltZTw9YSYmYi5leHBpcmF0aW9uVGltZTxsLmV4cGlyYXRpb25UaW1lfHxXKCl9LHVuc3RhYmxlX3JlcXVlc3RQYWludDpmLHVuc3RhYmxlX2NvbnRpbnVlRXhlY3V0aW9uOmZ1bmN0aW9uKCl7dnx8SHx8KHY9ITAseihVKSl9LHVuc3RhYmxlX3BhdXNlRXhlY3V0aW9uOmZ1bmN0aW9uKCl7fSx1bnN0YWJsZV9nZXRGaXJzdENhbGxiYWNrTm9kZTpmdW5jdGlvbigpe3JldHVybiBuKHApfSxnZXQgdW5zdGFibGVfbm93KCl7cmV0dXJuIHF9LGdldCB1bnN0YWJsZV9mb3JjZUZyYW1lUmF0ZSgpe3JldHVybiBYfSx1bnN0YWJsZV9Qcm9maWxpbmc6bnVsbH0sU2NoZWR1bGVyVHJhY2luZzp7X19wcm90b19fOm51bGwsX19pbnRlcmFjdGlvbnNSZWY6bnVsbCxfX3N1YnNjcmliZXJSZWY6bnVsbCwKdW5zdGFibGVfY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEoKX0sdW5zdGFibGVfZ2V0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiBudWxsfSx1bnN0YWJsZV9nZXRUaHJlYWRJRDpmdW5jdGlvbigpe3JldHVybisrUWF9LHVuc3RhYmxlX3RyYWNlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYygpfSx1bnN0YWJsZV93cmFwOmZ1bmN0aW9uKGEpe3JldHVybiBhfSx1bnN0YWJsZV9zdWJzY3JpYmU6ZnVuY3Rpb24oYSl7fSx1bnN0YWJsZV91bnN1YnNjcmliZTpmdW5jdGlvbihhKXt9fX0pO2QuQ2hpbGRyZW49e21hcDpmdW5jdGlvbihhLGIsYyl7aWYobnVsbD09YSlyZXR1cm4gYTt2YXIgZD1bXTtSKGEsZCxudWxsLGIsYyk7cmV0dXJuIGR9LGZvckVhY2g6ZnVuY3Rpb24oYSxiLGMpe2lmKG51bGw9PWEpcmV0dXJuIGE7Yj1qYShudWxsLG51bGwsYixjKTtRKGEseWEsYik7a2EoYil9LGNvdW50OmZ1bmN0aW9uKGEpe3JldHVybiBRKGEsZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sbnVsbCl9LAp0b0FycmF5OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO1IoYSxiLG51bGwsZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtyZXR1cm4gYn0sb25seTpmdW5jdGlvbihhKXtpZighTihhKSl0aHJvdyBFcnJvcihyKDE0MykpO3JldHVybiBhfX07ZC5Db21wb25lbnQ9dztkLkZyYWdtZW50PUFhO2QuUHJvZmlsZXI9Q2E7ZC5QdXJlQ29tcG9uZW50PUw7ZC5TdHJpY3RNb2RlPUJhO2QuU3VzcGVuc2U9R2E7ZC5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRD1CO2QuY2xvbmVFbGVtZW50PWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT09YXx8dm9pZCAwPT09YSl0aHJvdyBFcnJvcihyKDI2NyxhKSk7dmFyIGQ9SSh7fSxhLnByb3BzKSxlPWEua2V5LGY9YS5yZWYsbT1hLl9vd25lcjtpZihudWxsIT1iKXt2b2lkIDAhPT1iLnJlZiYmKGY9Yi5yZWYsbT1NLmN1cnJlbnQpO3ZvaWQgMCE9PWIua2V5JiYoZT0iIitiLmtleSk7aWYoYS50eXBlJiZhLnR5cGUuZGVmYXVsdFByb3BzKXZhciBoPQphLnR5cGUuZGVmYXVsdFByb3BzO2ZvcihrIGluIGIpaGEuY2FsbChiLGspJiYhaWEuaGFzT3duUHJvcGVydHkoaykmJihkW2tdPXZvaWQgMD09PWJba10mJnZvaWQgMCE9PWg/aFtrXTpiW2tdKX12YXIgaz1hcmd1bWVudHMubGVuZ3RoLTI7aWYoMT09PWspZC5jaGlsZHJlbj1jO2Vsc2UgaWYoMTxrKXtoPUFycmF5KGspO2Zvcih2YXIgbD0wO2w8aztsKyspaFtsXT1hcmd1bWVudHNbbCsyXTtkLmNoaWxkcmVuPWh9cmV0dXJueyQkdHlwZW9mOngsdHlwZTphLnR5cGUsa2V5OmUscmVmOmYscHJvcHM6ZCxfb3duZXI6bX19O2QuY3JlYXRlQ29udGV4dD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPW51bGwpO2E9eyQkdHlwZW9mOkVhLF9jYWxjdWxhdGVDaGFuZ2VkQml0czpiLF9jdXJyZW50VmFsdWU6YSxfY3VycmVudFZhbHVlMjphLF90aHJlYWRDb3VudDowLFByb3ZpZGVyOm51bGwsQ29uc3VtZXI6bnVsbH07YS5Qcm92aWRlcj17JCR0eXBlb2Y6RGEsX2NvbnRleHQ6YX07cmV0dXJuIGEuQ29uc3VtZXI9CmF9O2QuY3JlYXRlRWxlbWVudD1lYTtkLmNyZWF0ZUZhY3Rvcnk9ZnVuY3Rpb24oYSl7dmFyIGI9ZWEuYmluZChudWxsLGEpO2IudHlwZT1hO3JldHVybiBifTtkLmNyZWF0ZVJlZj1mdW5jdGlvbigpe3JldHVybntjdXJyZW50Om51bGx9fTtkLmZvcndhcmRSZWY9ZnVuY3Rpb24oYSl7cmV0dXJueyQkdHlwZW9mOkZhLHJlbmRlcjphfX07ZC5pc1ZhbGlkRWxlbWVudD1OO2QubGF6eT1mdW5jdGlvbihhKXtyZXR1cm57JCR0eXBlb2Y6SWEsX2N0b3I6YSxfc3RhdHVzOi0xLF9yZXN1bHQ6bnVsbH19O2QubWVtbz1mdW5jdGlvbihhLGIpe3JldHVybnskJHR5cGVvZjpIYSx0eXBlOmEsY29tcGFyZTp2b2lkIDA9PT1iP251bGw6Yn19O2QudXNlQ2FsbGJhY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCgpLnVzZUNhbGxiYWNrKGEsYil9O2QudXNlQ29udGV4dD1mdW5jdGlvbihhLGIpe3JldHVybiB0KCkudXNlQ29udGV4dChhLGIpfTtkLnVzZURlYnVnVmFsdWU9ZnVuY3Rpb24oYSxiKXt9OwpkLnVzZUVmZmVjdD1mdW5jdGlvbihhLGIpe3JldHVybiB0KCkudXNlRWZmZWN0KGEsYil9O2QudXNlSW1wZXJhdGl2ZUhhbmRsZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHQoKS51c2VJbXBlcmF0aXZlSGFuZGxlKGEsYixjKX07ZC51c2VMYXlvdXRFZmZlY3Q9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCgpLnVzZUxheW91dEVmZmVjdChhLGIpfTtkLnVzZU1lbW89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCgpLnVzZU1lbW8oYSxiKX07ZC51c2VSZWR1Y2VyPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdCgpLnVzZVJlZHVjZXIoYSxiLGMpfTtkLnVzZVJlZj1mdW5jdGlvbihhKXtyZXR1cm4gdCgpLnVzZVJlZihhKX07ZC51c2VTdGF0ZT1mdW5jdGlvbihhKXtyZXR1cm4gdCgpLnVzZVN0YXRlKGEpfTtkLnZlcnNpb249IjE2LjE0LjAifSk7CgovKiogQGxpY2Vuc2UgUmVhY3QgdjE2LjEzLjEKICogcmVhY3QtZG9tLnByb2R1Y3Rpb24ubWluLmpzCiAqCiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi8KLyoKIE1vZGVybml6ciAzLjAuMHByZSAoQ3VzdG9tIEJ1aWxkKSB8IE1JVAoqLwondXNlIHN0cmljdCc7KGZ1bmN0aW9uKEksZWEpeyJvYmplY3QiPT09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT09dHlwZW9mIG1vZHVsZT9lYShleHBvcnRzLHJlcXVpcmUoInJlYWN0IikpOiJmdW5jdGlvbiI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImV4cG9ydHMiLCJyZWFjdCJdLGVhKTooST1JfHxzZWxmLGVhKEkuUmVhY3RET009e30sSS5SZWFjdCkpfSkodGhpcyxmdW5jdGlvbihJLGVhKXtmdW5jdGlvbiBrKGEpe2Zvcih2YXIgYj0iaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9IithLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWIrPSImYXJnc1tdPSIrZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tjXSk7cmV0dXJuIk1pbmlmaWVkIFJlYWN0IGVycm9yICMiK2ErIjsgdmlzaXQgIitiKyIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycyBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLiJ9CmZ1bmN0aW9uIGppKGEsYixjLGQsZSxmLGcsaCxtKXt5Yj0hMTtnYz1udWxsO2tpLmFwcGx5KGxpLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbWkoYSxiLGMsZCxlLGYsZyxoLG0pe2ppLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih5Yil7aWYoeWIpe3ZhciBuPWdjO3liPSExO2djPW51bGx9ZWxzZSB0aHJvdyBFcnJvcihrKDE5OCkpO2hjfHwoaGM9ITAscGQ9bil9fWZ1bmN0aW9uIGxmKGEsYixjKXt2YXIgZD1hLnR5cGV8fCJ1bmtub3duLWV2ZW50IjthLmN1cnJlbnRUYXJnZXQ9bWYoYyk7bWkoZCxiLHZvaWQgMCxhKTthLmN1cnJlbnRUYXJnZXQ9bnVsbH1mdW5jdGlvbiBuZigpe2lmKGljKWZvcih2YXIgYSBpbiBjYil7dmFyIGI9Y2JbYV0sYz1pYy5pbmRleE9mKGEpO2lmKCEoLTE8YykpdGhyb3cgRXJyb3Ioayg5NixhKSk7aWYoIWpjW2NdKXtpZighYi5leHRyYWN0RXZlbnRzKXRocm93IEVycm9yKGsoOTcsYSkpO2pjW2NdPWI7Yz1iLmV2ZW50VHlwZXM7Zm9yKHZhciBkIGluIGMpe3ZhciBlPQp2b2lkIDA7dmFyIGY9Y1tkXSxnPWIsaD1kO2lmKHFkLmhhc093blByb3BlcnR5KGgpKXRocm93IEVycm9yKGsoOTksaCkpO3FkW2hdPWY7dmFyIG09Zi5waGFzZWRSZWdpc3RyYXRpb25OYW1lcztpZihtKXtmb3IoZSBpbiBtKW0uaGFzT3duUHJvcGVydHkoZSkmJm9mKG1bZV0sZyxoKTtlPSEwfWVsc2UgZi5yZWdpc3RyYXRpb25OYW1lPyhvZihmLnJlZ2lzdHJhdGlvbk5hbWUsZyxoKSxlPSEwKTplPSExO2lmKCFlKXRocm93IEVycm9yKGsoOTgsZCxhKSk7fX19fWZ1bmN0aW9uIG9mKGEsYixjKXtpZihkYlthXSl0aHJvdyBFcnJvcihrKDEwMCxhKSk7ZGJbYV09YjtyZFthXT1iLmV2ZW50VHlwZXNbY10uZGVwZW5kZW5jaWVzfWZ1bmN0aW9uIHBmKGEpe3ZhciBiPSExLGM7Zm9yKGMgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGMpKXt2YXIgZD1hW2NdO2lmKCFjYi5oYXNPd25Qcm9wZXJ0eShjKXx8Y2JbY10hPT1kKXtpZihjYltjXSl0aHJvdyBFcnJvcihrKDEwMixjKSk7Y2JbY109CmQ7Yj0hMH19YiYmbmYoKX1mdW5jdGlvbiBxZihhKXtpZihhPXJmKGEpKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIHNkKXRocm93IEVycm9yKGsoMjgwKSk7dmFyIGI9YS5zdGF0ZU5vZGU7YiYmKGI9dGQoYiksc2QoYS5zdGF0ZU5vZGUsYS50eXBlLGIpKX19ZnVuY3Rpb24gc2YoYSl7ZWI/ZmI/ZmIucHVzaChhKTpmYj1bYV06ZWI9YX1mdW5jdGlvbiB0Zigpe2lmKGViKXt2YXIgYT1lYixiPWZiO2ZiPWViPW51bGw7cWYoYSk7aWYoYilmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKXFmKGJbYV0pfX1mdW5jdGlvbiB1ZCgpe2lmKG51bGwhPT1lYnx8bnVsbCE9PWZiKXZkKCksdGYoKX1mdW5jdGlvbiB1ZihhLGIsYyl7aWYod2QpcmV0dXJuIGEoYixjKTt3ZD0hMDt0cnl7cmV0dXJuIHZmKGEsYixjKX1maW5hbGx5e3dkPSExLHVkKCl9fWZ1bmN0aW9uIG5pKGEpe2lmKHdmLmNhbGwoeGYsYSkpcmV0dXJuITA7aWYod2YuY2FsbCh5ZixhKSlyZXR1cm4hMTtpZihvaS50ZXN0KGEpKXJldHVybiB4ZlthXT0KITA7eWZbYV09ITA7cmV0dXJuITF9ZnVuY3Rpb24gcGkoYSxiLGMsZCl7aWYobnVsbCE9PWMmJjA9PT1jLnR5cGUpcmV0dXJuITE7c3dpdGNoKHR5cGVvZiBiKXtjYXNlICJmdW5jdGlvbiI6Y2FzZSAic3ltYm9sIjpyZXR1cm4hMDtjYXNlICJib29sZWFuIjppZihkKXJldHVybiExO2lmKG51bGwhPT1jKXJldHVybiFjLmFjY2VwdHNCb29sZWFuczthPWEudG9Mb3dlckNhc2UoKS5zbGljZSgwLDUpO3JldHVybiJkYXRhLSIhPT1hJiYiYXJpYS0iIT09YTtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBxaShhLGIsYyxkKXtpZihudWxsPT09Ynx8InVuZGVmaW5lZCI9PT10eXBlb2YgYnx8cGkoYSxiLGMsZCkpcmV0dXJuITA7aWYoZClyZXR1cm4hMTtpZihudWxsIT09Yylzd2l0Y2goYy50eXBlKXtjYXNlIDM6cmV0dXJuIWI7Y2FzZSA0OnJldHVybiExPT09YjtjYXNlIDU6cmV0dXJuIGlzTmFOKGIpO2Nhc2UgNjpyZXR1cm4gaXNOYU4oYil8fDE+Yn1yZXR1cm4hMX1mdW5jdGlvbiBMKGEsCmIsYyxkLGUsZil7dGhpcy5hY2NlcHRzQm9vbGVhbnM9Mj09PWJ8fDM9PT1ifHw0PT09Yjt0aGlzLmF0dHJpYnV0ZU5hbWU9ZDt0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1lO3RoaXMubXVzdFVzZVByb3BlcnR5PWM7dGhpcy5wcm9wZXJ0eU5hbWU9YTt0aGlzLnR5cGU9Yjt0aGlzLnNhbml0aXplVVJMPWZ9ZnVuY3Rpb24geGQoYSxiLGMsZCl7dmFyIGU9RS5oYXNPd25Qcm9wZXJ0eShiKT9FW2JdOm51bGw7dmFyIGY9bnVsbCE9PWU/MD09PWUudHlwZTpkPyExOiEoMjxiLmxlbmd0aCl8fCJvIiE9PWJbMF0mJiJPIiE9PWJbMF18fCJuIiE9PWJbMV0mJiJOIiE9PWJbMV0/ITE6ITA7Znx8KHFpKGIsYyxlLGQpJiYoYz1udWxsKSxkfHxudWxsPT09ZT9uaShiKSYmKG51bGw9PT1jP2EucmVtb3ZlQXR0cmlidXRlKGIpOmEuc2V0QXR0cmlidXRlKGIsIiIrYykpOmUubXVzdFVzZVByb3BlcnR5P2FbZS5wcm9wZXJ0eU5hbWVdPW51bGw9PT1jPzM9PT1lLnR5cGU/ITE6IiI6YzooYj1lLmF0dHJpYnV0ZU5hbWUsCmQ9ZS5hdHRyaWJ1dGVOYW1lc3BhY2UsbnVsbD09PWM/YS5yZW1vdmVBdHRyaWJ1dGUoYik6KGU9ZS50eXBlLGM9Mz09PWV8fDQ9PT1lJiYhMD09PWM/IiI6IiIrYyxkP2Euc2V0QXR0cmlidXRlTlMoZCxiLGMpOmEuc2V0QXR0cmlidXRlKGIsYykpKSl9ZnVuY3Rpb24gemIoYSl7aWYobnVsbD09PWF8fCJvYmplY3QiIT09dHlwZW9mIGEpcmV0dXJuIG51bGw7YT16ZiYmYVt6Zl18fGFbIkBAaXRlcmF0b3IiXTtyZXR1cm4iZnVuY3Rpb24iPT09dHlwZW9mIGE/YTpudWxsfWZ1bmN0aW9uIHJpKGEpe2lmKC0xPT09YS5fc3RhdHVzKXthLl9zdGF0dXM9MDt2YXIgYj1hLl9jdG9yO2I9YigpO2EuX3Jlc3VsdD1iO2IudGhlbihmdW5jdGlvbihiKXswPT09YS5fc3RhdHVzJiYoYj1iLmRlZmF1bHQsYS5fc3RhdHVzPTEsYS5fcmVzdWx0PWIpfSxmdW5jdGlvbihiKXswPT09YS5fc3RhdHVzJiYoYS5fc3RhdHVzPTIsYS5fcmVzdWx0PWIpfSl9fWZ1bmN0aW9uIG5hKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7CmlmKCJmdW5jdGlvbiI9PT10eXBlb2YgYSlyZXR1cm4gYS5kaXNwbGF5TmFtZXx8YS5uYW1lfHxudWxsO2lmKCJzdHJpbmciPT09dHlwZW9mIGEpcmV0dXJuIGE7c3dpdGNoKGEpe2Nhc2UgTWE6cmV0dXJuIkZyYWdtZW50IjtjYXNlIGdiOnJldHVybiJQb3J0YWwiO2Nhc2Uga2M6cmV0dXJuIlByb2ZpbGVyIjtjYXNlIEFmOnJldHVybiJTdHJpY3RNb2RlIjtjYXNlIGxjOnJldHVybiJTdXNwZW5zZSI7Y2FzZSB5ZDpyZXR1cm4iU3VzcGVuc2VMaXN0In1pZigib2JqZWN0Ij09PXR5cGVvZiBhKXN3aXRjaChhLiQkdHlwZW9mKXtjYXNlIEJmOnJldHVybiJDb250ZXh0LkNvbnN1bWVyIjtjYXNlIENmOnJldHVybiJDb250ZXh0LlByb3ZpZGVyIjtjYXNlIHpkOnZhciBiPWEucmVuZGVyO2I9Yi5kaXNwbGF5TmFtZXx8Yi5uYW1lfHwiIjtyZXR1cm4gYS5kaXNwbGF5TmFtZXx8KCIiIT09Yj8iRm9yd2FyZFJlZigiK2IrIikiOiJGb3J3YXJkUmVmIik7Y2FzZSBBZDpyZXR1cm4gbmEoYS50eXBlKTsKY2FzZSBEZjpyZXR1cm4gbmEoYS5yZW5kZXIpO2Nhc2UgRWY6aWYoYT0xPT09YS5fc3RhdHVzP2EuX3Jlc3VsdDpudWxsKXJldHVybiBuYShhKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBCZChhKXt2YXIgYj0iIjtkb3thOnN3aXRjaChhLnRhZyl7Y2FzZSAzOmNhc2UgNDpjYXNlIDY6Y2FzZSA3OmNhc2UgMTA6Y2FzZSA5OnZhciBjPSIiO2JyZWFrIGE7ZGVmYXVsdDp2YXIgZD1hLl9kZWJ1Z093bmVyLGU9YS5fZGVidWdTb3VyY2UsZj1uYShhLnR5cGUpO2M9bnVsbDtkJiYoYz1uYShkLnR5cGUpKTtkPWY7Zj0iIjtlP2Y9IiAoYXQgIitlLmZpbGVOYW1lLnJlcGxhY2Uoc2ksIiIpKyI6IitlLmxpbmVOdW1iZXIrIikiOmMmJihmPSIgKGNyZWF0ZWQgYnkgIitjKyIpIik7Yz0iXG4gICAgaW4gIisoZHx8IlVua25vd24iKStmfWIrPWM7YT1hLnJldHVybn13aGlsZShhKTtyZXR1cm4gYn1mdW5jdGlvbiB2YShhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgImJvb2xlYW4iOmNhc2UgIm51bWJlciI6Y2FzZSAib2JqZWN0IjpjYXNlICJzdHJpbmciOmNhc2UgInVuZGVmaW5lZCI6cmV0dXJuIGE7CmRlZmF1bHQ6cmV0dXJuIiJ9fWZ1bmN0aW9uIEZmKGEpe3ZhciBiPWEudHlwZTtyZXR1cm4oYT1hLm5vZGVOYW1lKSYmImlucHV0Ij09PWEudG9Mb3dlckNhc2UoKSYmKCJjaGVja2JveCI9PT1ifHwicmFkaW8iPT09Yil9ZnVuY3Rpb24gdGkoYSl7dmFyIGI9RmYoYSk/ImNoZWNrZWQiOiJ2YWx1ZSIsYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEuY29uc3RydWN0b3IucHJvdG90eXBlLGIpLGQ9IiIrYVtiXTtpZighYS5oYXNPd25Qcm9wZXJ0eShiKSYmInVuZGVmaW5lZCIhPT10eXBlb2YgYyYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLmdldCYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLnNldCl7dmFyIGU9Yy5nZXQsZj1jLnNldDtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuY2FsbCh0aGlzKX0sc2V0OmZ1bmN0aW9uKGEpe2Q9IiIrYTtmLmNhbGwodGhpcyxhKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwKYix7ZW51bWVyYWJsZTpjLmVudW1lcmFibGV9KTtyZXR1cm57Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7ZD0iIithfSxzdG9wVHJhY2tpbmc6ZnVuY3Rpb24oKXthLl92YWx1ZVRyYWNrZXI9bnVsbDtkZWxldGUgYVtiXX19fX1mdW5jdGlvbiBtYyhhKXthLl92YWx1ZVRyYWNrZXJ8fChhLl92YWx1ZVRyYWNrZXI9dGkoYSkpfWZ1bmN0aW9uIEdmKGEpe2lmKCFhKXJldHVybiExO3ZhciBiPWEuX3ZhbHVlVHJhY2tlcjtpZighYilyZXR1cm4hMDt2YXIgYz1iLmdldFZhbHVlKCk7dmFyIGQ9IiI7YSYmKGQ9RmYoYSk/YS5jaGVja2VkPyJ0cnVlIjoiZmFsc2UiOmEudmFsdWUpO2E9ZDtyZXR1cm4gYSE9PWM/KGIuc2V0VmFsdWUoYSksITApOiExfWZ1bmN0aW9uIENkKGEsYil7dmFyIGM9Yi5jaGVja2VkO3JldHVybiBNKHt9LGIse2RlZmF1bHRDaGVja2VkOnZvaWQgMCxkZWZhdWx0VmFsdWU6dm9pZCAwLHZhbHVlOnZvaWQgMCxjaGVja2VkOm51bGwhPQpjP2M6YS5fd3JhcHBlclN0YXRlLmluaXRpYWxDaGVja2VkfSl9ZnVuY3Rpb24gSGYoYSxiKXt2YXIgYz1udWxsPT1iLmRlZmF1bHRWYWx1ZT8iIjpiLmRlZmF1bHRWYWx1ZSxkPW51bGwhPWIuY2hlY2tlZD9iLmNoZWNrZWQ6Yi5kZWZhdWx0Q2hlY2tlZDtjPXZhKG51bGwhPWIudmFsdWU/Yi52YWx1ZTpjKTthLl93cmFwcGVyU3RhdGU9e2luaXRpYWxDaGVja2VkOmQsaW5pdGlhbFZhbHVlOmMsY29udHJvbGxlZDoiY2hlY2tib3giPT09Yi50eXBlfHwicmFkaW8iPT09Yi50eXBlP251bGwhPWIuY2hlY2tlZDpudWxsIT1iLnZhbHVlfX1mdW5jdGlvbiBJZihhLGIpe2I9Yi5jaGVja2VkO251bGwhPWImJnhkKGEsImNoZWNrZWQiLGIsITEpfWZ1bmN0aW9uIERkKGEsYil7SWYoYSxiKTt2YXIgYz12YShiLnZhbHVlKSxkPWIudHlwZTtpZihudWxsIT1jKWlmKCJudW1iZXIiPT09ZCl7aWYoMD09PWMmJiIiPT09YS52YWx1ZXx8YS52YWx1ZSE9YylhLnZhbHVlPSIiK2N9ZWxzZSBhLnZhbHVlIT09CiIiK2MmJihhLnZhbHVlPSIiK2MpO2Vsc2UgaWYoInN1Ym1pdCI9PT1kfHwicmVzZXQiPT09ZCl7YS5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIik7cmV0dXJufWIuaGFzT3duUHJvcGVydHkoInZhbHVlIik/RWQoYSxiLnR5cGUsYyk6Yi5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdFZhbHVlIikmJkVkKGEsYi50eXBlLHZhKGIuZGVmYXVsdFZhbHVlKSk7bnVsbD09Yi5jaGVja2VkJiZudWxsIT1iLmRlZmF1bHRDaGVja2VkJiYoYS5kZWZhdWx0Q2hlY2tlZD0hIWIuZGVmYXVsdENoZWNrZWQpfWZ1bmN0aW9uIEpmKGEsYixjKXtpZihiLmhhc093blByb3BlcnR5KCJ2YWx1ZSIpfHxiLmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSl7dmFyIGQ9Yi50eXBlO2lmKCEoInN1Ym1pdCIhPT1kJiYicmVzZXQiIT09ZHx8dm9pZCAwIT09Yi52YWx1ZSYmbnVsbCE9PWIudmFsdWUpKXJldHVybjtiPSIiK2EuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWU7Y3x8Yj09PWEudmFsdWV8fChhLnZhbHVlPQpiKTthLmRlZmF1bHRWYWx1ZT1ifWM9YS5uYW1lOyIiIT09YyYmKGEubmFtZT0iIik7YS5kZWZhdWx0Q2hlY2tlZD0hIWEuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZDsiIiE9PWMmJihhLm5hbWU9Yyl9ZnVuY3Rpb24gRWQoYSxiLGMpe2lmKCJudW1iZXIiIT09Ynx8YS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT1hKW51bGw9PWM/YS5kZWZhdWx0VmFsdWU9IiIrYS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZTphLmRlZmF1bHRWYWx1ZSE9PSIiK2MmJihhLmRlZmF1bHRWYWx1ZT0iIitjKX1mdW5jdGlvbiB1aShhKXt2YXIgYj0iIjtlYS5DaGlsZHJlbi5mb3JFYWNoKGEsZnVuY3Rpb24oYSl7bnVsbCE9YSYmKGIrPWEpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gRmQoYSxiKXthPU0oe2NoaWxkcmVuOnZvaWQgMH0sYik7aWYoYj11aShiLmNoaWxkcmVuKSlhLmNoaWxkcmVuPWI7cmV0dXJuIGF9ZnVuY3Rpb24gaGIoYSxiLGMsZCl7YT1hLm9wdGlvbnM7aWYoYil7Yj17fTsKZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYlsiJCIrY1tlXV09ITA7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKyllPWIuaGFzT3duUHJvcGVydHkoIiQiK2FbY10udmFsdWUpLGFbY10uc2VsZWN0ZWQhPT1lJiYoYVtjXS5zZWxlY3RlZD1lKSxlJiZkJiYoYVtjXS5kZWZhdWx0U2VsZWN0ZWQ9ITApfWVsc2V7Yz0iIit2YShjKTtiPW51bGw7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKyl7aWYoYVtlXS52YWx1ZT09PWMpe2FbZV0uc2VsZWN0ZWQ9ITA7ZCYmKGFbZV0uZGVmYXVsdFNlbGVjdGVkPSEwKTtyZXR1cm59bnVsbCE9PWJ8fGFbZV0uZGlzYWJsZWR8fChiPWFbZV0pfW51bGwhPT1iJiYoYi5zZWxlY3RlZD0hMCl9fWZ1bmN0aW9uIEdkKGEsYil7aWYobnVsbCE9Yi5kYW5nZXJvdXNseVNldElubmVySFRNTCl0aHJvdyBFcnJvcihrKDkxKSk7cmV0dXJuIE0oe30sYix7dmFsdWU6dm9pZCAwLGRlZmF1bHRWYWx1ZTp2b2lkIDAsY2hpbGRyZW46IiIrYS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZX0pfQpmdW5jdGlvbiBLZihhLGIpe3ZhciBjPWIudmFsdWU7aWYobnVsbD09Yyl7Yz1iLmNoaWxkcmVuO2I9Yi5kZWZhdWx0VmFsdWU7aWYobnVsbCE9Yyl7aWYobnVsbCE9Yil0aHJvdyBFcnJvcihrKDkyKSk7aWYoQXJyYXkuaXNBcnJheShjKSl7aWYoISgxPj1jLmxlbmd0aCkpdGhyb3cgRXJyb3Ioayg5MykpO2M9Y1swXX1iPWN9bnVsbD09YiYmKGI9IiIpO2M9Yn1hLl93cmFwcGVyU3RhdGU9e2luaXRpYWxWYWx1ZTp2YShjKX19ZnVuY3Rpb24gTGYoYSxiKXt2YXIgYz12YShiLnZhbHVlKSxkPXZhKGIuZGVmYXVsdFZhbHVlKTtudWxsIT1jJiYoYz0iIitjLGMhPT1hLnZhbHVlJiYoYS52YWx1ZT1jKSxudWxsPT1iLmRlZmF1bHRWYWx1ZSYmYS5kZWZhdWx0VmFsdWUhPT1jJiYoYS5kZWZhdWx0VmFsdWU9YykpO251bGwhPWQmJihhLmRlZmF1bHRWYWx1ZT0iIitkKX1mdW5jdGlvbiBNZihhLGIpe2I9YS50ZXh0Q29udGVudDtiPT09YS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSYmIiIhPT0KYiYmbnVsbCE9PWImJihhLnZhbHVlPWIpfWZ1bmN0aW9uIE5mKGEpe3N3aXRjaChhKXtjYXNlICJzdmciOnJldHVybiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI7Y2FzZSAibWF0aCI6cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwiO2RlZmF1bHQ6cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwifX1mdW5jdGlvbiBIZChhLGIpe3JldHVybiBudWxsPT1hfHwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PT1hP05mKGIpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PT1hJiYiZm9yZWlnbk9iamVjdCI9PT1iPyJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIjphfWZ1bmN0aW9uIG5jKGEsYil7dmFyIGM9e307Y1thLnRvTG93ZXJDYXNlKCldPWIudG9Mb3dlckNhc2UoKTtjWyJXZWJraXQiK2FdPSJ3ZWJraXQiK2I7Y1siTW96IithXT0ibW96IitiO3JldHVybiBjfWZ1bmN0aW9uIG9jKGEpe2lmKElkW2FdKXJldHVybiBJZFthXTsKaWYoIWliW2FdKXJldHVybiBhO3ZhciBiPWliW2FdLGM7Zm9yKGMgaW4gYilpZihiLmhhc093blByb3BlcnR5KGMpJiZjIGluIE9mKXJldHVybiBJZFthXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIEpkKGEpe3ZhciBiPVBmLmdldChhKTt2b2lkIDA9PT1iJiYoYj1uZXcgTWFwLFBmLnNldChhLGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBOYShhKXt2YXIgYj1hLGM9YTtpZihhLmFsdGVybmF0ZSlmb3IoO2IucmV0dXJuOyliPWIucmV0dXJuO2Vsc2V7YT1iO2RvIGI9YSwwIT09KGIuZWZmZWN0VGFnJjEwMjYpJiYoYz1iLnJldHVybiksYT1iLnJldHVybjt3aGlsZShhKX1yZXR1cm4gMz09PWIudGFnP2M6bnVsbH1mdW5jdGlvbiBRZihhKXtpZigxMz09PWEudGFnKXt2YXIgYj1hLm1lbW9pemVkU3RhdGU7bnVsbD09PWImJihhPWEuYWx0ZXJuYXRlLG51bGwhPT1hJiYoYj1hLm1lbW9pemVkU3RhdGUpKTtpZihudWxsIT09YilyZXR1cm4gYi5kZWh5ZHJhdGVkfXJldHVybiBudWxsfWZ1bmN0aW9uIFJmKGEpe2lmKE5hKGEpIT09CmEpdGhyb3cgRXJyb3IoaygxODgpKTt9ZnVuY3Rpb24gdmkoYSl7dmFyIGI9YS5hbHRlcm5hdGU7aWYoIWIpe2I9TmEoYSk7aWYobnVsbD09PWIpdGhyb3cgRXJyb3IoaygxODgpKTtyZXR1cm4gYiE9PWE/bnVsbDphfWZvcih2YXIgYz1hLGQ9Yjs7KXt2YXIgZT1jLnJldHVybjtpZihudWxsPT09ZSlicmVhazt2YXIgZj1lLmFsdGVybmF0ZTtpZihudWxsPT09Zil7ZD1lLnJldHVybjtpZihudWxsIT09ZCl7Yz1kO2NvbnRpbnVlfWJyZWFrfWlmKGUuY2hpbGQ9PT1mLmNoaWxkKXtmb3IoZj1lLmNoaWxkO2Y7KXtpZihmPT09YylyZXR1cm4gUmYoZSksYTtpZihmPT09ZClyZXR1cm4gUmYoZSksYjtmPWYuc2libGluZ310aHJvdyBFcnJvcihrKDE4OCkpO31pZihjLnJldHVybiE9PWQucmV0dXJuKWM9ZSxkPWY7ZWxzZXtmb3IodmFyIGc9ITEsaD1lLmNoaWxkO2g7KXtpZihoPT09Yyl7Zz0hMDtjPWU7ZD1mO2JyZWFrfWlmKGg9PT1kKXtnPSEwO2Q9ZTtjPWY7YnJlYWt9aD1oLnNpYmxpbmd9aWYoIWcpe2ZvcihoPQpmLmNoaWxkO2g7KXtpZihoPT09Yyl7Zz0hMDtjPWY7ZD1lO2JyZWFrfWlmKGg9PT1kKXtnPSEwO2Q9ZjtjPWU7YnJlYWt9aD1oLnNpYmxpbmd9aWYoIWcpdGhyb3cgRXJyb3IoaygxODkpKTt9fWlmKGMuYWx0ZXJuYXRlIT09ZCl0aHJvdyBFcnJvcihrKDE5MCkpO31pZigzIT09Yy50YWcpdGhyb3cgRXJyb3IoaygxODgpKTtyZXR1cm4gYy5zdGF0ZU5vZGUuY3VycmVudD09PWM/YTpifWZ1bmN0aW9uIFNmKGEpe2E9dmkoYSk7aWYoIWEpcmV0dXJuIG51bGw7Zm9yKHZhciBiPWE7Oyl7aWYoNT09PWIudGFnfHw2PT09Yi50YWcpcmV0dXJuIGI7aWYoYi5jaGlsZCliLmNoaWxkLnJldHVybj1iLGI9Yi5jaGlsZDtlbHNle2lmKGI9PT1hKWJyZWFrO2Zvcig7IWIuc2libGluZzspe2lmKCFiLnJldHVybnx8Yi5yZXR1cm49PT1hKXJldHVybiBudWxsO2I9Yi5yZXR1cm59Yi5zaWJsaW5nLnJldHVybj1iLnJldHVybjtiPWIuc2libGluZ319cmV0dXJuIG51bGx9ZnVuY3Rpb24gamIoYSxiKXtpZihudWxsPT0KYil0aHJvdyBFcnJvcihrKDMwKSk7aWYobnVsbD09YSlyZXR1cm4gYjtpZihBcnJheS5pc0FycmF5KGEpKXtpZihBcnJheS5pc0FycmF5KGIpKXJldHVybiBhLnB1c2guYXBwbHkoYSxiKSxhO2EucHVzaChiKTtyZXR1cm4gYX1yZXR1cm4gQXJyYXkuaXNBcnJheShiKT9bYV0uY29uY2F0KGIpOlthLGJdfWZ1bmN0aW9uIEtkKGEsYixjKXtBcnJheS5pc0FycmF5KGEpP2EuZm9yRWFjaChiLGMpOmEmJmIuY2FsbChjLGEpfWZ1bmN0aW9uIHBjKGEpe251bGwhPT1hJiYoQWI9amIoQWIsYSkpO2E9QWI7QWI9bnVsbDtpZihhKXtLZChhLHdpKTtpZihBYil0aHJvdyBFcnJvcihrKDk1KSk7aWYoaGMpdGhyb3cgYT1wZCxoYz0hMSxwZD1udWxsLGE7fX1mdW5jdGlvbiBMZChhKXthPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnR8fHdpbmRvdzthLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50JiYoYT1hLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gMz09PWEubm9kZVR5cGU/YS5wYXJlbnROb2RlOgphfWZ1bmN0aW9uIFRmKGEpe2lmKCF3YSlyZXR1cm4hMTthPSJvbiIrYTt2YXIgYj1hIGluIGRvY3VtZW50O2J8fChiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuc2V0QXR0cmlidXRlKGEsInJldHVybjsiKSxiPSJmdW5jdGlvbiI9PT10eXBlb2YgYlthXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVWYoYSl7YS50b3BMZXZlbFR5cGU9bnVsbDthLm5hdGl2ZUV2ZW50PW51bGw7YS50YXJnZXRJbnN0PW51bGw7YS5hbmNlc3RvcnMubGVuZ3RoPTA7MTA+cWMubGVuZ3RoJiZxYy5wdXNoKGEpfWZ1bmN0aW9uIFZmKGEsYixjLGQpe2lmKHFjLmxlbmd0aCl7dmFyIGU9cWMucG9wKCk7ZS50b3BMZXZlbFR5cGU9YTtlLmV2ZW50U3lzdGVtRmxhZ3M9ZDtlLm5hdGl2ZUV2ZW50PWI7ZS50YXJnZXRJbnN0PWM7cmV0dXJuIGV9cmV0dXJue3RvcExldmVsVHlwZTphLGV2ZW50U3lzdGVtRmxhZ3M6ZCxuYXRpdmVFdmVudDpiLHRhcmdldEluc3Q6YyxhbmNlc3RvcnM6W119fWZ1bmN0aW9uIFdmKGEpe3ZhciBiPQphLnRhcmdldEluc3QsYz1iO2Rve2lmKCFjKXthLmFuY2VzdG9ycy5wdXNoKGMpO2JyZWFrfXZhciBkPWM7aWYoMz09PWQudGFnKWQ9ZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbztlbHNle2Zvcig7ZC5yZXR1cm47KWQ9ZC5yZXR1cm47ZD0zIT09ZC50YWc/bnVsbDpkLnN0YXRlTm9kZS5jb250YWluZXJJbmZvfWlmKCFkKWJyZWFrO2I9Yy50YWc7NSE9PWImJjYhPT1ifHxhLmFuY2VzdG9ycy5wdXNoKGMpO2M9QmIoZCl9d2hpbGUoYyk7Zm9yKGM9MDtjPGEuYW5jZXN0b3JzLmxlbmd0aDtjKyspe2I9YS5hbmNlc3RvcnNbY107dmFyIGU9TGQoYS5uYXRpdmVFdmVudCk7ZD1hLnRvcExldmVsVHlwZTt2YXIgZj1hLm5hdGl2ZUV2ZW50LGc9YS5ldmVudFN5c3RlbUZsYWdzOzA9PT1jJiYoZ3w9NjQpO2Zvcih2YXIgaD1udWxsLG09MDttPGpjLmxlbmd0aDttKyspe3ZhciBuPWpjW21dO24mJihuPW4uZXh0cmFjdEV2ZW50cyhkLGIsZixlLGcpKSYmKGg9amIoaCxuKSl9cGMoaCl9fWZ1bmN0aW9uIE1kKGEsCmIsYyl7aWYoIWMuaGFzKGEpKXtzd2l0Y2goYSl7Y2FzZSAic2Nyb2xsIjpDYihiLCJzY3JvbGwiLCEwKTticmVhaztjYXNlICJmb2N1cyI6Y2FzZSAiYmx1ciI6Q2IoYiwiZm9jdXMiLCEwKTtDYihiLCJibHVyIiwhMCk7Yy5zZXQoImJsdXIiLG51bGwpO2Muc2V0KCJmb2N1cyIsbnVsbCk7YnJlYWs7Y2FzZSAiY2FuY2VsIjpjYXNlICJjbG9zZSI6VGYoYSkmJkNiKGIsYSwhMCk7YnJlYWs7Y2FzZSAiaW52YWxpZCI6Y2FzZSAic3VibWl0IjpjYXNlICJyZXNldCI6YnJlYWs7ZGVmYXVsdDotMT09PURiLmluZGV4T2YoYSkmJncoYSxiKX1jLnNldChhLG51bGwpfX1mdW5jdGlvbiB4aShhLGIpe3ZhciBjPUpkKGIpO05kLmZvckVhY2goZnVuY3Rpb24oYSl7TWQoYSxiLGMpfSk7eWkuZm9yRWFjaChmdW5jdGlvbihhKXtNZChhLGIsYyl9KX1mdW5jdGlvbiBPZChhLGIsYyxkLGUpe3JldHVybntibG9ja2VkT246YSx0b3BMZXZlbFR5cGU6YixldmVudFN5c3RlbUZsYWdzOmN8MzIsbmF0aXZlRXZlbnQ6ZSwKY29udGFpbmVyOmR9fWZ1bmN0aW9uIFhmKGEsYil7c3dpdGNoKGEpe2Nhc2UgImZvY3VzIjpjYXNlICJibHVyIjp4YT1udWxsO2JyZWFrO2Nhc2UgImRyYWdlbnRlciI6Y2FzZSAiZHJhZ2xlYXZlIjp5YT1udWxsO2JyZWFrO2Nhc2UgIm1vdXNlb3ZlciI6Y2FzZSAibW91c2VvdXQiOnphPW51bGw7YnJlYWs7Y2FzZSAicG9pbnRlcm92ZXIiOmNhc2UgInBvaW50ZXJvdXQiOkViLmRlbGV0ZShiLnBvaW50ZXJJZCk7YnJlYWs7Y2FzZSAiZ290cG9pbnRlcmNhcHR1cmUiOmNhc2UgImxvc3Rwb2ludGVyY2FwdHVyZSI6RmIuZGVsZXRlKGIucG9pbnRlcklkKX19ZnVuY3Rpb24gR2IoYSxiLGMsZCxlLGYpe2lmKG51bGw9PT1hfHxhLm5hdGl2ZUV2ZW50IT09ZilyZXR1cm4gYT1PZChiLGMsZCxlLGYpLG51bGwhPT1iJiYoYj1IYihiKSxudWxsIT09YiYmWWYoYikpLGE7YS5ldmVudFN5c3RlbUZsYWdzfD1kO3JldHVybiBhfWZ1bmN0aW9uIHppKGEsYixjLGQsZSl7c3dpdGNoKGIpe2Nhc2UgImZvY3VzIjpyZXR1cm4geGE9CkdiKHhhLGEsYixjLGQsZSksITA7Y2FzZSAiZHJhZ2VudGVyIjpyZXR1cm4geWE9R2IoeWEsYSxiLGMsZCxlKSwhMDtjYXNlICJtb3VzZW92ZXIiOnJldHVybiB6YT1HYih6YSxhLGIsYyxkLGUpLCEwO2Nhc2UgInBvaW50ZXJvdmVyIjp2YXIgZj1lLnBvaW50ZXJJZDtFYi5zZXQoZixHYihFYi5nZXQoZil8fG51bGwsYSxiLGMsZCxlKSk7cmV0dXJuITA7Y2FzZSAiZ290cG9pbnRlcmNhcHR1cmUiOnJldHVybiBmPWUucG9pbnRlcklkLEZiLnNldChmLEdiKEZiLmdldChmKXx8bnVsbCxhLGIsYyxkLGUpKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBBaShhKXt2YXIgYj1CYihhLnRhcmdldCk7aWYobnVsbCE9PWIpe3ZhciBjPU5hKGIpO2lmKG51bGwhPT1jKWlmKGI9Yy50YWcsMTM9PT1iKXtpZihiPVFmKGMpLG51bGwhPT1iKXthLmJsb2NrZWRPbj1iO1BkKGEucHJpb3JpdHksZnVuY3Rpb24oKXtCaShjKX0pO3JldHVybn19ZWxzZSBpZigzPT09YiYmYy5zdGF0ZU5vZGUuaHlkcmF0ZSl7YS5ibG9ja2VkT249CjM9PT1jLnRhZz9jLnN0YXRlTm9kZS5jb250YWluZXJJbmZvOm51bGw7cmV0dXJufX1hLmJsb2NrZWRPbj1udWxsfWZ1bmN0aW9uIHJjKGEpe2lmKG51bGwhPT1hLmJsb2NrZWRPbilyZXR1cm4hMTt2YXIgYj1RZChhLnRvcExldmVsVHlwZSxhLmV2ZW50U3lzdGVtRmxhZ3MsYS5jb250YWluZXIsYS5uYXRpdmVFdmVudCk7aWYobnVsbCE9PWIpe3ZhciBjPUhiKGIpO251bGwhPT1jJiZZZihjKTthLmJsb2NrZWRPbj1iO3JldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIFpmKGEsYixjKXtyYyhhKSYmYy5kZWxldGUoYil9ZnVuY3Rpb24gQ2koKXtmb3IoUmQ9ITE7MDxmYS5sZW5ndGg7KXt2YXIgYT1mYVswXTtpZihudWxsIT09YS5ibG9ja2VkT24pe2E9SGIoYS5ibG9ja2VkT24pO251bGwhPT1hJiZEaShhKTticmVha312YXIgYj1RZChhLnRvcExldmVsVHlwZSxhLmV2ZW50U3lzdGVtRmxhZ3MsYS5jb250YWluZXIsYS5uYXRpdmVFdmVudCk7bnVsbCE9PWI/YS5ibG9ja2VkT249YjpmYS5zaGlmdCgpfW51bGwhPT0KeGEmJnJjKHhhKSYmKHhhPW51bGwpO251bGwhPT15YSYmcmMoeWEpJiYoeWE9bnVsbCk7bnVsbCE9PXphJiZyYyh6YSkmJih6YT1udWxsKTtFYi5mb3JFYWNoKFpmKTtGYi5mb3JFYWNoKFpmKX1mdW5jdGlvbiBJYihhLGIpe2EuYmxvY2tlZE9uPT09YiYmKGEuYmxvY2tlZE9uPW51bGwsUmR8fChSZD0hMCwkZihhZyxDaSkpKX1mdW5jdGlvbiBiZyhhKXtpZigwPGZhLmxlbmd0aCl7SWIoZmFbMF0sYSk7Zm9yKHZhciBiPTE7YjxmYS5sZW5ndGg7YisrKXt2YXIgYz1mYVtiXTtjLmJsb2NrZWRPbj09PWEmJihjLmJsb2NrZWRPbj1udWxsKX19bnVsbCE9PXhhJiZJYih4YSxhKTtudWxsIT09eWEmJkliKHlhLGEpO251bGwhPT16YSYmSWIoemEsYSk7Yj1mdW5jdGlvbihiKXtyZXR1cm4gSWIoYixhKX07RWIuZm9yRWFjaChiKTtGYi5mb3JFYWNoKGIpO2ZvcihiPTA7YjxKYi5sZW5ndGg7YisrKWM9SmJbYl0sYy5ibG9ja2VkT249PT1hJiYoYy5ibG9ja2VkT249bnVsbCk7Zm9yKDswPEpiLmxlbmd0aCYmCihiPUpiWzBdLG51bGw9PT1iLmJsb2NrZWRPbik7KUFpKGIpLG51bGw9PT1iLmJsb2NrZWRPbiYmSmIuc2hpZnQoKX1mdW5jdGlvbiBTZChhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7Yys9Mil7dmFyIGQ9YVtjXSxlPWFbYysxXSxmPSJvbiIrKGVbMF0udG9VcHBlckNhc2UoKStlLnNsaWNlKDEpKTtmPXtwaGFzZWRSZWdpc3RyYXRpb25OYW1lczp7YnViYmxlZDpmLGNhcHR1cmVkOmYrIkNhcHR1cmUifSxkZXBlbmRlbmNpZXM6W2RdLGV2ZW50UHJpb3JpdHk6Yn07VGQuc2V0KGQsYik7Y2cuc2V0KGQsZik7ZGdbZV09Zn19ZnVuY3Rpb24gdyhhLGIpe0NiKGIsYSwhMSl9ZnVuY3Rpb24gQ2IoYSxiLGMpe3ZhciBkPVRkLmdldChiKTtzd2l0Y2godm9pZCAwPT09ZD8yOmQpe2Nhc2UgMDpkPUVpLmJpbmQobnVsbCxiLDEsYSk7YnJlYWs7Y2FzZSAxOmQ9RmkuYmluZChudWxsLGIsMSxhKTticmVhaztkZWZhdWx0OmQ9c2MuYmluZChudWxsLGIsMSxhKX1jP2EuYWRkRXZlbnRMaXN0ZW5lcihiLApkLCEwKTphLmFkZEV2ZW50TGlzdGVuZXIoYixkLCExKX1mdW5jdGlvbiBFaShhLGIsYyxkKXtPYXx8dmQoKTt2YXIgZT1zYyxmPU9hO09hPSEwO3RyeXtlZyhlLGEsYixjLGQpfWZpbmFsbHl7KE9hPWYpfHx1ZCgpfX1mdW5jdGlvbiBGaShhLGIsYyxkKXtHaShIaSxzYy5iaW5kKG51bGwsYSxiLGMsZCkpfWZ1bmN0aW9uIHNjKGEsYixjLGQpe2lmKHRjKWlmKDA8ZmEubGVuZ3RoJiYtMTxOZC5pbmRleE9mKGEpKWE9T2QobnVsbCxhLGIsYyxkKSxmYS5wdXNoKGEpO2Vsc2V7dmFyIGU9UWQoYSxiLGMsZCk7aWYobnVsbD09PWUpWGYoYSxkKTtlbHNlIGlmKC0xPE5kLmluZGV4T2YoYSkpYT1PZChlLGEsYixjLGQpLGZhLnB1c2goYSk7ZWxzZSBpZighemkoZSxhLGIsYyxkKSl7WGYoYSxkKTthPVZmKGEsZCxudWxsLGIpO3RyeXt1ZihXZixhKX1maW5hbGx5e1VmKGEpfX19fWZ1bmN0aW9uIFFkKGEsYixjLGQpe2M9TGQoZCk7Yz1CYihjKTtpZihudWxsIT09Yyl7dmFyIGU9TmEoYyk7aWYobnVsbD09PQplKWM9bnVsbDtlbHNle3ZhciBmPWUudGFnO2lmKDEzPT09Zil7Yz1RZihlKTtpZihudWxsIT09YylyZXR1cm4gYztjPW51bGx9ZWxzZSBpZigzPT09Zil7aWYoZS5zdGF0ZU5vZGUuaHlkcmF0ZSlyZXR1cm4gMz09PWUudGFnP2Uuc3RhdGVOb2RlLmNvbnRhaW5lckluZm86bnVsbDtjPW51bGx9ZWxzZSBlIT09YyYmKGM9bnVsbCl9fWE9VmYoYSxkLGMsYik7dHJ5e3VmKFdmLGEpfWZpbmFsbHl7VWYoYSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gZmcoYSxiLGMpe3JldHVybiBudWxsPT1ifHwiYm9vbGVhbiI9PT10eXBlb2YgYnx8IiI9PT1iPyIiOmN8fCJudW1iZXIiIT09dHlwZW9mIGJ8fDA9PT1ifHxLYi5oYXNPd25Qcm9wZXJ0eShhKSYmS2JbYV0/KCIiK2IpLnRyaW0oKTpiKyJweCJ9ZnVuY3Rpb24gZ2coYSxiKXthPWEuc3R5bGU7Zm9yKHZhciBjIGluIGIpaWYoYi5oYXNPd25Qcm9wZXJ0eShjKSl7dmFyIGQ9MD09PWMuaW5kZXhPZigiLS0iKSxlPWZnKGMsYltjXSxkKTsiZmxvYXQiPT09CmMmJihjPSJjc3NGbG9hdCIpO2Q/YS5zZXRQcm9wZXJ0eShjLGUpOmFbY109ZX19ZnVuY3Rpb24gVWQoYSxiKXtpZihiKXtpZihJaVthXSYmKG51bGwhPWIuY2hpbGRyZW58fG51bGwhPWIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpKXRocm93IEVycm9yKGsoMTM3LGEsIiIpKTtpZihudWxsIT1iLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKXtpZihudWxsIT1iLmNoaWxkcmVuKXRocm93IEVycm9yKGsoNjApKTtpZighKCJvYmplY3QiPT09dHlwZW9mIGIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwmJiJfX2h0bWwiaW4gYi5kYW5nZXJvdXNseVNldElubmVySFRNTCkpdGhyb3cgRXJyb3Ioayg2MSkpO31pZihudWxsIT1iLnN0eWxlJiYib2JqZWN0IiE9PXR5cGVvZiBiLnN0eWxlKXRocm93IEVycm9yKGsoNjIsIiIpKTt9fWZ1bmN0aW9uIFZkKGEsYil7aWYoLTE9PT1hLmluZGV4T2YoIi0iKSlyZXR1cm4ic3RyaW5nIj09PXR5cGVvZiBiLmlzO3N3aXRjaChhKXtjYXNlICJhbm5vdGF0aW9uLXhtbCI6Y2FzZSAiY29sb3ItcHJvZmlsZSI6Y2FzZSAiZm9udC1mYWNlIjpjYXNlICJmb250LWZhY2Utc3JjIjpjYXNlICJmb250LWZhY2UtdXJpIjpjYXNlICJmb250LWZhY2UtZm9ybWF0IjpjYXNlICJmb250LWZhY2UtbmFtZSI6Y2FzZSAibWlzc2luZy1nbHlwaCI6cmV0dXJuITE7CmRlZmF1bHQ6cmV0dXJuITB9fWZ1bmN0aW9uIG9hKGEsYil7YT05PT09YS5ub2RlVHlwZXx8MTE9PT1hLm5vZGVUeXBlP2E6YS5vd25lckRvY3VtZW50O3ZhciBjPUpkKGEpO2I9cmRbYl07Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspTWQoYltkXSxhLGMpfWZ1bmN0aW9uIHVjKCl7fWZ1bmN0aW9uIFdkKGEpe2E9YXx8KCJ1bmRlZmluZWQiIT09dHlwZW9mIGRvY3VtZW50P2RvY3VtZW50OnZvaWQgMCk7aWYoInVuZGVmaW5lZCI9PT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7cmV0dXJuIGEuYWN0aXZlRWxlbWVudHx8YS5ib2R5fWNhdGNoKGIpe3JldHVybiBhLmJvZHl9fWZ1bmN0aW9uIGhnKGEpe2Zvcig7YSYmYS5maXJzdENoaWxkOylhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX1mdW5jdGlvbiBpZyhhLGIpe3ZhciBjPWhnKGEpO2E9MDtmb3IodmFyIGQ7Yzspe2lmKDM9PT1jLm5vZGVUeXBlKXtkPWErYy50ZXh0Q29udGVudC5sZW5ndGg7aWYoYTw9YiYmZD49YilyZXR1cm57bm9kZTpjLApvZmZzZXQ6Yi1hfTthPWR9YTp7Zm9yKDtjOyl7aWYoYy5uZXh0U2libGluZyl7Yz1jLm5leHRTaWJsaW5nO2JyZWFrIGF9Yz1jLnBhcmVudE5vZGV9Yz12b2lkIDB9Yz1oZyhjKX19ZnVuY3Rpb24gamcoYSxiKXtyZXR1cm4gYSYmYj9hPT09Yj8hMDphJiYzPT09YS5ub2RlVHlwZT8hMTpiJiYzPT09Yi5ub2RlVHlwZT9qZyhhLGIucGFyZW50Tm9kZSk6ImNvbnRhaW5zImluIGE/YS5jb250YWlucyhiKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPyEhKGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYikmMTYpOiExOiExfWZ1bmN0aW9uIGtnKCl7Zm9yKHZhciBhPXdpbmRvdyxiPVdkKCk7YiBpbnN0YW5jZW9mIGEuSFRNTElGcmFtZUVsZW1lbnQ7KXt0cnl7dmFyIGM9InN0cmluZyI9PT10eXBlb2YgYi5jb250ZW50V2luZG93LmxvY2F0aW9uLmhyZWZ9Y2F0Y2goZCl7Yz0hMX1pZihjKWE9Yi5jb250ZW50V2luZG93O2Vsc2UgYnJlYWs7Yj1XZChhLmRvY3VtZW50KX1yZXR1cm4gYn0KZnVuY3Rpb24gWGQoYSl7dmFyIGI9YSYmYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBiJiYoImlucHV0Ij09PWImJigidGV4dCI9PT1hLnR5cGV8fCJzZWFyY2giPT09YS50eXBlfHwidGVsIj09PWEudHlwZXx8InVybCI9PT1hLnR5cGV8fCJwYXNzd29yZCI9PT1hLnR5cGUpfHwidGV4dGFyZWEiPT09Ynx8InRydWUiPT09YS5jb250ZW50RWRpdGFibGUpfWZ1bmN0aW9uIGxnKGEsYil7c3dpdGNoKGEpe2Nhc2UgImJ1dHRvbiI6Y2FzZSAiaW5wdXQiOmNhc2UgInNlbGVjdCI6Y2FzZSAidGV4dGFyZWEiOnJldHVybiEhYi5hdXRvRm9jdXN9cmV0dXJuITF9ZnVuY3Rpb24gWWQoYSxiKXtyZXR1cm4idGV4dGFyZWEiPT09YXx8Im9wdGlvbiI9PT1hfHwibm9zY3JpcHQiPT09YXx8InN0cmluZyI9PT10eXBlb2YgYi5jaGlsZHJlbnx8Im51bWJlciI9PT10eXBlb2YgYi5jaGlsZHJlbnx8Im9iamVjdCI9PT10eXBlb2YgYi5kYW5nZXJvdXNseVNldElubmVySFRNTCYmCm51bGwhPT1iLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MJiZudWxsIT1iLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbH1mdW5jdGlvbiBrYihhKXtmb3IoO251bGwhPWE7YT1hLm5leHRTaWJsaW5nKXt2YXIgYj1hLm5vZGVUeXBlO2lmKDE9PT1ifHwzPT09YilicmVha31yZXR1cm4gYX1mdW5jdGlvbiBtZyhhKXthPWEucHJldmlvdXNTaWJsaW5nO2Zvcih2YXIgYj0wO2E7KXtpZig4PT09YS5ub2RlVHlwZSl7dmFyIGM9YS5kYXRhO2lmKGM9PT1uZ3x8Yz09PVpkfHxjPT09JGQpe2lmKDA9PT1iKXJldHVybiBhO2ItLX1lbHNlIGM9PT1vZyYmYisrfWE9YS5wcmV2aW91c1NpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gQmIoYSl7dmFyIGI9YVtBYV07aWYoYilyZXR1cm4gYjtmb3IodmFyIGM9YS5wYXJlbnROb2RlO2M7KXtpZihiPWNbTGJdfHxjW0FhXSl7Yz1iLmFsdGVybmF0ZTtpZihudWxsIT09Yi5jaGlsZHx8bnVsbCE9PWMmJm51bGwhPT1jLmNoaWxkKWZvcihhPW1nKGEpO251bGwhPT0KYTspe2lmKGM9YVtBYV0pcmV0dXJuIGM7YT1tZyhhKX1yZXR1cm4gYn1hPWM7Yz1hLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSGIoYSl7YT1hW0FhXXx8YVtMYl07cmV0dXJuIWF8fDUhPT1hLnRhZyYmNiE9PWEudGFnJiYxMyE9PWEudGFnJiYzIT09YS50YWc/bnVsbDphfWZ1bmN0aW9uIFBhKGEpe2lmKDU9PT1hLnRhZ3x8Nj09PWEudGFnKXJldHVybiBhLnN0YXRlTm9kZTt0aHJvdyBFcnJvcihrKDMzKSk7fWZ1bmN0aW9uIGFlKGEpe3JldHVybiBhW3ZjXXx8bnVsbH1mdW5jdGlvbiBwYShhKXtkbyBhPWEucmV0dXJuO3doaWxlKGEmJjUhPT1hLnRhZyk7cmV0dXJuIGE/YTpudWxsfWZ1bmN0aW9uIHBnKGEsYil7dmFyIGM9YS5zdGF0ZU5vZGU7aWYoIWMpcmV0dXJuIG51bGw7dmFyIGQ9dGQoYyk7aWYoIWQpcmV0dXJuIG51bGw7Yz1kW2JdO2E6c3dpdGNoKGIpe2Nhc2UgIm9uQ2xpY2siOmNhc2UgIm9uQ2xpY2tDYXB0dXJlIjpjYXNlICJvbkRvdWJsZUNsaWNrIjpjYXNlICJvbkRvdWJsZUNsaWNrQ2FwdHVyZSI6Y2FzZSAib25Nb3VzZURvd24iOmNhc2UgIm9uTW91c2VEb3duQ2FwdHVyZSI6Y2FzZSAib25Nb3VzZU1vdmUiOmNhc2UgIm9uTW91c2VNb3ZlQ2FwdHVyZSI6Y2FzZSAib25Nb3VzZVVwIjpjYXNlICJvbk1vdXNlVXBDYXB0dXJlIjpjYXNlICJvbk1vdXNlRW50ZXIiOihkPQohZC5kaXNhYmxlZCl8fChhPWEudHlwZSxkPSEoImJ1dHRvbiI9PT1hfHwiaW5wdXQiPT09YXx8InNlbGVjdCI9PT1hfHwidGV4dGFyZWEiPT09YSkpO2E9IWQ7YnJlYWsgYTtkZWZhdWx0OmE9ITF9aWYoYSlyZXR1cm4gbnVsbDtpZihjJiYiZnVuY3Rpb24iIT09dHlwZW9mIGMpdGhyb3cgRXJyb3IoaygyMzEsYix0eXBlb2YgYykpO3JldHVybiBjfWZ1bmN0aW9uIHFnKGEsYixjKXtpZihiPXBnKGEsYy5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1tiXSkpYy5fZGlzcGF0Y2hMaXN0ZW5lcnM9amIoYy5fZGlzcGF0Y2hMaXN0ZW5lcnMsYiksYy5fZGlzcGF0Y2hJbnN0YW5jZXM9amIoYy5fZGlzcGF0Y2hJbnN0YW5jZXMsYSl9ZnVuY3Rpb24gSmkoYSl7aWYoYSYmYS5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcyl7Zm9yKHZhciBiPWEuX3RhcmdldEluc3QsYz1bXTtiOyljLnB1c2goYiksYj1wYShiKTtmb3IoYj1jLmxlbmd0aDswPGItLTspcWcoY1tiXSwKImNhcHR1cmVkIixhKTtmb3IoYj0wO2I8Yy5sZW5ndGg7YisrKXFnKGNbYl0sImJ1YmJsZWQiLGEpfX1mdW5jdGlvbiBiZShhLGIsYyl7YSYmYyYmYy5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lJiYoYj1wZyhhLGMuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkpJiYoYy5fZGlzcGF0Y2hMaXN0ZW5lcnM9amIoYy5fZGlzcGF0Y2hMaXN0ZW5lcnMsYiksYy5fZGlzcGF0Y2hJbnN0YW5jZXM9amIoYy5fZGlzcGF0Y2hJbnN0YW5jZXMsYSkpfWZ1bmN0aW9uIEtpKGEpe2EmJmEuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSYmYmUoYS5fdGFyZ2V0SW5zdCxudWxsLGEpfWZ1bmN0aW9uIGxiKGEpe0tkKGEsSmkpfWZ1bmN0aW9uIHJnKCl7aWYod2MpcmV0dXJuIHdjO3ZhciBhLGI9Y2UsYz1iLmxlbmd0aCxkLGU9InZhbHVlImluIEJhP0JhLnZhbHVlOkJhLnRleHRDb250ZW50LGY9ZS5sZW5ndGg7Zm9yKGE9MDthPGMmJmJbYV09PT1lW2FdO2ErKyk7dmFyIGc9CmMtYTtmb3IoZD0xO2Q8PWcmJmJbYy1kXT09PWVbZi1kXTtkKyspO3JldHVybiB3Yz1lLnNsaWNlKGEsMTxkPzEtZDp2b2lkIDApfWZ1bmN0aW9uIHhjKCl7cmV0dXJuITB9ZnVuY3Rpb24geWMoKXtyZXR1cm4hMX1mdW5jdGlvbiBSKGEsYixjLGQpe3RoaXMuZGlzcGF0Y2hDb25maWc9YTt0aGlzLl90YXJnZXRJbnN0PWI7dGhpcy5uYXRpdmVFdmVudD1jO2E9dGhpcy5jb25zdHJ1Y3Rvci5JbnRlcmZhY2U7Zm9yKHZhciBlIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShlKSYmKChiPWFbZV0pP3RoaXNbZV09YihjKToidGFyZ2V0Ij09PWU/dGhpcy50YXJnZXQ9ZDp0aGlzW2VdPWNbZV0pO3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPShudWxsIT1jLmRlZmF1bHRQcmV2ZW50ZWQ/Yy5kZWZhdWx0UHJldmVudGVkOiExPT09Yy5yZXR1cm5WYWx1ZSk/eGM6eWM7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD15YztyZXR1cm4gdGhpc31mdW5jdGlvbiBMaShhLGIsYyxkKXtpZih0aGlzLmV2ZW50UG9vbC5sZW5ndGgpe3ZhciBlPQp0aGlzLmV2ZW50UG9vbC5wb3AoKTt0aGlzLmNhbGwoZSxhLGIsYyxkKTtyZXR1cm4gZX1yZXR1cm4gbmV3IHRoaXMoYSxiLGMsZCl9ZnVuY3Rpb24gTWkoYSl7aWYoIShhIGluc3RhbmNlb2YgdGhpcykpdGhyb3cgRXJyb3IoaygyNzkpKTthLmRlc3RydWN0b3IoKTsxMD50aGlzLmV2ZW50UG9vbC5sZW5ndGgmJnRoaXMuZXZlbnRQb29sLnB1c2goYSl9ZnVuY3Rpb24gc2coYSl7YS5ldmVudFBvb2w9W107YS5nZXRQb29sZWQ9TGk7YS5yZWxlYXNlPU1pfWZ1bmN0aW9uIHRnKGEsYil7c3dpdGNoKGEpe2Nhc2UgImtleXVwIjpyZXR1cm4tMSE9PU5pLmluZGV4T2YoYi5rZXlDb2RlKTtjYXNlICJrZXlkb3duIjpyZXR1cm4gMjI5IT09Yi5rZXlDb2RlO2Nhc2UgImtleXByZXNzIjpjYXNlICJtb3VzZWRvd24iOmNhc2UgImJsdXIiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIHVnKGEpe2E9YS5kZXRhaWw7cmV0dXJuIm9iamVjdCI9PT10eXBlb2YgYSYmImRhdGEiaW4KYT9hLmRhdGE6bnVsbH1mdW5jdGlvbiBPaShhLGIpe3N3aXRjaChhKXtjYXNlICJjb21wb3NpdGlvbmVuZCI6cmV0dXJuIHVnKGIpO2Nhc2UgImtleXByZXNzIjppZigzMiE9PWIud2hpY2gpcmV0dXJuIG51bGw7dmc9ITA7cmV0dXJuIHdnO2Nhc2UgInRleHRJbnB1dCI6cmV0dXJuIGE9Yi5kYXRhLGE9PT13ZyYmdmc/bnVsbDphO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIFBpKGEsYil7aWYobWIpcmV0dXJuImNvbXBvc2l0aW9uZW5kIj09PWF8fCFkZSYmdGcoYSxiKT8oYT1yZygpLHdjPWNlPUJhPW51bGwsbWI9ITEsYSk6bnVsbDtzd2l0Y2goYSl7Y2FzZSAicGFzdGUiOnJldHVybiBudWxsO2Nhc2UgImtleXByZXNzIjppZighKGIuY3RybEtleXx8Yi5hbHRLZXl8fGIubWV0YUtleSl8fGIuY3RybEtleSYmYi5hbHRLZXkpe2lmKGIuY2hhciYmMTxiLmNoYXIubGVuZ3RoKXJldHVybiBiLmNoYXI7aWYoYi53aGljaClyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShiLndoaWNoKX1yZXR1cm4gbnVsbDsKY2FzZSAiY29tcG9zaXRpb25lbmQiOnJldHVybiB4ZyYmImtvIiE9PWIubG9jYWxlP251bGw6Yi5kYXRhO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHlnKGEpe3ZhciBiPWEmJmEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09Yj8hIVFpW2EudHlwZV06InRleHRhcmVhIj09PWI/ITA6ITF9ZnVuY3Rpb24gemcoYSxiLGMpe2E9Ui5nZXRQb29sZWQoQWcuY2hhbmdlLGEsYixjKTthLnR5cGU9ImNoYW5nZSI7c2YoYyk7bGIoYSk7cmV0dXJuIGF9ZnVuY3Rpb24gUmkoYSl7cGMoYSl9ZnVuY3Rpb24gemMoYSl7dmFyIGI9UGEoYSk7aWYoR2YoYikpcmV0dXJuIGF9ZnVuY3Rpb24gU2koYSxiKXtpZigiY2hhbmdlIj09PWEpcmV0dXJuIGJ9ZnVuY3Rpb24gQmcoKXtNYiYmKE1iLmRldGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIixDZyksTmI9TWI9bnVsbCl9ZnVuY3Rpb24gQ2coYSl7aWYoInZhbHVlIj09PWEucHJvcGVydHlOYW1lJiYKemMoTmIpKWlmKGE9emcoTmIsYSxMZChhKSksT2EpcGMoYSk7ZWxzZXtPYT0hMDt0cnl7ZWUoUmksYSl9ZmluYWxseXtPYT0hMSx1ZCgpfX19ZnVuY3Rpb24gVGkoYSxiLGMpeyJmb2N1cyI9PT1hPyhCZygpLE1iPWIsTmI9YyxNYi5hdHRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsQ2cpKToiYmx1ciI9PT1hJiZCZygpfWZ1bmN0aW9uIFVpKGEsYil7aWYoInNlbGVjdGlvbmNoYW5nZSI9PT1hfHwia2V5dXAiPT09YXx8ImtleWRvd24iPT09YSlyZXR1cm4gemMoTmIpfWZ1bmN0aW9uIFZpKGEsYil7aWYoImNsaWNrIj09PWEpcmV0dXJuIHpjKGIpfWZ1bmN0aW9uIFdpKGEsYil7aWYoImlucHV0Ij09PWF8fCJjaGFuZ2UiPT09YSlyZXR1cm4gemMoYil9ZnVuY3Rpb24gWGkoYSl7dmFyIGI9dGhpcy5uYXRpdmVFdmVudDtyZXR1cm4gYi5nZXRNb2RpZmllclN0YXRlP2IuZ2V0TW9kaWZpZXJTdGF0ZShhKTooYT1ZaVthXSk/ISFiW2FdOiExfWZ1bmN0aW9uIGZlKGEpe3JldHVybiBYaX0KZnVuY3Rpb24gWmkoYSxiKXtyZXR1cm4gYT09PWImJigwIT09YXx8MS9hPT09MS9iKXx8YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIE9iKGEsYil7aWYoUWEoYSxiKSlyZXR1cm4hMDtpZigib2JqZWN0IiE9PXR5cGVvZiBhfHxudWxsPT09YXx8Im9iamVjdCIhPT10eXBlb2YgYnx8bnVsbD09PWIpcmV0dXJuITE7dmFyIGM9T2JqZWN0LmtleXMoYSksZD1PYmplY3Qua2V5cyhiKTtpZihjLmxlbmd0aCE9PWQubGVuZ3RoKXJldHVybiExO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspaWYoISRpLmNhbGwoYixjW2RdKXx8IVFhKGFbY1tkXV0sYltjW2RdXSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gRGcoYSxiKXt2YXIgYz1iLndpbmRvdz09PWI/Yi5kb2N1bWVudDo5PT09Yi5ub2RlVHlwZT9iOmIub3duZXJEb2N1bWVudDtpZihnZXx8bnVsbD09bmJ8fG5iIT09V2QoYykpcmV0dXJuIG51bGw7Yz1uYjsic2VsZWN0aW9uU3RhcnQiaW4gYyYmWGQoYyk/Yz17c3RhcnQ6Yy5zZWxlY3Rpb25TdGFydCwKZW5kOmMuc2VsZWN0aW9uRW5kfTooYz0oYy5vd25lckRvY3VtZW50JiZjLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCksYz17YW5jaG9yTm9kZTpjLmFuY2hvck5vZGUsYW5jaG9yT2Zmc2V0OmMuYW5jaG9yT2Zmc2V0LGZvY3VzTm9kZTpjLmZvY3VzTm9kZSxmb2N1c09mZnNldDpjLmZvY3VzT2Zmc2V0fSk7cmV0dXJuIFBiJiZPYihQYixjKT9udWxsOihQYj1jLGE9Ui5nZXRQb29sZWQoRWcuc2VsZWN0LGhlLGEsYiksYS50eXBlPSJzZWxlY3QiLGEudGFyZ2V0PW5iLGxiKGEpLGEpfWZ1bmN0aW9uIEFjKGEpe3ZhciBiPWEua2V5Q29kZTsiY2hhckNvZGUiaW4gYT8oYT1hLmNoYXJDb2RlLDA9PT1hJiYxMz09PWImJihhPTEzKSk6YT1iOzEwPT09YSYmKGE9MTMpO3JldHVybiAzMjw9YXx8MTM9PT1hP2E6MH1mdW5jdGlvbiBxKGEsYil7MD5vYnx8KGEuY3VycmVudD1pZVtvYl0saWVbb2JdPW51bGwsb2ItLSl9ZnVuY3Rpb24geShhLGIsYyl7b2IrKzsKaWVbb2JdPWEuY3VycmVudDthLmN1cnJlbnQ9Yn1mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWEudHlwZS5jb250ZXh0VHlwZXM7aWYoIWMpcmV0dXJuIENhO3ZhciBkPWEuc3RhdGVOb2RlO2lmKGQmJmQuX19yZWFjdEludGVybmFsTWVtb2l6ZWRVbm1hc2tlZENoaWxkQ29udGV4dD09PWIpcmV0dXJuIGQuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNYXNrZWRDaGlsZENvbnRleHQ7dmFyIGU9e30sZjtmb3IoZiBpbiBjKWVbZl09YltmXTtkJiYoYT1hLnN0YXRlTm9kZSxhLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkVW5tYXNrZWRDaGlsZENvbnRleHQ9YixhLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWFza2VkQ2hpbGRDb250ZXh0PWUpO3JldHVybiBlfWZ1bmN0aW9uIE4oYSl7YT1hLmNoaWxkQ29udGV4dFR5cGVzO3JldHVybiBudWxsIT09YSYmdm9pZCAwIT09YX1mdW5jdGlvbiBGZyhhLGIsYyl7aWYoQi5jdXJyZW50IT09Q2EpdGhyb3cgRXJyb3IoaygxNjgpKTt5KEIsYik7eShHLGMpfQpmdW5jdGlvbiBHZyhhLGIsYyl7dmFyIGQ9YS5zdGF0ZU5vZGU7YT1iLmNoaWxkQ29udGV4dFR5cGVzO2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgZC5nZXRDaGlsZENvbnRleHQpcmV0dXJuIGM7ZD1kLmdldENoaWxkQ29udGV4dCgpO2Zvcih2YXIgZSBpbiBkKWlmKCEoZSBpbiBhKSl0aHJvdyBFcnJvcihrKDEwOCxuYShiKXx8IlVua25vd24iLGUpKTtyZXR1cm4gTSh7fSxjLHt9LGQpfWZ1bmN0aW9uIEJjKGEpe2E9KGE9YS5zdGF0ZU5vZGUpJiZhLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWVyZ2VkQ2hpbGRDb250ZXh0fHxDYTtSYT1CLmN1cnJlbnQ7eShCLGEpO3koRyxHLmN1cnJlbnQpO3JldHVybiEwfWZ1bmN0aW9uIEhnKGEsYixjKXt2YXIgZD1hLnN0YXRlTm9kZTtpZighZCl0aHJvdyBFcnJvcihrKDE2OSkpO2M/KGE9R2coYSxiLFJhKSxkLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWVyZ2VkQ2hpbGRDb250ZXh0PWEscShHKSxxKEIpLHkoQixhKSk6cShHKTt5KEcsYyl9ZnVuY3Rpb24gQ2MoKXtzd2l0Y2goYWooKSl7Y2FzZSBEYzpyZXR1cm4gOTk7CmNhc2UgSWc6cmV0dXJuIDk4O2Nhc2UgSmc6cmV0dXJuIDk3O2Nhc2UgS2c6cmV0dXJuIDk2O2Nhc2UgTGc6cmV0dXJuIDk1O2RlZmF1bHQ6dGhyb3cgRXJyb3IoaygzMzIpKTt9fWZ1bmN0aW9uIE1nKGEpe3N3aXRjaChhKXtjYXNlIDk5OnJldHVybiBEYztjYXNlIDk4OnJldHVybiBJZztjYXNlIDk3OnJldHVybiBKZztjYXNlIDk2OnJldHVybiBLZztjYXNlIDk1OnJldHVybiBMZztkZWZhdWx0OnRocm93IEVycm9yKGsoMzMyKSk7fX1mdW5jdGlvbiBEYShhLGIpe2E9TWcoYSk7cmV0dXJuIGJqKGEsYil9ZnVuY3Rpb24gTmcoYSxiLGMpe2E9TWcoYSk7cmV0dXJuIGplKGEsYixjKX1mdW5jdGlvbiBPZyhhKXtudWxsPT09cWE/KHFhPVthXSxFYz1qZShEYyxQZykpOnFhLnB1c2goYSk7cmV0dXJuIFFnfWZ1bmN0aW9uIGhhKCl7aWYobnVsbCE9PUVjKXt2YXIgYT1FYztFYz1udWxsO1JnKGEpfVBnKCl9ZnVuY3Rpb24gUGcoKXtpZigha2UmJm51bGwhPT1xYSl7a2U9ITA7dmFyIGE9MDsKdHJ5e3ZhciBiPXFhO0RhKDk5LGZ1bmN0aW9uKCl7Zm9yKDthPGIubGVuZ3RoO2ErKyl7dmFyIGM9YlthXTtkbyBjPWMoITApO3doaWxlKG51bGwhPT1jKX19KTtxYT1udWxsfWNhdGNoKGMpe3Rocm93IG51bGwhPT1xYSYmKHFhPXFhLnNsaWNlKGErMSkpLGplKERjLGhhKSxjO31maW5hbGx5e2tlPSExfX19ZnVuY3Rpb24gRmMoYSxiLGMpe2MvPTEwO3JldHVybiAxMDczNzQxODIxLSgoKDEwNzM3NDE4MjEtYStiLzEwKS9jfDApKzEpKmN9ZnVuY3Rpb24gYWEoYSxiKXtpZihhJiZhLmRlZmF1bHRQcm9wcyl7Yj1NKHt9LGIpO2E9YS5kZWZhdWx0UHJvcHM7Zm9yKHZhciBjIGluIGEpdm9pZCAwPT09YltjXSYmKGJbY109YVtjXSl9cmV0dXJuIGJ9ZnVuY3Rpb24gbGUoKXtHYz1xYj1IYz1udWxsfWZ1bmN0aW9uIG1lKGEpe3ZhciBiPUljLmN1cnJlbnQ7cShJYyk7YS50eXBlLl9jb250ZXh0Ll9jdXJyZW50VmFsdWU9Yn1mdW5jdGlvbiBTZyhhLGIpe2Zvcig7bnVsbCE9PWE7KXt2YXIgYz0KYS5hbHRlcm5hdGU7aWYoYS5jaGlsZEV4cGlyYXRpb25UaW1lPGIpYS5jaGlsZEV4cGlyYXRpb25UaW1lPWIsbnVsbCE9PWMmJmMuY2hpbGRFeHBpcmF0aW9uVGltZTxiJiYoYy5jaGlsZEV4cGlyYXRpb25UaW1lPWIpO2Vsc2UgaWYobnVsbCE9PWMmJmMuY2hpbGRFeHBpcmF0aW9uVGltZTxiKWMuY2hpbGRFeHBpcmF0aW9uVGltZT1iO2Vsc2UgYnJlYWs7YT1hLnJldHVybn19ZnVuY3Rpb24gcmIoYSxiKXtIYz1hO0djPXFiPW51bGw7YT1hLmRlcGVuZGVuY2llcztudWxsIT09YSYmbnVsbCE9PWEuZmlyc3RDb250ZXh0JiYoYS5leHBpcmF0aW9uVGltZT49YiYmKGlhPSEwKSxhLmZpcnN0Q29udGV4dD1udWxsKX1mdW5jdGlvbiBXKGEsYil7aWYoR2MhPT1hJiYhMSE9PWImJjAhPT1iKXtpZigibnVtYmVyIiE9PXR5cGVvZiBifHwxMDczNzQxODIzPT09YilHYz1hLGI9MTA3Mzc0MTgyMztiPXtjb250ZXh0OmEsb2JzZXJ2ZWRCaXRzOmIsbmV4dDpudWxsfTtpZihudWxsPT09cWIpe2lmKG51bGw9PT0KSGMpdGhyb3cgRXJyb3IoaygzMDgpKTtxYj1iO0hjLmRlcGVuZGVuY2llcz17ZXhwaXJhdGlvblRpbWU6MCxmaXJzdENvbnRleHQ6YixyZXNwb25kZXJzOm51bGx9fWVsc2UgcWI9cWIubmV4dD1ifXJldHVybiBhLl9jdXJyZW50VmFsdWV9ZnVuY3Rpb24gbmUoYSl7YS51cGRhdGVRdWV1ZT17YmFzZVN0YXRlOmEubWVtb2l6ZWRTdGF0ZSxiYXNlUXVldWU6bnVsbCxzaGFyZWQ6e3BlbmRpbmc6bnVsbH0sZWZmZWN0czpudWxsfX1mdW5jdGlvbiBvZShhLGIpe2E9YS51cGRhdGVRdWV1ZTtiLnVwZGF0ZVF1ZXVlPT09YSYmKGIudXBkYXRlUXVldWU9e2Jhc2VTdGF0ZTphLmJhc2VTdGF0ZSxiYXNlUXVldWU6YS5iYXNlUXVldWUsc2hhcmVkOmEuc2hhcmVkLGVmZmVjdHM6YS5lZmZlY3RzfSl9ZnVuY3Rpb24gRWEoYSxiKXthPXtleHBpcmF0aW9uVGltZTphLHN1c3BlbnNlQ29uZmlnOmIsdGFnOlRnLHBheWxvYWQ6bnVsbCxjYWxsYmFjazpudWxsLG5leHQ6bnVsbH07cmV0dXJuIGEubmV4dD0KYX1mdW5jdGlvbiBGYShhLGIpe2E9YS51cGRhdGVRdWV1ZTtpZihudWxsIT09YSl7YT1hLnNoYXJlZDt2YXIgYz1hLnBlbmRpbmc7bnVsbD09PWM/Yi5uZXh0PWI6KGIubmV4dD1jLm5leHQsYy5uZXh0PWIpO2EucGVuZGluZz1ifX1mdW5jdGlvbiBVZyhhLGIpe3ZhciBjPWEuYWx0ZXJuYXRlO251bGwhPT1jJiZvZShjLGEpO2E9YS51cGRhdGVRdWV1ZTtjPWEuYmFzZVF1ZXVlO251bGw9PT1jPyhhLmJhc2VRdWV1ZT1iLm5leHQ9YixiLm5leHQ9Yik6KGIubmV4dD1jLm5leHQsYy5uZXh0PWIpfWZ1bmN0aW9uIFFiKGEsYixjLGQpe3ZhciBlPWEudXBkYXRlUXVldWU7R2E9ITE7dmFyIGY9ZS5iYXNlUXVldWUsZz1lLnNoYXJlZC5wZW5kaW5nO2lmKG51bGwhPT1nKXtpZihudWxsIT09Zil7dmFyIGg9Zi5uZXh0O2YubmV4dD1nLm5leHQ7Zy5uZXh0PWh9Zj1nO2Uuc2hhcmVkLnBlbmRpbmc9bnVsbDtoPWEuYWx0ZXJuYXRlO251bGwhPT1oJiYoaD1oLnVwZGF0ZVF1ZXVlLG51bGwhPT1oJiYKKGguYmFzZVF1ZXVlPWcpKX1pZihudWxsIT09Zil7aD1mLm5leHQ7dmFyIG09ZS5iYXNlU3RhdGUsbj0wLGs9bnVsbCxiYT1udWxsLGw9bnVsbDtpZihudWxsIT09aCl7dmFyIHA9aDtkb3tnPXAuZXhwaXJhdGlvblRpbWU7aWYoZzxkKXt2YXIgdD17ZXhwaXJhdGlvblRpbWU6cC5leHBpcmF0aW9uVGltZSxzdXNwZW5zZUNvbmZpZzpwLnN1c3BlbnNlQ29uZmlnLHRhZzpwLnRhZyxwYXlsb2FkOnAucGF5bG9hZCxjYWxsYmFjazpwLmNhbGxiYWNrLG5leHQ6bnVsbH07bnVsbD09PWw/KGJhPWw9dCxrPW0pOmw9bC5uZXh0PXQ7Zz5uJiYobj1nKX1lbHNle251bGwhPT1sJiYobD1sLm5leHQ9e2V4cGlyYXRpb25UaW1lOjEwNzM3NDE4MjMsc3VzcGVuc2VDb25maWc6cC5zdXNwZW5zZUNvbmZpZyx0YWc6cC50YWcscGF5bG9hZDpwLnBheWxvYWQsY2FsbGJhY2s6cC5jYWxsYmFjayxuZXh0Om51bGx9KTtWZyhnLHAuc3VzcGVuc2VDb25maWcpO2E6e3ZhciBxPWEscj1wO2c9Yjt0PWM7c3dpdGNoKHIudGFnKXtjYXNlIDE6cT0Kci5wYXlsb2FkO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgcSl7bT1xLmNhbGwodCxtLGcpO2JyZWFrIGF9bT1xO2JyZWFrIGE7Y2FzZSAzOnEuZWZmZWN0VGFnPXEuZWZmZWN0VGFnJi00MDk3fDY0O2Nhc2UgVGc6cT1yLnBheWxvYWQ7Zz0iZnVuY3Rpb24iPT09dHlwZW9mIHE/cS5jYWxsKHQsbSxnKTpxO2lmKG51bGw9PT1nfHx2b2lkIDA9PT1nKWJyZWFrIGE7bT1NKHt9LG0sZyk7YnJlYWsgYTtjYXNlIEpjOkdhPSEwfX1udWxsIT09cC5jYWxsYmFjayYmKGEuZWZmZWN0VGFnfD0zMixnPWUuZWZmZWN0cyxudWxsPT09Zz9lLmVmZmVjdHM9W3BdOmcucHVzaChwKSl9cD1wLm5leHQ7aWYobnVsbD09PXB8fHA9PT1oKWlmKGc9ZS5zaGFyZWQucGVuZGluZyxudWxsPT09ZylicmVhaztlbHNlIHA9Zi5uZXh0PWcubmV4dCxnLm5leHQ9aCxlLmJhc2VRdWV1ZT1mPWcsZS5zaGFyZWQucGVuZGluZz1udWxsfXdoaWxlKDEpfW51bGw9PT1sP2s9bTpsLm5leHQ9YmE7ZS5iYXNlU3RhdGU9aztlLmJhc2VRdWV1ZT0KbDtLYyhuKTthLmV4cGlyYXRpb25UaW1lPW47YS5tZW1vaXplZFN0YXRlPW19fWZ1bmN0aW9uIFdnKGEsYixjKXthPWIuZWZmZWN0cztiLmVmZmVjdHM9bnVsbDtpZihudWxsIT09YSlmb3IoYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgZD1hW2JdLGU9ZC5jYWxsYmFjaztpZihudWxsIT09ZSl7ZC5jYWxsYmFjaz1udWxsO2Q9ZTtlPWM7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBkKXRocm93IEVycm9yKGsoMTkxLGQpKTtkLmNhbGwoZSl9fX1mdW5jdGlvbiBMYyhhLGIsYyxkKXtiPWEubWVtb2l6ZWRTdGF0ZTtjPWMoZCxiKTtjPW51bGw9PT1jfHx2b2lkIDA9PT1jP2I6TSh7fSxiLGMpO2EubWVtb2l6ZWRTdGF0ZT1jOzA9PT1hLmV4cGlyYXRpb25UaW1lJiYoYS51cGRhdGVRdWV1ZS5iYXNlU3RhdGU9Yyl9ZnVuY3Rpb24gWGcoYSxiLGMsZCxlLGYsZyl7YT1hLnN0YXRlTm9kZTtyZXR1cm4iZnVuY3Rpb24iPT09dHlwZW9mIGEuc2hvdWxkQ29tcG9uZW50VXBkYXRlP2Euc2hvdWxkQ29tcG9uZW50VXBkYXRlKGQsCmYsZyk6Yi5wcm90b3R5cGUmJmIucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50PyFPYihjLGQpfHwhT2IoZSxmKTohMH1mdW5jdGlvbiBZZyhhLGIsYyl7dmFyIGQ9ITEsZT1DYTt2YXIgZj1iLmNvbnRleHRUeXBlOyJvYmplY3QiPT09dHlwZW9mIGYmJm51bGwhPT1mP2Y9VyhmKTooZT1OKGIpP1JhOkIuY3VycmVudCxkPWIuY29udGV4dFR5cGVzLGY9KGQ9bnVsbCE9PWQmJnZvaWQgMCE9PWQpP3BiKGEsZSk6Q2EpO2I9bmV3IGIoYyxmKTthLm1lbW9pemVkU3RhdGU9bnVsbCE9PWIuc3RhdGUmJnZvaWQgMCE9PWIuc3RhdGU/Yi5zdGF0ZTpudWxsO2IudXBkYXRlcj1NYzthLnN0YXRlTm9kZT1iO2IuX3JlYWN0SW50ZXJuYWxGaWJlcj1hO2QmJihhPWEuc3RhdGVOb2RlLGEuX19yZWFjdEludGVybmFsTWVtb2l6ZWRVbm1hc2tlZENoaWxkQ29udGV4dD1lLGEuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNYXNrZWRDaGlsZENvbnRleHQ9Zik7cmV0dXJuIGJ9ZnVuY3Rpb24gWmcoYSwKYixjLGQpe2E9Yi5zdGF0ZTsiZnVuY3Rpb24iPT09dHlwZW9mIGIuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyYmYi5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKGMsZCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBiLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJiZiLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKGMsZCk7Yi5zdGF0ZSE9PWEmJk1jLmVucXVldWVSZXBsYWNlU3RhdGUoYixiLnN0YXRlLG51bGwpfWZ1bmN0aW9uIHBlKGEsYixjLGQpe3ZhciBlPWEuc3RhdGVOb2RlO2UucHJvcHM9YztlLnN0YXRlPWEubWVtb2l6ZWRTdGF0ZTtlLnJlZnM9JGc7bmUoYSk7dmFyIGY9Yi5jb250ZXh0VHlwZTsib2JqZWN0Ij09PXR5cGVvZiBmJiZudWxsIT09Zj9lLmNvbnRleHQ9VyhmKTooZj1OKGIpP1JhOkIuY3VycmVudCxlLmNvbnRleHQ9cGIoYSxmKSk7UWIoYSxjLGUsZCk7ZS5zdGF0ZT1hLm1lbW9pemVkU3RhdGU7Zj1iLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczsKImZ1bmN0aW9uIj09PXR5cGVvZiBmJiYoTGMoYSxiLGYsYyksZS5zdGF0ZT1hLm1lbW9pemVkU3RhdGUpOyJmdW5jdGlvbiI9PT10eXBlb2YgYi5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHN8fCJmdW5jdGlvbiI9PT10eXBlb2YgZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZXx8ImZ1bmN0aW9uIiE9PXR5cGVvZiBlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQmJiJmdW5jdGlvbiIhPT10eXBlb2YgZS5jb21wb25lbnRXaWxsTW91bnR8fChiPWUuc3RhdGUsImZ1bmN0aW9uIj09PXR5cGVvZiBlLmNvbXBvbmVudFdpbGxNb3VudCYmZS5jb21wb25lbnRXaWxsTW91bnQoKSwiZnVuY3Rpb24iPT09dHlwZW9mIGUuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCYmZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCksYiE9PWUuc3RhdGUmJk1jLmVucXVldWVSZXBsYWNlU3RhdGUoZSxlLnN0YXRlLG51bGwpLFFiKGEsYyxlLGQpLGUuc3RhdGU9YS5tZW1vaXplZFN0YXRlKTsiZnVuY3Rpb24iPT09CnR5cGVvZiBlLmNvbXBvbmVudERpZE1vdW50JiYoYS5lZmZlY3RUYWd8PTQpfWZ1bmN0aW9uIFJiKGEsYixjKXthPWMucmVmO2lmKG51bGwhPT1hJiYiZnVuY3Rpb24iIT09dHlwZW9mIGEmJiJvYmplY3QiIT09dHlwZW9mIGEpe2lmKGMuX293bmVyKXtjPWMuX293bmVyO2lmKGMpe2lmKDEhPT1jLnRhZyl0aHJvdyBFcnJvcihrKDMwOSkpO3ZhciBkPWMuc3RhdGVOb2RlfWlmKCFkKXRocm93IEVycm9yKGsoMTQ3LGEpKTt2YXIgZT0iIithO2lmKG51bGwhPT1iJiZudWxsIT09Yi5yZWYmJiJmdW5jdGlvbiI9PT10eXBlb2YgYi5yZWYmJmIucmVmLl9zdHJpbmdSZWY9PT1lKXJldHVybiBiLnJlZjtiPWZ1bmN0aW9uKGEpe3ZhciBiPWQucmVmcztiPT09JGcmJihiPWQucmVmcz17fSk7bnVsbD09PWE/ZGVsZXRlIGJbZV06YltlXT1hfTtiLl9zdHJpbmdSZWY9ZTtyZXR1cm4gYn1pZigic3RyaW5nIiE9PXR5cGVvZiBhKXRocm93IEVycm9yKGsoMjg0KSk7aWYoIWMuX293bmVyKXRocm93IEVycm9yKGsoMjkwLAphKSk7fXJldHVybiBhfWZ1bmN0aW9uIE5jKGEsYil7aWYoInRleHRhcmVhIiE9PWEudHlwZSl0aHJvdyBFcnJvcihrKDMxLCJbb2JqZWN0IE9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGIpPyJvYmplY3Qgd2l0aCBrZXlzIHsiK09iamVjdC5rZXlzKGIpLmpvaW4oIiwgIikrIn0iOmIsIiIpKTt9ZnVuY3Rpb24gYWgoYSl7ZnVuY3Rpb24gYihiLGMpe2lmKGEpe3ZhciBkPWIubGFzdEVmZmVjdDtudWxsIT09ZD8oZC5uZXh0RWZmZWN0PWMsYi5sYXN0RWZmZWN0PWMpOmIuZmlyc3RFZmZlY3Q9Yi5sYXN0RWZmZWN0PWM7Yy5uZXh0RWZmZWN0PW51bGw7Yy5lZmZlY3RUYWc9OH19ZnVuY3Rpb24gYyhjLGQpe2lmKCFhKXJldHVybiBudWxsO2Zvcig7bnVsbCE9PWQ7KWIoYyxkKSxkPWQuc2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiBkKGEsYil7Zm9yKGE9bmV3IE1hcDtudWxsIT09YjspbnVsbCE9PWIua2V5P2Euc2V0KGIua2V5LGIpOmEuc2V0KGIuaW5kZXgsCmIpLGI9Yi5zaWJsaW5nO3JldHVybiBhfWZ1bmN0aW9uIGUoYSxiKXthPVNhKGEsYik7YS5pbmRleD0wO2Euc2libGluZz1udWxsO3JldHVybiBhfWZ1bmN0aW9uIGYoYixjLGQpe2IuaW5kZXg9ZDtpZighYSlyZXR1cm4gYztkPWIuYWx0ZXJuYXRlO2lmKG51bGwhPT1kKXJldHVybiBkPWQuaW5kZXgsZDxjPyhiLmVmZmVjdFRhZz0yLGMpOmQ7Yi5lZmZlY3RUYWc9MjtyZXR1cm4gY31mdW5jdGlvbiBnKGIpe2EmJm51bGw9PT1iLmFsdGVybmF0ZSYmKGIuZWZmZWN0VGFnPTIpO3JldHVybiBifWZ1bmN0aW9uIGgoYSxiLGMsZCl7aWYobnVsbD09PWJ8fDYhPT1iLnRhZylyZXR1cm4gYj1xZShjLGEubW9kZSxkKSxiLnJldHVybj1hLGI7Yj1lKGIsYyk7Yi5yZXR1cm49YTtyZXR1cm4gYn1mdW5jdGlvbiBtKGEsYixjLGQpe2lmKG51bGwhPT1iJiZiLmVsZW1lbnRUeXBlPT09Yy50eXBlKXJldHVybiBkPWUoYixjLnByb3BzKSxkLnJlZj1SYihhLGIsYyksZC5yZXR1cm49YSxkO2Q9T2MoYy50eXBlLApjLmtleSxjLnByb3BzLG51bGwsYS5tb2RlLGQpO2QucmVmPVJiKGEsYixjKTtkLnJldHVybj1hO3JldHVybiBkfWZ1bmN0aW9uIG4oYSxiLGMsZCl7aWYobnVsbD09PWJ8fDQhPT1iLnRhZ3x8Yi5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyE9PWMuY29udGFpbmVySW5mb3x8Yi5zdGF0ZU5vZGUuaW1wbGVtZW50YXRpb24hPT1jLmltcGxlbWVudGF0aW9uKXJldHVybiBiPXJlKGMsYS5tb2RlLGQpLGIucmV0dXJuPWEsYjtiPWUoYixjLmNoaWxkcmVufHxbXSk7Yi5yZXR1cm49YTtyZXR1cm4gYn1mdW5jdGlvbiBsKGEsYixjLGQsZil7aWYobnVsbD09PWJ8fDchPT1iLnRhZylyZXR1cm4gYj1IYShjLGEubW9kZSxkLGYpLGIucmV0dXJuPWEsYjtiPWUoYixjKTtiLnJldHVybj1hO3JldHVybiBifWZ1bmN0aW9uIGJhKGEsYixjKXtpZigic3RyaW5nIj09PXR5cGVvZiBifHwibnVtYmVyIj09PXR5cGVvZiBiKXJldHVybiBiPXFlKCIiK2IsYS5tb2RlLGMpLGIucmV0dXJuPWEsYjtpZigib2JqZWN0Ij09PQp0eXBlb2YgYiYmbnVsbCE9PWIpe3N3aXRjaChiLiQkdHlwZW9mKXtjYXNlIFBjOnJldHVybiBjPU9jKGIudHlwZSxiLmtleSxiLnByb3BzLG51bGwsYS5tb2RlLGMpLGMucmVmPVJiKGEsbnVsbCxiKSxjLnJldHVybj1hLGM7Y2FzZSBnYjpyZXR1cm4gYj1yZShiLGEubW9kZSxjKSxiLnJldHVybj1hLGJ9aWYoUWMoYil8fHpiKGIpKXJldHVybiBiPUhhKGIsYS5tb2RlLGMsbnVsbCksYi5yZXR1cm49YSxiO05jKGEsYil9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1udWxsIT09Yj9iLmtleTpudWxsO2lmKCJzdHJpbmciPT09dHlwZW9mIGN8fCJudW1iZXIiPT09dHlwZW9mIGMpcmV0dXJuIG51bGwhPT1lP251bGw6aChhLGIsIiIrYyxkKTtpZigib2JqZWN0Ij09PXR5cGVvZiBjJiZudWxsIT09Yyl7c3dpdGNoKGMuJCR0eXBlb2Ype2Nhc2UgUGM6cmV0dXJuIGMua2V5PT09ZT9jLnR5cGU9PT1NYT9sKGEsYixjLnByb3BzLmNoaWxkcmVuLGQsZSk6bShhLGIsYywKZCk6bnVsbDtjYXNlIGdiOnJldHVybiBjLmtleT09PWU/bihhLGIsYyxkKTpudWxsfWlmKFFjKGMpfHx6YihjKSlyZXR1cm4gbnVsbCE9PWU/bnVsbDpsKGEsYixjLGQsbnVsbCk7TmMoYSxjKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiB0KGEsYixjLGQsZSl7aWYoInN0cmluZyI9PT10eXBlb2YgZHx8Im51bWJlciI9PT10eXBlb2YgZClyZXR1cm4gYT1hLmdldChjKXx8bnVsbCxoKGIsYSwiIitkLGUpO2lmKCJvYmplY3QiPT09dHlwZW9mIGQmJm51bGwhPT1kKXtzd2l0Y2goZC4kJHR5cGVvZil7Y2FzZSBQYzpyZXR1cm4gYT1hLmdldChudWxsPT09ZC5rZXk/YzpkLmtleSl8fG51bGwsZC50eXBlPT09TWE/bChiLGEsZC5wcm9wcy5jaGlsZHJlbixlLGQua2V5KTptKGIsYSxkLGUpO2Nhc2UgZ2I6cmV0dXJuIGE9YS5nZXQobnVsbD09PWQua2V5P2M6ZC5rZXkpfHxudWxsLG4oYixhLGQsZSl9aWYoUWMoZCl8fHpiKGQpKXJldHVybiBhPWEuZ2V0KGMpfHxudWxsLGwoYixhLGQsZSxudWxsKTsKTmMoYixkKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBxKGUsZyxoLG0pe2Zvcih2YXIgbj1udWxsLGs9bnVsbCxsPWcscj1nPTAsQz1udWxsO251bGwhPT1sJiZyPGgubGVuZ3RoO3IrKyl7bC5pbmRleD5yPyhDPWwsbD1udWxsKTpDPWwuc2libGluZzt2YXIgTz1wKGUsbCxoW3JdLG0pO2lmKG51bGw9PT1PKXtudWxsPT09bCYmKGw9Qyk7YnJlYWt9YSYmbCYmbnVsbD09PU8uYWx0ZXJuYXRlJiZiKGUsbCk7Zz1mKE8sZyxyKTtudWxsPT09az9uPU86ay5zaWJsaW5nPU87az1PO2w9Q31pZihyPT09aC5sZW5ndGgpcmV0dXJuIGMoZSxsKSxuO2lmKG51bGw9PT1sKXtmb3IoO3I8aC5sZW5ndGg7cisrKWw9YmEoZSxoW3JdLG0pLG51bGwhPT1sJiYoZz1mKGwsZyxyKSxudWxsPT09az9uPWw6ay5zaWJsaW5nPWwsaz1sKTtyZXR1cm4gbn1mb3IobD1kKGUsbCk7cjxoLmxlbmd0aDtyKyspQz10KGwsZSxyLGhbcl0sbSksbnVsbCE9PUMmJihhJiZudWxsIT09Qy5hbHRlcm5hdGUmJmwuZGVsZXRlKG51bGw9PT0KQy5rZXk/cjpDLmtleSksZz1mKEMsZyxyKSxudWxsPT09az9uPUM6ay5zaWJsaW5nPUMsaz1DKTthJiZsLmZvckVhY2goZnVuY3Rpb24oYSl7cmV0dXJuIGIoZSxhKX0pO3JldHVybiBufWZ1bmN0aW9uIHcoZSxnLGgsbil7dmFyIG09emIoaCk7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBtKXRocm93IEVycm9yKGsoMTUwKSk7aD1tLmNhbGwoaCk7aWYobnVsbD09aCl0aHJvdyBFcnJvcihrKDE1MSkpO2Zvcih2YXIgbD1tPW51bGwscj1nLEM9Zz0wLE89bnVsbCx2PWgubmV4dCgpO251bGwhPT1yJiYhdi5kb25lO0MrKyx2PWgubmV4dCgpKXtyLmluZGV4PkM/KE89cixyPW51bGwpOk89ci5zaWJsaW5nO3ZhciBxPXAoZSxyLHYudmFsdWUsbik7aWYobnVsbD09PXEpe251bGw9PT1yJiYocj1PKTticmVha31hJiZyJiZudWxsPT09cS5hbHRlcm5hdGUmJmIoZSxyKTtnPWYocSxnLEMpO251bGw9PT1sP209cTpsLnNpYmxpbmc9cTtsPXE7cj1PfWlmKHYuZG9uZSlyZXR1cm4gYyhlLHIpLG07CmlmKG51bGw9PT1yKXtmb3IoOyF2LmRvbmU7QysrLHY9aC5uZXh0KCkpdj1iYShlLHYudmFsdWUsbiksbnVsbCE9PXYmJihnPWYodixnLEMpLG51bGw9PT1sP209djpsLnNpYmxpbmc9dixsPXYpO3JldHVybiBtfWZvcihyPWQoZSxyKTshdi5kb25lO0MrKyx2PWgubmV4dCgpKXY9dChyLGUsQyx2LnZhbHVlLG4pLG51bGwhPT12JiYoYSYmbnVsbCE9PXYuYWx0ZXJuYXRlJiZyLmRlbGV0ZShudWxsPT09di5rZXk/Qzp2LmtleSksZz1mKHYsZyxDKSxudWxsPT09bD9tPXY6bC5zaWJsaW5nPXYsbD12KTthJiZyLmZvckVhY2goZnVuY3Rpb24oYSl7cmV0dXJuIGIoZSxhKX0pO3JldHVybiBtfXJldHVybiBmdW5jdGlvbihhLGQsZixoKXt2YXIgbT0ib2JqZWN0Ij09PXR5cGVvZiBmJiZudWxsIT09ZiYmZi50eXBlPT09TWEmJm51bGw9PT1mLmtleTttJiYoZj1mLnByb3BzLmNoaWxkcmVuKTt2YXIgbj0ib2JqZWN0Ij09PXR5cGVvZiBmJiZudWxsIT09ZjtpZihuKXN3aXRjaChmLiQkdHlwZW9mKXtjYXNlIFBjOmE6e249CmYua2V5O2ZvcihtPWQ7bnVsbCE9PW07KXtpZihtLmtleT09PW4pe3N3aXRjaChtLnRhZyl7Y2FzZSA3OmlmKGYudHlwZT09PU1hKXtjKGEsbS5zaWJsaW5nKTtkPWUobSxmLnByb3BzLmNoaWxkcmVuKTtkLnJldHVybj1hO2E9ZDticmVhayBhfWJyZWFrO2RlZmF1bHQ6aWYobS5lbGVtZW50VHlwZT09PWYudHlwZSl7YyhhLG0uc2libGluZyk7ZD1lKG0sZi5wcm9wcyk7ZC5yZWY9UmIoYSxtLGYpO2QucmV0dXJuPWE7YT1kO2JyZWFrIGF9fWMoYSxtKTticmVha31lbHNlIGIoYSxtKTttPW0uc2libGluZ31mLnR5cGU9PT1NYT8oZD1IYShmLnByb3BzLmNoaWxkcmVuLGEubW9kZSxoLGYua2V5KSxkLnJldHVybj1hLGE9ZCk6KGg9T2MoZi50eXBlLGYua2V5LGYucHJvcHMsbnVsbCxhLm1vZGUsaCksaC5yZWY9UmIoYSxkLGYpLGgucmV0dXJuPWEsYT1oKX1yZXR1cm4gZyhhKTtjYXNlIGdiOmE6e2ZvcihtPWYua2V5O251bGwhPT1kOyl7aWYoZC5rZXk9PT1tKWlmKDQ9PT1kLnRhZyYmZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbz09PQpmLmNvbnRhaW5lckluZm8mJmQuc3RhdGVOb2RlLmltcGxlbWVudGF0aW9uPT09Zi5pbXBsZW1lbnRhdGlvbil7YyhhLGQuc2libGluZyk7ZD1lKGQsZi5jaGlsZHJlbnx8W10pO2QucmV0dXJuPWE7YT1kO2JyZWFrIGF9ZWxzZXtjKGEsZCk7YnJlYWt9ZWxzZSBiKGEsZCk7ZD1kLnNpYmxpbmd9ZD1yZShmLGEubW9kZSxoKTtkLnJldHVybj1hO2E9ZH1yZXR1cm4gZyhhKX1pZigic3RyaW5nIj09PXR5cGVvZiBmfHwibnVtYmVyIj09PXR5cGVvZiBmKXJldHVybiBmPSIiK2YsbnVsbCE9PWQmJjY9PT1kLnRhZz8oYyhhLGQuc2libGluZyksZD1lKGQsZiksZC5yZXR1cm49YSxhPWQpOihjKGEsZCksZD1xZShmLGEubW9kZSxoKSxkLnJldHVybj1hLGE9ZCksZyhhKTtpZihRYyhmKSlyZXR1cm4gcShhLGQsZixoKTtpZih6YihmKSlyZXR1cm4gdyhhLGQsZixoKTtuJiZOYyhhLGYpO2lmKCJ1bmRlZmluZWQiPT09dHlwZW9mIGYmJiFtKXN3aXRjaChhLnRhZyl7Y2FzZSAxOmNhc2UgMDp0aHJvdyBhPQphLnR5cGUsRXJyb3IoaygxNTIsYS5kaXNwbGF5TmFtZXx8YS5uYW1lfHwiQ29tcG9uZW50IikpO31yZXR1cm4gYyhhLGQpfX1mdW5jdGlvbiBUYShhKXtpZihhPT09U2IpdGhyb3cgRXJyb3IoaygxNzQpKTtyZXR1cm4gYX1mdW5jdGlvbiBzZShhLGIpe3koVGIsYik7eShVYixhKTt5KGphLFNiKTthPWIubm9kZVR5cGU7c3dpdGNoKGEpe2Nhc2UgOTpjYXNlIDExOmI9KGI9Yi5kb2N1bWVudEVsZW1lbnQpP2IubmFtZXNwYWNlVVJJOkhkKG51bGwsIiIpO2JyZWFrO2RlZmF1bHQ6YT04PT09YT9iLnBhcmVudE5vZGU6YixiPWEubmFtZXNwYWNlVVJJfHxudWxsLGE9YS50YWdOYW1lLGI9SGQoYixhKX1xKGphKTt5KGphLGIpfWZ1bmN0aW9uIHRiKGEpe3EoamEpO3EoVWIpO3EoVGIpfWZ1bmN0aW9uIGJoKGEpe1RhKFRiLmN1cnJlbnQpO3ZhciBiPVRhKGphLmN1cnJlbnQpO3ZhciBjPUhkKGIsYS50eXBlKTtiIT09YyYmKHkoVWIsYSkseShqYSxjKSl9ZnVuY3Rpb24gdGUoYSl7VWIuY3VycmVudD09PQphJiYocShqYSkscShVYikpfWZ1bmN0aW9uIFJjKGEpe2Zvcih2YXIgYj1hO251bGwhPT1iOyl7aWYoMTM9PT1iLnRhZyl7dmFyIGM9Yi5tZW1vaXplZFN0YXRlO2lmKG51bGwhPT1jJiYoYz1jLmRlaHlkcmF0ZWQsbnVsbD09PWN8fGMuZGF0YT09PSRkfHxjLmRhdGE9PT1aZCkpcmV0dXJuIGJ9ZWxzZSBpZigxOT09PWIudGFnJiZ2b2lkIDAhPT1iLm1lbW9pemVkUHJvcHMucmV2ZWFsT3JkZXIpe2lmKDAhPT0oYi5lZmZlY3RUYWcmNjQpKXJldHVybiBifWVsc2UgaWYobnVsbCE9PWIuY2hpbGQpe2IuY2hpbGQucmV0dXJuPWI7Yj1iLmNoaWxkO2NvbnRpbnVlfWlmKGI9PT1hKWJyZWFrO2Zvcig7bnVsbD09PWIuc2libGluZzspe2lmKG51bGw9PT1iLnJldHVybnx8Yi5yZXR1cm49PT1hKXJldHVybiBudWxsO2I9Yi5yZXR1cm59Yi5zaWJsaW5nLnJldHVybj1iLnJldHVybjtiPWIuc2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiB1ZShhLGIpe3JldHVybntyZXNwb25kZXI6YSxwcm9wczpifX0KZnVuY3Rpb24gUygpe3Rocm93IEVycm9yKGsoMzIxKSk7fWZ1bmN0aW9uIHZlKGEsYil7aWYobnVsbD09PWIpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aCYmYzxhLmxlbmd0aDtjKyspaWYoIVFhKGFbY10sYltjXSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gd2UoYSxiLGMsZCxlLGYpe0lhPWY7ej1iO2IubWVtb2l6ZWRTdGF0ZT1udWxsO2IudXBkYXRlUXVldWU9bnVsbDtiLmV4cGlyYXRpb25UaW1lPTA7U2MuY3VycmVudD1udWxsPT09YXx8bnVsbD09PWEubWVtb2l6ZWRTdGF0ZT9kajplajthPWMoZCxlKTtpZihiLmV4cGlyYXRpb25UaW1lPT09SWEpe2Y9MDtkb3tiLmV4cGlyYXRpb25UaW1lPTA7aWYoISgyNT5mKSl0aHJvdyBFcnJvcihrKDMwMSkpO2YrPTE7Sj1LPW51bGw7Yi51cGRhdGVRdWV1ZT1udWxsO1NjLmN1cnJlbnQ9Zmo7YT1jKGQsZSl9d2hpbGUoYi5leHBpcmF0aW9uVGltZT09PUlhKX1TYy5jdXJyZW50PVRjO2I9bnVsbCE9PUsmJm51bGwhPT1LLm5leHQ7CklhPTA7Sj1LPXo9bnVsbDtVYz0hMTtpZihiKXRocm93IEVycm9yKGsoMzAwKSk7cmV0dXJuIGF9ZnVuY3Rpb24gdWIoKXt2YXIgYT17bWVtb2l6ZWRTdGF0ZTpudWxsLGJhc2VTdGF0ZTpudWxsLGJhc2VRdWV1ZTpudWxsLHF1ZXVlOm51bGwsbmV4dDpudWxsfTtudWxsPT09Sj96Lm1lbW9pemVkU3RhdGU9Sj1hOko9Si5uZXh0PWE7cmV0dXJuIEp9ZnVuY3Rpb24gdmIoKXtpZihudWxsPT09Syl7dmFyIGE9ei5hbHRlcm5hdGU7YT1udWxsIT09YT9hLm1lbW9pemVkU3RhdGU6bnVsbH1lbHNlIGE9Sy5uZXh0O3ZhciBiPW51bGw9PT1KP3oubWVtb2l6ZWRTdGF0ZTpKLm5leHQ7aWYobnVsbCE9PWIpSj1iLEs9YTtlbHNle2lmKG51bGw9PT1hKXRocm93IEVycm9yKGsoMzEwKSk7Sz1hO2E9e21lbW9pemVkU3RhdGU6Sy5tZW1vaXplZFN0YXRlLGJhc2VTdGF0ZTpLLmJhc2VTdGF0ZSxiYXNlUXVldWU6Sy5iYXNlUXVldWUscXVldWU6Sy5xdWV1ZSxuZXh0Om51bGx9O251bGw9PT1KP3oubWVtb2l6ZWRTdGF0ZT0KSj1hOko9Si5uZXh0PWF9cmV0dXJuIEp9ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm4iZnVuY3Rpb24iPT09dHlwZW9mIGI/YihhKTpifWZ1bmN0aW9uIFZjKGEsYixjKXtiPXZiKCk7Yz1iLnF1ZXVlO2lmKG51bGw9PT1jKXRocm93IEVycm9yKGsoMzExKSk7Yy5sYXN0UmVuZGVyZWRSZWR1Y2VyPWE7dmFyIGQ9SyxlPWQuYmFzZVF1ZXVlLGY9Yy5wZW5kaW5nO2lmKG51bGwhPT1mKXtpZihudWxsIT09ZSl7dmFyIGc9ZS5uZXh0O2UubmV4dD1mLm5leHQ7Zi5uZXh0PWd9ZC5iYXNlUXVldWU9ZT1mO2MucGVuZGluZz1udWxsfWlmKG51bGwhPT1lKXtlPWUubmV4dDtkPWQuYmFzZVN0YXRlO3ZhciBoPWc9Zj1udWxsLG09ZTtkb3t2YXIgbj1tLmV4cGlyYXRpb25UaW1lO2lmKG48SWEpe3ZhciBsPXtleHBpcmF0aW9uVGltZTptLmV4cGlyYXRpb25UaW1lLHN1c3BlbnNlQ29uZmlnOm0uc3VzcGVuc2VDb25maWcsYWN0aW9uOm0uYWN0aW9uLGVhZ2VyUmVkdWNlcjptLmVhZ2VyUmVkdWNlcixlYWdlclN0YXRlOm0uZWFnZXJTdGF0ZSwKbmV4dDpudWxsfTtudWxsPT09aD8oZz1oPWwsZj1kKTpoPWgubmV4dD1sO24+ei5leHBpcmF0aW9uVGltZSYmKHouZXhwaXJhdGlvblRpbWU9bixLYyhuKSl9ZWxzZSBudWxsIT09aCYmKGg9aC5uZXh0PXtleHBpcmF0aW9uVGltZToxMDczNzQxODIzLHN1c3BlbnNlQ29uZmlnOm0uc3VzcGVuc2VDb25maWcsYWN0aW9uOm0uYWN0aW9uLGVhZ2VyUmVkdWNlcjptLmVhZ2VyUmVkdWNlcixlYWdlclN0YXRlOm0uZWFnZXJTdGF0ZSxuZXh0Om51bGx9KSxWZyhuLG0uc3VzcGVuc2VDb25maWcpLGQ9bS5lYWdlclJlZHVjZXI9PT1hP20uZWFnZXJTdGF0ZTphKGQsbS5hY3Rpb24pO209bS5uZXh0fXdoaWxlKG51bGwhPT1tJiZtIT09ZSk7bnVsbD09PWg/Zj1kOmgubmV4dD1nO1FhKGQsYi5tZW1vaXplZFN0YXRlKXx8KGlhPSEwKTtiLm1lbW9pemVkU3RhdGU9ZDtiLmJhc2VTdGF0ZT1mO2IuYmFzZVF1ZXVlPWg7Yy5sYXN0UmVuZGVyZWRTdGF0ZT1kfXJldHVybltiLm1lbW9pemVkU3RhdGUsCmMuZGlzcGF0Y2hdfWZ1bmN0aW9uIFdjKGEsYixjKXtiPXZiKCk7Yz1iLnF1ZXVlO2lmKG51bGw9PT1jKXRocm93IEVycm9yKGsoMzExKSk7Yy5sYXN0UmVuZGVyZWRSZWR1Y2VyPWE7dmFyIGQ9Yy5kaXNwYXRjaCxlPWMucGVuZGluZyxmPWIubWVtb2l6ZWRTdGF0ZTtpZihudWxsIT09ZSl7Yy5wZW5kaW5nPW51bGw7dmFyIGc9ZT1lLm5leHQ7ZG8gZj1hKGYsZy5hY3Rpb24pLGc9Zy5uZXh0O3doaWxlKGchPT1lKTtRYShmLGIubWVtb2l6ZWRTdGF0ZSl8fChpYT0hMCk7Yi5tZW1vaXplZFN0YXRlPWY7bnVsbD09PWIuYmFzZVF1ZXVlJiYoYi5iYXNlU3RhdGU9Zik7Yy5sYXN0UmVuZGVyZWRTdGF0ZT1mfXJldHVybltmLGRdfWZ1bmN0aW9uIHhlKGEpe3ZhciBiPXViKCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBhJiYoYT1hKCkpO2IubWVtb2l6ZWRTdGF0ZT1iLmJhc2VTdGF0ZT1hO2E9Yi5xdWV1ZT17cGVuZGluZzpudWxsLGRpc3BhdGNoOm51bGwsbGFzdFJlbmRlcmVkUmVkdWNlcjpVYSwKbGFzdFJlbmRlcmVkU3RhdGU6YX07YT1hLmRpc3BhdGNoPWNoLmJpbmQobnVsbCx6LGEpO3JldHVybltiLm1lbW9pemVkU3RhdGUsYV19ZnVuY3Rpb24geWUoYSxiLGMsZCl7YT17dGFnOmEsY3JlYXRlOmIsZGVzdHJveTpjLGRlcHM6ZCxuZXh0Om51bGx9O2I9ei51cGRhdGVRdWV1ZTtudWxsPT09Yj8oYj17bGFzdEVmZmVjdDpudWxsfSx6LnVwZGF0ZVF1ZXVlPWIsYi5sYXN0RWZmZWN0PWEubmV4dD1hKTooYz1iLmxhc3RFZmZlY3QsbnVsbD09PWM/Yi5sYXN0RWZmZWN0PWEubmV4dD1hOihkPWMubmV4dCxjLm5leHQ9YSxhLm5leHQ9ZCxiLmxhc3RFZmZlY3Q9YSkpO3JldHVybiBhfWZ1bmN0aW9uIGRoKGEpe3JldHVybiB2YigpLm1lbW9pemVkU3RhdGV9ZnVuY3Rpb24gemUoYSxiLGMsZCl7dmFyIGU9dWIoKTt6LmVmZmVjdFRhZ3w9YTtlLm1lbW9pemVkU3RhdGU9eWUoMXxiLGMsdm9pZCAwLHZvaWQgMD09PWQ/bnVsbDpkKX1mdW5jdGlvbiBBZShhLGIsYyxkKXt2YXIgZT12YigpOwpkPXZvaWQgMD09PWQ/bnVsbDpkO3ZhciBmPXZvaWQgMDtpZihudWxsIT09Syl7dmFyIGc9Sy5tZW1vaXplZFN0YXRlO2Y9Zy5kZXN0cm95O2lmKG51bGwhPT1kJiZ2ZShkLGcuZGVwcykpe3llKGIsYyxmLGQpO3JldHVybn19ei5lZmZlY3RUYWd8PWE7ZS5tZW1vaXplZFN0YXRlPXllKDF8YixjLGYsZCl9ZnVuY3Rpb24gZWgoYSxiKXtyZXR1cm4gemUoNTE2LDQsYSxiKX1mdW5jdGlvbiBYYyhhLGIpe3JldHVybiBBZSg1MTYsNCxhLGIpfWZ1bmN0aW9uIGZoKGEsYil7cmV0dXJuIEFlKDQsMixhLGIpfWZ1bmN0aW9uIGdoKGEsYil7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBiKXJldHVybiBhPWEoKSxiKGEpLGZ1bmN0aW9uKCl7YihudWxsKX07aWYobnVsbCE9PWImJnZvaWQgMCE9PWIpcmV0dXJuIGE9YSgpLGIuY3VycmVudD1hLGZ1bmN0aW9uKCl7Yi5jdXJyZW50PW51bGx9fWZ1bmN0aW9uIGhoKGEsYixjKXtjPW51bGwhPT1jJiZ2b2lkIDAhPT1jP2MuY29uY2F0KFthXSk6bnVsbDsKcmV0dXJuIEFlKDQsMixnaC5iaW5kKG51bGwsYixhKSxjKX1mdW5jdGlvbiBCZShhLGIpe31mdW5jdGlvbiBpaChhLGIpe3ViKCkubWVtb2l6ZWRTdGF0ZT1bYSx2b2lkIDA9PT1iP251bGw6Yl07cmV0dXJuIGF9ZnVuY3Rpb24gWWMoYSxiKXt2YXIgYz12YigpO2I9dm9pZCAwPT09Yj9udWxsOmI7dmFyIGQ9Yy5tZW1vaXplZFN0YXRlO2lmKG51bGwhPT1kJiZudWxsIT09YiYmdmUoYixkWzFdKSlyZXR1cm4gZFswXTtjLm1lbW9pemVkU3RhdGU9W2EsYl07cmV0dXJuIGF9ZnVuY3Rpb24gamgoYSxiKXt2YXIgYz12YigpO2I9dm9pZCAwPT09Yj9udWxsOmI7dmFyIGQ9Yy5tZW1vaXplZFN0YXRlO2lmKG51bGwhPT1kJiZudWxsIT09YiYmdmUoYixkWzFdKSlyZXR1cm4gZFswXTthPWEoKTtjLm1lbW9pemVkU3RhdGU9W2EsYl07cmV0dXJuIGF9ZnVuY3Rpb24gQ2UoYSxiLGMpe3ZhciBkPUNjKCk7RGEoOTg+ZD85ODpkLGZ1bmN0aW9uKCl7YSghMCl9KTtEYSg5NzxkPzk3OmQsZnVuY3Rpb24oKXt2YXIgZD0KWC5zdXNwZW5zZTtYLnN1c3BlbnNlPXZvaWQgMD09PWI/bnVsbDpiO3RyeXthKCExKSxjKCl9ZmluYWxseXtYLnN1c3BlbnNlPWR9fSl9ZnVuY3Rpb24gY2goYSxiLGMpe3ZhciBkPWthKCksZT1WYi5zdXNwZW5zZTtkPVZhKGQsYSxlKTtlPXtleHBpcmF0aW9uVGltZTpkLHN1c3BlbnNlQ29uZmlnOmUsYWN0aW9uOmMsZWFnZXJSZWR1Y2VyOm51bGwsZWFnZXJTdGF0ZTpudWxsLG5leHQ6bnVsbH07dmFyIGY9Yi5wZW5kaW5nO251bGw9PT1mP2UubmV4dD1lOihlLm5leHQ9Zi5uZXh0LGYubmV4dD1lKTtiLnBlbmRpbmc9ZTtmPWEuYWx0ZXJuYXRlO2lmKGE9PT16fHxudWxsIT09ZiYmZj09PXopVWM9ITAsZS5leHBpcmF0aW9uVGltZT1JYSx6LmV4cGlyYXRpb25UaW1lPUlhO2Vsc2V7aWYoMD09PWEuZXhwaXJhdGlvblRpbWUmJihudWxsPT09Znx8MD09PWYuZXhwaXJhdGlvblRpbWUpJiYoZj1iLmxhc3RSZW5kZXJlZFJlZHVjZXIsbnVsbCE9PWYpKXRyeXt2YXIgZz1iLmxhc3RSZW5kZXJlZFN0YXRlLApoPWYoZyxjKTtlLmVhZ2VyUmVkdWNlcj1mO2UuZWFnZXJTdGF0ZT1oO2lmKFFhKGgsZykpcmV0dXJufWNhdGNoKG0pe31maW5hbGx5e31KYShhLGQpfX1mdW5jdGlvbiBraChhLGIpe3ZhciBjPWxhKDUsbnVsbCxudWxsLDApO2MuZWxlbWVudFR5cGU9IkRFTEVURUQiO2MudHlwZT0iREVMRVRFRCI7Yy5zdGF0ZU5vZGU9YjtjLnJldHVybj1hO2MuZWZmZWN0VGFnPTg7bnVsbCE9PWEubGFzdEVmZmVjdD8oYS5sYXN0RWZmZWN0Lm5leHRFZmZlY3Q9YyxhLmxhc3RFZmZlY3Q9Yyk6YS5maXJzdEVmZmVjdD1hLmxhc3RFZmZlY3Q9Y31mdW5jdGlvbiBsaChhLGIpe3N3aXRjaChhLnRhZyl7Y2FzZSA1OnZhciBjPWEudHlwZTtiPTEhPT1iLm5vZGVUeXBlfHxjLnRvTG93ZXJDYXNlKCkhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/bnVsbDpiO3JldHVybiBudWxsIT09Yj8oYS5zdGF0ZU5vZGU9YiwhMCk6ITE7Y2FzZSA2OnJldHVybiBiPSIiPT09YS5wZW5kaW5nUHJvcHN8fDMhPT1iLm5vZGVUeXBlPwpudWxsOmIsbnVsbCE9PWI/KGEuc3RhdGVOb2RlPWIsITApOiExO2Nhc2UgMTM6cmV0dXJuITE7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gRGUoYSl7aWYoV2Epe3ZhciBiPUthO2lmKGIpe3ZhciBjPWI7aWYoIWxoKGEsYikpe2I9a2IoYy5uZXh0U2libGluZyk7aWYoIWJ8fCFsaChhLGIpKXthLmVmZmVjdFRhZz1hLmVmZmVjdFRhZyYtMTAyNXwyO1dhPSExO3JhPWE7cmV0dXJufWtoKHJhLGMpfXJhPWE7S2E9a2IoYi5maXJzdENoaWxkKX1lbHNlIGEuZWZmZWN0VGFnPWEuZWZmZWN0VGFnJi0xMDI1fDIsV2E9ITEscmE9YX19ZnVuY3Rpb24gbWgoYSl7Zm9yKGE9YS5yZXR1cm47bnVsbCE9PWEmJjUhPT1hLnRhZyYmMyE9PWEudGFnJiYxMyE9PWEudGFnOylhPWEucmV0dXJuO3JhPWF9ZnVuY3Rpb24gWmMoYSl7aWYoYSE9PXJhKXJldHVybiExO2lmKCFXYSlyZXR1cm4gbWgoYSksV2E9ITAsITE7dmFyIGI9YS50eXBlO2lmKDUhPT1hLnRhZ3x8ImhlYWQiIT09YiYmImJvZHkiIT09CmImJiFZZChiLGEubWVtb2l6ZWRQcm9wcykpZm9yKGI9S2E7Yjspa2goYSxiKSxiPWtiKGIubmV4dFNpYmxpbmcpO21oKGEpO2lmKDEzPT09YS50YWcpe2E9YS5tZW1vaXplZFN0YXRlO2E9bnVsbCE9PWE/YS5kZWh5ZHJhdGVkOm51bGw7aWYoIWEpdGhyb3cgRXJyb3IoaygzMTcpKTthOnthPWEubmV4dFNpYmxpbmc7Zm9yKGI9MDthOyl7aWYoOD09PWEubm9kZVR5cGUpe3ZhciBjPWEuZGF0YTtpZihjPT09b2cpe2lmKDA9PT1iKXtLYT1rYihhLm5leHRTaWJsaW5nKTticmVhayBhfWItLX1lbHNlIGMhPT1uZyYmYyE9PVpkJiZjIT09JGR8fGIrK31hPWEubmV4dFNpYmxpbmd9S2E9bnVsbH19ZWxzZSBLYT1yYT9rYihhLnN0YXRlTm9kZS5uZXh0U2libGluZyk6bnVsbDtyZXR1cm4hMH1mdW5jdGlvbiBFZSgpe0thPXJhPW51bGw7V2E9ITF9ZnVuY3Rpb24gVChhLGIsYyxkKXtiLmNoaWxkPW51bGw9PT1hP0ZlKGIsbnVsbCxjLGQpOndiKGIsYS5jaGlsZCxjLGQpfWZ1bmN0aW9uIG5oKGEsCmIsYyxkLGUpe2M9Yy5yZW5kZXI7dmFyIGY9Yi5yZWY7cmIoYixlKTtkPXdlKGEsYixjLGQsZixlKTtpZihudWxsIT09YSYmIWlhKXJldHVybiBiLnVwZGF0ZVF1ZXVlPWEudXBkYXRlUXVldWUsYi5lZmZlY3RUYWcmPS01MTcsYS5leHBpcmF0aW9uVGltZTw9ZSYmKGEuZXhwaXJhdGlvblRpbWU9MCksc2EoYSxiLGUpO2IuZWZmZWN0VGFnfD0xO1QoYSxiLGQsZSk7cmV0dXJuIGIuY2hpbGR9ZnVuY3Rpb24gb2goYSxiLGMsZCxlLGYpe2lmKG51bGw9PT1hKXt2YXIgZz1jLnR5cGU7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBnJiYhR2UoZykmJnZvaWQgMD09PWcuZGVmYXVsdFByb3BzJiZudWxsPT09Yy5jb21wYXJlJiZ2b2lkIDA9PT1jLmRlZmF1bHRQcm9wcylyZXR1cm4gYi50YWc9MTUsYi50eXBlPWcscGgoYSxiLGcsZCxlLGYpO2E9T2MoYy50eXBlLG51bGwsZCxudWxsLGIubW9kZSxmKTthLnJlZj1iLnJlZjthLnJldHVybj1iO3JldHVybiBiLmNoaWxkPWF9Zz1hLmNoaWxkO2lmKGU8CmYmJihlPWcubWVtb2l6ZWRQcm9wcyxjPWMuY29tcGFyZSxjPW51bGwhPT1jP2M6T2IsYyhlLGQpJiZhLnJlZj09PWIucmVmKSlyZXR1cm4gc2EoYSxiLGYpO2IuZWZmZWN0VGFnfD0xO2E9U2EoZyxkKTthLnJlZj1iLnJlZjthLnJldHVybj1iO3JldHVybiBiLmNoaWxkPWF9ZnVuY3Rpb24gcGgoYSxiLGMsZCxlLGYpe3JldHVybiBudWxsIT09YSYmT2IoYS5tZW1vaXplZFByb3BzLGQpJiZhLnJlZj09PWIucmVmJiYoaWE9ITEsZTxmKT8oYi5leHBpcmF0aW9uVGltZT1hLmV4cGlyYXRpb25UaW1lLHNhKGEsYixmKSk6SGUoYSxiLGMsZCxmKX1mdW5jdGlvbiBxaChhLGIpe3ZhciBjPWIucmVmO2lmKG51bGw9PT1hJiZudWxsIT09Y3x8bnVsbCE9PWEmJmEucmVmIT09YyliLmVmZmVjdFRhZ3w9MTI4fWZ1bmN0aW9uIEhlKGEsYixjLGQsZSl7dmFyIGY9TihjKT9SYTpCLmN1cnJlbnQ7Zj1wYihiLGYpO3JiKGIsZSk7Yz13ZShhLGIsYyxkLGYsZSk7aWYobnVsbCE9PWEmJiFpYSlyZXR1cm4gYi51cGRhdGVRdWV1ZT0KYS51cGRhdGVRdWV1ZSxiLmVmZmVjdFRhZyY9LTUxNyxhLmV4cGlyYXRpb25UaW1lPD1lJiYoYS5leHBpcmF0aW9uVGltZT0wKSxzYShhLGIsZSk7Yi5lZmZlY3RUYWd8PTE7VChhLGIsYyxlKTtyZXR1cm4gYi5jaGlsZH1mdW5jdGlvbiByaChhLGIsYyxkLGUpe2lmKE4oYykpe3ZhciBmPSEwO0JjKGIpfWVsc2UgZj0hMTtyYihiLGUpO2lmKG51bGw9PT1iLnN0YXRlTm9kZSludWxsIT09YSYmKGEuYWx0ZXJuYXRlPW51bGwsYi5hbHRlcm5hdGU9bnVsbCxiLmVmZmVjdFRhZ3w9MiksWWcoYixjLGQpLHBlKGIsYyxkLGUpLGQ9ITA7ZWxzZSBpZihudWxsPT09YSl7dmFyIGc9Yi5zdGF0ZU5vZGUsaD1iLm1lbW9pemVkUHJvcHM7Zy5wcm9wcz1oO3ZhciBtPWcuY29udGV4dCxuPWMuY29udGV4dFR5cGU7Im9iamVjdCI9PT10eXBlb2YgbiYmbnVsbCE9PW4/bj1XKG4pOihuPU4oYyk/UmE6Qi5jdXJyZW50LG49cGIoYixuKSk7dmFyIGw9Yy5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMsaz0iZnVuY3Rpb24iPT09CnR5cGVvZiBsfHwiZnVuY3Rpb24iPT09dHlwZW9mIGcuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGU7a3x8ImZ1bmN0aW9uIiE9PXR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJiYiZnVuY3Rpb24iIT09dHlwZW9mIGcuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc3x8KGghPT1kfHxtIT09bikmJlpnKGIsZyxkLG4pO0dhPSExO3ZhciBwPWIubWVtb2l6ZWRTdGF0ZTtnLnN0YXRlPXA7UWIoYixkLGcsZSk7bT1iLm1lbW9pemVkU3RhdGU7aCE9PWR8fHAhPT1tfHxHLmN1cnJlbnR8fEdhPygiZnVuY3Rpb24iPT09dHlwZW9mIGwmJihMYyhiLGMsbCxkKSxtPWIubWVtb2l6ZWRTdGF0ZSksKGg9R2F8fFhnKGIsYyxoLGQscCxtLG4pKT8oa3x8ImZ1bmN0aW9uIiE9PXR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQmJiJmdW5jdGlvbiIhPT10eXBlb2YgZy5jb21wb25lbnRXaWxsTW91bnR8fCgiZnVuY3Rpb24iPT09dHlwZW9mIGcuY29tcG9uZW50V2lsbE1vdW50JiYKZy5jb21wb25lbnRXaWxsTW91bnQoKSwiZnVuY3Rpb24iPT09dHlwZW9mIGcuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCYmZy5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkpLCJmdW5jdGlvbiI9PT10eXBlb2YgZy5jb21wb25lbnREaWRNb3VudCYmKGIuZWZmZWN0VGFnfD00KSk6KCJmdW5jdGlvbiI9PT10eXBlb2YgZy5jb21wb25lbnREaWRNb3VudCYmKGIuZWZmZWN0VGFnfD00KSxiLm1lbW9pemVkUHJvcHM9ZCxiLm1lbW9pemVkU3RhdGU9bSksZy5wcm9wcz1kLGcuc3RhdGU9bSxnLmNvbnRleHQ9bixkPWgpOigiZnVuY3Rpb24iPT09dHlwZW9mIGcuY29tcG9uZW50RGlkTW91bnQmJihiLmVmZmVjdFRhZ3w9NCksZD0hMSl9ZWxzZSBnPWIuc3RhdGVOb2RlLG9lKGEsYiksaD1iLm1lbW9pemVkUHJvcHMsZy5wcm9wcz1iLnR5cGU9PT1iLmVsZW1lbnRUeXBlP2g6YWEoYi50eXBlLGgpLG09Zy5jb250ZXh0LG49Yy5jb250ZXh0VHlwZSwib2JqZWN0Ij09PXR5cGVvZiBuJiZudWxsIT09Cm4/bj1XKG4pOihuPU4oYyk/UmE6Qi5jdXJyZW50LG49cGIoYixuKSksbD1jLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcywoaz0iZnVuY3Rpb24iPT09dHlwZW9mIGx8fCJmdW5jdGlvbiI9PT10eXBlb2YgZy5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSl8fCJmdW5jdGlvbiIhPT10eXBlb2YgZy5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyYmImZ1bmN0aW9uIiE9PXR5cGVvZiBnLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHN8fChoIT09ZHx8bSE9PW4pJiZaZyhiLGcsZCxuKSxHYT0hMSxtPWIubWVtb2l6ZWRTdGF0ZSxnLnN0YXRlPW0sUWIoYixkLGcsZSkscD1iLm1lbW9pemVkU3RhdGUsaCE9PWR8fG0hPT1wfHxHLmN1cnJlbnR8fEdhPygiZnVuY3Rpb24iPT09dHlwZW9mIGwmJihMYyhiLGMsbCxkKSxwPWIubWVtb2l6ZWRTdGF0ZSksKGw9R2F8fFhnKGIsYyxoLGQsbSxwLG4pKT8oa3x8ImZ1bmN0aW9uIiE9PXR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlJiYKImZ1bmN0aW9uIiE9PXR5cGVvZiBnLmNvbXBvbmVudFdpbGxVcGRhdGV8fCgiZnVuY3Rpb24iPT09dHlwZW9mIGcuY29tcG9uZW50V2lsbFVwZGF0ZSYmZy5jb21wb25lbnRXaWxsVXBkYXRlKGQscCxuKSwiZnVuY3Rpb24iPT09dHlwZW9mIGcuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUmJmcuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUoZCxwLG4pKSwiZnVuY3Rpb24iPT09dHlwZW9mIGcuY29tcG9uZW50RGlkVXBkYXRlJiYoYi5lZmZlY3RUYWd8PTQpLCJmdW5jdGlvbiI9PT10eXBlb2YgZy5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSYmKGIuZWZmZWN0VGFnfD0yNTYpKTooImZ1bmN0aW9uIiE9PXR5cGVvZiBnLmNvbXBvbmVudERpZFVwZGF0ZXx8aD09PWEubWVtb2l6ZWRQcm9wcyYmbT09PWEubWVtb2l6ZWRTdGF0ZXx8KGIuZWZmZWN0VGFnfD00KSwiZnVuY3Rpb24iIT09dHlwZW9mIGcuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGV8fGg9PT1hLm1lbW9pemVkUHJvcHMmJm09PT0KYS5tZW1vaXplZFN0YXRlfHwoYi5lZmZlY3RUYWd8PTI1NiksYi5tZW1vaXplZFByb3BzPWQsYi5tZW1vaXplZFN0YXRlPXApLGcucHJvcHM9ZCxnLnN0YXRlPXAsZy5jb250ZXh0PW4sZD1sKTooImZ1bmN0aW9uIiE9PXR5cGVvZiBnLmNvbXBvbmVudERpZFVwZGF0ZXx8aD09PWEubWVtb2l6ZWRQcm9wcyYmbT09PWEubWVtb2l6ZWRTdGF0ZXx8KGIuZWZmZWN0VGFnfD00KSwiZnVuY3Rpb24iIT09dHlwZW9mIGcuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGV8fGg9PT1hLm1lbW9pemVkUHJvcHMmJm09PT1hLm1lbW9pemVkU3RhdGV8fChiLmVmZmVjdFRhZ3w9MjU2KSxkPSExKTtyZXR1cm4gSWUoYSxiLGMsZCxmLGUpfWZ1bmN0aW9uIEllKGEsYixjLGQsZSxmKXtxaChhLGIpO3ZhciBnPTAhPT0oYi5lZmZlY3RUYWcmNjQpO2lmKCFkJiYhZylyZXR1cm4gZSYmSGcoYixjLCExKSxzYShhLGIsZik7ZD1iLnN0YXRlTm9kZTtnai5jdXJyZW50PWI7dmFyIGg9ZyYmImZ1bmN0aW9uIiE9PXR5cGVvZiBjLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcj8KbnVsbDpkLnJlbmRlcigpO2IuZWZmZWN0VGFnfD0xO251bGwhPT1hJiZnPyhiLmNoaWxkPXdiKGIsYS5jaGlsZCxudWxsLGYpLGIuY2hpbGQ9d2IoYixudWxsLGgsZikpOlQoYSxiLGgsZik7Yi5tZW1vaXplZFN0YXRlPWQuc3RhdGU7ZSYmSGcoYixjLCEwKTtyZXR1cm4gYi5jaGlsZH1mdW5jdGlvbiBzaChhKXt2YXIgYj1hLnN0YXRlTm9kZTtiLnBlbmRpbmdDb250ZXh0P0ZnKGEsYi5wZW5kaW5nQ29udGV4dCxiLnBlbmRpbmdDb250ZXh0IT09Yi5jb250ZXh0KTpiLmNvbnRleHQmJkZnKGEsYi5jb250ZXh0LCExKTtzZShhLGIuY29udGFpbmVySW5mbyl9ZnVuY3Rpb24gdGgoYSxiLGMpe3ZhciBkPWIubW9kZSxlPWIucGVuZGluZ1Byb3BzLGY9RC5jdXJyZW50LGc9ITEsaDsoaD0wIT09KGIuZWZmZWN0VGFnJjY0KSl8fChoPTAhPT0oZiYyKSYmKG51bGw9PT1hfHxudWxsIT09YS5tZW1vaXplZFN0YXRlKSk7aD8oZz0hMCxiLmVmZmVjdFRhZyY9LTY1KTpudWxsIT09YSYmbnVsbD09PQphLm1lbW9pemVkU3RhdGV8fHZvaWQgMD09PWUuZmFsbGJhY2t8fCEwPT09ZS51bnN0YWJsZV9hdm9pZFRoaXNGYWxsYmFja3x8KGZ8PTEpO3koRCxmJjEpO2lmKG51bGw9PT1hKXt2b2lkIDAhPT1lLmZhbGxiYWNrJiZEZShiKTtpZihnKXtnPWUuZmFsbGJhY2s7ZT1IYShudWxsLGQsMCxudWxsKTtlLnJldHVybj1iO2lmKDA9PT0oYi5tb2RlJjIpKWZvcihhPW51bGwhPT1iLm1lbW9pemVkU3RhdGU/Yi5jaGlsZC5jaGlsZDpiLmNoaWxkLGUuY2hpbGQ9YTtudWxsIT09YTspYS5yZXR1cm49ZSxhPWEuc2libGluZztjPUhhKGcsZCxjLG51bGwpO2MucmV0dXJuPWI7ZS5zaWJsaW5nPWM7Yi5tZW1vaXplZFN0YXRlPUplO2IuY2hpbGQ9ZTtyZXR1cm4gY31kPWUuY2hpbGRyZW47Yi5tZW1vaXplZFN0YXRlPW51bGw7cmV0dXJuIGIuY2hpbGQ9RmUoYixudWxsLGQsYyl9aWYobnVsbCE9PWEubWVtb2l6ZWRTdGF0ZSl7YT1hLmNoaWxkO2Q9YS5zaWJsaW5nO2lmKGcpe2U9ZS5mYWxsYmFjazsKYz1TYShhLGEucGVuZGluZ1Byb3BzKTtjLnJldHVybj1iO2lmKDA9PT0oYi5tb2RlJjIpJiYoZz1udWxsIT09Yi5tZW1vaXplZFN0YXRlP2IuY2hpbGQuY2hpbGQ6Yi5jaGlsZCxnIT09YS5jaGlsZCkpZm9yKGMuY2hpbGQ9ZztudWxsIT09ZzspZy5yZXR1cm49YyxnPWcuc2libGluZztkPVNhKGQsZSk7ZC5yZXR1cm49YjtjLnNpYmxpbmc9ZDtjLmNoaWxkRXhwaXJhdGlvblRpbWU9MDtiLm1lbW9pemVkU3RhdGU9SmU7Yi5jaGlsZD1jO3JldHVybiBkfWM9d2IoYixhLmNoaWxkLGUuY2hpbGRyZW4sYyk7Yi5tZW1vaXplZFN0YXRlPW51bGw7cmV0dXJuIGIuY2hpbGQ9Y31hPWEuY2hpbGQ7aWYoZyl7Zz1lLmZhbGxiYWNrO2U9SGEobnVsbCxkLDAsbnVsbCk7ZS5yZXR1cm49YjtlLmNoaWxkPWE7bnVsbCE9PWEmJihhLnJldHVybj1lKTtpZigwPT09KGIubW9kZSYyKSlmb3IoYT1udWxsIT09Yi5tZW1vaXplZFN0YXRlP2IuY2hpbGQuY2hpbGQ6Yi5jaGlsZCxlLmNoaWxkPWE7bnVsbCE9PQphOylhLnJldHVybj1lLGE9YS5zaWJsaW5nO2M9SGEoZyxkLGMsbnVsbCk7Yy5yZXR1cm49YjtlLnNpYmxpbmc9YztjLmVmZmVjdFRhZ3w9MjtlLmNoaWxkRXhwaXJhdGlvblRpbWU9MDtiLm1lbW9pemVkU3RhdGU9SmU7Yi5jaGlsZD1lO3JldHVybiBjfWIubWVtb2l6ZWRTdGF0ZT1udWxsO3JldHVybiBiLmNoaWxkPXdiKGIsYSxlLmNoaWxkcmVuLGMpfWZ1bmN0aW9uIHVoKGEsYil7YS5leHBpcmF0aW9uVGltZTxiJiYoYS5leHBpcmF0aW9uVGltZT1iKTt2YXIgYz1hLmFsdGVybmF0ZTtudWxsIT09YyYmYy5leHBpcmF0aW9uVGltZTxiJiYoYy5leHBpcmF0aW9uVGltZT1iKTtTZyhhLnJldHVybixiKX1mdW5jdGlvbiBLZShhLGIsYyxkLGUsZil7dmFyIGc9YS5tZW1vaXplZFN0YXRlO251bGw9PT1nP2EubWVtb2l6ZWRTdGF0ZT17aXNCYWNrd2FyZHM6YixyZW5kZXJpbmc6bnVsbCxyZW5kZXJpbmdTdGFydFRpbWU6MCxsYXN0OmQsdGFpbDpjLHRhaWxFeHBpcmF0aW9uOjAsdGFpbE1vZGU6ZSwKbGFzdEVmZmVjdDpmfTooZy5pc0JhY2t3YXJkcz1iLGcucmVuZGVyaW5nPW51bGwsZy5yZW5kZXJpbmdTdGFydFRpbWU9MCxnLmxhc3Q9ZCxnLnRhaWw9YyxnLnRhaWxFeHBpcmF0aW9uPTAsZy50YWlsTW9kZT1lLGcubGFzdEVmZmVjdD1mKX1mdW5jdGlvbiB2aChhLGIsYyl7dmFyIGQ9Yi5wZW5kaW5nUHJvcHMsZT1kLnJldmVhbE9yZGVyLGY9ZC50YWlsO1QoYSxiLGQuY2hpbGRyZW4sYyk7ZD1ELmN1cnJlbnQ7aWYoMCE9PShkJjIpKWQ9ZCYxfDIsYi5lZmZlY3RUYWd8PTY0O2Vsc2V7aWYobnVsbCE9PWEmJjAhPT0oYS5lZmZlY3RUYWcmNjQpKWE6Zm9yKGE9Yi5jaGlsZDtudWxsIT09YTspe2lmKDEzPT09YS50YWcpbnVsbCE9PWEubWVtb2l6ZWRTdGF0ZSYmdWgoYSxjKTtlbHNlIGlmKDE5PT09YS50YWcpdWgoYSxjKTtlbHNlIGlmKG51bGwhPT1hLmNoaWxkKXthLmNoaWxkLnJldHVybj1hO2E9YS5jaGlsZDtjb250aW51ZX1pZihhPT09YilicmVhayBhO2Zvcig7bnVsbD09PWEuc2libGluZzspe2lmKG51bGw9PT0KYS5yZXR1cm58fGEucmV0dXJuPT09YilicmVhayBhO2E9YS5yZXR1cm59YS5zaWJsaW5nLnJldHVybj1hLnJldHVybjthPWEuc2libGluZ31kJj0xfXkoRCxkKTtpZigwPT09KGIubW9kZSYyKSliLm1lbW9pemVkU3RhdGU9bnVsbDtlbHNlIHN3aXRjaChlKXtjYXNlICJmb3J3YXJkcyI6Yz1iLmNoaWxkO2ZvcihlPW51bGw7bnVsbCE9PWM7KWE9Yy5hbHRlcm5hdGUsbnVsbCE9PWEmJm51bGw9PT1SYyhhKSYmKGU9YyksYz1jLnNpYmxpbmc7Yz1lO251bGw9PT1jPyhlPWIuY2hpbGQsYi5jaGlsZD1udWxsKTooZT1jLnNpYmxpbmcsYy5zaWJsaW5nPW51bGwpO0tlKGIsITEsZSxjLGYsYi5sYXN0RWZmZWN0KTticmVhaztjYXNlICJiYWNrd2FyZHMiOmM9bnVsbDtlPWIuY2hpbGQ7Zm9yKGIuY2hpbGQ9bnVsbDtudWxsIT09ZTspe2E9ZS5hbHRlcm5hdGU7aWYobnVsbCE9PWEmJm51bGw9PT1SYyhhKSl7Yi5jaGlsZD1lO2JyZWFrfWE9ZS5zaWJsaW5nO2Uuc2libGluZz1jO2M9ZTtlPWF9S2UoYiwKITAsYyxudWxsLGYsYi5sYXN0RWZmZWN0KTticmVhaztjYXNlICJ0b2dldGhlciI6S2UoYiwhMSxudWxsLG51bGwsdm9pZCAwLGIubGFzdEVmZmVjdCk7YnJlYWs7ZGVmYXVsdDpiLm1lbW9pemVkU3RhdGU9bnVsbH1yZXR1cm4gYi5jaGlsZH1mdW5jdGlvbiBzYShhLGIsYyl7bnVsbCE9PWEmJihiLmRlcGVuZGVuY2llcz1hLmRlcGVuZGVuY2llcyk7dmFyIGQ9Yi5leHBpcmF0aW9uVGltZTswIT09ZCYmS2MoZCk7aWYoYi5jaGlsZEV4cGlyYXRpb25UaW1lPGMpcmV0dXJuIG51bGw7aWYobnVsbCE9PWEmJmIuY2hpbGQhPT1hLmNoaWxkKXRocm93IEVycm9yKGsoMTUzKSk7aWYobnVsbCE9PWIuY2hpbGQpe2E9Yi5jaGlsZDtjPVNhKGEsYS5wZW5kaW5nUHJvcHMpO2IuY2hpbGQ9Yztmb3IoYy5yZXR1cm49YjtudWxsIT09YS5zaWJsaW5nOylhPWEuc2libGluZyxjPWMuc2libGluZz1TYShhLGEucGVuZGluZ1Byb3BzKSxjLnJldHVybj1iO2Muc2libGluZz1udWxsfXJldHVybiBiLmNoaWxkfQpmdW5jdGlvbiAkYyhhLGIpe3N3aXRjaChhLnRhaWxNb2RlKXtjYXNlICJoaWRkZW4iOmI9YS50YWlsO2Zvcih2YXIgYz1udWxsO251bGwhPT1iOyludWxsIT09Yi5hbHRlcm5hdGUmJihjPWIpLGI9Yi5zaWJsaW5nO251bGw9PT1jP2EudGFpbD1udWxsOmMuc2libGluZz1udWxsO2JyZWFrO2Nhc2UgImNvbGxhcHNlZCI6Yz1hLnRhaWw7Zm9yKHZhciBkPW51bGw7bnVsbCE9PWM7KW51bGwhPT1jLmFsdGVybmF0ZSYmKGQ9YyksYz1jLnNpYmxpbmc7bnVsbD09PWQ/Ynx8bnVsbD09PWEudGFpbD9hLnRhaWw9bnVsbDphLnRhaWwuc2libGluZz1udWxsOmQuc2libGluZz1udWxsfX1mdW5jdGlvbiBoaihhLGIsYyl7dmFyIGQ9Yi5wZW5kaW5nUHJvcHM7c3dpdGNoKGIudGFnKXtjYXNlIDI6Y2FzZSAxNjpjYXNlIDE1OmNhc2UgMDpjYXNlIDExOmNhc2UgNzpjYXNlIDg6Y2FzZSAxMjpjYXNlIDk6Y2FzZSAxNDpyZXR1cm4gbnVsbDtjYXNlIDE6cmV0dXJuIE4oYi50eXBlKSYmKHEoRykscShCKSksCm51bGw7Y2FzZSAzOnJldHVybiB0YigpLHEoRykscShCKSxjPWIuc3RhdGVOb2RlLGMucGVuZGluZ0NvbnRleHQmJihjLmNvbnRleHQ9Yy5wZW5kaW5nQ29udGV4dCxjLnBlbmRpbmdDb250ZXh0PW51bGwpLG51bGwhPT1hJiZudWxsIT09YS5jaGlsZHx8IVpjKGIpfHwoYi5lZmZlY3RUYWd8PTQpLHdoKGIpLG51bGw7Y2FzZSA1OnRlKGIpO2M9VGEoVGIuY3VycmVudCk7dmFyIGU9Yi50eXBlO2lmKG51bGwhPT1hJiZudWxsIT1iLnN0YXRlTm9kZSlpaihhLGIsZSxkLGMpLGEucmVmIT09Yi5yZWYmJihiLmVmZmVjdFRhZ3w9MTI4KTtlbHNle2lmKCFkKXtpZihudWxsPT09Yi5zdGF0ZU5vZGUpdGhyb3cgRXJyb3IoaygxNjYpKTtyZXR1cm4gbnVsbH1hPVRhKGphLmN1cnJlbnQpO2lmKFpjKGIpKXtkPWIuc3RhdGVOb2RlO2U9Yi50eXBlO3ZhciBmPWIubWVtb2l6ZWRQcm9wcztkW0FhXT1iO2RbdmNdPWY7c3dpdGNoKGUpe2Nhc2UgImlmcmFtZSI6Y2FzZSAib2JqZWN0IjpjYXNlICJlbWJlZCI6dygibG9hZCIsCmQpO2JyZWFrO2Nhc2UgInZpZGVvIjpjYXNlICJhdWRpbyI6Zm9yKGE9MDthPERiLmxlbmd0aDthKyspdyhEYlthXSxkKTticmVhaztjYXNlICJzb3VyY2UiOncoImVycm9yIixkKTticmVhaztjYXNlICJpbWciOmNhc2UgImltYWdlIjpjYXNlICJsaW5rIjp3KCJlcnJvciIsZCk7dygibG9hZCIsZCk7YnJlYWs7Y2FzZSAiZm9ybSI6dygicmVzZXQiLGQpO3coInN1Ym1pdCIsZCk7YnJlYWs7Y2FzZSAiZGV0YWlscyI6dygidG9nZ2xlIixkKTticmVhaztjYXNlICJpbnB1dCI6SGYoZCxmKTt3KCJpbnZhbGlkIixkKTtvYShjLCJvbkNoYW5nZSIpO2JyZWFrO2Nhc2UgInNlbGVjdCI6ZC5fd3JhcHBlclN0YXRlPXt3YXNNdWx0aXBsZTohIWYubXVsdGlwbGV9O3coImludmFsaWQiLGQpO29hKGMsIm9uQ2hhbmdlIik7YnJlYWs7Y2FzZSAidGV4dGFyZWEiOktmKGQsZiksdygiaW52YWxpZCIsZCksb2EoYywib25DaGFuZ2UiKX1VZChlLGYpO2E9bnVsbDtmb3IodmFyIGcgaW4gZilpZihmLmhhc093blByb3BlcnR5KGcpKXt2YXIgaD0KZltnXTsiY2hpbGRyZW4iPT09Zz8ic3RyaW5nIj09PXR5cGVvZiBoP2QudGV4dENvbnRlbnQhPT1oJiYoYT1bImNoaWxkcmVuIixoXSk6Im51bWJlciI9PT10eXBlb2YgaCYmZC50ZXh0Q29udGVudCE9PSIiK2gmJihhPVsiY2hpbGRyZW4iLCIiK2hdKTpkYi5oYXNPd25Qcm9wZXJ0eShnKSYmbnVsbCE9aCYmb2EoYyxnKX1zd2l0Y2goZSl7Y2FzZSAiaW5wdXQiOm1jKGQpO0pmKGQsZiwhMCk7YnJlYWs7Y2FzZSAidGV4dGFyZWEiOm1jKGQpO01mKGQpO2JyZWFrO2Nhc2UgInNlbGVjdCI6Y2FzZSAib3B0aW9uIjpicmVhaztkZWZhdWx0OiJmdW5jdGlvbiI9PT10eXBlb2YgZi5vbkNsaWNrJiYoZC5vbmNsaWNrPXVjKX1jPWE7Yi51cGRhdGVRdWV1ZT1jO251bGwhPT1jJiYoYi5lZmZlY3RUYWd8PTQpfWVsc2V7Zz05PT09Yy5ub2RlVHlwZT9jOmMub3duZXJEb2N1bWVudDsiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PT1hJiYoYT1OZihlKSk7Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPT09CmE/InNjcmlwdCI9PT1lPyhhPWcuY3JlYXRlRWxlbWVudCgiZGl2IiksYS5pbm5lckhUTUw9IjxzY3JpcHQ+XHgzYy9zY3JpcHQ+IixhPWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKSk6InN0cmluZyI9PT10eXBlb2YgZC5pcz9hPWcuY3JlYXRlRWxlbWVudChlLHtpczpkLmlzfSk6KGE9Zy5jcmVhdGVFbGVtZW50KGUpLCJzZWxlY3QiPT09ZSYmKGc9YSxkLm11bHRpcGxlP2cubXVsdGlwbGU9ITA6ZC5zaXplJiYoZy5zaXplPWQuc2l6ZSkpKTphPWcuY3JlYXRlRWxlbWVudE5TKGEsZSk7YVtBYV09YjthW3ZjXT1kO2pqKGEsYiwhMSwhMSk7Yi5zdGF0ZU5vZGU9YTtnPVZkKGUsZCk7c3dpdGNoKGUpe2Nhc2UgImlmcmFtZSI6Y2FzZSAib2JqZWN0IjpjYXNlICJlbWJlZCI6dygibG9hZCIsYSk7aD1kO2JyZWFrO2Nhc2UgInZpZGVvIjpjYXNlICJhdWRpbyI6Zm9yKGg9MDtoPERiLmxlbmd0aDtoKyspdyhEYltoXSxhKTtoPWQ7YnJlYWs7Y2FzZSAic291cmNlIjp3KCJlcnJvciIsYSk7Cmg9ZDticmVhaztjYXNlICJpbWciOmNhc2UgImltYWdlIjpjYXNlICJsaW5rIjp3KCJlcnJvciIsYSk7dygibG9hZCIsYSk7aD1kO2JyZWFrO2Nhc2UgImZvcm0iOncoInJlc2V0IixhKTt3KCJzdWJtaXQiLGEpO2g9ZDticmVhaztjYXNlICJkZXRhaWxzIjp3KCJ0b2dnbGUiLGEpO2g9ZDticmVhaztjYXNlICJpbnB1dCI6SGYoYSxkKTtoPUNkKGEsZCk7dygiaW52YWxpZCIsYSk7b2EoYywib25DaGFuZ2UiKTticmVhaztjYXNlICJvcHRpb24iOmg9RmQoYSxkKTticmVhaztjYXNlICJzZWxlY3QiOmEuX3dyYXBwZXJTdGF0ZT17d2FzTXVsdGlwbGU6ISFkLm11bHRpcGxlfTtoPU0oe30sZCx7dmFsdWU6dm9pZCAwfSk7dygiaW52YWxpZCIsYSk7b2EoYywib25DaGFuZ2UiKTticmVhaztjYXNlICJ0ZXh0YXJlYSI6S2YoYSxkKTtoPUdkKGEsZCk7dygiaW52YWxpZCIsYSk7b2EoYywib25DaGFuZ2UiKTticmVhaztkZWZhdWx0Omg9ZH1VZChlLGgpO3ZhciBtPWg7Zm9yKGYgaW4gbSlpZihtLmhhc093blByb3BlcnR5KGYpKXt2YXIgbj0KbVtmXTsic3R5bGUiPT09Zj9nZyhhLG4pOiJkYW5nZXJvdXNseVNldElubmVySFRNTCI9PT1mPyhuPW4/bi5fX2h0bWw6dm9pZCAwLG51bGwhPW4mJnhoKGEsbikpOiJjaGlsZHJlbiI9PT1mPyJzdHJpbmciPT09dHlwZW9mIG4/KCJ0ZXh0YXJlYSIhPT1lfHwiIiE9PW4pJiZXYihhLG4pOiJudW1iZXIiPT09dHlwZW9mIG4mJldiKGEsIiIrbik6InN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIhPT1mJiYic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiE9PWYmJiJhdXRvRm9jdXMiIT09ZiYmKGRiLmhhc093blByb3BlcnR5KGYpP251bGwhPW4mJm9hKGMsZik6bnVsbCE9biYmeGQoYSxmLG4sZykpfXN3aXRjaChlKXtjYXNlICJpbnB1dCI6bWMoYSk7SmYoYSxkLCExKTticmVhaztjYXNlICJ0ZXh0YXJlYSI6bWMoYSk7TWYoYSk7YnJlYWs7Y2FzZSAib3B0aW9uIjpudWxsIT1kLnZhbHVlJiZhLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiK3ZhKGQudmFsdWUpKTticmVhaztjYXNlICJzZWxlY3QiOmEubXVsdGlwbGU9CiEhZC5tdWx0aXBsZTtjPWQudmFsdWU7bnVsbCE9Yz9oYihhLCEhZC5tdWx0aXBsZSxjLCExKTpudWxsIT1kLmRlZmF1bHRWYWx1ZSYmaGIoYSwhIWQubXVsdGlwbGUsZC5kZWZhdWx0VmFsdWUsITApO2JyZWFrO2RlZmF1bHQ6ImZ1bmN0aW9uIj09PXR5cGVvZiBoLm9uQ2xpY2smJihhLm9uY2xpY2s9dWMpfWxnKGUsZCkmJihiLmVmZmVjdFRhZ3w9NCl9bnVsbCE9PWIucmVmJiYoYi5lZmZlY3RUYWd8PTEyOCl9cmV0dXJuIG51bGw7Y2FzZSA2OmlmKGEmJm51bGwhPWIuc3RhdGVOb2RlKWtqKGEsYixhLm1lbW9pemVkUHJvcHMsZCk7ZWxzZXtpZigic3RyaW5nIiE9PXR5cGVvZiBkJiZudWxsPT09Yi5zdGF0ZU5vZGUpdGhyb3cgRXJyb3IoaygxNjYpKTtjPVRhKFRiLmN1cnJlbnQpO1RhKGphLmN1cnJlbnQpO1pjKGIpPyhjPWIuc3RhdGVOb2RlLGQ9Yi5tZW1vaXplZFByb3BzLGNbQWFdPWIsYy5ub2RlVmFsdWUhPT1kJiYoYi5lZmZlY3RUYWd8PTQpKTooYz0oOT09PWMubm9kZVR5cGU/CmM6Yy5vd25lckRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZShkKSxjW0FhXT1iLGIuc3RhdGVOb2RlPWMpfXJldHVybiBudWxsO2Nhc2UgMTM6cShEKTtkPWIubWVtb2l6ZWRTdGF0ZTtpZigwIT09KGIuZWZmZWN0VGFnJjY0KSlyZXR1cm4gYi5leHBpcmF0aW9uVGltZT1jLGI7Yz1udWxsIT09ZDtkPSExO251bGw9PT1hP3ZvaWQgMCE9PWIubWVtb2l6ZWRQcm9wcy5mYWxsYmFjayYmWmMoYik6KGU9YS5tZW1vaXplZFN0YXRlLGQ9bnVsbCE9PWUsY3x8bnVsbD09PWV8fChlPWEuY2hpbGQuc2libGluZyxudWxsIT09ZSYmKGY9Yi5maXJzdEVmZmVjdCxudWxsIT09Zj8oYi5maXJzdEVmZmVjdD1lLGUubmV4dEVmZmVjdD1mKTooYi5maXJzdEVmZmVjdD1iLmxhc3RFZmZlY3Q9ZSxlLm5leHRFZmZlY3Q9bnVsbCksZS5lZmZlY3RUYWc9OCkpKTtpZihjJiYhZCYmMCE9PShiLm1vZGUmMikpaWYobnVsbD09PWEmJiEwIT09Yi5tZW1vaXplZFByb3BzLnVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrfHwKMCE9PShELmN1cnJlbnQmMSkpRj09PVhhJiYoRj1hZCk7ZWxzZXtpZihGPT09WGF8fEY9PT1hZClGPWJkOzAhPT1YYiYmbnVsbCE9PVUmJihZYShVLFApLHloKFUsWGIpKX1pZihjfHxkKWIuZWZmZWN0VGFnfD00O3JldHVybiBudWxsO2Nhc2UgNDpyZXR1cm4gdGIoKSx3aChiKSxudWxsO2Nhc2UgMTA6cmV0dXJuIG1lKGIpLG51bGw7Y2FzZSAxNzpyZXR1cm4gTihiLnR5cGUpJiYocShHKSxxKEIpKSxudWxsO2Nhc2UgMTk6cShEKTtkPWIubWVtb2l6ZWRTdGF0ZTtpZihudWxsPT09ZClyZXR1cm4gbnVsbDtlPTAhPT0oYi5lZmZlY3RUYWcmNjQpO2Y9ZC5yZW5kZXJpbmc7aWYobnVsbD09PWYpaWYoZSkkYyhkLCExKTtlbHNle2lmKEYhPT1YYXx8bnVsbCE9PWEmJjAhPT0oYS5lZmZlY3RUYWcmNjQpKWZvcihmPWIuY2hpbGQ7bnVsbCE9PWY7KXthPVJjKGYpO2lmKG51bGwhPT1hKXtiLmVmZmVjdFRhZ3w9NjQ7JGMoZCwhMSk7ZT1hLnVwZGF0ZVF1ZXVlO251bGwhPT1lJiYoYi51cGRhdGVRdWV1ZT0KZSxiLmVmZmVjdFRhZ3w9NCk7bnVsbD09PWQubGFzdEVmZmVjdCYmKGIuZmlyc3RFZmZlY3Q9bnVsbCk7Yi5sYXN0RWZmZWN0PWQubGFzdEVmZmVjdDtmb3IoZD1iLmNoaWxkO251bGwhPT1kOyllPWQsZj1jLGUuZWZmZWN0VGFnJj0yLGUubmV4dEVmZmVjdD1udWxsLGUuZmlyc3RFZmZlY3Q9bnVsbCxlLmxhc3RFZmZlY3Q9bnVsbCxhPWUuYWx0ZXJuYXRlLG51bGw9PT1hPyhlLmNoaWxkRXhwaXJhdGlvblRpbWU9MCxlLmV4cGlyYXRpb25UaW1lPWYsZS5jaGlsZD1udWxsLGUubWVtb2l6ZWRQcm9wcz1udWxsLGUubWVtb2l6ZWRTdGF0ZT1udWxsLGUudXBkYXRlUXVldWU9bnVsbCxlLmRlcGVuZGVuY2llcz1udWxsKTooZS5jaGlsZEV4cGlyYXRpb25UaW1lPWEuY2hpbGRFeHBpcmF0aW9uVGltZSxlLmV4cGlyYXRpb25UaW1lPWEuZXhwaXJhdGlvblRpbWUsZS5jaGlsZD1hLmNoaWxkLGUubWVtb2l6ZWRQcm9wcz1hLm1lbW9pemVkUHJvcHMsZS5tZW1vaXplZFN0YXRlPWEubWVtb2l6ZWRTdGF0ZSwKZS51cGRhdGVRdWV1ZT1hLnVwZGF0ZVF1ZXVlLGY9YS5kZXBlbmRlbmNpZXMsZS5kZXBlbmRlbmNpZXM9bnVsbD09PWY/bnVsbDp7ZXhwaXJhdGlvblRpbWU6Zi5leHBpcmF0aW9uVGltZSxmaXJzdENvbnRleHQ6Zi5maXJzdENvbnRleHQscmVzcG9uZGVyczpmLnJlc3BvbmRlcnN9KSxkPWQuc2libGluZzt5KEQsRC5jdXJyZW50JjF8Mik7cmV0dXJuIGIuY2hpbGR9Zj1mLnNpYmxpbmd9fWVsc2V7aWYoIWUpaWYoYT1SYyhmKSxudWxsIT09YSl7aWYoYi5lZmZlY3RUYWd8PTY0LGU9ITAsYz1hLnVwZGF0ZVF1ZXVlLG51bGwhPT1jJiYoYi51cGRhdGVRdWV1ZT1jLGIuZWZmZWN0VGFnfD00KSwkYyhkLCEwKSxudWxsPT09ZC50YWlsJiYiaGlkZGVuIj09PWQudGFpbE1vZGUmJiFmLmFsdGVybmF0ZSlyZXR1cm4gYj1iLmxhc3RFZmZlY3Q9ZC5sYXN0RWZmZWN0LG51bGwhPT1iJiYoYi5uZXh0RWZmZWN0PW51bGwpLG51bGx9ZWxzZSAyKlkoKS1kLnJlbmRlcmluZ1N0YXJ0VGltZT5kLnRhaWxFeHBpcmF0aW9uJiYKMTxjJiYoYi5lZmZlY3RUYWd8PTY0LGU9ITAsJGMoZCwhMSksYi5leHBpcmF0aW9uVGltZT1iLmNoaWxkRXhwaXJhdGlvblRpbWU9Yy0xKTtkLmlzQmFja3dhcmRzPyhmLnNpYmxpbmc9Yi5jaGlsZCxiLmNoaWxkPWYpOihjPWQubGFzdCxudWxsIT09Yz9jLnNpYmxpbmc9ZjpiLmNoaWxkPWYsZC5sYXN0PWYpfXJldHVybiBudWxsIT09ZC50YWlsPygwPT09ZC50YWlsRXhwaXJhdGlvbiYmKGQudGFpbEV4cGlyYXRpb249WSgpKzUwMCksYz1kLnRhaWwsZC5yZW5kZXJpbmc9YyxkLnRhaWw9Yy5zaWJsaW5nLGQubGFzdEVmZmVjdD1iLmxhc3RFZmZlY3QsZC5yZW5kZXJpbmdTdGFydFRpbWU9WSgpLGMuc2libGluZz1udWxsLGI9RC5jdXJyZW50LHkoRCxlP2ImMXwyOmImMSksYyk6bnVsbH10aHJvdyBFcnJvcihrKDE1NixiLnRhZykpO31mdW5jdGlvbiBsaihhLGIpe3N3aXRjaChhLnRhZyl7Y2FzZSAxOnJldHVybiBOKGEudHlwZSkmJihxKEcpLHEoQikpLGI9YS5lZmZlY3RUYWcsYiY0MDk2PwooYS5lZmZlY3RUYWc9YiYtNDA5N3w2NCxhKTpudWxsO2Nhc2UgMzp0YigpO3EoRyk7cShCKTtiPWEuZWZmZWN0VGFnO2lmKDAhPT0oYiY2NCkpdGhyb3cgRXJyb3IoaygyODUpKTthLmVmZmVjdFRhZz1iJi00MDk3fDY0O3JldHVybiBhO2Nhc2UgNTpyZXR1cm4gdGUoYSksbnVsbDtjYXNlIDEzOnJldHVybiBxKEQpLGI9YS5lZmZlY3RUYWcsYiY0MDk2PyhhLmVmZmVjdFRhZz1iJi00MDk3fDY0LGEpOm51bGw7Y2FzZSAxOTpyZXR1cm4gcShEKSxudWxsO2Nhc2UgNDpyZXR1cm4gdGIoKSxudWxsO2Nhc2UgMTA6cmV0dXJuIG1lKGEpLG51bGw7ZGVmYXVsdDpyZXR1cm4gbnVsbH19ZnVuY3Rpb24gTGUoYSxiKXtyZXR1cm57dmFsdWU6YSxzb3VyY2U6YixzdGFjazpCZChiKX19ZnVuY3Rpb24gTWUoYSxiKXt2YXIgYz1iLnNvdXJjZSxkPWIuc3RhY2s7bnVsbD09PWQmJm51bGwhPT1jJiYoZD1CZChjKSk7bnVsbCE9PWMmJm5hKGMudHlwZSk7Yj1iLnZhbHVlO251bGwhPT1hJiYxPT09YS50YWcmJgpuYShhLnR5cGUpO3RyeXtjb25zb2xlLmVycm9yKGIpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlO30pfX1mdW5jdGlvbiBtaihhLGIpe3RyeXtiLnByb3BzPWEubWVtb2l6ZWRQcm9wcyxiLnN0YXRlPWEubWVtb2l6ZWRTdGF0ZSxiLmNvbXBvbmVudFdpbGxVbm1vdW50KCl9Y2F0Y2goYyl7WmEoYSxjKX19ZnVuY3Rpb24gemgoYSl7dmFyIGI9YS5yZWY7aWYobnVsbCE9PWIpaWYoImZ1bmN0aW9uIj09PXR5cGVvZiBiKXRyeXtiKG51bGwpfWNhdGNoKGMpe1phKGEsYyl9ZWxzZSBiLmN1cnJlbnQ9bnVsbH1mdW5jdGlvbiBuaihhLGIpe3N3aXRjaChiLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNTpjYXNlIDIyOnJldHVybjtjYXNlIDE6aWYoYi5lZmZlY3RUYWcmMjU2JiZudWxsIT09YSl7dmFyIGM9YS5tZW1vaXplZFByb3BzLGQ9YS5tZW1vaXplZFN0YXRlO2E9Yi5zdGF0ZU5vZGU7Yj1hLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKGIuZWxlbWVudFR5cGU9PT0KYi50eXBlP2M6YWEoYi50eXBlLGMpLGQpO2EuX19yZWFjdEludGVybmFsU25hcHNob3RCZWZvcmVVcGRhdGU9Yn1yZXR1cm47Y2FzZSAzOmNhc2UgNTpjYXNlIDY6Y2FzZSA0OmNhc2UgMTc6cmV0dXJufXRocm93IEVycm9yKGsoMTYzKSk7fWZ1bmN0aW9uIEFoKGEsYil7Yj1iLnVwZGF0ZVF1ZXVlO2I9bnVsbCE9PWI/Yi5sYXN0RWZmZWN0Om51bGw7aWYobnVsbCE9PWIpe3ZhciBjPWI9Yi5uZXh0O2Rve2lmKChjLnRhZyZhKT09PWEpe3ZhciBkPWMuZGVzdHJveTtjLmRlc3Ryb3k9dm9pZCAwO3ZvaWQgMCE9PWQmJmQoKX1jPWMubmV4dH13aGlsZShjIT09Yil9fWZ1bmN0aW9uIEJoKGEsYil7Yj1iLnVwZGF0ZVF1ZXVlO2I9bnVsbCE9PWI/Yi5sYXN0RWZmZWN0Om51bGw7aWYobnVsbCE9PWIpe3ZhciBjPWI9Yi5uZXh0O2Rve2lmKChjLnRhZyZhKT09PWEpe3ZhciBkPWMuY3JlYXRlO2MuZGVzdHJveT1kKCl9Yz1jLm5leHR9d2hpbGUoYyE9PWIpfX1mdW5jdGlvbiBvaihhLGIsYyxkKXtzd2l0Y2goYy50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTU6Y2FzZSAyMjpCaCgzLApjKTtyZXR1cm47Y2FzZSAxOmE9Yy5zdGF0ZU5vZGU7Yy5lZmZlY3RUYWcmNCYmKG51bGw9PT1iP2EuY29tcG9uZW50RGlkTW91bnQoKTooZD1jLmVsZW1lbnRUeXBlPT09Yy50eXBlP2IubWVtb2l6ZWRQcm9wczphYShjLnR5cGUsYi5tZW1vaXplZFByb3BzKSxhLmNvbXBvbmVudERpZFVwZGF0ZShkLGIubWVtb2l6ZWRTdGF0ZSxhLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90QmVmb3JlVXBkYXRlKSkpO2I9Yy51cGRhdGVRdWV1ZTtudWxsIT09YiYmV2coYyxiLGEpO3JldHVybjtjYXNlIDM6Yj1jLnVwZGF0ZVF1ZXVlO2lmKG51bGwhPT1iKXthPW51bGw7aWYobnVsbCE9PWMuY2hpbGQpc3dpdGNoKGMuY2hpbGQudGFnKXtjYXNlIDU6YT1jLmNoaWxkLnN0YXRlTm9kZTticmVhaztjYXNlIDE6YT1jLmNoaWxkLnN0YXRlTm9kZX1XZyhjLGIsYSl9cmV0dXJuO2Nhc2UgNTphPWMuc3RhdGVOb2RlO251bGw9PT1iJiZjLmVmZmVjdFRhZyY0JiZsZyhjLnR5cGUsYy5tZW1vaXplZFByb3BzKSYmCmEuZm9jdXMoKTtyZXR1cm47Y2FzZSA2OnJldHVybjtjYXNlIDQ6cmV0dXJuO2Nhc2UgMTI6cmV0dXJuO2Nhc2UgMTM6bnVsbD09PWMubWVtb2l6ZWRTdGF0ZSYmKGM9Yy5hbHRlcm5hdGUsbnVsbCE9PWMmJihjPWMubWVtb2l6ZWRTdGF0ZSxudWxsIT09YyYmKGM9Yy5kZWh5ZHJhdGVkLG51bGwhPT1jJiZiZyhjKSkpKTtyZXR1cm47Y2FzZSAxOTpjYXNlIDE3OmNhc2UgMjA6Y2FzZSAyMTpyZXR1cm59dGhyb3cgRXJyb3IoaygxNjMpKTt9ZnVuY3Rpb24gQ2goYSxiLGMpeyJmdW5jdGlvbiI9PT10eXBlb2YgTmUmJk5lKGIpO3N3aXRjaChiLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNDpjYXNlIDE1OmNhc2UgMjI6YT1iLnVwZGF0ZVF1ZXVlO2lmKG51bGwhPT1hJiYoYT1hLmxhc3RFZmZlY3QsbnVsbCE9PWEpKXt2YXIgZD1hLm5leHQ7RGEoOTc8Yz85NzpjLGZ1bmN0aW9uKCl7dmFyIGE9ZDtkb3t2YXIgYz1hLmRlc3Ryb3k7aWYodm9pZCAwIT09Yyl7dmFyIGc9Yjt0cnl7YygpfWNhdGNoKGgpe1phKGcsCmgpfX1hPWEubmV4dH13aGlsZShhIT09ZCl9KX1icmVhaztjYXNlIDE6emgoYik7Yz1iLnN0YXRlTm9kZTsiZnVuY3Rpb24iPT09dHlwZW9mIGMuY29tcG9uZW50V2lsbFVubW91bnQmJm1qKGIsYyk7YnJlYWs7Y2FzZSA1OnpoKGIpO2JyZWFrO2Nhc2UgNDpEaChhLGIsYyl9fWZ1bmN0aW9uIEVoKGEpe3ZhciBiPWEuYWx0ZXJuYXRlO2EucmV0dXJuPW51bGw7YS5jaGlsZD1udWxsO2EubWVtb2l6ZWRTdGF0ZT1udWxsO2EudXBkYXRlUXVldWU9bnVsbDthLmRlcGVuZGVuY2llcz1udWxsO2EuYWx0ZXJuYXRlPW51bGw7YS5maXJzdEVmZmVjdD1udWxsO2EubGFzdEVmZmVjdD1udWxsO2EucGVuZGluZ1Byb3BzPW51bGw7YS5tZW1vaXplZFByb3BzPW51bGw7YS5zdGF0ZU5vZGU9bnVsbDtudWxsIT09YiYmRWgoYil9ZnVuY3Rpb24gRmgoYSl7cmV0dXJuIDU9PT1hLnRhZ3x8Mz09PWEudGFnfHw0PT09YS50YWd9ZnVuY3Rpb24gR2goYSl7YTp7Zm9yKHZhciBiPWEucmV0dXJuO251bGwhPT0KYjspe2lmKEZoKGIpKXt2YXIgYz1iO2JyZWFrIGF9Yj1iLnJldHVybn10aHJvdyBFcnJvcihrKDE2MCkpO31iPWMuc3RhdGVOb2RlO3N3aXRjaChjLnRhZyl7Y2FzZSA1OnZhciBkPSExO2JyZWFrO2Nhc2UgMzpiPWIuY29udGFpbmVySW5mbztkPSEwO2JyZWFrO2Nhc2UgNDpiPWIuY29udGFpbmVySW5mbztkPSEwO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoaygxNjEpKTt9Yy5lZmZlY3RUYWcmMTYmJihXYihiLCIiKSxjLmVmZmVjdFRhZyY9LTE3KTthOmI6Zm9yKGM9YTs7KXtmb3IoO251bGw9PT1jLnNpYmxpbmc7KXtpZihudWxsPT09Yy5yZXR1cm58fEZoKGMucmV0dXJuKSl7Yz1udWxsO2JyZWFrIGF9Yz1jLnJldHVybn1jLnNpYmxpbmcucmV0dXJuPWMucmV0dXJuO2ZvcihjPWMuc2libGluZzs1IT09Yy50YWcmJjYhPT1jLnRhZyYmMTghPT1jLnRhZzspe2lmKGMuZWZmZWN0VGFnJjIpY29udGludWUgYjtpZihudWxsPT09Yy5jaGlsZHx8ND09PWMudGFnKWNvbnRpbnVlIGI7CmVsc2UgYy5jaGlsZC5yZXR1cm49YyxjPWMuY2hpbGR9aWYoIShjLmVmZmVjdFRhZyYyKSl7Yz1jLnN0YXRlTm9kZTticmVhayBhfX1kP09lKGEsYyxiKTpQZShhLGMsYil9ZnVuY3Rpb24gT2UoYSxiLGMpe3ZhciBkPWEudGFnLGU9NT09PWR8fDY9PT1kO2lmKGUpYT1lP2Euc3RhdGVOb2RlOmEuc3RhdGVOb2RlLmluc3RhbmNlLGI/OD09PWMubm9kZVR5cGU/Yy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLGIpOmMuaW5zZXJ0QmVmb3JlKGEsYik6KDg9PT1jLm5vZGVUeXBlPyhiPWMucGFyZW50Tm9kZSxiLmluc2VydEJlZm9yZShhLGMpKTooYj1jLGIuYXBwZW5kQ2hpbGQoYSkpLGM9Yy5fcmVhY3RSb290Q29udGFpbmVyLG51bGwhPT1jJiZ2b2lkIDAhPT1jfHxudWxsIT09Yi5vbmNsaWNrfHwoYi5vbmNsaWNrPXVjKSk7ZWxzZSBpZig0IT09ZCYmKGE9YS5jaGlsZCxudWxsIT09YSkpZm9yKE9lKGEsYixjKSxhPWEuc2libGluZztudWxsIT09YTspT2UoYSxiLGMpLGE9YS5zaWJsaW5nfQpmdW5jdGlvbiBQZShhLGIsYyl7dmFyIGQ9YS50YWcsZT01PT09ZHx8Nj09PWQ7aWYoZSlhPWU/YS5zdGF0ZU5vZGU6YS5zdGF0ZU5vZGUuaW5zdGFuY2UsYj9jLmluc2VydEJlZm9yZShhLGIpOmMuYXBwZW5kQ2hpbGQoYSk7ZWxzZSBpZig0IT09ZCYmKGE9YS5jaGlsZCxudWxsIT09YSkpZm9yKFBlKGEsYixjKSxhPWEuc2libGluZztudWxsIT09YTspUGUoYSxiLGMpLGE9YS5zaWJsaW5nfWZ1bmN0aW9uIERoKGEsYixjKXtmb3IodmFyIGQ9YixlPSExLGYsZzs7KXtpZighZSl7ZT1kLnJldHVybjthOmZvcig7Oyl7aWYobnVsbD09PWUpdGhyb3cgRXJyb3IoaygxNjApKTtmPWUuc3RhdGVOb2RlO3N3aXRjaChlLnRhZyl7Y2FzZSA1Omc9ITE7YnJlYWsgYTtjYXNlIDM6Zj1mLmNvbnRhaW5lckluZm87Zz0hMDticmVhayBhO2Nhc2UgNDpmPWYuY29udGFpbmVySW5mbztnPSEwO2JyZWFrIGF9ZT1lLnJldHVybn1lPSEwfWlmKDU9PT1kLnRhZ3x8Nj09PWQudGFnKXthOmZvcih2YXIgaD0KYSxtPWQsbj1jLGw9bTs7KWlmKENoKGgsbCxuKSxudWxsIT09bC5jaGlsZCYmNCE9PWwudGFnKWwuY2hpbGQucmV0dXJuPWwsbD1sLmNoaWxkO2Vsc2V7aWYobD09PW0pYnJlYWsgYTtmb3IoO251bGw9PT1sLnNpYmxpbmc7KXtpZihudWxsPT09bC5yZXR1cm58fGwucmV0dXJuPT09bSlicmVhayBhO2w9bC5yZXR1cm59bC5zaWJsaW5nLnJldHVybj1sLnJldHVybjtsPWwuc2libGluZ31nPyhoPWYsbT1kLnN0YXRlTm9kZSw4PT09aC5ub2RlVHlwZT9oLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobSk6aC5yZW1vdmVDaGlsZChtKSk6Zi5yZW1vdmVDaGlsZChkLnN0YXRlTm9kZSl9ZWxzZSBpZig0PT09ZC50YWcpe2lmKG51bGwhPT1kLmNoaWxkKXtmPWQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm87Zz0hMDtkLmNoaWxkLnJldHVybj1kO2Q9ZC5jaGlsZDtjb250aW51ZX19ZWxzZSBpZihDaChhLGQsYyksbnVsbCE9PWQuY2hpbGQpe2QuY2hpbGQucmV0dXJuPWQ7ZD1kLmNoaWxkO2NvbnRpbnVlfWlmKGQ9PT0KYilicmVhaztmb3IoO251bGw9PT1kLnNpYmxpbmc7KXtpZihudWxsPT09ZC5yZXR1cm58fGQucmV0dXJuPT09YilyZXR1cm47ZD1kLnJldHVybjs0PT09ZC50YWcmJihlPSExKX1kLnNpYmxpbmcucmV0dXJuPWQucmV0dXJuO2Q9ZC5zaWJsaW5nfX1mdW5jdGlvbiBRZShhLGIpe3N3aXRjaChiLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNDpjYXNlIDE1OmNhc2UgMjI6QWgoMyxiKTtyZXR1cm47Y2FzZSAxOnJldHVybjtjYXNlIDU6dmFyIGM9Yi5zdGF0ZU5vZGU7aWYobnVsbCE9Yyl7dmFyIGQ9Yi5tZW1vaXplZFByb3BzLGU9bnVsbCE9PWE/YS5tZW1vaXplZFByb3BzOmQ7YT1iLnR5cGU7dmFyIGY9Yi51cGRhdGVRdWV1ZTtiLnVwZGF0ZVF1ZXVlPW51bGw7aWYobnVsbCE9PWYpe2NbdmNdPWQ7ImlucHV0Ij09PWEmJiJyYWRpbyI9PT1kLnR5cGUmJm51bGwhPWQubmFtZSYmSWYoYyxkKTtWZChhLGUpO2I9VmQoYSxkKTtmb3IoZT0wO2U8Zi5sZW5ndGg7ZSs9Mil7dmFyIGc9ZltlXSwKaD1mW2UrMV07InN0eWxlIj09PWc/Z2coYyxoKToiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiPT09Zz94aChjLGgpOiJjaGlsZHJlbiI9PT1nP1diKGMsaCk6eGQoYyxnLGgsYil9c3dpdGNoKGEpe2Nhc2UgImlucHV0IjpEZChjLGQpO2JyZWFrO2Nhc2UgInRleHRhcmVhIjpMZihjLGQpO2JyZWFrO2Nhc2UgInNlbGVjdCI6Yj1jLl93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUsYy5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlPSEhZC5tdWx0aXBsZSxhPWQudmFsdWUsbnVsbCE9YT9oYihjLCEhZC5tdWx0aXBsZSxhLCExKTpiIT09ISFkLm11bHRpcGxlJiYobnVsbCE9ZC5kZWZhdWx0VmFsdWU/aGIoYywhIWQubXVsdGlwbGUsZC5kZWZhdWx0VmFsdWUsITApOmhiKGMsISFkLm11bHRpcGxlLGQubXVsdGlwbGU/W106IiIsITEpKX19fXJldHVybjtjYXNlIDY6aWYobnVsbD09PWIuc3RhdGVOb2RlKXRocm93IEVycm9yKGsoMTYyKSk7Yi5zdGF0ZU5vZGUubm9kZVZhbHVlPWIubWVtb2l6ZWRQcm9wczsKcmV0dXJuO2Nhc2UgMzpiPWIuc3RhdGVOb2RlO2IuaHlkcmF0ZSYmKGIuaHlkcmF0ZT0hMSxiZyhiLmNvbnRhaW5lckluZm8pKTtyZXR1cm47Y2FzZSAxMjpyZXR1cm47Y2FzZSAxMzpjPWI7bnVsbD09PWIubWVtb2l6ZWRTdGF0ZT9kPSExOihkPSEwLGM9Yi5jaGlsZCxSZT1ZKCkpO2lmKG51bGwhPT1jKWE6Zm9yKGE9Yzs7KXtpZig1PT09YS50YWcpZj1hLnN0YXRlTm9kZSxkPyhmPWYuc3R5bGUsImZ1bmN0aW9uIj09PXR5cGVvZiBmLnNldFByb3BlcnR5P2Yuc2V0UHJvcGVydHkoImRpc3BsYXkiLCJub25lIiwiaW1wb3J0YW50Iik6Zi5kaXNwbGF5PSJub25lIik6KGY9YS5zdGF0ZU5vZGUsZT1hLm1lbW9pemVkUHJvcHMuc3R5bGUsZT12b2lkIDAhPT1lJiZudWxsIT09ZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzcGxheSIpP2UuZGlzcGxheTpudWxsLGYuc3R5bGUuZGlzcGxheT1mZygiZGlzcGxheSIsZSkpO2Vsc2UgaWYoNj09PWEudGFnKWEuc3RhdGVOb2RlLm5vZGVWYWx1ZT1kPwoiIjphLm1lbW9pemVkUHJvcHM7ZWxzZSBpZigxMz09PWEudGFnJiZudWxsIT09YS5tZW1vaXplZFN0YXRlJiZudWxsPT09YS5tZW1vaXplZFN0YXRlLmRlaHlkcmF0ZWQpe2Y9YS5jaGlsZC5zaWJsaW5nO2YucmV0dXJuPWE7YT1mO2NvbnRpbnVlfWVsc2UgaWYobnVsbCE9PWEuY2hpbGQpe2EuY2hpbGQucmV0dXJuPWE7YT1hLmNoaWxkO2NvbnRpbnVlfWlmKGE9PT1jKWJyZWFrO2Zvcig7bnVsbD09PWEuc2libGluZzspe2lmKG51bGw9PT1hLnJldHVybnx8YS5yZXR1cm49PT1jKWJyZWFrIGE7YT1hLnJldHVybn1hLnNpYmxpbmcucmV0dXJuPWEucmV0dXJuO2E9YS5zaWJsaW5nfUhoKGIpO3JldHVybjtjYXNlIDE5OkhoKGIpO3JldHVybjtjYXNlIDE3OnJldHVybn10aHJvdyBFcnJvcihrKDE2MykpO31mdW5jdGlvbiBIaChhKXt2YXIgYj1hLnVwZGF0ZVF1ZXVlO2lmKG51bGwhPT1iKXthLnVwZGF0ZVF1ZXVlPW51bGw7dmFyIGM9YS5zdGF0ZU5vZGU7bnVsbD09PWMmJihjPWEuc3RhdGVOb2RlPQpuZXcgcGopO2IuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgZD1xai5iaW5kKG51bGwsYSxiKTtjLmhhcyhiKXx8KGMuYWRkKGIpLGIudGhlbihkLGQpKX0pfX1mdW5jdGlvbiBJaChhLGIsYyl7Yz1FYShjLG51bGwpO2MudGFnPTM7Yy5wYXlsb2FkPXtlbGVtZW50Om51bGx9O3ZhciBkPWIudmFsdWU7Yy5jYWxsYmFjaz1mdW5jdGlvbigpe2NkfHwoY2Q9ITAsU2U9ZCk7TWUoYSxiKX07cmV0dXJuIGN9ZnVuY3Rpb24gSmgoYSxiLGMpe2M9RWEoYyxudWxsKTtjLnRhZz0zO3ZhciBkPWEudHlwZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBkKXt2YXIgZT1iLnZhbHVlO2MucGF5bG9hZD1mdW5jdGlvbigpe01lKGEsYik7cmV0dXJuIGQoZSl9fXZhciBmPWEuc3RhdGVOb2RlO251bGwhPT1mJiYiZnVuY3Rpb24iPT09dHlwZW9mIGYuY29tcG9uZW50RGlkQ2F0Y2gmJihjLmNhbGxiYWNrPWZ1bmN0aW9uKCl7ImZ1bmN0aW9uIiE9PXR5cGVvZiBkJiYKKG51bGw9PT1MYT9MYT1uZXcgU2V0KFt0aGlzXSk6TGEuYWRkKHRoaXMpLE1lKGEsYikpO3ZhciBjPWIuc3RhY2s7dGhpcy5jb21wb25lbnREaWRDYXRjaChiLnZhbHVlLHtjb21wb25lbnRTdGFjazpudWxsIT09Yz9jOiIifSl9KTtyZXR1cm4gY31mdW5jdGlvbiBrYSgpe3JldHVybihwJihjYXxtYSkpIT09SD8xMDczNzQxODIxLShZKCkvMTB8MCk6MCE9PWRkP2RkOmRkPTEwNzM3NDE4MjEtKFkoKS8xMHwwKX1mdW5jdGlvbiBWYShhLGIsYyl7Yj1iLm1vZGU7aWYoMD09PShiJjIpKXJldHVybiAxMDczNzQxODIzO3ZhciBkPUNjKCk7aWYoMD09PShiJjQpKXJldHVybiA5OT09PWQ/MTA3Mzc0MTgyMzoxMDczNzQxODIyO2lmKChwJmNhKSE9PUgpcmV0dXJuIFA7aWYobnVsbCE9PWMpYT1GYyhhLGMudGltZW91dE1zfDB8fDVFMywyNTApO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UgOTk6YT0xMDczNzQxODIzO2JyZWFrO2Nhc2UgOTg6YT1GYyhhLDE1MCwxMDApO2JyZWFrO2Nhc2UgOTc6Y2FzZSA5NjphPQpGYyhhLDVFMywyNTApO2JyZWFrO2Nhc2UgOTU6YT0yO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoaygzMjYpKTt9bnVsbCE9PVUmJmE9PT1QJiYtLWE7cmV0dXJuIGF9ZnVuY3Rpb24gZWQoYSxiKXthLmV4cGlyYXRpb25UaW1lPGImJihhLmV4cGlyYXRpb25UaW1lPWIpO3ZhciBjPWEuYWx0ZXJuYXRlO251bGwhPT1jJiZjLmV4cGlyYXRpb25UaW1lPGImJihjLmV4cGlyYXRpb25UaW1lPWIpO3ZhciBkPWEucmV0dXJuLGU9bnVsbDtpZihudWxsPT09ZCYmMz09PWEudGFnKWU9YS5zdGF0ZU5vZGU7ZWxzZSBmb3IoO251bGwhPT1kOyl7Yz1kLmFsdGVybmF0ZTtkLmNoaWxkRXhwaXJhdGlvblRpbWU8YiYmKGQuY2hpbGRFeHBpcmF0aW9uVGltZT1iKTtudWxsIT09YyYmYy5jaGlsZEV4cGlyYXRpb25UaW1lPGImJihjLmNoaWxkRXhwaXJhdGlvblRpbWU9Yik7aWYobnVsbD09PWQucmV0dXJuJiYzPT09ZC50YWcpe2U9ZC5zdGF0ZU5vZGU7YnJlYWt9ZD1kLnJldHVybn1udWxsIT09ZSYmCihVPT09ZSYmKEtjKGIpLEY9PT1iZCYmWWEoZSxQKSkseWgoZSxiKSk7cmV0dXJuIGV9ZnVuY3Rpb24gZmQoYSl7dmFyIGI9YS5sYXN0RXhwaXJlZFRpbWU7aWYoMCE9PWIpcmV0dXJuIGI7Yj1hLmZpcnN0UGVuZGluZ1RpbWU7aWYoIUtoKGEsYikpcmV0dXJuIGI7dmFyIGM9YS5sYXN0UGluZ2VkVGltZTthPWEubmV4dEtub3duUGVuZGluZ0xldmVsO2E9Yz5hP2M6YTtyZXR1cm4gMj49YSYmYiE9PWE/MDphfWZ1bmN0aW9uIFYoYSl7aWYoMCE9PWEubGFzdEV4cGlyZWRUaW1lKWEuY2FsbGJhY2tFeHBpcmF0aW9uVGltZT0xMDczNzQxODIzLGEuY2FsbGJhY2tQcmlvcml0eT05OSxhLmNhbGxiYWNrTm9kZT1PZyhUZS5iaW5kKG51bGwsYSkpO2Vsc2V7dmFyIGI9ZmQoYSksYz1hLmNhbGxiYWNrTm9kZTtpZigwPT09YiludWxsIT09YyYmKGEuY2FsbGJhY2tOb2RlPW51bGwsYS5jYWxsYmFja0V4cGlyYXRpb25UaW1lPTAsYS5jYWxsYmFja1ByaW9yaXR5PTkwKTtlbHNle3ZhciBkPWthKCk7CjEwNzM3NDE4MjM9PT1iP2Q9OTk6MT09PWJ8fDI9PT1iP2Q9OTU6KGQ9MTAqKDEwNzM3NDE4MjEtYiktMTAqKDEwNzM3NDE4MjEtZCksZD0wPj1kPzk5OjI1MD49ZD85ODo1MjUwPj1kPzk3Ojk1KTtpZihudWxsIT09Yyl7dmFyIGU9YS5jYWxsYmFja1ByaW9yaXR5O2lmKGEuY2FsbGJhY2tFeHBpcmF0aW9uVGltZT09PWImJmU+PWQpcmV0dXJuO2MhPT1RZyYmUmcoYyl9YS5jYWxsYmFja0V4cGlyYXRpb25UaW1lPWI7YS5jYWxsYmFja1ByaW9yaXR5PWQ7Yj0xMDczNzQxODIzPT09Yj9PZyhUZS5iaW5kKG51bGwsYSkpOk5nKGQsTGguYmluZChudWxsLGEpLHt0aW1lb3V0OjEwKigxMDczNzQxODIxLWIpLVkoKX0pO2EuY2FsbGJhY2tOb2RlPWJ9fX1mdW5jdGlvbiBMaChhLGIpe2RkPTA7aWYoYilyZXR1cm4gYj1rYSgpLFVlKGEsYiksVihhKSxudWxsO3ZhciBjPWZkKGEpO2lmKDAhPT1jKXtiPWEuY2FsbGJhY2tOb2RlO2lmKChwJihjYXxtYSkpIT09SCl0aHJvdyBFcnJvcihrKDMyNykpOwp4YigpO2E9PT1VJiZjPT09UHx8JGEoYSxjKTtpZihudWxsIT09dCl7dmFyIGQ9cDtwfD1jYTt2YXIgZT1NaCgpO2RvIHRyeXtyaigpO2JyZWFrfWNhdGNoKGgpe05oKGEsaCl9d2hpbGUoMSk7bGUoKTtwPWQ7Z2QuY3VycmVudD1lO2lmKEY9PT1oZCl0aHJvdyBiPWlkLCRhKGEsYyksWWEoYSxjKSxWKGEpLGI7aWYobnVsbD09PXQpc3dpdGNoKGU9YS5maW5pc2hlZFdvcms9YS5jdXJyZW50LmFsdGVybmF0ZSxhLmZpbmlzaGVkRXhwaXJhdGlvblRpbWU9YyxkPUYsVT1udWxsLGQpe2Nhc2UgWGE6Y2FzZSBoZDp0aHJvdyBFcnJvcihrKDM0NSkpO2Nhc2UgT2g6VWUoYSwyPGM/MjpjKTticmVhaztjYXNlIGFkOllhKGEsYyk7ZD1hLmxhc3RTdXNwZW5kZWRUaW1lO2M9PT1kJiYoYS5uZXh0S25vd25QZW5kaW5nTGV2ZWw9VmUoZSkpO2lmKDEwNzM3NDE4MjM9PT10YSYmKGU9UmUrUGgtWSgpLDEwPGUpKXtpZihqZCl7dmFyIGY9YS5sYXN0UGluZ2VkVGltZTtpZigwPT09Znx8Zj49Yyl7YS5sYXN0UGluZ2VkVGltZT0KYzskYShhLGMpO2JyZWFrfX1mPWZkKGEpO2lmKDAhPT1mJiZmIT09YylicmVhaztpZigwIT09ZCYmZCE9PWMpe2EubGFzdFBpbmdlZFRpbWU9ZDticmVha31hLnRpbWVvdXRIYW5kbGU9V2UoYWIuYmluZChudWxsLGEpLGUpO2JyZWFrfWFiKGEpO2JyZWFrO2Nhc2UgYmQ6WWEoYSxjKTtkPWEubGFzdFN1c3BlbmRlZFRpbWU7Yz09PWQmJihhLm5leHRLbm93blBlbmRpbmdMZXZlbD1WZShlKSk7aWYoamQmJihlPWEubGFzdFBpbmdlZFRpbWUsMD09PWV8fGU+PWMpKXthLmxhc3RQaW5nZWRUaW1lPWM7JGEoYSxjKTticmVha31lPWZkKGEpO2lmKDAhPT1lJiZlIT09YylicmVhaztpZigwIT09ZCYmZCE9PWMpe2EubGFzdFBpbmdlZFRpbWU9ZDticmVha30xMDczNzQxODIzIT09WWI/ZD0xMCooMTA3Mzc0MTgyMS1ZYiktWSgpOjEwNzM3NDE4MjM9PT10YT9kPTA6KGQ9MTAqKDEwNzM3NDE4MjEtdGEpLTVFMyxlPVkoKSxjPTEwKigxMDczNzQxODIxLWMpLWUsZD1lLWQsMD5kJiYoZD0wKSxkPQooMTIwPmQ/MTIwOjQ4MD5kPzQ4MDoxMDgwPmQ/MTA4MDoxOTIwPmQ/MTkyMDozRTM+ZD8zRTM6NDMyMD5kPzQzMjA6MTk2MCpzaihkLzE5NjApKS1kLGM8ZCYmKGQ9YykpO2lmKDEwPGQpe2EudGltZW91dEhhbmRsZT1XZShhYi5iaW5kKG51bGwsYSksZCk7YnJlYWt9YWIoYSk7YnJlYWs7Y2FzZSBYZTppZigxMDczNzQxODIzIT09dGEmJm51bGwhPT1rZCl7Zj10YTt2YXIgZz1rZDtkPWcuYnVzeU1pbkR1cmF0aW9uTXN8MDswPj1kP2Q9MDooZT1nLmJ1c3lEZWxheU1zfDAsZj1ZKCktKDEwKigxMDczNzQxODIxLWYpLShnLnRpbWVvdXRNc3wwfHw1RTMpKSxkPWY8PWU/MDplK2QtZik7aWYoMTA8ZCl7WWEoYSxjKTthLnRpbWVvdXRIYW5kbGU9V2UoYWIuYmluZChudWxsLGEpLGQpO2JyZWFrfX1hYihhKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKGsoMzI5KSk7fVYoYSk7aWYoYS5jYWxsYmFja05vZGU9PT1iKXJldHVybiBMaC5iaW5kKG51bGwsYSl9fXJldHVybiBudWxsfWZ1bmN0aW9uIFRlKGEpe3ZhciBiPQphLmxhc3RFeHBpcmVkVGltZTtiPTAhPT1iP2I6MTA3Mzc0MTgyMztpZigocCYoY2F8bWEpKSE9PUgpdGhyb3cgRXJyb3IoaygzMjcpKTt4YigpO2E9PT1VJiZiPT09UHx8JGEoYSxiKTtpZihudWxsIT09dCl7dmFyIGM9cDtwfD1jYTt2YXIgZD1NaCgpO2RvIHRyeXt0aigpO2JyZWFrfWNhdGNoKGUpe05oKGEsZSl9d2hpbGUoMSk7bGUoKTtwPWM7Z2QuY3VycmVudD1kO2lmKEY9PT1oZCl0aHJvdyBjPWlkLCRhKGEsYiksWWEoYSxiKSxWKGEpLGM7aWYobnVsbCE9PXQpdGhyb3cgRXJyb3IoaygyNjEpKTthLmZpbmlzaGVkV29yaz1hLmN1cnJlbnQuYWx0ZXJuYXRlO2EuZmluaXNoZWRFeHBpcmF0aW9uVGltZT1iO1U9bnVsbDthYihhKTtWKGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHVqKCl7aWYobnVsbCE9PWJiKXt2YXIgYT1iYjtiYj1udWxsO2EuZm9yRWFjaChmdW5jdGlvbihhLGMpe1VlKGMsYSk7VihjKX0pO2hhKCl9fWZ1bmN0aW9uIFFoKGEsYil7dmFyIGM9cDtwfD0xO3RyeXtyZXR1cm4gYShiKX1maW5hbGx5e3A9CmMscD09PUgmJmhhKCl9fWZ1bmN0aW9uIFJoKGEsYil7dmFyIGM9cDtwJj0tMjtwfD1ZZTt0cnl7cmV0dXJuIGEoYil9ZmluYWxseXtwPWMscD09PUgmJmhhKCl9fWZ1bmN0aW9uICRhKGEsYil7YS5maW5pc2hlZFdvcms9bnVsbDthLmZpbmlzaGVkRXhwaXJhdGlvblRpbWU9MDt2YXIgYz1hLnRpbWVvdXRIYW5kbGU7LTEhPT1jJiYoYS50aW1lb3V0SGFuZGxlPS0xLHZqKGMpKTtpZihudWxsIT09dClmb3IoYz10LnJldHVybjtudWxsIT09Yzspe3ZhciBkPWM7c3dpdGNoKGQudGFnKXtjYXNlIDE6ZD1kLnR5cGUuY2hpbGRDb250ZXh0VHlwZXM7bnVsbCE9PWQmJnZvaWQgMCE9PWQmJihxKEcpLHEoQikpO2JyZWFrO2Nhc2UgMzp0YigpO3EoRyk7cShCKTticmVhaztjYXNlIDU6dGUoZCk7YnJlYWs7Y2FzZSA0OnRiKCk7YnJlYWs7Y2FzZSAxMzpxKEQpO2JyZWFrO2Nhc2UgMTk6cShEKTticmVhaztjYXNlIDEwOm1lKGQpfWM9Yy5yZXR1cm59VT1hO3Q9U2EoYS5jdXJyZW50LG51bGwpOwpQPWI7Rj1YYTtpZD1udWxsO1liPXRhPTEwNzM3NDE4MjM7a2Q9bnVsbDtYYj0wO2pkPSExfWZ1bmN0aW9uIE5oKGEsYil7ZG97dHJ5e2xlKCk7U2MuY3VycmVudD1UYztpZihVYylmb3IodmFyIGM9ei5tZW1vaXplZFN0YXRlO251bGwhPT1jOyl7dmFyIGQ9Yy5xdWV1ZTtudWxsIT09ZCYmKGQucGVuZGluZz1udWxsKTtjPWMubmV4dH1JYT0wO0o9Sz16PW51bGw7VWM9ITE7aWYobnVsbD09PXR8fG51bGw9PT10LnJldHVybilyZXR1cm4gRj1oZCxpZD1iLHQ9bnVsbDthOnt2YXIgZT1hLGY9dC5yZXR1cm4sZz10LGg9YjtiPVA7Zy5lZmZlY3RUYWd8PTIwNDg7Zy5maXJzdEVmZmVjdD1nLmxhc3RFZmZlY3Q9bnVsbDtpZihudWxsIT09aCYmIm9iamVjdCI9PT10eXBlb2YgaCYmImZ1bmN0aW9uIj09PXR5cGVvZiBoLnRoZW4pe3ZhciBtPWg7aWYoMD09PShnLm1vZGUmMikpe3ZhciBuPWcuYWx0ZXJuYXRlO24/KGcudXBkYXRlUXVldWU9bi51cGRhdGVRdWV1ZSxnLm1lbW9pemVkU3RhdGU9Cm4ubWVtb2l6ZWRTdGF0ZSxnLmV4cGlyYXRpb25UaW1lPW4uZXhwaXJhdGlvblRpbWUpOihnLnVwZGF0ZVF1ZXVlPW51bGwsZy5tZW1vaXplZFN0YXRlPW51bGwpfXZhciBsPTAhPT0oRC5jdXJyZW50JjEpLGs9Zjtkb3t2YXIgcDtpZihwPTEzPT09ay50YWcpe3ZhciBxPWsubWVtb2l6ZWRTdGF0ZTtpZihudWxsIT09cSlwPW51bGwhPT1xLmRlaHlkcmF0ZWQ/ITA6ITE7ZWxzZXt2YXIgdz1rLm1lbW9pemVkUHJvcHM7cD12b2lkIDA9PT13LmZhbGxiYWNrPyExOiEwIT09dy51bnN0YWJsZV9hdm9pZFRoaXNGYWxsYmFjaz8hMDpsPyExOiEwfX1pZihwKXt2YXIgeT1rLnVwZGF0ZVF1ZXVlO2lmKG51bGw9PT15KXt2YXIgcj1uZXcgU2V0O3IuYWRkKG0pO2sudXBkYXRlUXVldWU9cn1lbHNlIHkuYWRkKG0pO2lmKDA9PT0oay5tb2RlJjIpKXtrLmVmZmVjdFRhZ3w9NjQ7Zy5lZmZlY3RUYWcmPS0yOTgxO2lmKDE9PT1nLnRhZylpZihudWxsPT09Zy5hbHRlcm5hdGUpZy50YWc9MTc7ZWxzZXt2YXIgTz0KRWEoMTA3Mzc0MTgyMyxudWxsKTtPLnRhZz1KYztGYShnLE8pfWcuZXhwaXJhdGlvblRpbWU9MTA3Mzc0MTgyMzticmVhayBhfWg9dm9pZCAwO2c9Yjt2YXIgdj1lLnBpbmdDYWNoZTtudWxsPT09dj8odj1lLnBpbmdDYWNoZT1uZXcgd2osaD1uZXcgU2V0LHYuc2V0KG0saCkpOihoPXYuZ2V0KG0pLHZvaWQgMD09PWgmJihoPW5ldyBTZXQsdi5zZXQobSxoKSkpO2lmKCFoLmhhcyhnKSl7aC5hZGQoZyk7dmFyIHg9eGouYmluZChudWxsLGUsbSxnKTttLnRoZW4oeCx4KX1rLmVmZmVjdFRhZ3w9NDA5NjtrLmV4cGlyYXRpb25UaW1lPWI7YnJlYWsgYX1rPWsucmV0dXJufXdoaWxlKG51bGwhPT1rKTtoPUVycm9yKChuYShnLnR5cGUpfHwiQSBSZWFjdCBjb21wb25lbnQiKSsiIHN1c3BlbmRlZCB3aGlsZSByZW5kZXJpbmcsIGJ1dCBubyBmYWxsYmFjayBVSSB3YXMgc3BlY2lmaWVkLlxuXG5BZGQgYSA8U3VzcGVuc2UgZmFsbGJhY2s9Li4uPiBjb21wb25lbnQgaGlnaGVyIGluIHRoZSB0cmVlIHRvIHByb3ZpZGUgYSBsb2FkaW5nIGluZGljYXRvciBvciBwbGFjZWhvbGRlciB0byBkaXNwbGF5LiIrCkJkKGcpKX1GIT09WGUmJihGPU9oKTtoPUxlKGgsZyk7az1mO2Rve3N3aXRjaChrLnRhZyl7Y2FzZSAzOm09aDtrLmVmZmVjdFRhZ3w9NDA5NjtrLmV4cGlyYXRpb25UaW1lPWI7dmFyIEE9SWgoayxtLGIpO1VnKGssQSk7YnJlYWsgYTtjYXNlIDE6bT1oO3ZhciB1PWsudHlwZSxCPWsuc3RhdGVOb2RlO2lmKDA9PT0oay5lZmZlY3RUYWcmNjQpJiYoImZ1bmN0aW9uIj09PXR5cGVvZiB1LmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcnx8bnVsbCE9PUImJiJmdW5jdGlvbiI9PT10eXBlb2YgQi5jb21wb25lbnREaWRDYXRjaCYmKG51bGw9PT1MYXx8IUxhLmhhcyhCKSkpKXtrLmVmZmVjdFRhZ3w9NDA5NjtrLmV4cGlyYXRpb25UaW1lPWI7dmFyIEg9SmgoayxtLGIpO1VnKGssSCk7YnJlYWsgYX19az1rLnJldHVybn13aGlsZShudWxsIT09ayl9dD1TaCh0KX1jYXRjaChjail7Yj1jajtjb250aW51ZX1icmVha313aGlsZSgxKX1mdW5jdGlvbiBNaChhKXthPWdkLmN1cnJlbnQ7Z2QuY3VycmVudD0KVGM7cmV0dXJuIG51bGw9PT1hP1RjOmF9ZnVuY3Rpb24gVmcoYSxiKXthPHRhJiYyPGEmJih0YT1hKTtudWxsIT09YiYmYTxZYiYmMjxhJiYoWWI9YSxrZD1iKX1mdW5jdGlvbiBLYyhhKXthPlhiJiYoWGI9YSl9ZnVuY3Rpb24gdGooKXtmb3IoO251bGwhPT10Oyl0PVRoKHQpfWZ1bmN0aW9uIHJqKCl7Zm9yKDtudWxsIT09dCYmIXlqKCk7KXQ9VGgodCl9ZnVuY3Rpb24gVGgoYSl7dmFyIGI9emooYS5hbHRlcm5hdGUsYSxQKTthLm1lbW9pemVkUHJvcHM9YS5wZW5kaW5nUHJvcHM7bnVsbD09PWImJihiPVNoKGEpKTtVaC5jdXJyZW50PW51bGw7cmV0dXJuIGJ9ZnVuY3Rpb24gU2goYSl7dD1hO2Rve3ZhciBiPXQuYWx0ZXJuYXRlO2E9dC5yZXR1cm47aWYoMD09PSh0LmVmZmVjdFRhZyYyMDQ4KSl7Yj1oaihiLHQsUCk7aWYoMT09PVB8fDEhPT10LmNoaWxkRXhwaXJhdGlvblRpbWUpe2Zvcih2YXIgYz0wLGQ9dC5jaGlsZDtudWxsIT09ZDspe3ZhciBlPWQuZXhwaXJhdGlvblRpbWUsCmY9ZC5jaGlsZEV4cGlyYXRpb25UaW1lO2U+YyYmKGM9ZSk7Zj5jJiYoYz1mKTtkPWQuc2libGluZ310LmNoaWxkRXhwaXJhdGlvblRpbWU9Y31pZihudWxsIT09YilyZXR1cm4gYjtudWxsIT09YSYmMD09PShhLmVmZmVjdFRhZyYyMDQ4KSYmKG51bGw9PT1hLmZpcnN0RWZmZWN0JiYoYS5maXJzdEVmZmVjdD10LmZpcnN0RWZmZWN0KSxudWxsIT09dC5sYXN0RWZmZWN0JiYobnVsbCE9PWEubGFzdEVmZmVjdCYmKGEubGFzdEVmZmVjdC5uZXh0RWZmZWN0PXQuZmlyc3RFZmZlY3QpLGEubGFzdEVmZmVjdD10Lmxhc3RFZmZlY3QpLDE8dC5lZmZlY3RUYWcmJihudWxsIT09YS5sYXN0RWZmZWN0P2EubGFzdEVmZmVjdC5uZXh0RWZmZWN0PXQ6YS5maXJzdEVmZmVjdD10LGEubGFzdEVmZmVjdD10KSl9ZWxzZXtiPWxqKHQpO2lmKG51bGwhPT1iKXJldHVybiBiLmVmZmVjdFRhZyY9MjA0NyxiO251bGwhPT1hJiYoYS5maXJzdEVmZmVjdD1hLmxhc3RFZmZlY3Q9bnVsbCxhLmVmZmVjdFRhZ3w9CjIwNDgpfWI9dC5zaWJsaW5nO2lmKG51bGwhPT1iKXJldHVybiBiO3Q9YX13aGlsZShudWxsIT09dCk7Rj09PVhhJiYoRj1YZSk7cmV0dXJuIG51bGx9ZnVuY3Rpb24gVmUoYSl7dmFyIGI9YS5leHBpcmF0aW9uVGltZTthPWEuY2hpbGRFeHBpcmF0aW9uVGltZTtyZXR1cm4gYj5hP2I6YX1mdW5jdGlvbiBhYihhKXt2YXIgYj1DYygpO0RhKDk5LEFqLmJpbmQobnVsbCxhLGIpKTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBBaihhLGIpe2RvIHhiKCk7d2hpbGUobnVsbCE9PVpiKTtpZigocCYoY2F8bWEpKSE9PUgpdGhyb3cgRXJyb3IoaygzMjcpKTt2YXIgYz1hLmZpbmlzaGVkV29yayxkPWEuZmluaXNoZWRFeHBpcmF0aW9uVGltZTtpZihudWxsPT09YylyZXR1cm4gbnVsbDthLmZpbmlzaGVkV29yaz1udWxsO2EuZmluaXNoZWRFeHBpcmF0aW9uVGltZT0wO2lmKGM9PT1hLmN1cnJlbnQpdGhyb3cgRXJyb3IoaygxNzcpKTthLmNhbGxiYWNrTm9kZT1udWxsO2EuY2FsbGJhY2tFeHBpcmF0aW9uVGltZT0KMDthLmNhbGxiYWNrUHJpb3JpdHk9OTA7YS5uZXh0S25vd25QZW5kaW5nTGV2ZWw9MDt2YXIgZT1WZShjKTthLmZpcnN0UGVuZGluZ1RpbWU9ZTtkPD1hLmxhc3RTdXNwZW5kZWRUaW1lP2EuZmlyc3RTdXNwZW5kZWRUaW1lPWEubGFzdFN1c3BlbmRlZFRpbWU9YS5uZXh0S25vd25QZW5kaW5nTGV2ZWw9MDpkPD1hLmZpcnN0U3VzcGVuZGVkVGltZSYmKGEuZmlyc3RTdXNwZW5kZWRUaW1lPWQtMSk7ZDw9YS5sYXN0UGluZ2VkVGltZSYmKGEubGFzdFBpbmdlZFRpbWU9MCk7ZDw9YS5sYXN0RXhwaXJlZFRpbWUmJihhLmxhc3RFeHBpcmVkVGltZT0wKTthPT09VSYmKHQ9VT1udWxsLFA9MCk7MTxjLmVmZmVjdFRhZz9udWxsIT09Yy5sYXN0RWZmZWN0PyhjLmxhc3RFZmZlY3QubmV4dEVmZmVjdD1jLGU9Yy5maXJzdEVmZmVjdCk6ZT1jOmU9Yy5maXJzdEVmZmVjdDtpZihudWxsIT09ZSl7dmFyIGY9cDtwfD1tYTtVaC5jdXJyZW50PW51bGw7WmU9dGM7dmFyIGc9a2coKTtpZihYZChnKSl7aWYoInNlbGVjdGlvblN0YXJ0ImluCmcpdmFyIGg9e3N0YXJ0Omcuc2VsZWN0aW9uU3RhcnQsZW5kOmcuc2VsZWN0aW9uRW5kfTtlbHNlIGE6e2g9KGg9Zy5vd25lckRvY3VtZW50KSYmaC5kZWZhdWx0Vmlld3x8d2luZG93O3ZhciBtPWguZ2V0U2VsZWN0aW9uJiZoLmdldFNlbGVjdGlvbigpO2lmKG0mJjAhPT1tLnJhbmdlQ291bnQpe2g9bS5hbmNob3JOb2RlO3ZhciBuPW0uYW5jaG9yT2Zmc2V0LHE9bS5mb2N1c05vZGU7bT1tLmZvY3VzT2Zmc2V0O3RyeXtoLm5vZGVUeXBlLHEubm9kZVR5cGV9Y2F0Y2goc2Ipe2g9bnVsbDticmVhayBhfXZhciBiYT0wLHc9LTEseT0tMSxCPTAsRD0wLHI9Zyx6PW51bGw7Yjpmb3IoOzspe2Zvcih2YXIgdjs7KXtyIT09aHx8MCE9PW4mJjMhPT1yLm5vZGVUeXBlfHwodz1iYStuKTtyIT09cXx8MCE9PW0mJjMhPT1yLm5vZGVUeXBlfHwoeT1iYSttKTszPT09ci5ub2RlVHlwZSYmKGJhKz1yLm5vZGVWYWx1ZS5sZW5ndGgpO2lmKG51bGw9PT0odj1yLmZpcnN0Q2hpbGQpKWJyZWFrO3o9cjsKcj12fWZvcig7Oyl7aWYocj09PWcpYnJlYWsgYjt6PT09aCYmKytCPT09biYmKHc9YmEpO3o9PT1xJiYrK0Q9PT1tJiYoeT1iYSk7aWYobnVsbCE9PSh2PXIubmV4dFNpYmxpbmcpKWJyZWFrO3I9ejt6PXIucGFyZW50Tm9kZX1yPXZ9aD0tMT09PXd8fC0xPT09eT9udWxsOntzdGFydDp3LGVuZDp5fX1lbHNlIGg9bnVsbH1oPWh8fHtzdGFydDowLGVuZDowfX1lbHNlIGg9bnVsbDskZT17YWN0aXZlRWxlbWVudERldGFjaGVkOm51bGwsZm9jdXNlZEVsZW06ZyxzZWxlY3Rpb25SYW5nZTpofTt0Yz0hMTtsPWU7ZG8gdHJ5e0JqKCl9Y2F0Y2goc2Ipe2lmKG51bGw9PT1sKXRocm93IEVycm9yKGsoMzMwKSk7WmEobCxzYik7bD1sLm5leHRFZmZlY3R9d2hpbGUobnVsbCE9PWwpO2w9ZTtkbyB0cnl7Zm9yKGc9YSxoPWI7bnVsbCE9PWw7KXt2YXIgeD1sLmVmZmVjdFRhZzt4JjE2JiZXYihsLnN0YXRlTm9kZSwiIik7aWYoeCYxMjgpe3ZhciBBPWwuYWx0ZXJuYXRlO2lmKG51bGwhPT1BKXt2YXIgdT0KQS5yZWY7bnVsbCE9PXUmJigiZnVuY3Rpb24iPT09dHlwZW9mIHU/dShudWxsKTp1LmN1cnJlbnQ9bnVsbCl9fXN3aXRjaCh4JjEwMzgpe2Nhc2UgMjpHaChsKTtsLmVmZmVjdFRhZyY9LTM7YnJlYWs7Y2FzZSA2OkdoKGwpO2wuZWZmZWN0VGFnJj0tMztRZShsLmFsdGVybmF0ZSxsKTticmVhaztjYXNlIDEwMjQ6bC5lZmZlY3RUYWcmPS0xMDI1O2JyZWFrO2Nhc2UgMTAyODpsLmVmZmVjdFRhZyY9LTEwMjU7UWUobC5hbHRlcm5hdGUsbCk7YnJlYWs7Y2FzZSA0OlFlKGwuYWx0ZXJuYXRlLGwpO2JyZWFrO2Nhc2UgODpuPWwsRGgoZyxuLGgpLEVoKG4pfWw9bC5uZXh0RWZmZWN0fX1jYXRjaChzYil7aWYobnVsbD09PWwpdGhyb3cgRXJyb3IoaygzMzApKTtaYShsLHNiKTtsPWwubmV4dEVmZmVjdH13aGlsZShudWxsIT09bCk7dT0kZTtBPWtnKCk7eD11LmZvY3VzZWRFbGVtO2g9dS5zZWxlY3Rpb25SYW5nZTtpZihBIT09eCYmeCYmeC5vd25lckRvY3VtZW50JiZqZyh4Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LAp4KSl7bnVsbCE9PWgmJlhkKHgpJiYoQT1oLnN0YXJ0LHU9aC5lbmQsdm9pZCAwPT09dSYmKHU9QSksInNlbGVjdGlvblN0YXJ0ImluIHg/KHguc2VsZWN0aW9uU3RhcnQ9QSx4LnNlbGVjdGlvbkVuZD1NYXRoLm1pbih1LHgudmFsdWUubGVuZ3RoKSk6KHU9KEE9eC5vd25lckRvY3VtZW50fHxkb2N1bWVudCkmJkEuZGVmYXVsdFZpZXd8fHdpbmRvdyx1LmdldFNlbGVjdGlvbiYmKHU9dS5nZXRTZWxlY3Rpb24oKSxuPXgudGV4dENvbnRlbnQubGVuZ3RoLGc9TWF0aC5taW4oaC5zdGFydCxuKSxoPXZvaWQgMD09PWguZW5kP2c6TWF0aC5taW4oaC5lbmQsbiksIXUuZXh0ZW5kJiZnPmgmJihuPWgsaD1nLGc9biksbj1pZyh4LGcpLHE9aWcoeCxoKSxuJiZxJiYoMSE9PXUucmFuZ2VDb3VudHx8dS5hbmNob3JOb2RlIT09bi5ub2RlfHx1LmFuY2hvck9mZnNldCE9PW4ub2Zmc2V0fHx1LmZvY3VzTm9kZSE9PXEubm9kZXx8dS5mb2N1c09mZnNldCE9PXEub2Zmc2V0KSYmKEE9QS5jcmVhdGVSYW5nZSgpLApBLnNldFN0YXJ0KG4ubm9kZSxuLm9mZnNldCksdS5yZW1vdmVBbGxSYW5nZXMoKSxnPmg/KHUuYWRkUmFuZ2UoQSksdS5leHRlbmQocS5ub2RlLHEub2Zmc2V0KSk6KEEuc2V0RW5kKHEubm9kZSxxLm9mZnNldCksdS5hZGRSYW5nZShBKSkpKSkpO0E9W107Zm9yKHU9eDt1PXUucGFyZW50Tm9kZTspMT09PXUubm9kZVR5cGUmJkEucHVzaCh7ZWxlbWVudDp1LGxlZnQ6dS5zY3JvbGxMZWZ0LHRvcDp1LnNjcm9sbFRvcH0pOyJmdW5jdGlvbiI9PT10eXBlb2YgeC5mb2N1cyYmeC5mb2N1cygpO2Zvcih4PTA7eDxBLmxlbmd0aDt4KyspdT1BW3hdLHUuZWxlbWVudC5zY3JvbGxMZWZ0PXUubGVmdCx1LmVsZW1lbnQuc2Nyb2xsVG9wPXUudG9wfXRjPSEhWmU7JGU9WmU9bnVsbDthLmN1cnJlbnQ9YztsPWU7ZG8gdHJ5e2Zvcih4PWE7bnVsbCE9PWw7KXt2YXIgRj1sLmVmZmVjdFRhZztGJjM2JiZvaih4LGwuYWx0ZXJuYXRlLGwpO2lmKEYmMTI4KXtBPXZvaWQgMDt2YXIgRT1sLnJlZjtpZihudWxsIT09CkUpe3ZhciBHPWwuc3RhdGVOb2RlO3N3aXRjaChsLnRhZyl7Y2FzZSA1OkE9RzticmVhaztkZWZhdWx0OkE9R30iZnVuY3Rpb24iPT09dHlwZW9mIEU/RShBKTpFLmN1cnJlbnQ9QX19bD1sLm5leHRFZmZlY3R9fWNhdGNoKHNiKXtpZihudWxsPT09bCl0aHJvdyBFcnJvcihrKDMzMCkpO1phKGwsc2IpO2w9bC5uZXh0RWZmZWN0fXdoaWxlKG51bGwhPT1sKTtsPW51bGw7Q2ooKTtwPWZ9ZWxzZSBhLmN1cnJlbnQ9YztpZihsZClsZD0hMSxaYj1hLCRiPWI7ZWxzZSBmb3IobD1lO251bGwhPT1sOyliPWwubmV4dEVmZmVjdCxsLm5leHRFZmZlY3Q9bnVsbCxsPWI7Yj1hLmZpcnN0UGVuZGluZ1RpbWU7MD09PWImJihMYT1udWxsKTsxMDczNzQxODIzPT09Yj9hPT09YWY/YWMrKzooYWM9MCxhZj1hKTphYz0wOyJmdW5jdGlvbiI9PT10eXBlb2YgYmYmJmJmKGMuc3RhdGVOb2RlLGQpO1YoYSk7aWYoY2QpdGhyb3cgY2Q9ITEsYT1TZSxTZT1udWxsLGE7aWYoKHAmWWUpIT09SClyZXR1cm4gbnVsbDsKaGEoKTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBCaigpe2Zvcig7bnVsbCE9PWw7KXt2YXIgYT1sLmVmZmVjdFRhZzswIT09KGEmMjU2KSYmbmoobC5hbHRlcm5hdGUsbCk7MD09PShhJjUxMil8fGxkfHwobGQ9ITAsTmcoOTcsZnVuY3Rpb24oKXt4YigpO3JldHVybiBudWxsfSkpO2w9bC5uZXh0RWZmZWN0fX1mdW5jdGlvbiB4Yigpe2lmKDkwIT09JGIpe3ZhciBhPTk3PCRiPzk3OiRiOyRiPTkwO3JldHVybiBEYShhLERqKX19ZnVuY3Rpb24gRGooKXtpZihudWxsPT09WmIpcmV0dXJuITE7dmFyIGE9WmI7WmI9bnVsbDtpZigocCYoY2F8bWEpKSE9PUgpdGhyb3cgRXJyb3IoaygzMzEpKTt2YXIgYj1wO3B8PW1hO2ZvcihhPWEuY3VycmVudC5maXJzdEVmZmVjdDtudWxsIT09YTspe3RyeXt2YXIgYz1hO2lmKDAhPT0oYy5lZmZlY3RUYWcmNTEyKSlzd2l0Y2goYy50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTU6Y2FzZSAyMjpBaCg1LGMpLEJoKDUsYyl9fWNhdGNoKGQpe2lmKG51bGw9PT0KYSl0aHJvdyBFcnJvcihrKDMzMCkpO1phKGEsZCl9Yz1hLm5leHRFZmZlY3Q7YS5uZXh0RWZmZWN0PW51bGw7YT1jfXA9YjtoYSgpO3JldHVybiEwfWZ1bmN0aW9uIFZoKGEsYixjKXtiPUxlKGMsYik7Yj1JaChhLGIsMTA3Mzc0MTgyMyk7RmEoYSxiKTthPWVkKGEsMTA3Mzc0MTgyMyk7bnVsbCE9PWEmJlYoYSl9ZnVuY3Rpb24gWmEoYSxiKXtpZigzPT09YS50YWcpVmgoYSxhLGIpO2Vsc2UgZm9yKHZhciBjPWEucmV0dXJuO251bGwhPT1jOyl7aWYoMz09PWMudGFnKXtWaChjLGEsYik7YnJlYWt9ZWxzZSBpZigxPT09Yy50YWcpe3ZhciBkPWMuc3RhdGVOb2RlO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYy50eXBlLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcnx8ImZ1bmN0aW9uIj09PXR5cGVvZiBkLmNvbXBvbmVudERpZENhdGNoJiYobnVsbD09PUxhfHwhTGEuaGFzKGQpKSl7YT1MZShiLGEpO2E9SmgoYyxhLDEwNzM3NDE4MjMpO0ZhKGMsYSk7Yz1lZChjLDEwNzM3NDE4MjMpO251bGwhPT0KYyYmVihjKTticmVha319Yz1jLnJldHVybn19ZnVuY3Rpb24geGooYSxiLGMpe3ZhciBkPWEucGluZ0NhY2hlO251bGwhPT1kJiZkLmRlbGV0ZShiKTtVPT09YSYmUD09PWM/Rj09PWJkfHxGPT09YWQmJjEwNzM3NDE4MjM9PT10YSYmWSgpLVJlPFBoPyRhKGEsUCk6amQ9ITA6S2goYSxjKSYmKGI9YS5sYXN0UGluZ2VkVGltZSwwIT09YiYmYjxjfHwoYS5sYXN0UGluZ2VkVGltZT1jLFYoYSkpKX1mdW5jdGlvbiBxaihhLGIpe3ZhciBjPWEuc3RhdGVOb2RlO251bGwhPT1jJiZjLmRlbGV0ZShiKTtiPTA7MD09PWImJihiPWthKCksYj1WYShiLGEsbnVsbCkpO2E9ZWQoYSxiKTtudWxsIT09YSYmVihhKX1mdW5jdGlvbiBFaihhKXtpZigidW5kZWZpbmVkIj09PXR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pcmV0dXJuITE7dmFyIGI9X19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fO2lmKGIuaXNEaXNhYmxlZHx8IWIuc3VwcG9ydHNGaWJlcilyZXR1cm4hMDt0cnl7dmFyIGM9CmIuaW5qZWN0KGEpO2JmPWZ1bmN0aW9uKGEsZSl7dHJ5e2Iub25Db21taXRGaWJlclJvb3QoYyxhLHZvaWQgMCw2ND09PShhLmN1cnJlbnQuZWZmZWN0VGFnJjY0KSl9Y2F0Y2goZil7fX07TmU9ZnVuY3Rpb24oYSl7dHJ5e2Iub25Db21taXRGaWJlclVubW91bnQoYyxhKX1jYXRjaChlKXt9fX1jYXRjaChkKXt9cmV0dXJuITB9ZnVuY3Rpb24gRmooYSxiLGMsZCl7dGhpcy50YWc9YTt0aGlzLmtleT1jO3RoaXMuc2libGluZz10aGlzLmNoaWxkPXRoaXMucmV0dXJuPXRoaXMuc3RhdGVOb2RlPXRoaXMudHlwZT10aGlzLmVsZW1lbnRUeXBlPW51bGw7dGhpcy5pbmRleD0wO3RoaXMucmVmPW51bGw7dGhpcy5wZW5kaW5nUHJvcHM9Yjt0aGlzLmRlcGVuZGVuY2llcz10aGlzLm1lbW9pemVkU3RhdGU9dGhpcy51cGRhdGVRdWV1ZT10aGlzLm1lbW9pemVkUHJvcHM9bnVsbDt0aGlzLm1vZGU9ZDt0aGlzLmVmZmVjdFRhZz0wO3RoaXMubGFzdEVmZmVjdD10aGlzLmZpcnN0RWZmZWN0PXRoaXMubmV4dEVmZmVjdD0KbnVsbDt0aGlzLmNoaWxkRXhwaXJhdGlvblRpbWU9dGhpcy5leHBpcmF0aW9uVGltZT0wO3RoaXMuYWx0ZXJuYXRlPW51bGx9ZnVuY3Rpb24gR2UoYSl7YT1hLnByb3RvdHlwZTtyZXR1cm4hKCFhfHwhYS5pc1JlYWN0Q29tcG9uZW50KX1mdW5jdGlvbiBHaihhKXtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGEpcmV0dXJuIEdlKGEpPzE6MDtpZih2b2lkIDAhPT1hJiZudWxsIT09YSl7YT1hLiQkdHlwZW9mO2lmKGE9PT16ZClyZXR1cm4gMTE7aWYoYT09PUFkKXJldHVybiAxNH1yZXR1cm4gMn1mdW5jdGlvbiBTYShhLGIpe3ZhciBjPWEuYWx0ZXJuYXRlO251bGw9PT1jPyhjPWxhKGEudGFnLGIsYS5rZXksYS5tb2RlKSxjLmVsZW1lbnRUeXBlPWEuZWxlbWVudFR5cGUsYy50eXBlPWEudHlwZSxjLnN0YXRlTm9kZT1hLnN0YXRlTm9kZSxjLmFsdGVybmF0ZT1hLGEuYWx0ZXJuYXRlPWMpOihjLnBlbmRpbmdQcm9wcz1iLGMuZWZmZWN0VGFnPTAsYy5uZXh0RWZmZWN0PW51bGwsYy5maXJzdEVmZmVjdD0KbnVsbCxjLmxhc3RFZmZlY3Q9bnVsbCk7Yy5jaGlsZEV4cGlyYXRpb25UaW1lPWEuY2hpbGRFeHBpcmF0aW9uVGltZTtjLmV4cGlyYXRpb25UaW1lPWEuZXhwaXJhdGlvblRpbWU7Yy5jaGlsZD1hLmNoaWxkO2MubWVtb2l6ZWRQcm9wcz1hLm1lbW9pemVkUHJvcHM7Yy5tZW1vaXplZFN0YXRlPWEubWVtb2l6ZWRTdGF0ZTtjLnVwZGF0ZVF1ZXVlPWEudXBkYXRlUXVldWU7Yj1hLmRlcGVuZGVuY2llcztjLmRlcGVuZGVuY2llcz1udWxsPT09Yj9udWxsOntleHBpcmF0aW9uVGltZTpiLmV4cGlyYXRpb25UaW1lLGZpcnN0Q29udGV4dDpiLmZpcnN0Q29udGV4dCxyZXNwb25kZXJzOmIucmVzcG9uZGVyc307Yy5zaWJsaW5nPWEuc2libGluZztjLmluZGV4PWEuaW5kZXg7Yy5yZWY9YS5yZWY7cmV0dXJuIGN9ZnVuY3Rpb24gT2MoYSxiLGMsZCxlLGYpe3ZhciBnPTI7ZD1hO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYSlHZShhKSYmKGc9MSk7ZWxzZSBpZigic3RyaW5nIj09PXR5cGVvZiBhKWc9CjU7ZWxzZSBhOnN3aXRjaChhKXtjYXNlIE1hOnJldHVybiBIYShjLmNoaWxkcmVuLGUsZixiKTtjYXNlIEhqOmc9ODtlfD03O2JyZWFrO2Nhc2UgQWY6Zz04O2V8PTE7YnJlYWs7Y2FzZSBrYzpyZXR1cm4gYT1sYSgxMixjLGIsZXw4KSxhLmVsZW1lbnRUeXBlPWtjLGEudHlwZT1rYyxhLmV4cGlyYXRpb25UaW1lPWYsYTtjYXNlIGxjOnJldHVybiBhPWxhKDEzLGMsYixlKSxhLnR5cGU9bGMsYS5lbGVtZW50VHlwZT1sYyxhLmV4cGlyYXRpb25UaW1lPWYsYTtjYXNlIHlkOnJldHVybiBhPWxhKDE5LGMsYixlKSxhLmVsZW1lbnRUeXBlPXlkLGEuZXhwaXJhdGlvblRpbWU9ZixhO2RlZmF1bHQ6aWYoIm9iamVjdCI9PT10eXBlb2YgYSYmbnVsbCE9PWEpc3dpdGNoKGEuJCR0eXBlb2Ype2Nhc2UgQ2Y6Zz0xMDticmVhayBhO2Nhc2UgQmY6Zz05O2JyZWFrIGE7Y2FzZSB6ZDpnPTExO2JyZWFrIGE7Y2FzZSBBZDpnPTE0O2JyZWFrIGE7Y2FzZSBFZjpnPTE2O2Q9bnVsbDticmVhayBhO2Nhc2UgRGY6Zz0KMjI7YnJlYWsgYX10aHJvdyBFcnJvcihrKDEzMCxudWxsPT1hP2E6dHlwZW9mIGEsIiIpKTt9Yj1sYShnLGMsYixlKTtiLmVsZW1lbnRUeXBlPWE7Yi50eXBlPWQ7Yi5leHBpcmF0aW9uVGltZT1mO3JldHVybiBifWZ1bmN0aW9uIEhhKGEsYixjLGQpe2E9bGEoNyxhLGQsYik7YS5leHBpcmF0aW9uVGltZT1jO3JldHVybiBhfWZ1bmN0aW9uIHFlKGEsYixjKXthPWxhKDYsYSxudWxsLGIpO2EuZXhwaXJhdGlvblRpbWU9YztyZXR1cm4gYX1mdW5jdGlvbiByZShhLGIsYyl7Yj1sYSg0LG51bGwhPT1hLmNoaWxkcmVuP2EuY2hpbGRyZW46W10sYS5rZXksYik7Yi5leHBpcmF0aW9uVGltZT1jO2Iuc3RhdGVOb2RlPXtjb250YWluZXJJbmZvOmEuY29udGFpbmVySW5mbyxwZW5kaW5nQ2hpbGRyZW46bnVsbCxpbXBsZW1lbnRhdGlvbjphLmltcGxlbWVudGF0aW9ufTtyZXR1cm4gYn1mdW5jdGlvbiBJaihhLGIsYyl7dGhpcy50YWc9Yjt0aGlzLmN1cnJlbnQ9bnVsbDt0aGlzLmNvbnRhaW5lckluZm89CmE7dGhpcy5waW5nQ2FjaGU9dGhpcy5wZW5kaW5nQ2hpbGRyZW49bnVsbDt0aGlzLmZpbmlzaGVkRXhwaXJhdGlvblRpbWU9MDt0aGlzLmZpbmlzaGVkV29yaz1udWxsO3RoaXMudGltZW91dEhhbmRsZT0tMTt0aGlzLnBlbmRpbmdDb250ZXh0PXRoaXMuY29udGV4dD1udWxsO3RoaXMuaHlkcmF0ZT1jO3RoaXMuY2FsbGJhY2tOb2RlPW51bGw7dGhpcy5jYWxsYmFja1ByaW9yaXR5PTkwO3RoaXMubGFzdEV4cGlyZWRUaW1lPXRoaXMubGFzdFBpbmdlZFRpbWU9dGhpcy5uZXh0S25vd25QZW5kaW5nTGV2ZWw9dGhpcy5sYXN0U3VzcGVuZGVkVGltZT10aGlzLmZpcnN0U3VzcGVuZGVkVGltZT10aGlzLmZpcnN0UGVuZGluZ1RpbWU9MH1mdW5jdGlvbiBLaChhLGIpe3ZhciBjPWEuZmlyc3RTdXNwZW5kZWRUaW1lO2E9YS5sYXN0U3VzcGVuZGVkVGltZTtyZXR1cm4gMCE9PWMmJmM+PWImJmE8PWJ9ZnVuY3Rpb24gWWEoYSxiKXt2YXIgYz1hLmZpcnN0U3VzcGVuZGVkVGltZSxkPWEubGFzdFN1c3BlbmRlZFRpbWU7CmM8YiYmKGEuZmlyc3RTdXNwZW5kZWRUaW1lPWIpO2lmKGQ+Ynx8MD09PWMpYS5sYXN0U3VzcGVuZGVkVGltZT1iO2I8PWEubGFzdFBpbmdlZFRpbWUmJihhLmxhc3RQaW5nZWRUaW1lPTApO2I8PWEubGFzdEV4cGlyZWRUaW1lJiYoYS5sYXN0RXhwaXJlZFRpbWU9MCl9ZnVuY3Rpb24geWgoYSxiKXtiPmEuZmlyc3RQZW5kaW5nVGltZSYmKGEuZmlyc3RQZW5kaW5nVGltZT1iKTt2YXIgYz1hLmZpcnN0U3VzcGVuZGVkVGltZTswIT09YyYmKGI+PWM/YS5maXJzdFN1c3BlbmRlZFRpbWU9YS5sYXN0U3VzcGVuZGVkVGltZT1hLm5leHRLbm93blBlbmRpbmdMZXZlbD0wOmI+PWEubGFzdFN1c3BlbmRlZFRpbWUmJihhLmxhc3RTdXNwZW5kZWRUaW1lPWIrMSksYj5hLm5leHRLbm93blBlbmRpbmdMZXZlbCYmKGEubmV4dEtub3duUGVuZGluZ0xldmVsPWIpKX1mdW5jdGlvbiBVZShhLGIpe3ZhciBjPWEubGFzdEV4cGlyZWRUaW1lO2lmKDA9PT1jfHxjPmIpYS5sYXN0RXhwaXJlZFRpbWU9Yn0KZnVuY3Rpb24gbWQoYSxiLGMsZCl7dmFyIGU9Yi5jdXJyZW50LGY9a2EoKSxnPVZiLnN1c3BlbnNlO2Y9VmEoZixlLGcpO2E6aWYoYyl7Yz1jLl9yZWFjdEludGVybmFsRmliZXI7Yjp7aWYoTmEoYykhPT1jfHwxIT09Yy50YWcpdGhyb3cgRXJyb3IoaygxNzApKTt2YXIgaD1jO2Rve3N3aXRjaChoLnRhZyl7Y2FzZSAzOmg9aC5zdGF0ZU5vZGUuY29udGV4dDticmVhayBiO2Nhc2UgMTppZihOKGgudHlwZSkpe2g9aC5zdGF0ZU5vZGUuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNZXJnZWRDaGlsZENvbnRleHQ7YnJlYWsgYn19aD1oLnJldHVybn13aGlsZShudWxsIT09aCk7dGhyb3cgRXJyb3IoaygxNzEpKTt9aWYoMT09PWMudGFnKXt2YXIgbT1jLnR5cGU7aWYoTihtKSl7Yz1HZyhjLG0saCk7YnJlYWsgYX19Yz1ofWVsc2UgYz1DYTtudWxsPT09Yi5jb250ZXh0P2IuY29udGV4dD1jOmIucGVuZGluZ0NvbnRleHQ9YztiPUVhKGYsZyk7Yi5wYXlsb2FkPXtlbGVtZW50OmF9O2Q9dm9pZCAwPT09CmQ/bnVsbDpkO251bGwhPT1kJiYoYi5jYWxsYmFjaz1kKTtGYShlLGIpO0phKGUsZik7cmV0dXJuIGZ9ZnVuY3Rpb24gY2YoYSl7YT1hLmN1cnJlbnQ7aWYoIWEuY2hpbGQpcmV0dXJuIG51bGw7c3dpdGNoKGEuY2hpbGQudGFnKXtjYXNlIDU6cmV0dXJuIGEuY2hpbGQuc3RhdGVOb2RlO2RlZmF1bHQ6cmV0dXJuIGEuY2hpbGQuc3RhdGVOb2RlfX1mdW5jdGlvbiBXaChhLGIpe2E9YS5tZW1vaXplZFN0YXRlO251bGwhPT1hJiZudWxsIT09YS5kZWh5ZHJhdGVkJiZhLnJldHJ5VGltZTxiJiYoYS5yZXRyeVRpbWU9Yil9ZnVuY3Rpb24gZGYoYSxiKXtXaChhLGIpOyhhPWEuYWx0ZXJuYXRlKSYmV2goYSxiKX1mdW5jdGlvbiBlZihhLGIsYyl7Yz1udWxsIT1jJiYhMD09PWMuaHlkcmF0ZTt2YXIgZD1uZXcgSWooYSxiLGMpLGU9bGEoMyxudWxsLG51bGwsMj09PWI/NzoxPT09Yj8zOjApO2QuY3VycmVudD1lO2Uuc3RhdGVOb2RlPWQ7bmUoZSk7YVtMYl09ZC5jdXJyZW50O2MmJjAhPT1iJiYKeGkoYSw5PT09YS5ub2RlVHlwZT9hOmEub3duZXJEb2N1bWVudCk7dGhpcy5faW50ZXJuYWxSb290PWR9ZnVuY3Rpb24gYmMoYSl7cmV0dXJuISghYXx8MSE9PWEubm9kZVR5cGUmJjkhPT1hLm5vZGVUeXBlJiYxMSE9PWEubm9kZVR5cGUmJig4IT09YS5ub2RlVHlwZXx8IiByZWFjdC1tb3VudC1wb2ludC11bnN0YWJsZSAiIT09YS5ub2RlVmFsdWUpKX1mdW5jdGlvbiBKaihhLGIpe2J8fChiPWE/OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YS5maXJzdENoaWxkOm51bGwsYj0hKCFifHwxIT09Yi5ub2RlVHlwZXx8IWIuaGFzQXR0cmlidXRlKCJkYXRhLXJlYWN0cm9vdCIpKSk7aWYoIWIpZm9yKHZhciBjO2M9YS5sYXN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYyk7cmV0dXJuIG5ldyBlZihhLDAsYj97aHlkcmF0ZTohMH06dm9pZCAwKX1mdW5jdGlvbiBuZChhLGIsYyxkLGUpe3ZhciBmPWMuX3JlYWN0Um9vdENvbnRhaW5lcjtpZihmKXt2YXIgZz1mLl9pbnRlcm5hbFJvb3Q7CmlmKCJmdW5jdGlvbiI9PT10eXBlb2YgZSl7dmFyIGg9ZTtlPWZ1bmN0aW9uKCl7dmFyIGE9Y2YoZyk7aC5jYWxsKGEpfX1tZChiLGcsYSxlKX1lbHNle2Y9Yy5fcmVhY3RSb290Q29udGFpbmVyPUpqKGMsZCk7Zz1mLl9pbnRlcm5hbFJvb3Q7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBlKXt2YXIgbT1lO2U9ZnVuY3Rpb24oKXt2YXIgYT1jZihnKTttLmNhbGwoYSl9fVJoKGZ1bmN0aW9uKCl7bWQoYixnLGEsZSl9KX1yZXR1cm4gY2YoZyl9ZnVuY3Rpb24gS2ooYSxiLGMpe3ZhciBkPTM8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTpudWxsO3JldHVybnskJHR5cGVvZjpnYixrZXk6bnVsbD09ZD9udWxsOiIiK2QsY2hpbGRyZW46YSxjb250YWluZXJJbmZvOmIsaW1wbGVtZW50YXRpb246Y319ZnVuY3Rpb24gWGgoYSxiKXt2YXIgYz0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bnVsbDsKaWYoIWJjKGIpKXRocm93IEVycm9yKGsoMjAwKSk7cmV0dXJuIEtqKGEsYixudWxsLGMpfWlmKCFlYSl0aHJvdyBFcnJvcihrKDIyNykpO3ZhciBraT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsbSl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDMpO3RyeXtiLmFwcGx5KGMsbil9Y2F0Y2goQyl7dGhpcy5vbkVycm9yKEMpfX0seWI9ITEsZ2M9bnVsbCxoYz0hMSxwZD1udWxsLGxpPXtvbkVycm9yOmZ1bmN0aW9uKGEpe3liPSEwO2djPWF9fSx0ZD1udWxsLHJmPW51bGwsbWY9bnVsbCxpYz1udWxsLGNiPXt9LGpjPVtdLHFkPXt9LGRiPXt9LHJkPXt9LHdhPSEoInVuZGVmaW5lZCI9PT10eXBlb2Ygd2luZG93fHwidW5kZWZpbmVkIj09PXR5cGVvZiB3aW5kb3cuZG9jdW1lbnR8fCJ1bmRlZmluZWQiPT09dHlwZW9mIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KSxNPWVhLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVELmFzc2lnbiwKc2Q9bnVsbCxlYj1udWxsLGZiPW51bGwsZWU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYShiKX0sZWc9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gYShiLGMsZCxlKX0sdmQ9ZnVuY3Rpb24oKXt9LHZmPWVlLE9hPSExLHdkPSExLFo9ZWEuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQuU2NoZWR1bGVyLExqPVoudW5zdGFibGVfY2FuY2VsQ2FsbGJhY2ssZmY9Wi51bnN0YWJsZV9ub3csJGY9Wi51bnN0YWJsZV9zY2hlZHVsZUNhbGxiYWNrLE1qPVoudW5zdGFibGVfc2hvdWxkWWllbGQsWWg9Wi51bnN0YWJsZV9yZXF1ZXN0UGFpbnQsUGQ9Wi51bnN0YWJsZV9ydW5XaXRoUHJpb3JpdHksTmo9Wi51bnN0YWJsZV9nZXRDdXJyZW50UHJpb3JpdHlMZXZlbCxPaj1aLnVuc3RhYmxlX0ltbWVkaWF0ZVByaW9yaXR5LFpoPVoudW5zdGFibGVfVXNlckJsb2NraW5nUHJpb3JpdHksYWc9Wi51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSxQaj1aLnVuc3RhYmxlX0xvd1ByaW9yaXR5LApRaj1aLnVuc3RhYmxlX0lkbGVQcmlvcml0eSxvaT0vXls6QS1aX2Etelx1MDBDMC1cdTAwRDZcdTAwRDgtXHUwMEY2XHUwMEY4LVx1MDJGRlx1MDM3MC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjA3MC1cdTIxOEZcdTJDMDAtXHUyRkVGXHUzMDAxLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkZEXVs6QS1aX2Etelx1MDBDMC1cdTAwRDZcdTAwRDgtXHUwMEY2XHUwMEY4LVx1MDJGRlx1MDM3MC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjA3MC1cdTIxOEZcdTJDMDAtXHUyRkVGXHUzMDAxLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkZEXC0uMC05XHUwMEI3XHUwMzAwLVx1MDM2Rlx1MjAzRi1cdTIwNDBdKiQvLHdmPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkseWY9e30seGY9e30sRT17fTsiY2hpbGRyZW4gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgZGVmYXVsdFZhbHVlIGRlZmF1bHRDaGVja2VkIGlubmVySFRNTCBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmcgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIHN0eWxlIi5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24oYSl7RVthXT0KbmV3IEwoYSwwLCExLGEsbnVsbCwhMSl9KTtbWyJhY2NlcHRDaGFyc2V0IiwiYWNjZXB0LWNoYXJzZXQiXSxbImNsYXNzTmFtZSIsImNsYXNzIl0sWyJodG1sRm9yIiwiZm9yIl0sWyJodHRwRXF1aXYiLCJodHRwLWVxdWl2Il1dLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YVswXTtFW2JdPW5ldyBMKGIsMSwhMSxhWzFdLG51bGwsITEpfSk7WyJjb250ZW50RWRpdGFibGUiLCJkcmFnZ2FibGUiLCJzcGVsbENoZWNrIiwidmFsdWUiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0VbYV09bmV3IEwoYSwyLCExLGEudG9Mb3dlckNhc2UoKSxudWxsLCExKX0pO1siYXV0b1JldmVyc2UiLCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkIiwiZm9jdXNhYmxlIiwicHJlc2VydmVBbHBoYSJdLmZvckVhY2goZnVuY3Rpb24oYSl7RVthXT1uZXcgTChhLDIsITEsYSxudWxsLCExKX0pOyJhbGxvd0Z1bGxTY3JlZW4gYXN5bmMgYXV0b0ZvY3VzIGF1dG9QbGF5IGNvbnRyb2xzIGRlZmF1bHQgZGVmZXIgZGlzYWJsZWQgZGlzYWJsZVBpY3R1cmVJblBpY3R1cmUgZm9ybU5vVmFsaWRhdGUgaGlkZGVuIGxvb3Agbm9Nb2R1bGUgbm9WYWxpZGF0ZSBvcGVuIHBsYXlzSW5saW5lIHJlYWRPbmx5IHJlcXVpcmVkIHJldmVyc2VkIHNjb3BlZCBzZWFtbGVzcyBpdGVtU2NvcGUiLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbihhKXtFW2FdPQpuZXcgTChhLDMsITEsYS50b0xvd2VyQ2FzZSgpLG51bGwsITEpfSk7WyJjaGVja2VkIiwibXVsdGlwbGUiLCJtdXRlZCIsInNlbGVjdGVkIl0uZm9yRWFjaChmdW5jdGlvbihhKXtFW2FdPW5ldyBMKGEsMywhMCxhLG51bGwsITEpfSk7WyJjYXB0dXJlIiwiZG93bmxvYWQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0VbYV09bmV3IEwoYSw0LCExLGEsbnVsbCwhMSl9KTtbImNvbHMiLCJyb3dzIiwic2l6ZSIsInNwYW4iXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0VbYV09bmV3IEwoYSw2LCExLGEsbnVsbCwhMSl9KTtbInJvd1NwYW4iLCJzdGFydCJdLmZvckVhY2goZnVuY3Rpb24oYSl7RVthXT1uZXcgTChhLDUsITEsYS50b0xvd2VyQ2FzZSgpLG51bGwsITEpfSk7dmFyIGdmPS9bXC06XShbYS16XSkvZyxoZj1mdW5jdGlvbihhKXtyZXR1cm4gYVsxXS50b1VwcGVyQ2FzZSgpfTsiYWNjZW50LWhlaWdodCBhbGlnbm1lbnQtYmFzZWxpbmUgYXJhYmljLWZvcm0gYmFzZWxpbmUtc2hpZnQgY2FwLWhlaWdodCBjbGlwLXBhdGggY2xpcC1ydWxlIGNvbG9yLWludGVycG9sYXRpb24gY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzIGNvbG9yLXByb2ZpbGUgY29sb3ItcmVuZGVyaW5nIGRvbWluYW50LWJhc2VsaW5lIGVuYWJsZS1iYWNrZ3JvdW5kIGZpbGwtb3BhY2l0eSBmaWxsLXJ1bGUgZmxvb2QtY29sb3IgZmxvb2Qtb3BhY2l0eSBmb250LWZhbWlseSBmb250LXNpemUgZm9udC1zaXplLWFkanVzdCBmb250LXN0cmV0Y2ggZm9udC1zdHlsZSBmb250LXZhcmlhbnQgZm9udC13ZWlnaHQgZ2x5cGgtbmFtZSBnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsIGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsIGhvcml6LWFkdi14IGhvcml6LW9yaWdpbi14IGltYWdlLXJlbmRlcmluZyBsZXR0ZXItc3BhY2luZyBsaWdodGluZy1jb2xvciBtYXJrZXItZW5kIG1hcmtlci1taWQgbWFya2VyLXN0YXJ0IG92ZXJsaW5lLXBvc2l0aW9uIG92ZXJsaW5lLXRoaWNrbmVzcyBwYWludC1vcmRlciBwYW5vc2UtMSBwb2ludGVyLWV2ZW50cyByZW5kZXJpbmctaW50ZW50IHNoYXBlLXJlbmRlcmluZyBzdG9wLWNvbG9yIHN0b3Atb3BhY2l0eSBzdHJpa2V0aHJvdWdoLXBvc2l0aW9uIHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzIHN0cm9rZS1kYXNoYXJyYXkgc3Ryb2tlLWRhc2hvZmZzZXQgc3Ryb2tlLWxpbmVjYXAgc3Ryb2tlLWxpbmVqb2luIHN0cm9rZS1taXRlcmxpbWl0IHN0cm9rZS1vcGFjaXR5IHN0cm9rZS13aWR0aCB0ZXh0LWFuY2hvciB0ZXh0LWRlY29yYXRpb24gdGV4dC1yZW5kZXJpbmcgdW5kZXJsaW5lLXBvc2l0aW9uIHVuZGVybGluZS10aGlja25lc3MgdW5pY29kZS1iaWRpIHVuaWNvZGUtcmFuZ2UgdW5pdHMtcGVyLWVtIHYtYWxwaGFiZXRpYyB2LWhhbmdpbmcgdi1pZGVvZ3JhcGhpYyB2LW1hdGhlbWF0aWNhbCB2ZWN0b3ItZWZmZWN0IHZlcnQtYWR2LXkgdmVydC1vcmlnaW4teCB2ZXJ0LW9yaWdpbi15IHdvcmQtc3BhY2luZyB3cml0aW5nLW1vZGUgeG1sbnM6eGxpbmsgeC1oZWlnaHQiLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj0KYS5yZXBsYWNlKGdmLGhmKTtFW2JdPW5ldyBMKGIsMSwhMSxhLG51bGwsITEpfSk7InhsaW5rOmFjdHVhdGUgeGxpbms6YXJjcm9sZSB4bGluazpyb2xlIHhsaW5rOnNob3cgeGxpbms6dGl0bGUgeGxpbms6dHlwZSIuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShnZixoZik7RVtiXT1uZXcgTChiLDEsITEsYSwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsITEpfSk7WyJ4bWw6YmFzZSIsInhtbDpsYW5nIiwieG1sOnNwYWNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoZ2YsaGYpO0VbYl09bmV3IEwoYiwxLCExLGEsImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsITEpfSk7WyJ0YWJJbmRleCIsImNyb3NzT3JpZ2luIl0uZm9yRWFjaChmdW5jdGlvbihhKXtFW2FdPW5ldyBMKGEsMSwhMSxhLnRvTG93ZXJDYXNlKCksbnVsbCwhMSl9KTtFLnhsaW5rSHJlZj1uZXcgTCgieGxpbmtIcmVmIiwxLAohMSwieGxpbms6aHJlZiIsImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLCEwKTtbInNyYyIsImhyZWYiLCJhY3Rpb24iLCJmb3JtQWN0aW9uIl0uZm9yRWFjaChmdW5jdGlvbihhKXtFW2FdPW5ldyBMKGEsMSwhMSxhLnRvTG93ZXJDYXNlKCksbnVsbCwhMCl9KTt2YXIgZGE9ZWEuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQ7ZGEuaGFzT3duUHJvcGVydHkoIlJlYWN0Q3VycmVudERpc3BhdGNoZXIiKXx8KGRhLlJlYWN0Q3VycmVudERpc3BhdGNoZXI9e2N1cnJlbnQ6bnVsbH0pO2RhLmhhc093blByb3BlcnR5KCJSZWFjdEN1cnJlbnRCYXRjaENvbmZpZyIpfHwoZGEuUmVhY3RDdXJyZW50QmF0Y2hDb25maWc9e3N1c3BlbnNlOm51bGx9KTt2YXIgc2k9L14oLiopW1xcXC9dLyxRPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yLFBjPVE/U3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpOjYwMTAzLGdiPVE/U3ltYm9sLmZvcigicmVhY3QucG9ydGFsIik6CjYwMTA2LE1hPVE/U3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKTo2MDEwNyxBZj1RP1N5bWJvbC5mb3IoInJlYWN0LnN0cmljdF9tb2RlIik6NjAxMDgsa2M9UT9TeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpOjYwMTE0LENmPVE/U3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKTo2MDEwOSxCZj1RP1N5bWJvbC5mb3IoInJlYWN0LmNvbnRleHQiKTo2MDExMCxIaj1RP1N5bWJvbC5mb3IoInJlYWN0LmNvbmN1cnJlbnRfbW9kZSIpOjYwMTExLHpkPVE/U3ltYm9sLmZvcigicmVhY3QuZm9yd2FyZF9yZWYiKTo2MDExMixsYz1RP1N5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlIik6NjAxMTMseWQ9UT9TeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZV9saXN0Iik6NjAxMjAsQWQ9UT9TeW1ib2wuZm9yKCJyZWFjdC5tZW1vIik6NjAxMTUsRWY9UT9TeW1ib2wuZm9yKCJyZWFjdC5sYXp5Iik6NjAxMTYsRGY9UT9TeW1ib2wuZm9yKCJyZWFjdC5ibG9jayIpOjYwMTIxLHpmPSJmdW5jdGlvbiI9PT0KdHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG9kLHhoPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiIT09dHlwZW9mIE1TQXBwJiZNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbj9mdW5jdGlvbihiLGMsZCxlKXtNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbihmdW5jdGlvbigpe3JldHVybiBhKGIsYyxkLGUpfSl9OmF9KGZ1bmN0aW9uKGEsYil7aWYoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiE9PWEubmFtZXNwYWNlVVJJfHwiaW5uZXJIVE1MImluIGEpYS5pbm5lckhUTUw9YjtlbHNle29kPW9kfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtvZC5pbm5lckhUTUw9Ijxzdmc+IitiLnZhbHVlT2YoKS50b1N0cmluZygpKyI8L3N2Zz4iO2ZvcihiPW9kLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtiLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQoYi5maXJzdENoaWxkKX19KSxXYj1mdW5jdGlvbihhLApiKXtpZihiKXt2YXIgYz1hLmZpcnN0Q2hpbGQ7aWYoYyYmYz09PWEubGFzdENoaWxkJiYzPT09Yy5ub2RlVHlwZSl7Yy5ub2RlVmFsdWU9YjtyZXR1cm59fWEudGV4dENvbnRlbnQ9Yn0saWI9e2FuaW1hdGlvbmVuZDpuYygiQW5pbWF0aW9uIiwiQW5pbWF0aW9uRW5kIiksYW5pbWF0aW9uaXRlcmF0aW9uOm5jKCJBbmltYXRpb24iLCJBbmltYXRpb25JdGVyYXRpb24iKSxhbmltYXRpb25zdGFydDpuYygiQW5pbWF0aW9uIiwiQW5pbWF0aW9uU3RhcnQiKSx0cmFuc2l0aW9uZW5kOm5jKCJUcmFuc2l0aW9uIiwiVHJhbnNpdGlvbkVuZCIpfSxJZD17fSxPZj17fTt3YSYmKE9mPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJBbmltYXRpb25FdmVudCJpbiB3aW5kb3d8fChkZWxldGUgaWIuYW5pbWF0aW9uZW5kLmFuaW1hdGlvbixkZWxldGUgaWIuYW5pbWF0aW9uaXRlcmF0aW9uLmFuaW1hdGlvbixkZWxldGUgaWIuYW5pbWF0aW9uc3RhcnQuYW5pbWF0aW9uKSwiVHJhbnNpdGlvbkV2ZW50ImluCndpbmRvd3x8ZGVsZXRlIGliLnRyYW5zaXRpb25lbmQudHJhbnNpdGlvbik7dmFyICRoPW9jKCJhbmltYXRpb25lbmQiKSxhaT1vYygiYW5pbWF0aW9uaXRlcmF0aW9uIiksYmk9b2MoImFuaW1hdGlvbnN0YXJ0IiksY2k9b2MoInRyYW5zaXRpb25lbmQiKSxEYj0iYWJvcnQgY2FucGxheSBjYW5wbGF5dGhyb3VnaCBkdXJhdGlvbmNoYW5nZSBlbXB0aWVkIGVuY3J5cHRlZCBlbmRlZCBlcnJvciBsb2FkZWRkYXRhIGxvYWRlZG1ldGFkYXRhIGxvYWRzdGFydCBwYXVzZSBwbGF5IHBsYXlpbmcgcHJvZ3Jlc3MgcmF0ZWNoYW5nZSBzZWVrZWQgc2Vla2luZyBzdGFsbGVkIHN1c3BlbmQgdGltZXVwZGF0ZSB2b2x1bWVjaGFuZ2Ugd2FpdGluZyIuc3BsaXQoIiAiKSxQZj1uZXcgKCJmdW5jdGlvbiI9PT10eXBlb2YgV2Vha01hcD9XZWFrTWFwOk1hcCksQWI9bnVsbCx3aT1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLl9kaXNwYXRjaExpc3RlbmVycyxjPWEuX2Rpc3BhdGNoSW5zdGFuY2VzOwppZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZD0wO2Q8Yi5sZW5ndGgmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7ZCsrKWxmKGEsYltkXSxjW2RdKTtlbHNlIGImJmxmKGEsYixjKTthLl9kaXNwYXRjaExpc3RlbmVycz1udWxsO2EuX2Rpc3BhdGNoSW5zdGFuY2VzPW51bGw7YS5pc1BlcnNpc3RlbnQoKXx8YS5jb25zdHJ1Y3Rvci5yZWxlYXNlKGEpfX0scWM9W10sUmQ9ITEsZmE9W10seGE9bnVsbCx5YT1udWxsLHphPW51bGwsRWI9bmV3IE1hcCxGYj1uZXcgTWFwLEpiPVtdLE5kPSJtb3VzZWRvd24gbW91c2V1cCB0b3VjaGNhbmNlbCB0b3VjaGVuZCB0b3VjaHN0YXJ0IGF1eGNsaWNrIGRibGNsaWNrIHBvaW50ZXJjYW5jZWwgcG9pbnRlcmRvd24gcG9pbnRlcnVwIGRyYWdlbmQgZHJhZ3N0YXJ0IGRyb3AgY29tcG9zaXRpb25lbmQgY29tcG9zaXRpb25zdGFydCBrZXlkb3duIGtleXByZXNzIGtleXVwIGlucHV0IHRleHRJbnB1dCBjbG9zZSBjYW5jZWwgY29weSBjdXQgcGFzdGUgY2xpY2sgY2hhbmdlIGNvbnRleHRtZW51IHJlc2V0IHN1Ym1pdCIuc3BsaXQoIiAiKSwKeWk9ImZvY3VzIGJsdXIgZHJhZ2VudGVyIGRyYWdsZWF2ZSBtb3VzZW92ZXIgbW91c2VvdXQgcG9pbnRlcm92ZXIgcG9pbnRlcm91dCBnb3Rwb2ludGVyY2FwdHVyZSBsb3N0cG9pbnRlcmNhcHR1cmUiLnNwbGl0KCIgIiksZGc9e30sY2c9bmV3IE1hcCxUZD1uZXcgTWFwLFJqPVsiYWJvcnQiLCJhYm9ydCIsJGgsImFuaW1hdGlvbkVuZCIsYWksImFuaW1hdGlvbkl0ZXJhdGlvbiIsYmksImFuaW1hdGlvblN0YXJ0IiwiY2FucGxheSIsImNhblBsYXkiLCJjYW5wbGF5dGhyb3VnaCIsImNhblBsYXlUaHJvdWdoIiwiZHVyYXRpb25jaGFuZ2UiLCJkdXJhdGlvbkNoYW5nZSIsImVtcHRpZWQiLCJlbXB0aWVkIiwiZW5jcnlwdGVkIiwiZW5jcnlwdGVkIiwiZW5kZWQiLCJlbmRlZCIsImVycm9yIiwiZXJyb3IiLCJnb3Rwb2ludGVyY2FwdHVyZSIsImdvdFBvaW50ZXJDYXB0dXJlIiwibG9hZCIsImxvYWQiLCJsb2FkZWRkYXRhIiwibG9hZGVkRGF0YSIsImxvYWRlZG1ldGFkYXRhIiwibG9hZGVkTWV0YWRhdGEiLAoibG9hZHN0YXJ0IiwibG9hZFN0YXJ0IiwibG9zdHBvaW50ZXJjYXB0dXJlIiwibG9zdFBvaW50ZXJDYXB0dXJlIiwicGxheWluZyIsInBsYXlpbmciLCJwcm9ncmVzcyIsInByb2dyZXNzIiwic2Vla2luZyIsInNlZWtpbmciLCJzdGFsbGVkIiwic3RhbGxlZCIsInN1c3BlbmQiLCJzdXNwZW5kIiwidGltZXVwZGF0ZSIsInRpbWVVcGRhdGUiLGNpLCJ0cmFuc2l0aW9uRW5kIiwid2FpdGluZyIsIndhaXRpbmciXTtTZCgiYmx1ciBibHVyIGNhbmNlbCBjYW5jZWwgY2xpY2sgY2xpY2sgY2xvc2UgY2xvc2UgY29udGV4dG1lbnUgY29udGV4dE1lbnUgY29weSBjb3B5IGN1dCBjdXQgYXV4Y2xpY2sgYXV4Q2xpY2sgZGJsY2xpY2sgZG91YmxlQ2xpY2sgZHJhZ2VuZCBkcmFnRW5kIGRyYWdzdGFydCBkcmFnU3RhcnQgZHJvcCBkcm9wIGZvY3VzIGZvY3VzIGlucHV0IGlucHV0IGludmFsaWQgaW52YWxpZCBrZXlkb3duIGtleURvd24ga2V5cHJlc3Mga2V5UHJlc3Mga2V5dXAga2V5VXAgbW91c2Vkb3duIG1vdXNlRG93biBtb3VzZXVwIG1vdXNlVXAgcGFzdGUgcGFzdGUgcGF1c2UgcGF1c2UgcGxheSBwbGF5IHBvaW50ZXJjYW5jZWwgcG9pbnRlckNhbmNlbCBwb2ludGVyZG93biBwb2ludGVyRG93biBwb2ludGVydXAgcG9pbnRlclVwIHJhdGVjaGFuZ2UgcmF0ZUNoYW5nZSByZXNldCByZXNldCBzZWVrZWQgc2Vla2VkIHN1Ym1pdCBzdWJtaXQgdG91Y2hjYW5jZWwgdG91Y2hDYW5jZWwgdG91Y2hlbmQgdG91Y2hFbmQgdG91Y2hzdGFydCB0b3VjaFN0YXJ0IHZvbHVtZWNoYW5nZSB2b2x1bWVDaGFuZ2UiLnNwbGl0KCIgIiksCjApO1NkKCJkcmFnIGRyYWcgZHJhZ2VudGVyIGRyYWdFbnRlciBkcmFnZXhpdCBkcmFnRXhpdCBkcmFnbGVhdmUgZHJhZ0xlYXZlIGRyYWdvdmVyIGRyYWdPdmVyIG1vdXNlbW92ZSBtb3VzZU1vdmUgbW91c2VvdXQgbW91c2VPdXQgbW91c2VvdmVyIG1vdXNlT3ZlciBwb2ludGVybW92ZSBwb2ludGVyTW92ZSBwb2ludGVyb3V0IHBvaW50ZXJPdXQgcG9pbnRlcm92ZXIgcG9pbnRlck92ZXIgc2Nyb2xsIHNjcm9sbCB0b2dnbGUgdG9nZ2xlIHRvdWNobW92ZSB0b3VjaE1vdmUgd2hlZWwgd2hlZWwiLnNwbGl0KCIgIiksMSk7U2QoUmosMik7KGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspVGQuc2V0KGFbY10sYil9KSgiY2hhbmdlIHNlbGVjdGlvbmNoYW5nZSB0ZXh0SW5wdXQgY29tcG9zaXRpb25zdGFydCBjb21wb3NpdGlvbmVuZCBjb21wb3NpdGlvbnVwZGF0ZSIuc3BsaXQoIiAiKSwwKTt2YXIgSGk9WmgsR2k9UGQsdGM9ITAsS2I9e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLApib3JkZXJJbWFnZU91dHNldDohMCxib3JkZXJJbWFnZVNsaWNlOiEwLGJvcmRlckltYWdlV2lkdGg6ITAsYm94RmxleDohMCxib3hGbGV4R3JvdXA6ITAsYm94T3JkaW5hbEdyb3VwOiEwLGNvbHVtbkNvdW50OiEwLGNvbHVtbnM6ITAsZmxleDohMCxmbGV4R3JvdzohMCxmbGV4UG9zaXRpdmU6ITAsZmxleFNocmluazohMCxmbGV4TmVnYXRpdmU6ITAsZmxleE9yZGVyOiEwLGdyaWRBcmVhOiEwLGdyaWRSb3c6ITAsZ3JpZFJvd0VuZDohMCxncmlkUm93U3BhbjohMCxncmlkUm93U3RhcnQ6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TcGFuOiEwLGdyaWRDb2x1bW5TdGFydDohMCxmb250V2VpZ2h0OiEwLGxpbmVDbGFtcDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx0YWJTaXplOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMCxmaWxsT3BhY2l0eTohMCxmbG9vZE9wYWNpdHk6ITAsc3RvcE9wYWNpdHk6ITAsCnN0cm9rZURhc2hhcnJheTohMCxzdHJva2VEYXNob2Zmc2V0OiEwLHN0cm9rZU1pdGVybGltaXQ6ITAsc3Ryb2tlT3BhY2l0eTohMCxzdHJva2VXaWR0aDohMH0sU2o9WyJXZWJraXQiLCJtcyIsIk1veiIsIk8iXTtPYmplY3Qua2V5cyhLYikuZm9yRWFjaChmdW5jdGlvbihhKXtTai5mb3JFYWNoKGZ1bmN0aW9uKGIpe2I9YithLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyaW5nKDEpO0tiW2JdPUtiW2FdfSl9KTt2YXIgSWk9TSh7bWVudWl0ZW06ITB9LHthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGVtYmVkOiEwLGhyOiEwLGltZzohMCxpbnB1dDohMCxrZXlnZW46ITAsbGluazohMCxtZXRhOiEwLHBhcmFtOiEwLHNvdXJjZTohMCx0cmFjazohMCx3YnI6ITB9KSxuZz0iJCIsb2c9Ii8kIiwkZD0iJD8iLFpkPSIkISIsWmU9bnVsbCwkZT1udWxsLFdlPSJmdW5jdGlvbiI9PT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0OnZvaWQgMCx2aj0iZnVuY3Rpb24iPT09CnR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0OnZvaWQgMCxqZj1NYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSxBYT0iX19yZWFjdEludGVybmFsSW5zdGFuY2UkIitqZix2Yz0iX19yZWFjdEV2ZW50SGFuZGxlcnMkIitqZixMYj0iX19yZWFjdENvbnRhaW5lcmUkIitqZixCYT1udWxsLGNlPW51bGwsd2M9bnVsbDtNKFIucHJvdG90eXBlLHtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMDt2YXIgYT10aGlzLm5hdGl2ZUV2ZW50O2EmJihhLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKToidW5rbm93biIhPT10eXBlb2YgYS5yZXR1cm5WYWx1ZSYmKGEucmV0dXJuVmFsdWU9ITEpLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPXhjKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uYXRpdmVFdmVudDthJiYoYS5zdG9wUHJvcGFnYXRpb24/YS5zdG9wUHJvcGFnYXRpb24oKToidW5rbm93biIhPT0KdHlwZW9mIGEuY2FuY2VsQnViYmxlJiYoYS5jYW5jZWxCdWJibGU9ITApLHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9eGMpfSxwZXJzaXN0OmZ1bmN0aW9uKCl7dGhpcy5pc1BlcnNpc3RlbnQ9eGN9LGlzUGVyc2lzdGVudDp5YyxkZXN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25zdHJ1Y3Rvci5JbnRlcmZhY2UsYjtmb3IoYiBpbiBhKXRoaXNbYl09bnVsbDt0aGlzLm5hdGl2ZUV2ZW50PXRoaXMuX3RhcmdldEluc3Q9dGhpcy5kaXNwYXRjaENvbmZpZz1udWxsO3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9eWM7dGhpcy5fZGlzcGF0Y2hJbnN0YW5jZXM9dGhpcy5fZGlzcGF0Y2hMaXN0ZW5lcnM9bnVsbH19KTtSLkludGVyZmFjZT17dHlwZTpudWxsLHRhcmdldDpudWxsLGN1cnJlbnRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZXZlbnRQaGFzZTpudWxsLGJ1YmJsZXM6bnVsbCxjYW5jZWxhYmxlOm51bGwsdGltZVN0YW1wOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRpbWVTdGFtcHx8CkRhdGUubm93KCl9LGRlZmF1bHRQcmV2ZW50ZWQ6bnVsbCxpc1RydXN0ZWQ6bnVsbH07Ui5leHRlbmQ9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3JldHVybiBjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgYz10aGlzLGQ9ZnVuY3Rpb24oKXt9O2QucHJvdG90eXBlPWMucHJvdG90eXBlO2Q9bmV3IGQ7TShkLGIucHJvdG90eXBlKTtiLnByb3RvdHlwZT1kO2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPWI7Yi5JbnRlcmZhY2U9TSh7fSxjLkludGVyZmFjZSxhKTtiLmV4dGVuZD1jLmV4dGVuZDtzZyhiKTtyZXR1cm4gYn07c2coUik7dmFyIFRqPVIuZXh0ZW5kKHtkYXRhOm51bGx9KSxVaj1SLmV4dGVuZCh7ZGF0YTpudWxsfSksTmk9WzksMTMsMjcsMzJdLGRlPXdhJiYiQ29tcG9zaXRpb25FdmVudCJpbiB3aW5kb3csY2M9bnVsbDt3YSYmImRvY3VtZW50TW9kZSJpbiBkb2N1bWVudCYmKGNjPWRvY3VtZW50LmRvY3VtZW50TW9kZSk7dmFyIFZqPXdhJiYiVGV4dEV2ZW50ImluIHdpbmRvdyYmCiFjYyx4Zz13YSYmKCFkZXx8Y2MmJjg8Y2MmJjExPj1jYyksd2c9U3RyaW5nLmZyb21DaGFyQ29kZSgzMiksdWE9e2JlZm9yZUlucHV0OntwaGFzZWRSZWdpc3RyYXRpb25OYW1lczp7YnViYmxlZDoib25CZWZvcmVJbnB1dCIsY2FwdHVyZWQ6Im9uQmVmb3JlSW5wdXRDYXB0dXJlIn0sZGVwZW5kZW5jaWVzOlsiY29tcG9zaXRpb25lbmQiLCJrZXlwcmVzcyIsInRleHRJbnB1dCIsInBhc3RlIl19LGNvbXBvc2l0aW9uRW5kOntwaGFzZWRSZWdpc3RyYXRpb25OYW1lczp7YnViYmxlZDoib25Db21wb3NpdGlvbkVuZCIsY2FwdHVyZWQ6Im9uQ29tcG9zaXRpb25FbmRDYXB0dXJlIn0sZGVwZW5kZW5jaWVzOiJibHVyIGNvbXBvc2l0aW9uZW5kIGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpfSxjb21wb3NpdGlvblN0YXJ0OntwaGFzZWRSZWdpc3RyYXRpb25OYW1lczp7YnViYmxlZDoib25Db21wb3NpdGlvblN0YXJ0IixjYXB0dXJlZDoib25Db21wb3NpdGlvblN0YXJ0Q2FwdHVyZSJ9LApkZXBlbmRlbmNpZXM6ImJsdXIgY29tcG9zaXRpb25zdGFydCBrZXlkb3duIGtleXByZXNzIGtleXVwIG1vdXNlZG93biIuc3BsaXQoIiAiKX0sY29tcG9zaXRpb25VcGRhdGU6e3BoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOntidWJibGVkOiJvbkNvbXBvc2l0aW9uVXBkYXRlIixjYXB0dXJlZDoib25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmUifSxkZXBlbmRlbmNpZXM6ImJsdXIgY29tcG9zaXRpb251cGRhdGUga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBtb3VzZWRvd24iLnNwbGl0KCIgIil9fSx2Zz0hMSxtYj0hMSxXaj17ZXZlbnRUeXBlczp1YSxleHRyYWN0RXZlbnRzOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY7aWYoZGUpYjp7c3dpdGNoKGEpe2Nhc2UgImNvbXBvc2l0aW9uc3RhcnQiOnZhciBnPXVhLmNvbXBvc2l0aW9uU3RhcnQ7YnJlYWsgYjtjYXNlICJjb21wb3NpdGlvbmVuZCI6Zz11YS5jb21wb3NpdGlvbkVuZDticmVhayBiO2Nhc2UgImNvbXBvc2l0aW9udXBkYXRlIjpnPQp1YS5jb21wb3NpdGlvblVwZGF0ZTticmVhayBifWc9dm9pZCAwfWVsc2UgbWI/dGcoYSxjKSYmKGc9dWEuY29tcG9zaXRpb25FbmQpOiJrZXlkb3duIj09PWEmJjIyOT09PWMua2V5Q29kZSYmKGc9dWEuY29tcG9zaXRpb25TdGFydCk7Zz8oeGcmJiJrbyIhPT1jLmxvY2FsZSYmKG1ifHxnIT09dWEuY29tcG9zaXRpb25TdGFydD9nPT09dWEuY29tcG9zaXRpb25FbmQmJm1iJiYoZj1yZygpKTooQmE9ZCxjZT0idmFsdWUiaW4gQmE/QmEudmFsdWU6QmEudGV4dENvbnRlbnQsbWI9ITApKSxlPVRqLmdldFBvb2xlZChnLGIsYyxkKSxmP2UuZGF0YT1mOihmPXVnKGMpLG51bGwhPT1mJiYoZS5kYXRhPWYpKSxsYihlKSxmPWUpOmY9bnVsbDsoYT1Waj9PaShhLGMpOlBpKGEsYykpPyhiPVVqLmdldFBvb2xlZCh1YS5iZWZvcmVJbnB1dCxiLGMsZCksYi5kYXRhPWEsbGIoYikpOmI9bnVsbDtyZXR1cm4gbnVsbD09PWY/YjpudWxsPT09Yj9mOltmLGJdfX0sUWk9e2NvbG9yOiEwLGRhdGU6ITAsCmRhdGV0aW1lOiEwLCJkYXRldGltZS1sb2NhbCI6ITAsZW1haWw6ITAsbW9udGg6ITAsbnVtYmVyOiEwLHBhc3N3b3JkOiEwLHJhbmdlOiEwLHNlYXJjaDohMCx0ZWw6ITAsdGV4dDohMCx0aW1lOiEwLHVybDohMCx3ZWVrOiEwfSxBZz17Y2hhbmdlOntwaGFzZWRSZWdpc3RyYXRpb25OYW1lczp7YnViYmxlZDoib25DaGFuZ2UiLGNhcHR1cmVkOiJvbkNoYW5nZUNhcHR1cmUifSxkZXBlbmRlbmNpZXM6ImJsdXIgY2hhbmdlIGNsaWNrIGZvY3VzIGlucHV0IGtleWRvd24ga2V5dXAgc2VsZWN0aW9uY2hhbmdlIi5zcGxpdCgiICIpfX0sTWI9bnVsbCxOYj1udWxsLGtmPSExO3dhJiYoa2Y9VGYoImlucHV0IikmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw5PGRvY3VtZW50LmRvY3VtZW50TW9kZSkpO3ZhciBYaj17ZXZlbnRUeXBlczpBZyxfaXNJbnB1dEV2ZW50U3VwcG9ydGVkOmtmLGV4dHJhY3RFdmVudHM6ZnVuY3Rpb24oYSxiLGMsZCxlKXtlPWI/UGEoYik6d2luZG93O3ZhciBmPQplLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoInNlbGVjdCI9PT1mfHwiaW5wdXQiPT09ZiYmImZpbGUiPT09ZS50eXBlKXZhciBnPVNpO2Vsc2UgaWYoeWcoZSkpaWYoa2YpZz1XaTtlbHNle2c9VWk7dmFyIGg9VGl9ZWxzZShmPWUubm9kZU5hbWUpJiYiaW5wdXQiPT09Zi50b0xvd2VyQ2FzZSgpJiYoImNoZWNrYm94Ij09PWUudHlwZXx8InJhZGlvIj09PWUudHlwZSkmJihnPVZpKTtpZihnJiYoZz1nKGEsYikpKXJldHVybiB6ZyhnLGMsZCk7aCYmaChhLGUsYik7ImJsdXIiPT09YSYmKGE9ZS5fd3JhcHBlclN0YXRlKSYmYS5jb250cm9sbGVkJiYibnVtYmVyIj09PWUudHlwZSYmRWQoZSwibnVtYmVyIixlLnZhbHVlKX19LGRjPVIuZXh0ZW5kKHt2aWV3Om51bGwsZGV0YWlsOm51bGx9KSxZaT17QWx0OiJhbHRLZXkiLENvbnRyb2w6ImN0cmxLZXkiLE1ldGE6Im1ldGFLZXkiLFNoaWZ0OiJzaGlmdEtleSJ9LGRpPTAsZWk9MCxmaT0hMSxnaT0hMSxlYz1kYy5leHRlbmQoe3NjcmVlblg6bnVsbCwKc2NyZWVuWTpudWxsLGNsaWVudFg6bnVsbCxjbGllbnRZOm51bGwscGFnZVg6bnVsbCxwYWdlWTpudWxsLGN0cmxLZXk6bnVsbCxzaGlmdEtleTpudWxsLGFsdEtleTpudWxsLG1ldGFLZXk6bnVsbCxnZXRNb2RpZmllclN0YXRlOmZlLGJ1dHRvbjpudWxsLGJ1dHRvbnM6bnVsbCxyZWxhdGVkVGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlbGF0ZWRUYXJnZXR8fChhLmZyb21FbGVtZW50PT09YS5zcmNFbGVtZW50P2EudG9FbGVtZW50OmEuZnJvbUVsZW1lbnQpfSxtb3ZlbWVudFg6ZnVuY3Rpb24oYSl7aWYoIm1vdmVtZW50WCJpbiBhKXJldHVybiBhLm1vdmVtZW50WDt2YXIgYj1kaTtkaT1hLnNjcmVlblg7cmV0dXJuIGZpPyJtb3VzZW1vdmUiPT09YS50eXBlP2Euc2NyZWVuWC1iOjA6KGZpPSEwLDApfSxtb3ZlbWVudFk6ZnVuY3Rpb24oYSl7aWYoIm1vdmVtZW50WSJpbiBhKXJldHVybiBhLm1vdmVtZW50WTt2YXIgYj1laTtlaT1hLnNjcmVlblk7cmV0dXJuIGdpPyJtb3VzZW1vdmUiPT09CmEudHlwZT9hLnNjcmVlblktYjowOihnaT0hMCwwKX19KSxoaT1lYy5leHRlbmQoe3BvaW50ZXJJZDpudWxsLHdpZHRoOm51bGwsaGVpZ2h0Om51bGwscHJlc3N1cmU6bnVsbCx0YW5nZW50aWFsUHJlc3N1cmU6bnVsbCx0aWx0WDpudWxsLHRpbHRZOm51bGwsdHdpc3Q6bnVsbCxwb2ludGVyVHlwZTpudWxsLGlzUHJpbWFyeTpudWxsfSksZmM9e21vdXNlRW50ZXI6e3JlZ2lzdHJhdGlvbk5hbWU6Im9uTW91c2VFbnRlciIsZGVwZW5kZW5jaWVzOlsibW91c2VvdXQiLCJtb3VzZW92ZXIiXX0sbW91c2VMZWF2ZTp7cmVnaXN0cmF0aW9uTmFtZToib25Nb3VzZUxlYXZlIixkZXBlbmRlbmNpZXM6WyJtb3VzZW91dCIsIm1vdXNlb3ZlciJdfSxwb2ludGVyRW50ZXI6e3JlZ2lzdHJhdGlvbk5hbWU6Im9uUG9pbnRlckVudGVyIixkZXBlbmRlbmNpZXM6WyJwb2ludGVyb3V0IiwicG9pbnRlcm92ZXIiXX0scG9pbnRlckxlYXZlOntyZWdpc3RyYXRpb25OYW1lOiJvblBvaW50ZXJMZWF2ZSIsZGVwZW5kZW5jaWVzOlsicG9pbnRlcm91dCIsCiJwb2ludGVyb3ZlciJdfX0sWWo9e2V2ZW50VHlwZXM6ZmMsZXh0cmFjdEV2ZW50czpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJtb3VzZW92ZXIiPT09YXx8InBvaW50ZXJvdmVyIj09PWEsZz0ibW91c2VvdXQiPT09YXx8InBvaW50ZXJvdXQiPT09YTtpZihmJiYwPT09KGUmMzIpJiYoYy5yZWxhdGVkVGFyZ2V0fHxjLmZyb21FbGVtZW50KXx8IWcmJiFmKXJldHVybiBudWxsO2Y9ZC53aW5kb3c9PT1kP2Q6KGY9ZC5vd25lckRvY3VtZW50KT9mLmRlZmF1bHRWaWV3fHxmLnBhcmVudFdpbmRvdzp3aW5kb3c7aWYoZyl7aWYoZz1iLGI9KGI9Yy5yZWxhdGVkVGFyZ2V0fHxjLnRvRWxlbWVudCk/QmIoYik6bnVsbCxudWxsIT09Yil7dmFyIGg9TmEoYik7aWYoYiE9PWh8fDUhPT1iLnRhZyYmNiE9PWIudGFnKWI9bnVsbH19ZWxzZSBnPW51bGw7aWYoZz09PWIpcmV0dXJuIG51bGw7aWYoIm1vdXNlb3V0Ij09PWF8fCJtb3VzZW92ZXIiPT09YSl7dmFyIG09ZWM7dmFyIG49ZmMubW91c2VMZWF2ZTsKdmFyIGw9ZmMubW91c2VFbnRlcjt2YXIgaz0ibW91c2UifWVsc2UgaWYoInBvaW50ZXJvdXQiPT09YXx8InBvaW50ZXJvdmVyIj09PWEpbT1oaSxuPWZjLnBvaW50ZXJMZWF2ZSxsPWZjLnBvaW50ZXJFbnRlcixrPSJwb2ludGVyIjthPW51bGw9PWc/ZjpQYShnKTtmPW51bGw9PWI/ZjpQYShiKTtuPW0uZ2V0UG9vbGVkKG4sZyxjLGQpO24udHlwZT1rKyJsZWF2ZSI7bi50YXJnZXQ9YTtuLnJlbGF0ZWRUYXJnZXQ9ZjtjPW0uZ2V0UG9vbGVkKGwsYixjLGQpO2MudHlwZT1rKyJlbnRlciI7Yy50YXJnZXQ9ZjtjLnJlbGF0ZWRUYXJnZXQ9YTtkPWc7az1iO2lmKGQmJmspYTp7bT1kO2w9aztnPTA7Zm9yKGE9bTthO2E9cGEoYSkpZysrO2E9MDtmb3IoYj1sO2I7Yj1wYShiKSlhKys7Zm9yKDswPGctYTspbT1wYShtKSxnLS07Zm9yKDswPGEtZzspbD1wYShsKSxhLS07Zm9yKDtnLS07KXtpZihtPT09bHx8bT09PWwuYWx0ZXJuYXRlKWJyZWFrIGE7bT1wYShtKTtsPXBhKGwpfW09bnVsbH1lbHNlIG09Cm51bGw7bD1tO2ZvcihtPVtdO2QmJmQhPT1sOyl7Zz1kLmFsdGVybmF0ZTtpZihudWxsIT09ZyYmZz09PWwpYnJlYWs7bS5wdXNoKGQpO2Q9cGEoZCl9Zm9yKGQ9W107ayYmayE9PWw7KXtnPWsuYWx0ZXJuYXRlO2lmKG51bGwhPT1nJiZnPT09bClicmVhaztkLnB1c2goayk7az1wYShrKX1mb3Ioaz0wO2s8bS5sZW5ndGg7aysrKWJlKG1ba10sImJ1YmJsZWQiLG4pO2ZvcihrPWQubGVuZ3RoOzA8ay0tOyliZShkW2tdLCJjYXB0dXJlZCIsYyk7cmV0dXJuIDA9PT0oZSY2NCk/W25dOltuLGNdfX0sUWE9ImZ1bmN0aW9uIj09PXR5cGVvZiBPYmplY3QuaXM/T2JqZWN0LmlzOlppLCRpPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksWmo9d2EmJiJkb2N1bWVudE1vZGUiaW4gZG9jdW1lbnQmJjExPj1kb2N1bWVudC5kb2N1bWVudE1vZGUsRWc9e3NlbGVjdDp7cGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6e2J1YmJsZWQ6Im9uU2VsZWN0IixjYXB0dXJlZDoib25TZWxlY3RDYXB0dXJlIn0sCmRlcGVuZGVuY2llczoiYmx1ciBjb250ZXh0bWVudSBkcmFnZW5kIGZvY3VzIGtleWRvd24ga2V5dXAgbW91c2Vkb3duIG1vdXNldXAgc2VsZWN0aW9uY2hhbmdlIi5zcGxpdCgiICIpfX0sbmI9bnVsbCxoZT1udWxsLFBiPW51bGwsZ2U9ITEsYWs9e2V2ZW50VHlwZXM6RWcsZXh0cmFjdEV2ZW50czpmdW5jdGlvbihhLGIsYyxkLGUsZil7ZT1mfHwoZC53aW5kb3c9PT1kP2QuZG9jdW1lbnQ6OT09PWQubm9kZVR5cGU/ZDpkLm93bmVyRG9jdW1lbnQpO2lmKCEoZj0hZSkpe2E6e2U9SmQoZSk7Zj1yZC5vblNlbGVjdDtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylpZighZS5oYXMoZltnXSkpe2U9ITE7YnJlYWsgYX1lPSEwfWY9IWV9aWYoZilyZXR1cm4gbnVsbDtlPWI/UGEoYik6d2luZG93O3N3aXRjaChhKXtjYXNlICJmb2N1cyI6aWYoeWcoZSl8fCJ0cnVlIj09PWUuY29udGVudEVkaXRhYmxlKW5iPWUsaGU9YixQYj1udWxsO2JyZWFrO2Nhc2UgImJsdXIiOlBiPWhlPW5iPW51bGw7CmJyZWFrO2Nhc2UgIm1vdXNlZG93biI6Z2U9ITA7YnJlYWs7Y2FzZSAiY29udGV4dG1lbnUiOmNhc2UgIm1vdXNldXAiOmNhc2UgImRyYWdlbmQiOnJldHVybiBnZT0hMSxEZyhjLGQpO2Nhc2UgInNlbGVjdGlvbmNoYW5nZSI6aWYoWmopYnJlYWs7Y2FzZSAia2V5ZG93biI6Y2FzZSAia2V5dXAiOnJldHVybiBEZyhjLGQpfXJldHVybiBudWxsfX0sYms9Ui5leHRlbmQoe2FuaW1hdGlvbk5hbWU6bnVsbCxlbGFwc2VkVGltZTpudWxsLHBzZXVkb0VsZW1lbnQ6bnVsbH0pLGNrPVIuZXh0ZW5kKHtjbGlwYm9hcmREYXRhOmZ1bmN0aW9uKGEpe3JldHVybiJjbGlwYm9hcmREYXRhImluIGE/YS5jbGlwYm9hcmREYXRhOndpbmRvdy5jbGlwYm9hcmREYXRhfX0pLGRrPWRjLmV4dGVuZCh7cmVsYXRlZFRhcmdldDpudWxsfSksZWs9e0VzYzoiRXNjYXBlIixTcGFjZWJhcjoiICIsTGVmdDoiQXJyb3dMZWZ0IixVcDoiQXJyb3dVcCIsUmlnaHQ6IkFycm93UmlnaHQiLERvd246IkFycm93RG93biIsCkRlbDoiRGVsZXRlIixXaW46Ik9TIixNZW51OiJDb250ZXh0TWVudSIsQXBwczoiQ29udGV4dE1lbnUiLFNjcm9sbDoiU2Nyb2xsTG9jayIsTW96UHJpbnRhYmxlS2V5OiJVbmlkZW50aWZpZWQifSxmaz17ODoiQmFja3NwYWNlIiw5OiJUYWIiLDEyOiJDbGVhciIsMTM6IkVudGVyIiwxNjoiU2hpZnQiLDE3OiJDb250cm9sIiwxODoiQWx0IiwxOToiUGF1c2UiLDIwOiJDYXBzTG9jayIsMjc6IkVzY2FwZSIsMzI6IiAiLDMzOiJQYWdlVXAiLDM0OiJQYWdlRG93biIsMzU6IkVuZCIsMzY6IkhvbWUiLDM3OiJBcnJvd0xlZnQiLDM4OiJBcnJvd1VwIiwzOToiQXJyb3dSaWdodCIsNDA6IkFycm93RG93biIsNDU6Ikluc2VydCIsNDY6IkRlbGV0ZSIsMTEyOiJGMSIsMTEzOiJGMiIsMTE0OiJGMyIsMTE1OiJGNCIsMTE2OiJGNSIsMTE3OiJGNiIsMTE4OiJGNyIsMTE5OiJGOCIsMTIwOiJGOSIsMTIxOiJGMTAiLDEyMjoiRjExIiwxMjM6IkYxMiIsMTQ0OiJOdW1Mb2NrIiwxNDU6IlNjcm9sbExvY2siLAoyMjQ6Ik1ldGEifSxnaz1kYy5leHRlbmQoe2tleTpmdW5jdGlvbihhKXtpZihhLmtleSl7dmFyIGI9ZWtbYS5rZXldfHxhLmtleTtpZigiVW5pZGVudGlmaWVkIiE9PWIpcmV0dXJuIGJ9cmV0dXJuImtleXByZXNzIj09PWEudHlwZT8oYT1BYyhhKSwxMz09PWE/IkVudGVyIjpTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKToia2V5ZG93biI9PT1hLnR5cGV8fCJrZXl1cCI9PT1hLnR5cGU/ZmtbYS5rZXlDb2RlXXx8IlVuaWRlbnRpZmllZCI6IiJ9LGxvY2F0aW9uOm51bGwsY3RybEtleTpudWxsLHNoaWZ0S2V5Om51bGwsYWx0S2V5Om51bGwsbWV0YUtleTpudWxsLHJlcGVhdDpudWxsLGxvY2FsZTpudWxsLGdldE1vZGlmaWVyU3RhdGU6ZmUsY2hhckNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuImtleXByZXNzIj09PWEudHlwZT9BYyhhKTowfSxrZXlDb2RlOmZ1bmN0aW9uKGEpe3JldHVybiJrZXlkb3duIj09PWEudHlwZXx8ImtleXVwIj09PWEudHlwZT9hLmtleUNvZGU6MH0sd2hpY2g6ZnVuY3Rpb24oYSl7cmV0dXJuImtleXByZXNzIj09PQphLnR5cGU/QWMoYSk6ImtleWRvd24iPT09YS50eXBlfHwia2V5dXAiPT09YS50eXBlP2Eua2V5Q29kZTowfX0pLGhrPWVjLmV4dGVuZCh7ZGF0YVRyYW5zZmVyOm51bGx9KSxpaz1kYy5leHRlbmQoe3RvdWNoZXM6bnVsbCx0YXJnZXRUb3VjaGVzOm51bGwsY2hhbmdlZFRvdWNoZXM6bnVsbCxhbHRLZXk6bnVsbCxtZXRhS2V5Om51bGwsY3RybEtleTpudWxsLHNoaWZ0S2V5Om51bGwsZ2V0TW9kaWZpZXJTdGF0ZTpmZX0pLGprPVIuZXh0ZW5kKHtwcm9wZXJ0eU5hbWU6bnVsbCxlbGFwc2VkVGltZTpudWxsLHBzZXVkb0VsZW1lbnQ6bnVsbH0pLGtrPWVjLmV4dGVuZCh7ZGVsdGFYOmZ1bmN0aW9uKGEpe3JldHVybiJkZWx0YVgiaW4gYT9hLmRlbHRhWDoid2hlZWxEZWx0YVgiaW4gYT8tYS53aGVlbERlbHRhWDowfSxkZWx0YVk6ZnVuY3Rpb24oYSl7cmV0dXJuImRlbHRhWSJpbiBhP2EuZGVsdGFZOiJ3aGVlbERlbHRhWSJpbiBhPy1hLndoZWVsRGVsdGFZOiJ3aGVlbERlbHRhImluIGE/Ci1hLndoZWVsRGVsdGE6MH0sZGVsdGFaOm51bGwsZGVsdGFNb2RlOm51bGx9KSxsaz17ZXZlbnRUeXBlczpkZyxleHRyYWN0RXZlbnRzOmZ1bmN0aW9uKGEsYixjLGQsZSl7ZT1jZy5nZXQoYSk7aWYoIWUpcmV0dXJuIG51bGw7c3dpdGNoKGEpe2Nhc2UgImtleXByZXNzIjppZigwPT09QWMoYykpcmV0dXJuIG51bGw7Y2FzZSAia2V5ZG93biI6Y2FzZSAia2V5dXAiOmE9Z2s7YnJlYWs7Y2FzZSAiYmx1ciI6Y2FzZSAiZm9jdXMiOmE9ZGs7YnJlYWs7Y2FzZSAiY2xpY2siOmlmKDI9PT1jLmJ1dHRvbilyZXR1cm4gbnVsbDtjYXNlICJhdXhjbGljayI6Y2FzZSAiZGJsY2xpY2siOmNhc2UgIm1vdXNlZG93biI6Y2FzZSAibW91c2Vtb3ZlIjpjYXNlICJtb3VzZXVwIjpjYXNlICJtb3VzZW91dCI6Y2FzZSAibW91c2VvdmVyIjpjYXNlICJjb250ZXh0bWVudSI6YT1lYzticmVhaztjYXNlICJkcmFnIjpjYXNlICJkcmFnZW5kIjpjYXNlICJkcmFnZW50ZXIiOmNhc2UgImRyYWdleGl0IjpjYXNlICJkcmFnbGVhdmUiOmNhc2UgImRyYWdvdmVyIjpjYXNlICJkcmFnc3RhcnQiOmNhc2UgImRyb3AiOmE9CmhrO2JyZWFrO2Nhc2UgInRvdWNoY2FuY2VsIjpjYXNlICJ0b3VjaGVuZCI6Y2FzZSAidG91Y2htb3ZlIjpjYXNlICJ0b3VjaHN0YXJ0IjphPWlrO2JyZWFrO2Nhc2UgJGg6Y2FzZSBhaTpjYXNlIGJpOmE9Yms7YnJlYWs7Y2FzZSBjaTphPWprO2JyZWFrO2Nhc2UgInNjcm9sbCI6YT1kYzticmVhaztjYXNlICJ3aGVlbCI6YT1razticmVhaztjYXNlICJjb3B5IjpjYXNlICJjdXQiOmNhc2UgInBhc3RlIjphPWNrO2JyZWFrO2Nhc2UgImdvdHBvaW50ZXJjYXB0dXJlIjpjYXNlICJsb3N0cG9pbnRlcmNhcHR1cmUiOmNhc2UgInBvaW50ZXJjYW5jZWwiOmNhc2UgInBvaW50ZXJkb3duIjpjYXNlICJwb2ludGVybW92ZSI6Y2FzZSAicG9pbnRlcm91dCI6Y2FzZSAicG9pbnRlcm92ZXIiOmNhc2UgInBvaW50ZXJ1cCI6YT1oaTticmVhaztkZWZhdWx0OmE9Un1iPWEuZ2V0UG9vbGVkKGUsYixjLGQpO2xiKGIpO3JldHVybiBifX07KGZ1bmN0aW9uKGEpe2lmKGljKXRocm93IEVycm9yKGsoMTAxKSk7CmljPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpO25mKCl9KSgiUmVzcG9uZGVyRXZlbnRQbHVnaW4gU2ltcGxlRXZlbnRQbHVnaW4gRW50ZXJMZWF2ZUV2ZW50UGx1Z2luIENoYW5nZUV2ZW50UGx1Z2luIFNlbGVjdEV2ZW50UGx1Z2luIEJlZm9yZUlucHV0RXZlbnRQbHVnaW4iLnNwbGl0KCIgIikpOyhmdW5jdGlvbihhLGIsYyl7dGQ9YTtyZj1iO21mPWN9KShhZSxIYixQYSk7cGYoe1NpbXBsZUV2ZW50UGx1Z2luOmxrLEVudGVyTGVhdmVFdmVudFBsdWdpbjpZaixDaGFuZ2VFdmVudFBsdWdpbjpYaixTZWxlY3RFdmVudFBsdWdpbjphayxCZWZvcmVJbnB1dEV2ZW50UGx1Z2luOldqfSk7dmFyIGllPVtdLG9iPS0xLENhPXt9LEI9e2N1cnJlbnQ6Q2F9LEc9e2N1cnJlbnQ6ITF9LFJhPUNhLGJqPVBkLGplPSRmLFJnPUxqLGFqPU5qLERjPU9qLElnPVpoLEpnPWFnLEtnPVBqLExnPVFqLFFnPXt9LHlqPU1qLENqPXZvaWQgMCE9PVloP1loOmZ1bmN0aW9uKCl7fSxxYT1udWxsLApFYz1udWxsLGtlPSExLGlpPWZmKCksWT0xRTQ+aWk/ZmY6ZnVuY3Rpb24oKXtyZXR1cm4gZmYoKS1paX0sSWM9e2N1cnJlbnQ6bnVsbH0sSGM9bnVsbCxxYj1udWxsLEdjPW51bGwsVGc9MCxKYz0yLEdhPSExLFZiPWRhLlJlYWN0Q3VycmVudEJhdGNoQ29uZmlnLCRnPShuZXcgZWEuQ29tcG9uZW50KS5yZWZzLE1jPXtpc01vdW50ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9YS5fcmVhY3RJbnRlcm5hbEZpYmVyKT9OYShhKT09PWE6ITF9LGVucXVldWVTZXRTdGF0ZTpmdW5jdGlvbihhLGIsYyl7YT1hLl9yZWFjdEludGVybmFsRmliZXI7dmFyIGQ9a2EoKSxlPVZiLnN1c3BlbnNlO2Q9VmEoZCxhLGUpO2U9RWEoZCxlKTtlLnBheWxvYWQ9Yjt2b2lkIDAhPT1jJiZudWxsIT09YyYmKGUuY2FsbGJhY2s9Yyk7RmEoYSxlKTtKYShhLGQpfSxlbnF1ZXVlUmVwbGFjZVN0YXRlOmZ1bmN0aW9uKGEsYixjKXthPWEuX3JlYWN0SW50ZXJuYWxGaWJlcjt2YXIgZD1rYSgpLGU9VmIuc3VzcGVuc2U7CmQ9VmEoZCxhLGUpO2U9RWEoZCxlKTtlLnRhZz0xO2UucGF5bG9hZD1iO3ZvaWQgMCE9PWMmJm51bGwhPT1jJiYoZS5jYWxsYmFjaz1jKTtGYShhLGUpO0phKGEsZCl9LGVucXVldWVGb3JjZVVwZGF0ZTpmdW5jdGlvbihhLGIpe2E9YS5fcmVhY3RJbnRlcm5hbEZpYmVyO3ZhciBjPWthKCksZD1WYi5zdXNwZW5zZTtjPVZhKGMsYSxkKTtkPUVhKGMsZCk7ZC50YWc9SmM7dm9pZCAwIT09YiYmbnVsbCE9PWImJihkLmNhbGxiYWNrPWIpO0ZhKGEsZCk7SmEoYSxjKX19LFFjPUFycmF5LmlzQXJyYXksd2I9YWgoITApLEZlPWFoKCExKSxTYj17fSxqYT17Y3VycmVudDpTYn0sVWI9e2N1cnJlbnQ6U2J9LFRiPXtjdXJyZW50OlNifSxEPXtjdXJyZW50OjB9LFNjPWRhLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsWD1kYS5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZyxJYT0wLHo9bnVsbCxLPW51bGwsSj1udWxsLFVjPSExLFRjPXtyZWFkQ29udGV4dDpXLHVzZUNhbGxiYWNrOlMsdXNlQ29udGV4dDpTLAp1c2VFZmZlY3Q6Uyx1c2VJbXBlcmF0aXZlSGFuZGxlOlMsdXNlTGF5b3V0RWZmZWN0OlMsdXNlTWVtbzpTLHVzZVJlZHVjZXI6Uyx1c2VSZWY6Uyx1c2VTdGF0ZTpTLHVzZURlYnVnVmFsdWU6Uyx1c2VSZXNwb25kZXI6Uyx1c2VEZWZlcnJlZFZhbHVlOlMsdXNlVHJhbnNpdGlvbjpTfSxkaj17cmVhZENvbnRleHQ6Vyx1c2VDYWxsYmFjazppaCx1c2VDb250ZXh0OlcsdXNlRWZmZWN0OmVoLHVzZUltcGVyYXRpdmVIYW5kbGU6ZnVuY3Rpb24oYSxiLGMpe2M9bnVsbCE9PWMmJnZvaWQgMCE9PWM/Yy5jb25jYXQoW2FdKTpudWxsO3JldHVybiB6ZSg0LDIsZ2guYmluZChudWxsLGIsYSksYyl9LHVzZUxheW91dEVmZmVjdDpmdW5jdGlvbihhLGIpe3JldHVybiB6ZSg0LDIsYSxiKX0sdXNlTWVtbzpmdW5jdGlvbihhLGIpe3ZhciBjPXViKCk7Yj12b2lkIDA9PT1iP251bGw6YjthPWEoKTtjLm1lbW9pemVkU3RhdGU9W2EsYl07cmV0dXJuIGF9LHVzZVJlZHVjZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPQp1YigpO2I9dm9pZCAwIT09Yz9jKGIpOmI7ZC5tZW1vaXplZFN0YXRlPWQuYmFzZVN0YXRlPWI7YT1kLnF1ZXVlPXtwZW5kaW5nOm51bGwsZGlzcGF0Y2g6bnVsbCxsYXN0UmVuZGVyZWRSZWR1Y2VyOmEsbGFzdFJlbmRlcmVkU3RhdGU6Yn07YT1hLmRpc3BhdGNoPWNoLmJpbmQobnVsbCx6LGEpO3JldHVybltkLm1lbW9pemVkU3RhdGUsYV19LHVzZVJlZjpmdW5jdGlvbihhKXt2YXIgYj11YigpO2E9e2N1cnJlbnQ6YX07cmV0dXJuIGIubWVtb2l6ZWRTdGF0ZT1hfSx1c2VTdGF0ZTp4ZSx1c2VEZWJ1Z1ZhbHVlOkJlLHVzZVJlc3BvbmRlcjp1ZSx1c2VEZWZlcnJlZFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9eGUoYSksZD1jWzBdLGU9Y1sxXTtlaChmdW5jdGlvbigpe3ZhciBjPVguc3VzcGVuc2U7WC5zdXNwZW5zZT12b2lkIDA9PT1iP251bGw6Yjt0cnl7ZShhKX1maW5hbGx5e1guc3VzcGVuc2U9Y319LFthLGJdKTtyZXR1cm4gZH0sdXNlVHJhbnNpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj0KeGUoITEpLGM9YlswXTtiPWJbMV07cmV0dXJuW2loKENlLmJpbmQobnVsbCxiLGEpLFtiLGFdKSxjXX19LGVqPXtyZWFkQ29udGV4dDpXLHVzZUNhbGxiYWNrOlljLHVzZUNvbnRleHQ6Vyx1c2VFZmZlY3Q6WGMsdXNlSW1wZXJhdGl2ZUhhbmRsZTpoaCx1c2VMYXlvdXRFZmZlY3Q6ZmgsdXNlTWVtbzpqaCx1c2VSZWR1Y2VyOlZjLHVzZVJlZjpkaCx1c2VTdGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gVmMoVWEpfSx1c2VEZWJ1Z1ZhbHVlOkJlLHVzZVJlc3BvbmRlcjp1ZSx1c2VEZWZlcnJlZFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9VmMoVWEpLGQ9Y1swXSxlPWNbMV07WGMoZnVuY3Rpb24oKXt2YXIgYz1YLnN1c3BlbnNlO1guc3VzcGVuc2U9dm9pZCAwPT09Yj9udWxsOmI7dHJ5e2UoYSl9ZmluYWxseXtYLnN1c3BlbnNlPWN9fSxbYSxiXSk7cmV0dXJuIGR9LHVzZVRyYW5zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9VmMoVWEpLGM9YlswXTtiPWJbMV07cmV0dXJuW1ljKENlLmJpbmQobnVsbCwKYixhKSxbYixhXSksY119fSxmaj17cmVhZENvbnRleHQ6Vyx1c2VDYWxsYmFjazpZYyx1c2VDb250ZXh0OlcsdXNlRWZmZWN0OlhjLHVzZUltcGVyYXRpdmVIYW5kbGU6aGgsdXNlTGF5b3V0RWZmZWN0OmZoLHVzZU1lbW86amgsdXNlUmVkdWNlcjpXYyx1c2VSZWY6ZGgsdXNlU3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIFdjKFVhKX0sdXNlRGVidWdWYWx1ZTpCZSx1c2VSZXNwb25kZXI6dWUsdXNlRGVmZXJyZWRWYWx1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPVdjKFVhKSxkPWNbMF0sZT1jWzFdO1hjKGZ1bmN0aW9uKCl7dmFyIGM9WC5zdXNwZW5zZTtYLnN1c3BlbnNlPXZvaWQgMD09PWI/bnVsbDpiO3RyeXtlKGEpfWZpbmFsbHl7WC5zdXNwZW5zZT1jfX0sW2EsYl0pO3JldHVybiBkfSx1c2VUcmFuc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPVdjKFVhKSxjPWJbMF07Yj1iWzFdO3JldHVybltZYyhDZS5iaW5kKG51bGwsYixhKSxbYixhXSksY119fSxyYT1udWxsLEthPW51bGwsV2E9CiExLGdqPWRhLlJlYWN0Q3VycmVudE93bmVyLGlhPSExLEplPXtkZWh5ZHJhdGVkOm51bGwscmV0cnlUaW1lOjB9O3ZhciBqaj1mdW5jdGlvbihhLGIsYyxkKXtmb3IoYz1iLmNoaWxkO251bGwhPT1jOyl7aWYoNT09PWMudGFnfHw2PT09Yy50YWcpYS5hcHBlbmRDaGlsZChjLnN0YXRlTm9kZSk7ZWxzZSBpZig0IT09Yy50YWcmJm51bGwhPT1jLmNoaWxkKXtjLmNoaWxkLnJldHVybj1jO2M9Yy5jaGlsZDtjb250aW51ZX1pZihjPT09YilicmVhaztmb3IoO251bGw9PT1jLnNpYmxpbmc7KXtpZihudWxsPT09Yy5yZXR1cm58fGMucmV0dXJuPT09YilyZXR1cm47Yz1jLnJldHVybn1jLnNpYmxpbmcucmV0dXJuPWMucmV0dXJuO2M9Yy5zaWJsaW5nfX07dmFyIHdoPWZ1bmN0aW9uKGEpe307dmFyIGlqPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS5tZW1vaXplZFByb3BzO2lmKGYhPT1kKXt2YXIgZz1iLnN0YXRlTm9kZTtUYShqYS5jdXJyZW50KTthPW51bGw7c3dpdGNoKGMpe2Nhc2UgImlucHV0IjpmPQpDZChnLGYpO2Q9Q2QoZyxkKTthPVtdO2JyZWFrO2Nhc2UgIm9wdGlvbiI6Zj1GZChnLGYpO2Q9RmQoZyxkKTthPVtdO2JyZWFrO2Nhc2UgInNlbGVjdCI6Zj1NKHt9LGYse3ZhbHVlOnZvaWQgMH0pO2Q9TSh7fSxkLHt2YWx1ZTp2b2lkIDB9KTthPVtdO2JyZWFrO2Nhc2UgInRleHRhcmVhIjpmPUdkKGcsZik7ZD1HZChnLGQpO2E9W107YnJlYWs7ZGVmYXVsdDoiZnVuY3Rpb24iIT09dHlwZW9mIGYub25DbGljayYmImZ1bmN0aW9uIj09PXR5cGVvZiBkLm9uQ2xpY2smJihnLm9uY2xpY2s9dWMpfVVkKGMsZCk7dmFyIGgsbTtjPW51bGw7Zm9yKGggaW4gZilpZighZC5oYXNPd25Qcm9wZXJ0eShoKSYmZi5oYXNPd25Qcm9wZXJ0eShoKSYmbnVsbCE9ZltoXSlpZigic3R5bGUiPT09aClmb3IobSBpbiBnPWZbaF0sZylnLmhhc093blByb3BlcnR5KG0pJiYoY3x8KGM9e30pLGNbbV09IiIpO2Vsc2UiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiIT09aCYmImNoaWxkcmVuIiE9PWgmJiJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciIT09CmgmJiJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciIT09aCYmImF1dG9Gb2N1cyIhPT1oJiYoZGIuaGFzT3duUHJvcGVydHkoaCk/YXx8KGE9W10pOihhPWF8fFtdKS5wdXNoKGgsbnVsbCkpO2ZvcihoIGluIGQpe3ZhciBrPWRbaF07Zz1udWxsIT1mP2ZbaF06dm9pZCAwO2lmKGQuaGFzT3duUHJvcGVydHkoaCkmJmshPT1nJiYobnVsbCE9a3x8bnVsbCE9ZykpaWYoInN0eWxlIj09PWgpaWYoZyl7Zm9yKG0gaW4gZykhZy5oYXNPd25Qcm9wZXJ0eShtKXx8ayYmay5oYXNPd25Qcm9wZXJ0eShtKXx8KGN8fChjPXt9KSxjW21dPSIiKTtmb3IobSBpbiBrKWsuaGFzT3duUHJvcGVydHkobSkmJmdbbV0hPT1rW21dJiYoY3x8KGM9e30pLGNbbV09a1ttXSl9ZWxzZSBjfHwoYXx8KGE9W10pLGEucHVzaChoLGMpKSxjPWs7ZWxzZSJkYW5nZXJvdXNseVNldElubmVySFRNTCI9PT1oPyhrPWs/ay5fX2h0bWw6dm9pZCAwLGc9Zz9nLl9faHRtbDp2b2lkIDAsbnVsbCE9ayYmZyE9PWsmJihhPWF8fApbXSkucHVzaChoLGspKToiY2hpbGRyZW4iPT09aD9nPT09a3x8InN0cmluZyIhPT10eXBlb2YgayYmIm51bWJlciIhPT10eXBlb2Yga3x8KGE9YXx8W10pLnB1c2goaCwiIitrKToic3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nIiE9PWgmJiJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciIT09aCYmKGRiLmhhc093blByb3BlcnR5KGgpPyhudWxsIT1rJiZvYShlLGgpLGF8fGc9PT1rfHwoYT1bXSkpOihhPWF8fFtdKS5wdXNoKGgsaykpfWMmJihhPWF8fFtdKS5wdXNoKCJzdHlsZSIsYyk7ZT1hO2lmKGIudXBkYXRlUXVldWU9ZSliLmVmZmVjdFRhZ3w9NH19O3ZhciBraj1mdW5jdGlvbihhLGIsYyxkKXtjIT09ZCYmKGIuZWZmZWN0VGFnfD00KX07dmFyIHBqPSJmdW5jdGlvbiI9PT10eXBlb2YgV2Vha1NldD9XZWFrU2V0OlNldCx3aj0iZnVuY3Rpb24iPT09dHlwZW9mIFdlYWtNYXA/V2Vha01hcDpNYXAsc2o9TWF0aC5jZWlsLGdkPWRhLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsClVoPWRhLlJlYWN0Q3VycmVudE93bmVyLEg9MCxZZT04LGNhPTE2LG1hPTMyLFhhPTAsaGQ9MSxPaD0yLGFkPTMsYmQ9NCxYZT01LHA9SCxVPW51bGwsdD1udWxsLFA9MCxGPVhhLGlkPW51bGwsdGE9MTA3Mzc0MTgyMyxZYj0xMDczNzQxODIzLGtkPW51bGwsWGI9MCxqZD0hMSxSZT0wLFBoPTUwMCxsPW51bGwsY2Q9ITEsU2U9bnVsbCxMYT1udWxsLGxkPSExLFpiPW51bGwsJGI9OTAsYmI9bnVsbCxhYz0wLGFmPW51bGwsZGQ9MCxKYT1mdW5jdGlvbihhLGIpe2lmKDUwPGFjKXRocm93IGFjPTAsYWY9bnVsbCxFcnJvcihrKDE4NSkpO2E9ZWQoYSxiKTtpZihudWxsIT09YSl7dmFyIGM9Q2MoKTsxMDczNzQxODIzPT09Yj8ocCZZZSkhPT1IJiYocCYoY2F8bWEpKT09PUg/VGUoYSk6KFYoYSkscD09PUgmJmhhKCkpOlYoYSk7KHAmNCk9PT1IfHw5OCE9PWMmJjk5IT09Y3x8KG51bGw9PT1iYj9iYj1uZXcgTWFwKFtbYSxiXV0pOihjPWJiLmdldChhKSwodm9pZCAwPT09Y3x8Yz5iKSYmYmIuc2V0KGEsCmIpKSl9fTt2YXIgemo9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIuZXhwaXJhdGlvblRpbWU7aWYobnVsbCE9PWEpe3ZhciBlPWIucGVuZGluZ1Byb3BzO2lmKGEubWVtb2l6ZWRQcm9wcyE9PWV8fEcuY3VycmVudClpYT0hMDtlbHNle2lmKGQ8Yyl7aWE9ITE7c3dpdGNoKGIudGFnKXtjYXNlIDM6c2goYik7RWUoKTticmVhaztjYXNlIDU6YmgoYik7aWYoYi5tb2RlJjQmJjEhPT1jJiZlLmhpZGRlbilyZXR1cm4gYi5leHBpcmF0aW9uVGltZT1iLmNoaWxkRXhwaXJhdGlvblRpbWU9MSxudWxsO2JyZWFrO2Nhc2UgMTpOKGIudHlwZSkmJkJjKGIpO2JyZWFrO2Nhc2UgNDpzZShiLGIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8pO2JyZWFrO2Nhc2UgMTA6ZD1iLm1lbW9pemVkUHJvcHMudmFsdWU7ZT1iLnR5cGUuX2NvbnRleHQ7eShJYyxlLl9jdXJyZW50VmFsdWUpO2UuX2N1cnJlbnRWYWx1ZT1kO2JyZWFrO2Nhc2UgMTM6aWYobnVsbCE9PWIubWVtb2l6ZWRTdGF0ZSl7ZD1iLmNoaWxkLmNoaWxkRXhwaXJhdGlvblRpbWU7CmlmKDAhPT1kJiZkPj1jKXJldHVybiB0aChhLGIsYyk7eShELEQuY3VycmVudCYxKTtiPXNhKGEsYixjKTtyZXR1cm4gbnVsbCE9PWI/Yi5zaWJsaW5nOm51bGx9eShELEQuY3VycmVudCYxKTticmVhaztjYXNlIDE5OmQ9Yi5jaGlsZEV4cGlyYXRpb25UaW1lPj1jO2lmKDAhPT0oYS5lZmZlY3RUYWcmNjQpKXtpZihkKXJldHVybiB2aChhLGIsYyk7Yi5lZmZlY3RUYWd8PTY0fWU9Yi5tZW1vaXplZFN0YXRlO251bGwhPT1lJiYoZS5yZW5kZXJpbmc9bnVsbCxlLnRhaWw9bnVsbCk7eShELEQuY3VycmVudCk7aWYoIWQpcmV0dXJuIG51bGx9cmV0dXJuIHNhKGEsYixjKX1pYT0hMX19ZWxzZSBpYT0hMTtiLmV4cGlyYXRpb25UaW1lPTA7c3dpdGNoKGIudGFnKXtjYXNlIDI6ZD1iLnR5cGU7bnVsbCE9PWEmJihhLmFsdGVybmF0ZT1udWxsLGIuYWx0ZXJuYXRlPW51bGwsYi5lZmZlY3RUYWd8PTIpO2E9Yi5wZW5kaW5nUHJvcHM7ZT1wYihiLEIuY3VycmVudCk7cmIoYixjKTtlPXdlKG51bGwsCmIsZCxhLGUsYyk7Yi5lZmZlY3RUYWd8PTE7aWYoIm9iamVjdCI9PT10eXBlb2YgZSYmbnVsbCE9PWUmJiJmdW5jdGlvbiI9PT10eXBlb2YgZS5yZW5kZXImJnZvaWQgMD09PWUuJCR0eXBlb2Ype2IudGFnPTE7Yi5tZW1vaXplZFN0YXRlPW51bGw7Yi51cGRhdGVRdWV1ZT1udWxsO2lmKE4oZCkpe3ZhciBmPSEwO0JjKGIpfWVsc2UgZj0hMTtiLm1lbW9pemVkU3RhdGU9bnVsbCE9PWUuc3RhdGUmJnZvaWQgMCE9PWUuc3RhdGU/ZS5zdGF0ZTpudWxsO25lKGIpO3ZhciBnPWQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOyJmdW5jdGlvbiI9PT10eXBlb2YgZyYmTGMoYixkLGcsYSk7ZS51cGRhdGVyPU1jO2Iuc3RhdGVOb2RlPWU7ZS5fcmVhY3RJbnRlcm5hbEZpYmVyPWI7cGUoYixkLGEsYyk7Yj1JZShudWxsLGIsZCwhMCxmLGMpfWVsc2UgYi50YWc9MCxUKG51bGwsYixlLGMpLGI9Yi5jaGlsZDtyZXR1cm4gYjtjYXNlIDE2OmE6e2U9Yi5lbGVtZW50VHlwZTtudWxsIT09YSYmKGEuYWx0ZXJuYXRlPQpudWxsLGIuYWx0ZXJuYXRlPW51bGwsYi5lZmZlY3RUYWd8PTIpO2E9Yi5wZW5kaW5nUHJvcHM7cmkoZSk7aWYoMSE9PWUuX3N0YXR1cyl0aHJvdyBlLl9yZXN1bHQ7ZT1lLl9yZXN1bHQ7Yi50eXBlPWU7Zj1iLnRhZz1HaihlKTthPWFhKGUsYSk7c3dpdGNoKGYpe2Nhc2UgMDpiPUhlKG51bGwsYixlLGEsYyk7YnJlYWsgYTtjYXNlIDE6Yj1yaChudWxsLGIsZSxhLGMpO2JyZWFrIGE7Y2FzZSAxMTpiPW5oKG51bGwsYixlLGEsYyk7YnJlYWsgYTtjYXNlIDE0OmI9b2gobnVsbCxiLGUsYWEoZS50eXBlLGEpLGQsYyk7YnJlYWsgYX10aHJvdyBFcnJvcihrKDMwNixlLCIiKSk7fXJldHVybiBiO2Nhc2UgMDpyZXR1cm4gZD1iLnR5cGUsZT1iLnBlbmRpbmdQcm9wcyxlPWIuZWxlbWVudFR5cGU9PT1kP2U6YWEoZCxlKSxIZShhLGIsZCxlLGMpO2Nhc2UgMTpyZXR1cm4gZD1iLnR5cGUsZT1iLnBlbmRpbmdQcm9wcyxlPWIuZWxlbWVudFR5cGU9PT1kP2U6YWEoZCxlKSxyaChhLGIsZCxlLGMpOwpjYXNlIDM6c2goYik7ZD1iLnVwZGF0ZVF1ZXVlO2lmKG51bGw9PT1hfHxudWxsPT09ZCl0aHJvdyBFcnJvcihrKDI4MikpO2Q9Yi5wZW5kaW5nUHJvcHM7ZT1iLm1lbW9pemVkU3RhdGU7ZT1udWxsIT09ZT9lLmVsZW1lbnQ6bnVsbDtvZShhLGIpO1FiKGIsZCxudWxsLGMpO2Q9Yi5tZW1vaXplZFN0YXRlLmVsZW1lbnQ7aWYoZD09PWUpRWUoKSxiPXNhKGEsYixjKTtlbHNle2lmKGU9Yi5zdGF0ZU5vZGUuaHlkcmF0ZSlLYT1rYihiLnN0YXRlTm9kZS5jb250YWluZXJJbmZvLmZpcnN0Q2hpbGQpLHJhPWIsZT1XYT0hMDtpZihlKWZvcihjPUZlKGIsbnVsbCxkLGMpLGIuY2hpbGQ9YztjOyljLmVmZmVjdFRhZz1jLmVmZmVjdFRhZyYtM3wxMDI0LGM9Yy5zaWJsaW5nO2Vsc2UgVChhLGIsZCxjKSxFZSgpO2I9Yi5jaGlsZH1yZXR1cm4gYjtjYXNlIDU6cmV0dXJuIGJoKGIpLG51bGw9PT1hJiZEZShiKSxkPWIudHlwZSxlPWIucGVuZGluZ1Byb3BzLGY9bnVsbCE9PWE/YS5tZW1vaXplZFByb3BzOgpudWxsLGc9ZS5jaGlsZHJlbixZZChkLGUpP2c9bnVsbDpudWxsIT09ZiYmWWQoZCxmKSYmKGIuZWZmZWN0VGFnfD0xNikscWgoYSxiKSxiLm1vZGUmNCYmMSE9PWMmJmUuaGlkZGVuPyhiLmV4cGlyYXRpb25UaW1lPWIuY2hpbGRFeHBpcmF0aW9uVGltZT0xLGI9bnVsbCk6KFQoYSxiLGcsYyksYj1iLmNoaWxkKSxiO2Nhc2UgNjpyZXR1cm4gbnVsbD09PWEmJkRlKGIpLG51bGw7Y2FzZSAxMzpyZXR1cm4gdGgoYSxiLGMpO2Nhc2UgNDpyZXR1cm4gc2UoYixiLnN0YXRlTm9kZS5jb250YWluZXJJbmZvKSxkPWIucGVuZGluZ1Byb3BzLG51bGw9PT1hP2IuY2hpbGQ9d2IoYixudWxsLGQsYyk6VChhLGIsZCxjKSxiLmNoaWxkO2Nhc2UgMTE6cmV0dXJuIGQ9Yi50eXBlLGU9Yi5wZW5kaW5nUHJvcHMsZT1iLmVsZW1lbnRUeXBlPT09ZD9lOmFhKGQsZSksbmgoYSxiLGQsZSxjKTtjYXNlIDc6cmV0dXJuIFQoYSxiLGIucGVuZGluZ1Byb3BzLGMpLGIuY2hpbGQ7Y2FzZSA4OnJldHVybiBUKGEsCmIsYi5wZW5kaW5nUHJvcHMuY2hpbGRyZW4sYyksYi5jaGlsZDtjYXNlIDEyOnJldHVybiBUKGEsYixiLnBlbmRpbmdQcm9wcy5jaGlsZHJlbixjKSxiLmNoaWxkO2Nhc2UgMTA6YTp7ZD1iLnR5cGUuX2NvbnRleHQ7ZT1iLnBlbmRpbmdQcm9wcztnPWIubWVtb2l6ZWRQcm9wcztmPWUudmFsdWU7dmFyIGg9Yi50eXBlLl9jb250ZXh0O3koSWMsaC5fY3VycmVudFZhbHVlKTtoLl9jdXJyZW50VmFsdWU9ZjtpZihudWxsIT09ZylpZihoPWcudmFsdWUsZj1RYShoLGYpPzA6KCJmdW5jdGlvbiI9PT10eXBlb2YgZC5fY2FsY3VsYXRlQ2hhbmdlZEJpdHM/ZC5fY2FsY3VsYXRlQ2hhbmdlZEJpdHMoaCxmKToxMDczNzQxODIzKXwwLDA9PT1mKXtpZihnLmNoaWxkcmVuPT09ZS5jaGlsZHJlbiYmIUcuY3VycmVudCl7Yj1zYShhLGIsYyk7YnJlYWsgYX19ZWxzZSBmb3IoaD1iLmNoaWxkLG51bGwhPT1oJiYoaC5yZXR1cm49Yik7bnVsbCE9PWg7KXt2YXIgbT1oLmRlcGVuZGVuY2llcztpZihudWxsIT09Cm0pe2c9aC5jaGlsZDtmb3IodmFyIGw9bS5maXJzdENvbnRleHQ7bnVsbCE9PWw7KXtpZihsLmNvbnRleHQ9PT1kJiYwIT09KGwub2JzZXJ2ZWRCaXRzJmYpKXsxPT09aC50YWcmJihsPUVhKGMsbnVsbCksbC50YWc9SmMsRmEoaCxsKSk7aC5leHBpcmF0aW9uVGltZTxjJiYoaC5leHBpcmF0aW9uVGltZT1jKTtsPWguYWx0ZXJuYXRlO251bGwhPT1sJiZsLmV4cGlyYXRpb25UaW1lPGMmJihsLmV4cGlyYXRpb25UaW1lPWMpO1NnKGgucmV0dXJuLGMpO20uZXhwaXJhdGlvblRpbWU8YyYmKG0uZXhwaXJhdGlvblRpbWU9Yyk7YnJlYWt9bD1sLm5leHR9fWVsc2UgZz0xMD09PWgudGFnP2gudHlwZT09PWIudHlwZT9udWxsOmguY2hpbGQ6aC5jaGlsZDtpZihudWxsIT09ZylnLnJldHVybj1oO2Vsc2UgZm9yKGc9aDtudWxsIT09Zzspe2lmKGc9PT1iKXtnPW51bGw7YnJlYWt9aD1nLnNpYmxpbmc7aWYobnVsbCE9PWgpe2gucmV0dXJuPWcucmV0dXJuO2c9aDticmVha31nPWcucmV0dXJufWg9Cmd9VChhLGIsZS5jaGlsZHJlbixjKTtiPWIuY2hpbGR9cmV0dXJuIGI7Y2FzZSA5OnJldHVybiBlPWIudHlwZSxmPWIucGVuZGluZ1Byb3BzLGQ9Zi5jaGlsZHJlbixyYihiLGMpLGU9VyhlLGYudW5zdGFibGVfb2JzZXJ2ZWRCaXRzKSxkPWQoZSksYi5lZmZlY3RUYWd8PTEsVChhLGIsZCxjKSxiLmNoaWxkO2Nhc2UgMTQ6cmV0dXJuIGU9Yi50eXBlLGY9YWEoZSxiLnBlbmRpbmdQcm9wcyksZj1hYShlLnR5cGUsZiksb2goYSxiLGUsZixkLGMpO2Nhc2UgMTU6cmV0dXJuIHBoKGEsYixiLnR5cGUsYi5wZW5kaW5nUHJvcHMsZCxjKTtjYXNlIDE3OnJldHVybiBkPWIudHlwZSxlPWIucGVuZGluZ1Byb3BzLGU9Yi5lbGVtZW50VHlwZT09PWQ/ZTphYShkLGUpLG51bGwhPT1hJiYoYS5hbHRlcm5hdGU9bnVsbCxiLmFsdGVybmF0ZT1udWxsLGIuZWZmZWN0VGFnfD0yKSxiLnRhZz0xLE4oZCk/KGE9ITAsQmMoYikpOmE9ITEscmIoYixjKSxZZyhiLGQsZSkscGUoYixkLGUsYyksSWUobnVsbCwKYixkLCEwLGEsYyk7Y2FzZSAxOTpyZXR1cm4gdmgoYSxiLGMpfXRocm93IEVycm9yKGsoMTU2LGIudGFnKSk7fTt2YXIgYmY9bnVsbCxOZT1udWxsLGxhPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBuZXcgRmooYSxiLGMsZCl9O2VmLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oYSl7bWQoYSx0aGlzLl9pbnRlcm5hbFJvb3QsbnVsbCxudWxsKX07ZWYucHJvdG90eXBlLnVubW91bnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9pbnRlcm5hbFJvb3QsYj1hLmNvbnRhaW5lckluZm87bWQobnVsbCxhLG51bGwsZnVuY3Rpb24oKXtiW0xiXT1udWxsfSl9O3ZhciBEaT1mdW5jdGlvbihhKXtpZigxMz09PWEudGFnKXt2YXIgYj1GYyhrYSgpLDE1MCwxMDApO0phKGEsYik7ZGYoYSxiKX19O3ZhciBZZj1mdW5jdGlvbihhKXsxMz09PWEudGFnJiYoSmEoYSwzKSxkZihhLDMpKX07dmFyIEJpPWZ1bmN0aW9uKGEpe2lmKDEzPT09YS50YWcpe3ZhciBiPWthKCk7Yj1WYShiLGEsbnVsbCk7SmEoYSwKYik7ZGYoYSxiKX19O3NkPWZ1bmN0aW9uKGEsYixjKXtzd2l0Y2goYil7Y2FzZSAiaW5wdXQiOkRkKGEsYyk7Yj1jLm5hbWU7aWYoInJhZGlvIj09PWMudHlwZSYmbnVsbCE9Yil7Zm9yKGM9YTtjLnBhcmVudE5vZGU7KWM9Yy5wYXJlbnROb2RlO2M9Yy5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSIrSlNPTi5zdHJpbmdpZnkoIiIrYikrJ11bdHlwZT0icmFkaW8iXScpO2ZvcihiPTA7YjxjLmxlbmd0aDtiKyspe3ZhciBkPWNbYl07aWYoZCE9PWEmJmQuZm9ybT09PWEuZm9ybSl7dmFyIGU9YWUoZCk7aWYoIWUpdGhyb3cgRXJyb3Ioayg5MCkpO0dmKGQpO0RkKGQsZSl9fX1icmVhaztjYXNlICJ0ZXh0YXJlYSI6TGYoYSxjKTticmVhaztjYXNlICJzZWxlY3QiOmI9Yy52YWx1ZSxudWxsIT1iJiZoYihhLCEhYy5tdWx0aXBsZSxiLCExKX19OyhmdW5jdGlvbihhLGIsYyxkKXtlZT1hO2VnPWI7dmQ9Yzt2Zj1kfSkoUWgsZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1wO3B8PTQ7CnRyeXtyZXR1cm4gRGEoOTgsYS5iaW5kKG51bGwsYixjLGQsZSkpfWZpbmFsbHl7cD1mLHA9PT1IJiZoYSgpfX0sZnVuY3Rpb24oKXsocCYoMXxjYXxtYSkpPT09SCYmKHVqKCkseGIoKSl9LGZ1bmN0aW9uKGEsYil7dmFyIGM9cDtwfD0yO3RyeXtyZXR1cm4gYShiKX1maW5hbGx5e3A9YyxwPT09SCYmaGEoKX19KTt2YXIgbWs9e0V2ZW50czpbSGIsUGEsYWUscGYscWQsbGIsZnVuY3Rpb24oYSl7S2QoYSxLaSl9LHNmLHRmLHNjLHBjLHhiLHtjdXJyZW50OiExfV19OyhmdW5jdGlvbihhKXt2YXIgYj1hLmZpbmRGaWJlckJ5SG9zdEluc3RhbmNlO3JldHVybiBFaihNKHt9LGEse292ZXJyaWRlSG9va1N0YXRlOm51bGwsb3ZlcnJpZGVQcm9wczpudWxsLHNldFN1c3BlbnNlSGFuZGxlcjpudWxsLHNjaGVkdWxlVXBkYXRlOm51bGwsY3VycmVudERpc3BhdGNoZXJSZWY6ZGEuUmVhY3RDdXJyZW50RGlzcGF0Y2hlcixmaW5kSG9zdEluc3RhbmNlQnlGaWJlcjpmdW5jdGlvbihhKXthPVNmKGEpOwpyZXR1cm4gbnVsbD09PWE/bnVsbDphLnN0YXRlTm9kZX0sZmluZEZpYmVyQnlIb3N0SW5zdGFuY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGI/YihhKTpudWxsfSxmaW5kSG9zdEluc3RhbmNlc0ZvclJlZnJlc2g6bnVsbCxzY2hlZHVsZVJlZnJlc2g6bnVsbCxzY2hlZHVsZVJvb3Q6bnVsbCxzZXRSZWZyZXNoSGFuZGxlcjpudWxsLGdldEN1cnJlbnRGaWJlcjpudWxsfSkpfSkoe2ZpbmRGaWJlckJ5SG9zdEluc3RhbmNlOkJiLGJ1bmRsZVR5cGU6MCx2ZXJzaW9uOiIxNi4xMy4xIixyZW5kZXJlclBhY2thZ2VOYW1lOiJyZWFjdC1kb20ifSk7SS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRD1taztJLmNyZWF0ZVBvcnRhbD1YaDtJLmZpbmRET01Ob2RlPWZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7aWYoMT09PWEubm9kZVR5cGUpcmV0dXJuIGE7dmFyIGI9YS5fcmVhY3RJbnRlcm5hbEZpYmVyO2lmKHZvaWQgMD09PQpiKXtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGEucmVuZGVyKXRocm93IEVycm9yKGsoMTg4KSk7dGhyb3cgRXJyb3IoaygyNjgsT2JqZWN0LmtleXMoYSkpKTt9YT1TZihiKTthPW51bGw9PT1hP251bGw6YS5zdGF0ZU5vZGU7cmV0dXJuIGF9O0kuZmx1c2hTeW5jPWZ1bmN0aW9uKGEsYil7aWYoKHAmKGNhfG1hKSkhPT1IKXRocm93IEVycm9yKGsoMTg3KSk7dmFyIGM9cDtwfD0xO3RyeXtyZXR1cm4gRGEoOTksYS5iaW5kKG51bGwsYikpfWZpbmFsbHl7cD1jLGhhKCl9fTtJLmh5ZHJhdGU9ZnVuY3Rpb24oYSxiLGMpe2lmKCFiYyhiKSl0aHJvdyBFcnJvcihrKDIwMCkpO3JldHVybiBuZChudWxsLGEsYiwhMCxjKX07SS5yZW5kZXI9ZnVuY3Rpb24oYSxiLGMpe2lmKCFiYyhiKSl0aHJvdyBFcnJvcihrKDIwMCkpO3JldHVybiBuZChudWxsLGEsYiwhMSxjKX07SS51bm1vdW50Q29tcG9uZW50QXROb2RlPWZ1bmN0aW9uKGEpe2lmKCFiYyhhKSl0aHJvdyBFcnJvcihrKDQwKSk7cmV0dXJuIGEuX3JlYWN0Um9vdENvbnRhaW5lcj8KKFJoKGZ1bmN0aW9uKCl7bmQobnVsbCxudWxsLGEsITEsZnVuY3Rpb24oKXthLl9yZWFjdFJvb3RDb250YWluZXI9bnVsbDthW0xiXT1udWxsfSl9KSwhMCk6ITF9O0kudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXM9UWg7SS51bnN0YWJsZV9jcmVhdGVQb3J0YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gWGgoYSxiLDI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpudWxsKX07SS51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcj1mdW5jdGlvbihhLGIsYyxkKXtpZighYmMoYykpdGhyb3cgRXJyb3IoaygyMDApKTtpZihudWxsPT1hfHx2b2lkIDA9PT1hLl9yZWFjdEludGVybmFsRmliZXIpdGhyb3cgRXJyb3IoaygzOCkpO3JldHVybiBuZChhLGIsYywhMSxkKX07SS52ZXJzaW9uPSIxNi4xMy4xIn0pOwoKLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgZXhjYWxpZHJhdy5wcm9kdWN0aW9uLm1pbi5qcy5MSUNFTlNFLnR4dCAqLyAhIGZ1bmN0aW9uKGUsIHQpIHsKCSJvYmplY3QiID09IHR5cGVvZiBleHBvcnRzICYmICJvYmplY3QiID09IHR5cGVvZiBtb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA9IHQocmVxdWlyZSgicmVhY3QiKSwgcmVxdWlyZSgicmVhY3QtZG9tIikpIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyJyZWFjdCIsICJyZWFjdC1kb20iXSwgdCkgOiAib2JqZWN0IiA9PSB0eXBlb2YgZXhwb3J0cyA/IGV4cG9ydHMuRXhjYWxpZHJhdyA9IHQocmVxdWlyZSgicmVhY3QiKSwgcmVxdWlyZSgicmVhY3QtZG9tIikpIDogZS5FeGNhbGlkcmF3ID0gdChlLlJlYWN0LCBlLlJlYWN0RE9NKQp9KHNlbGYsIChmdW5jdGlvbihlLCB0KSB7CiAgICByZXR1cm4gKCgpID0+IHsKICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgIDYwODY6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKGUsIHQsIG4sIHIsIG8sIGEsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gZVthXShpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbC52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBuKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbC5kb25lID8gdChzKSA6IFByb21pc2UucmVzb2x2ZShzKS50aGVuKHIsIG8pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBhcmd1bWVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUuYXBwbHkodCwgbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKGksIG8sIGEsIGwsIHMsICJuZXh0IiwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKGksIG8sIGEsIGwsIHMsICJ0aHJvdyIsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwodm9pZCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgWjogKCkgPT4gbwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgODMzNjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNDI5NSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDI3ODk6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDM3MjkpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3Nzg6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDk2MDkpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA0MjIwOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbigyMzQ1KTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMTI5MjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNjU3OCk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDE5NjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oOTQ4Mik7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDIyMDU6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDc5NTUpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAxMzEwOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbigzMTk1KTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMzkyMjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oMjk3OCk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDcwOTY6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDE1ODcpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3MTE3OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbig5NDc4KTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMTEwNjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNzM2OSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDMzMzY6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDE0MzQpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA2OTQ6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDU2NDQpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA4MzI4OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbig2ODQzKTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgODA1MTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oODQ2MSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDQzMDE6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDk5MzUpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA0NjIzOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbigzODc0KTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMTUyODogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oMjY4MSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDUxODogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNjc1OSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDk3NTc6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDk2NTApOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA1NDIyOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbigyMDQ0KTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgNjc4MTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNjYyNik7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDU4MDogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNjM1OSk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDQyODU6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDQ4NyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKDk5MTUpOwogICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZihvID0gby5fX2VzTW9kdWxlID8gby5kZWZhdWx0IDogbykgJiYgKG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIFtlLmlkLCBvLCAiIl0KICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiAiaGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXRvbjogITEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHIobywgYSk7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gby5sb2NhbHMgfHwge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAzMzEzOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbig0ODcpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbig5MzEwKTsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YobyA9IG8uX19lc01vZHVsZSA/IG8uZGVmYXVsdCA6IG8pICYmIChvID0gWwogICAgICAgICAgICAgICAgICAgICAgICBbZS5pZCwgbywgIiJdCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydDogImhlYWQiLAogICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGV0b246ICExCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByKG8sIGEpOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IG8ubG9jYWxzIHx8IHt9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgODYzNTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNDg3KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4oNjQ2NCk7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mKG8gPSBvLl9fZXNNb2R1bGUgPyBvLmRlZmF1bHQgOiBvKSAmJiAobyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgW2UuaWQsIG8sICIiXQogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQ6ICJoZWFkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xldG9uOiAhMQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcihvLCBhKTsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBvLmxvY2FscyB8fCB7fQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDQ4NzogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHIgJiYgKHIgPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKSksIHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZVt0XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgbiBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuLmNvbnRlbnREb2N1bWVudC5oZWFkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0XSA9IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbdF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gW107CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gLTEsIG4gPSAwOyBuIDwgaS5sZW5ndGg7IG4rKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpW25dLmlkZW50aWZpZXIgPT09IGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB7fSwgciA9IFtdLCBvID0gMDsgbyA8IGUubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZVtvXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdC5iYXNlID8gYVswXSArIHQuYmFzZSA6IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG5bc10gfHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gIiIuY29uY2F0KHMsICIgIikuY29uY2F0KGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbltzXSA9IGMgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBsKHUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzczogYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWE6IGFbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcDogYVszXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC0gMSAhPT0gZCA/IChpW2RdLnJlZmVyZW5jZXMrKywgaVtkXS51cGRhdGVyKHApKSA6IGkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVyOiBnKHAsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZXM6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByLnB1c2godSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmF0dHJpYnV0ZXMgfHwge307CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHIubm9uY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbi5uYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgKHIubm9uY2UgPSBvKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zZXRBdHRyaWJ1dGUoZSwgcltlXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS5pbnNlcnQpIGUuaW5zZXJ0KHQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYShlLmluc2VydCB8fCAiaGVhZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpKSB0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuYXBwZW5kQ2hpbGQodCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdSwgZCA9ICh1ID0gW10sIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVbZV0gPSB0LCB1LmZpbHRlcihCb29sZWFuKS5qb2luKCJcbiIpCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG4gPyAiIiA6IHIubWVkaWEgPyAiQG1lZGlhICIuY29uY2F0KHIubWVkaWEsICIgeyIpLmNvbmNhdChyLmNzcywgIn0iKSA6IHIuY3NzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdHlsZVNoZWV0KSBlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGQodCwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5jaGlsZE5vZGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaVt0XSAmJiBlLnJlbW92ZUNoaWxkKGlbdF0pLCBpLmxlbmd0aCA/IGUuaW5zZXJ0QmVmb3JlKGEsIGlbdF0pIDogZS5hcHBlbmRDaGlsZChhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuLmNzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm1lZGlhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG4uc291cmNlTWFwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA/IGUuc2V0QXR0cmlidXRlKCJtZWRpYSIsIG8pIDogZS5yZW1vdmVBdHRyaWJ1dGUoIm1lZGlhIiksIGEgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGJ0b2EgJiYgKHIgKz0gIlxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShhKSkpKSwgIiAqLyIpKSwgZS5zdHlsZVNoZWV0KSBlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGUuZmlyc3RDaGlsZDspIGUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBtID0gMDsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zaW5nbGV0b24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gbSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGYgfHwgKGYgPSBjKHQpKSwgciA9IHAuYmluZChudWxsLCBuLCBhLCAhMSksIG8gPSBwLmJpbmQobnVsbCwgbiwgYSwgITApCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuID0gYyh0KSwgciA9IGguYmluZChudWxsLCBuLCB0KSwgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgISBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUucGFyZW50Tm9kZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShuKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5jc3MgPT09IGUuY3NzICYmIHQubWVkaWEgPT09IGUubWVkaWEgJiYgdC5zb3VyY2VNYXAgPT09IGUuc291cmNlTWFwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoZSA9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gdCB8fCB7fSkuc2luZ2xldG9uIHx8ICJib29sZWFuIiA9PSB0eXBlb2YgdC5zaW5nbGV0b24gfHwgKHQuc2luZ2xldG9uID0gbygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBzKGUgPSBlIHx8IFtdLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gZSB8fCBbXSwgIltvYmplY3QgQXJyYXldIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbChuW3JdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVtvXS5yZWZlcmVuY2VzLS0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IHMoZSwgdCksIGMgPSAwOyBjIDwgbi5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGwobltjXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IGlbdV0ucmVmZXJlbmNlcyAmJiAoaVt1XS51cGRhdGVyKCksIGkuc3BsaWNlKHUsIDEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDI4Mjk6IGUgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7ImxhYmVscyI6eyJwYXN0ZSI6IlBhc3RlIiwicGFzdGVDaGFydHMiOiJQYXN0ZSBjaGFydHMiLCJzZWxlY3RBbGwiOiJTZWxlY3QgYWxsIiwibXVsdGlTZWxlY3QiOiJBZGQgZWxlbWVudCB0byBzZWxlY3Rpb24iLCJtb3ZlQ2FudmFzIjoiTW92ZSBjYW52YXMiLCJjdXQiOiJDdXQiLCJjb3B5IjoiQ29weSIsImNvcHlBc1BuZyI6IkNvcHkgdG8gY2xpcGJvYXJkIGFzIFBORyIsImNvcHlBc1N2ZyI6IkNvcHkgdG8gY2xpcGJvYXJkIGFzIFNWRyIsImJyaW5nRm9yd2FyZCI6IkJyaW5nIGZvcndhcmQiLCJzZW5kVG9CYWNrIjoiU2VuZCB0byBiYWNrIiwiYnJpbmdUb0Zyb250IjoiQnJpbmcgdG8gZnJvbnQiLCJzZW5kQmFja3dhcmQiOiJTZW5kIGJhY2t3YXJkIiwiZGVsZXRlIjoiRGVsZXRlIiwiY29weVN0eWxlcyI6IkNvcHkgc3R5bGVzIiwicGFzdGVTdHlsZXMiOiJQYXN0ZSBzdHlsZXMiLCJzdHJva2UiOiJTdHJva2UiLCJiYWNrZ3JvdW5kIjoiQmFja2dyb3VuZCIsImZpbGwiOiJGaWxsIiwic3Ryb2tlV2lkdGgiOiJTdHJva2Ugd2lkdGgiLCJzdHJva2VTaGFwZSI6IlN0cm9rZSBzaGFwZSIsInN0cm9rZVNoYXBlX2dlbCI6IkdlbCBwZW4iLCJzdHJva2VTaGFwZV9mb3VudGFpbiI6IkZvdW50YWluIHBlbiIsInN0cm9rZVNoYXBlX2JydXNoIjoiQnJ1c2ggcGVuIiwic3Ryb2tlU3R5bGUiOiJTdHJva2Ugc3R5bGUiLCJzdHJva2VTdHlsZV9zb2xpZCI6IlNvbGlkIiwic3Ryb2tlU3R5bGVfZGFzaGVkIjoiRGFzaGVkIiwic3Ryb2tlU3R5bGVfZG90dGVkIjoiRG90dGVkIiwic2xvcHBpbmVzcyI6IlNsb3BwaW5lc3MiLCJvcGFjaXR5IjoiT3BhY2l0eSIsInRleHRBbGlnbiI6IlRleHQgYWxpZ24iLCJlZGdlcyI6IkVkZ2VzIiwic2hhcnAiOiJTaGFycCIsInJvdW5kIjoiUm91bmQiLCJhcnJvd2hlYWRzIjoiQXJyb3doZWFkcyIsImFycm93aGVhZF9ub25lIjoiTm9uZSIsImFycm93aGVhZF9hcnJvdyI6IkFycm93IiwiYXJyb3doZWFkX2JhciI6IkJhciIsImFycm93aGVhZF9kb3QiOiJEb3QiLCJmb250U2l6ZSI6IkZvbnQgc2l6ZSIsImZvbnRGYW1pbHkiOiJGb250IGZhbWlseSIsIm9ubHlTZWxlY3RlZCI6Ik9ubHkgc2VsZWN0ZWQiLCJ3aXRoQmFja2dyb3VuZCI6IldpdGggYmFja2dyb3VuZCIsImV4cG9ydEVtYmVkU2NlbmUiOiJFbWJlZCBzY2VuZSBpbnRvIGV4cG9ydGVkIGZpbGUiLCJleHBvcnRFbWJlZFNjZW5lX2RldGFpbHMiOiJTY2VuZSBkYXRhIHdpbGwgYmUgc2F2ZWQgaW50byB0aGUgZXhwb3J0ZWQgUE5HL1NWRyBmaWxlIHNvIHRoYXQgdGhlIHNjZW5lIGNhbiBiZSByZXN0b3JlZCBmcm9tIGl0LlxcbldpbGwgaW5jcmVhc2UgZXhwb3J0ZWQgZmlsZSBzaXplLiIsImFkZFdhdGVybWFyayI6IkFkZCBcXCJNYWRlIHdpdGggRXhjYWxpZHJhd1xcIiIsImhhbmREcmF3biI6IkhhbmQtZHJhd24iLCJub3JtYWwiOiJOb3JtYWwiLCJjb2RlIjoiQ29kZSIsInNtYWxsIjoiU21hbGwiLCJtZWRpdW0iOiJNZWRpdW0iLCJsYXJnZSI6IkxhcmdlIiwidmVyeUxhcmdlIjoiVmVyeSBsYXJnZSIsInNvbGlkIjoiU29saWQiLCJoYWNodXJlIjoiSGFjaHVyZSIsImNyb3NzSGF0Y2giOiJDcm9zcy1oYXRjaCIsInRoaW4iOiJUaGluIiwiYm9sZCI6IkJvbGQiLCJsZWZ0IjoiTGVmdCIsImNlbnRlciI6IkNlbnRlciIsInJpZ2h0IjoiUmlnaHQiLCJleHRyYUJvbGQiOiJFeHRyYSBib2xkIiwiYXJjaGl0ZWN0IjoiQXJjaGl0ZWN0IiwiYXJ0aXN0IjoiQXJ0aXN0IiwiY2FydG9vbmlzdCI6IkNhcnRvb25pc3QiLCJmaWxlVGl0bGUiOiJGaWxlIG5hbWUiLCJjb2xvclBpY2tlciI6IkNvbG9yIHBpY2tlciIsImNhbnZhc0JhY2tncm91bmQiOiJDYW52YXMgYmFja2dyb3VuZCIsImRyYXdpbmdDYW52YXMiOiJEcmF3aW5nIGNhbnZhcyIsImxheWVycyI6IkxheWVycyIsImFjdGlvbnMiOiJBY3Rpb25zIiwibGFuZ3VhZ2UiOiJMYW5ndWFnZSIsImxpdmVDb2xsYWJvcmF0aW9uIjoiTGl2ZSBjb2xsYWJvcmF0aW9uIiwiZHVwbGljYXRlU2VsZWN0aW9uIjoiRHVwbGljYXRlIiwidW50aXRsZWQiOiJVbnRpdGxlZCIsIm5hbWUiOiJOYW1lIiwieW91ck5hbWUiOiJZb3VyIG5hbWUiLCJtYWRlV2l0aEV4Y2FsaWRyYXciOiJNYWRlIHdpdGggRXhjYWxpZHJhdyIsImdyb3VwIjoiR3JvdXAgc2VsZWN0aW9uIiwidW5ncm91cCI6IlVuZ3JvdXAgc2VsZWN0aW9uIiwiY29sbGFib3JhdG9ycyI6IkNvbGxhYm9yYXRvcnMiLCJzaG93R3JpZCI6IlNob3cgZ3JpZCIsImFkZFRvTGlicmFyeSI6IkFkZCB0byBsaWJyYXJ5IiwicmVtb3ZlRnJvbUxpYnJhcnkiOiJSZW1vdmUgZnJvbSBsaWJyYXJ5IiwibGlicmFyeUxvYWRpbmdNZXNzYWdlIjoiTG9hZGluZyBsaWJyYXJ54oCmIiwibGlicmFyaWVzIjoiQnJvd3NlIGxpYnJhcmllcyIsImxvYWRpbmdTY2VuZSI6IkxvYWRpbmcgc2NlbmXigKYiLCJhbGlnbiI6IkFsaWduIiwiYWxpZ25Ub3AiOiJBbGlnbiB0b3AiLCJhbGlnbkJvdHRvbSI6IkFsaWduIGJvdHRvbSIsImFsaWduTGVmdCI6IkFsaWduIGxlZnQiLCJhbGlnblJpZ2h0IjoiQWxpZ24gcmlnaHQiLCJjZW50ZXJWZXJ0aWNhbGx5IjoiQ2VudGVyIHZlcnRpY2FsbHkiLCJjZW50ZXJIb3Jpem9udGFsbHkiOiJDZW50ZXIgaG9yaXpvbnRhbGx5IiwiZGlzdHJpYnV0ZUhvcml6b250YWxseSI6IkRpc3RyaWJ1dGUgaG9yaXpvbnRhbGx5IiwiZGlzdHJpYnV0ZVZlcnRpY2FsbHkiOiJEaXN0cmlidXRlIHZlcnRpY2FsbHkiLCJmbGlwSG9yaXpvbnRhbCI6IkZsaXAgaG9yaXpvbnRhbCIsImZsaXBWZXJ0aWNhbCI6IkZsaXAgdmVydGljYWwiLCJ2aWV3TW9kZSI6IlZpZXcgbW9kZSIsInRvZ2dsZUV4cG9ydENvbG9yU2NoZW1lIjoiVG9nZ2xlIGV4cG9ydCBjb2xvciBzY2hlbWUiLCJzaGFyZSI6IlNoYXJlIiwidG9nZ2xlVGhlbWUiOiJUb2dnbGUgdGhlbWUifSwiYnV0dG9ucyI6eyJjbGVhclJlc2V0IjoiUmVzZXQgdGhlIGNhbnZhcyIsImV4cG9ydCI6IkV4cG9ydCIsImV4cG9ydFRvUG5nIjoiRXhwb3J0IHRvIFBORyIsImV4cG9ydFRvU3ZnIjoiRXhwb3J0IHRvIFNWRyIsImNvcHlUb0NsaXBib2FyZCI6IkNvcHkgdG8gY2xpcGJvYXJkIiwiY29weVBuZ1RvQ2xpcGJvYXJkIjoiQ29weSBQTkcgdG8gY2xpcGJvYXJkIiwic2NhbGUiOiJTY2FsZSIsInNhdmUiOiJTYXZlIiwic2F2ZUFzIjoiU2F2ZSBhcyIsImxvYWQiOiJMb2FkIiwiZ2V0U2hhcmVhYmxlTGluayI6IkdldCBzaGFyZWFibGUgbGluayIsImNsb3NlIjoiQ2xvc2UiLCJzZWxlY3RMYW5ndWFnZSI6IlNlbGVjdCBsYW5ndWFnZSIsInNjcm9sbEJhY2tUb0NvbnRlbnQiOiJTY3JvbGwgYmFjayB0byBjb250ZW50Iiwiem9vbUluIjoiWm9vbSBpbiIsInpvb21PdXQiOiJab29tIG91dCIsInJlc2V0Wm9vbSI6IlJlc2V0IHpvb20iLCJtZW51IjoiTWVudSIsImRvbmUiOiJEb25lIiwiZWRpdCI6IkVkaXQiLCJ1bmRvIjoiVW5kbyIsInJlZG8iOiJSZWRvIiwicmVzZXRMaWJyYXJ5IjoiUmVzZXQgbGlicmFyeSIsImNyZWF0ZU5ld1Jvb20iOiJDcmVhdGUgbmV3IHJvb20iLCJmdWxsU2NyZWVuIjoiRnVsbCBzY3JlZW4iLCJkYXJrTW9kZSI6IkRhcmsgbW9kZSIsImxpZ2h0TW9kZSI6IkxpZ2h0IG1vZGUiLCJ6ZW5Nb2RlIjoiWmVuIG1vZGUiLCJleGl0WmVuTW9kZSI6IkV4aXQgemVuIG1vZGUifSwiYWxlcnRzIjp7ImNsZWFyUmVzZXQiOiJUaGlzIHdpbGwgY2xlYXIgdGhlIHdob2xlIGNhbnZhcy4gQXJlIHlvdSBzdXJlPyIsImNvdWxkTm90Q3JlYXRlU2hhcmVhYmxlTGluayI6IkNvdWxkblwndCBjcmVhdGUgc2hhcmVhYmxlIGxpbmsuIiwiY291bGROb3RDcmVhdGVTaGFyZWFibGVMaW5rVG9vQmlnIjoiQ291bGRuXCd0IGNyZWF0ZSBzaGFyZWFibGUgbGluazogdGhlIHNjZW5lIGlzIHRvbyBiaWciLCJjb3VsZE5vdExvYWRJbnZhbGlkRmlsZSI6IkNvdWxkblwndCBsb2FkIGludmFsaWQgZmlsZSIsImltcG9ydEJhY2tlbmRGYWlsZWQiOiJJbXBvcnRpbmcgZnJvbSBiYWNrZW5kIGZhaWxlZC4iLCJjYW5ub3RFeHBvcnRFbXB0eUNhbnZhcyI6IkNhbm5vdCBleHBvcnQgZW1wdHkgY2FudmFzLiIsImNvdWxkTm90Q29weVRvQ2xpcGJvYXJkIjoiQ291bGRuXCd0IGNvcHkgdG8gY2xpcGJvYXJkLiBUcnkgdXNpbmcgQ2hyb21lIGJyb3dzZXIuIiwiZGVjcnlwdEZhaWxlZCI6IkNvdWxkblwndCBkZWNyeXB0IGRhdGEuIiwidXBsb2FkZWRTZWN1cmx5IjoiVGhlIHVwbG9hZCBoYXMgYmVlbiBzZWN1cmVkIHdpdGggZW5kLXRvLWVuZCBlbmNyeXB0aW9uLCB3aGljaCBtZWFucyB0aGF0IEV4Y2FsaWRyYXcgc2VydmVyIGFuZCB0aGlyZCBwYXJ0aWVzIGNhblwndCByZWFkIHRoZSBjb250ZW50LiIsImxvYWRTY2VuZU92ZXJyaWRlUHJvbXB0IjoiTG9hZGluZyBleHRlcm5hbCBkcmF3aW5nIHdpbGwgcmVwbGFjZSB5b3VyIGV4aXN0aW5nIGNvbnRlbnQuIERvIHlvdSB3aXNoIHRvIGNvbnRpbnVlPyIsImNvbGxhYlN0b3BPdmVycmlkZVByb21wdCI6IlN0b3BwaW5nIHRoZSBzZXNzaW9uIHdpbGwgb3ZlcndyaXRlIHlvdXIgcHJldmlvdXMsIGxvY2FsbHkgc3RvcmVkIGRyYXdpbmcuIEFyZSB5b3Ugc3VyZT9cXG5cXG4oSWYgeW91IHdhbnQgdG8ga2VlcCB5b3VyIGxvY2FsIGRyYXdpbmcsIHNpbXBseSBjbG9zZSB0aGUgYnJvd3NlciB0YWIgaW5zdGVhZC4pIiwiZXJyb3JMb2FkaW5nTGlicmFyeSI6IlRoZXJlIHdhcyBhbiBlcnJvciBsb2FkaW5nIHRoZSB0aGlyZCBwYXJ0eSBsaWJyYXJ5LiIsImVycm9yQWRkaW5nVG9MaWJyYXJ5IjoiQ291bGRuXCd0IGFkZCBpdGVtIHRvIHRoZSBsaWJyYXJ5IiwiZXJyb3JSZW1vdmluZ0Zyb21MaWJyYXJ5IjoiQ291bGRuXCd0IHJlbW92ZSBpdGVtIGZyb20gdGhlIGxpYnJhcnkiLCJjb25maXJtQWRkTGlicmFyeSI6IlRoaXMgd2lsbCBhZGQge3tudW1TaGFwZXN9fSBzaGFwZShzKSB0byB5b3VyIGxpYnJhcnkuIEFyZSB5b3Ugc3VyZT8iLCJpbWFnZURvZXNOb3RDb250YWluU2NlbmUiOiJJbXBvcnRpbmcgaW1hZ2VzIGlzblwndCBzdXBwb3J0ZWQgYXQgdGhlIG1vbWVudC5cXG5cXG5EaWQgeW91IHdhbnQgdG8gaW1wb3J0IGEgc2NlbmU/IFRoaXMgaW1hZ2UgZG9lcyBub3Qgc2VlbSB0byBjb250YWluIGFueSBzY2VuZSBkYXRhLiBIYXZlIHlvdSBlbmFibGVkIHRoaXMgZHVyaW5nIGV4cG9ydD8iLCJjYW5ub3RSZXN0b3JlRnJvbUltYWdlIjoiU2NlbmUgY291bGRuXCd0IGJlIHJlc3RvcmVkIGZyb20gdGhpcyBpbWFnZSBmaWxlIiwiaW52YWxpZFNjZW5lVXJsIjoiQ291bGRuXCd0IGltcG9ydCBzY2VuZSBmcm9tIHRoZSBzdXBwbGllZCBVUkwuIEl0XCdzIGVpdGhlciBtYWxmb3JtZWQsIG9yIGRvZXNuXCd0IGNvbnRhaW4gdmFsaWQgRXhjYWxpZHJhdyBKU09OIGRhdGEuIiwicmVzZXRMaWJyYXJ5IjoiVGhpcyB3aWxsIGNsZWFyIHlvdXIgbGlicmFyeS4gQXJlIHlvdSBzdXJlPyJ9LCJ0b29sQmFyIjp7InNlbGVjdGlvbiI6IlNlbGVjdGlvbiIsInJlY3RhbmdsZSI6IlJlY3RhbmdsZSIsImRpYW1vbmQiOiJEaWFtb25kIiwiZWxsaXBzZSI6IkVsbGlwc2UiLCJhcnJvdyI6IkFycm93IiwibGluZSI6IkxpbmUiLCJmcmVlZHJhdyI6IkRyYXciLCJ0ZXh0IjoiVGV4dCIsImxpYnJhcnkiOiJMaWJyYXJ5IiwibG9jayI6IktlZXAgc2VsZWN0ZWQgdG9vbCBhY3RpdmUgYWZ0ZXIgZHJhd2luZyJ9LCJoZWFkaW5ncyI6eyJjYW52YXNBY3Rpb25zIjoiQ2FudmFzIGFjdGlvbnMiLCJzZWxlY3RlZFNoYXBlQWN0aW9ucyI6IlNlbGVjdGVkIHNoYXBlIGFjdGlvbnMiLCJzaGFwZXMiOiJTaGFwZXMifSwiaGludHMiOnsibGluZWFyRWxlbWVudCI6IkNsaWNrIHRvIHN0YXJ0IG11bHRpcGxlIHBvaW50cywgZHJhZyBmb3Igc2luZ2xlIGxpbmUiLCJmcmVlRHJhdyI6IkNsaWNrIGFuZCBkcmFnLCByZWxlYXNlIHdoZW4geW91XCdyZSBmaW5pc2hlZCIsInRleHQiOiJUaXA6IHlvdSBjYW4gYWxzbyBhZGQgdGV4dCBieSBkb3VibGUtY2xpY2tpbmcgYW55d2hlcmUgd2l0aCB0aGUgc2VsZWN0aW9uIHRvb2wiLCJsaW5lYXJFbGVtZW50TXVsdGkiOiJDbGljayBvbiBsYXN0IHBvaW50IG9yIHByZXNzIEVzY2FwZSBvciBFbnRlciB0byBmaW5pc2giLCJsb2NrQW5nbGUiOiJZb3UgY2FuIGNvbnN0cmFpbiBhbmdsZSBieSBob2xkaW5nIFNISUZUIiwicmVzaXplIjoiWW91IGNhbiBjb25zdHJhaW4gcHJvcG9ydGlvbnMgYnkgaG9sZGluZyBTSElGVCB3aGlsZSByZXNpemluZyxcXG5ob2xkIEFMVCB0byByZXNpemUgZnJvbSB0aGUgY2VudGVyIiwicm90YXRlIjoiWW91IGNhbiBjb25zdHJhaW4gYW5nbGVzIGJ5IGhvbGRpbmcgU0hJRlQgd2hpbGUgcm90YXRpbmciLCJsaW5lRWRpdG9yX2luZm8iOiJEb3VibGUtY2xpY2sgb3IgcHJlc3MgRW50ZXIgdG8gZWRpdCBwb2ludHMiLCJsaW5lRWRpdG9yX3BvaW50U2VsZWN0ZWQiOiJQcmVzcyBEZWxldGUgdG8gcmVtb3ZlIHBvaW50LCBDdHJsT3JDbWQrRCB0byBkdXBsaWNhdGUsIG9yIGRyYWcgdG8gbW92ZSIsImxpbmVFZGl0b3Jfbm90aGluZ1NlbGVjdGVkIjoiU2VsZWN0IGEgcG9pbnQgdG8gbW92ZSBvciByZW1vdmUsIG9yIGhvbGQgQWx0IGFuZCBjbGljayB0byBhZGQgbmV3IHBvaW50cyJ9LCJjYW52YXNFcnJvciI6eyJjYW5ub3RTaG93UHJldmlldyI6IkNhbm5vdCBzaG93IHByZXZpZXciLCJjYW52YXNUb29CaWciOiJUaGUgY2FudmFzIG1heSBiZSB0b28gYmlnLiIsImNhbnZhc1Rvb0JpZ1RpcCI6IlRpcDogdHJ5IG1vdmluZyB0aGUgZmFydGhlc3QgZWxlbWVudHMgYSBiaXQgY2xvc2VyIHRvZ2V0aGVyLiJ9LCJlcnJvclNwbGFzaCI6eyJoZWFkaW5nTWFpbl9wcmUiOiJFbmNvdW50ZXJlZCBhbiBlcnJvci4gVHJ5ICIsImhlYWRpbmdNYWluX2J1dHRvbiI6InJlbG9hZGluZyB0aGUgcGFnZS4iLCJjbGVhckNhbnZhc01lc3NhZ2UiOiJJZiByZWxvYWRpbmcgZG9lc25cJ3Qgd29yaywgdHJ5ICIsImNsZWFyQ2FudmFzTWVzc2FnZV9idXR0b24iOiJjbGVhcmluZyB0aGUgY2FudmFzLiIsImNsZWFyQ2FudmFzQ2F2ZWF0IjoiIFRoaXMgd2lsbCByZXN1bHQgaW4gbG9zcyBvZiB3b3JrICIsInRyYWNrZWRUb1NlbnRyeV9wcmUiOiJUaGUgZXJyb3Igd2l0aCBpZGVudGlmaWVyICIsInRyYWNrZWRUb1NlbnRyeV9wb3N0IjoiIHdhcyB0cmFja2VkIG9uIG91ciBzeXN0ZW0uIiwib3Blbklzc3VlTWVzc2FnZV9wcmUiOiJXZSB3ZXJlIHZlcnkgY2F1dGlvdXMgbm90IHRvIGluY2x1ZGUgeW91ciBzY2VuZSBpbmZvcm1hdGlvbiBvbiB0aGUgZXJyb3IuIElmIHlvdXIgc2NlbmUgaXMgbm90IHByaXZhdGUsIHBsZWFzZSBjb25zaWRlciBmb2xsb3dpbmcgdXAgb24gb3VyICIsIm9wZW5Jc3N1ZU1lc3NhZ2VfYnV0dG9uIjoiYnVnIHRyYWNrZXIuIiwib3Blbklzc3VlTWVzc2FnZV9wb3N0IjoiIFBsZWFzZSBpbmNsdWRlIGluZm9ybWF0aW9uIGJlbG93IGJ5IGNvcHlpbmcgYW5kIHBhc3RpbmcgaW50byB0aGUgR2l0SHViIGlzc3VlLiIsInNjZW5lQ29udGVudCI6IlNjZW5lIGNvbnRlbnQ6In0sInJvb21EaWFsb2ciOnsiZGVzY19pbnRybyI6IllvdSBjYW4gaW52aXRlIHBlb3BsZSB0byB5b3VyIGN1cnJlbnQgc2NlbmUgdG8gY29sbGFib3JhdGUgd2l0aCB5b3UuIiwiZGVzY19wcml2YWN5IjoiRG9uXCd0IHdvcnJ5LCB0aGUgc2Vzc2lvbiB1c2VzIGVuZC10by1lbmQgZW5jcnlwdGlvbiwgc28gd2hhdGV2ZXIgeW91IGRyYXcgd2lsbCBzdGF5IHByaXZhdGUuIE5vdCBldmVuIG91ciBzZXJ2ZXIgd2lsbCBiZSBhYmxlIHRvIHNlZSB3aGF0IHlvdSBjb21lIHVwIHdpdGguIiwiYnV0dG9uX3N0YXJ0U2Vzc2lvbiI6IlN0YXJ0IHNlc3Npb24iLCJidXR0b25fc3RvcFNlc3Npb24iOiJTdG9wIHNlc3Npb24iLCJkZXNjX2luUHJvZ3Jlc3NJbnRybyI6IkxpdmUtY29sbGFib3JhdGlvbiBzZXNzaW9uIGlzIG5vdyBpbiBwcm9ncmVzcy4iLCJkZXNjX3NoYXJlTGluayI6IlNoYXJlIHRoaXMgbGluayB3aXRoIGFueW9uZSB5b3Ugd2FudCB0byBjb2xsYWJvcmF0ZSB3aXRoOiIsImRlc2NfZXhpdFNlc3Npb24iOiJTdG9wcGluZyB0aGUgc2Vzc2lvbiB3aWxsIGRpc2Nvbm5lY3QgeW91IGZyb20gdGhlIHJvb20sIGJ1dCB5b3VcJ2xsIGJlIGFibGUgdG8gY29udGludWUgd29ya2luZyB3aXRoIHRoZSBzY2VuZSwgbG9jYWxseS4gTm90ZSB0aGF0IHRoaXMgd29uXCd0IGFmZmVjdCBvdGhlciBwZW9wbGUsIGFuZCB0aGV5XCdsbCBzdGlsbCBiZSBhYmxlIHRvIGNvbGxhYm9yYXRlIG9uIHRoZWlyIHZlcnNpb24uIiwic2hhcmVUaXRsZSI6IkpvaW4gYSBsaXZlIGNvbGxhYm9yYXRpb24gc2Vzc2lvbiBvbiBFeGNhbGlkcmF3In0sImVycm9yRGlhbG9nIjp7InRpdGxlIjoiRXJyb3IifSwiaGVscERpYWxvZyI6eyJibG9nIjoiUmVhZCBvdXIgYmxvZyIsImNsaWNrIjoiY2xpY2siLCJjdXJ2ZWRBcnJvdyI6IkN1cnZlZCBhcnJvdyIsImN1cnZlZExpbmUiOiJDdXJ2ZWQgbGluZSIsImRvY3VtZW50YXRpb24iOiJEb2N1bWVudGF0aW9uIiwiZHJhZyI6ImRyYWciLCJlZGl0b3IiOiJFZGl0b3IiLCJnaXRodWIiOiJGb3VuZCBhbiBpc3N1ZT8gU3VibWl0IiwiaG93dG8iOiJGb2xsb3cgb3VyIGd1aWRlcyIsIm9yIjoib3IiLCJwcmV2ZW50QmluZGluZyI6IlByZXZlbnQgYXJyb3cgYmluZGluZyIsInNoYXBlcyI6IlNoYXBlcyIsInNob3J0Y3V0cyI6IktleWJvYXJkIHNob3J0Y3V0cyIsInRleHRGaW5pc2giOiJGaW5pc2ggZWRpdGluZyAodGV4dCkiLCJ0ZXh0TmV3TGluZSI6IkFkZCBuZXcgbGluZSAodGV4dCkiLCJ0aXRsZSI6IkhlbHAiLCJ2aWV3IjoiVmlldyIsInpvb21Ub0ZpdCI6Ilpvb20gdG8gZml0IGFsbCBlbGVtZW50cyIsInpvb21Ub1NlbGVjdGlvbiI6Ilpvb20gdG8gc2VsZWN0aW9uIn0sImVuY3J5cHRlZCI6eyJ0b29sdGlwIjoiWW91ciBkcmF3aW5ncyBhcmUgZW5kLXRvLWVuZCBlbmNyeXB0ZWQgc28gRXhjYWxpZHJhd1wncyBzZXJ2ZXJzIHdpbGwgbmV2ZXIgc2VlIHRoZW0uIiwibGluayI6IkJsb2cgcG9zdCBvbiBlbmQtdG8tZW5kIGVuY3J5cHRpb24gaW4gRXhjYWxpZHJhdyJ9LCJzdGF0cyI6eyJhbmdsZSI6IkFuZ2xlIiwiZWxlbWVudCI6IkVsZW1lbnQiLCJlbGVtZW50cyI6IkVsZW1lbnRzIiwiaGVpZ2h0IjoiSGVpZ2h0Iiwic2NlbmUiOiJTY2VuZSIsInNlbGVjdGVkIjoiU2VsZWN0ZWQiLCJzdG9yYWdlIjoiU3RvcmFnZSIsInRpdGxlIjoiU3RhdHMgZm9yIG5lcmRzIiwidG90YWwiOiJUb3RhbCIsInZlcnNpb24iOiJWZXJzaW9uIiwidmVyc2lvbkNvcHkiOiJDbGljayB0byBjb3B5IiwidmVyc2lvbk5vdEF2YWlsYWJsZSI6IlZlcnNpb24gbm90IGF2YWlsYWJsZSIsIndpZHRoIjoiV2lkdGgifSwidG9hc3QiOnsiY29weVN0eWxlcyI6IkNvcGllZCBzdHlsZXMuIiwiY29weVRvQ2xpcGJvYXJkIjoiQ29waWVkIHRvIGNsaXBib2FyZC4iLCJjb3B5VG9DbGlwYm9hcmRBc1BuZyI6IkNvcGllZCB7e2V4cG9ydFNlbGVjdGlvbn19IHRvIGNsaXBib2FyZCBhcyBQTkdcXG4oe3tleHBvcnRDb2xvclNjaGVtZX19KSIsImZpbGVTYXZlZCI6IkZpbGUgc2F2ZWQuIiwiZmlsZVNhdmVkVG9GaWxlbmFtZSI6IlNhdmVkIHRvIHtmaWxlbmFtZX0iLCJjYW52YXMiOiJjYW52YXMiLCJzZWxlY3Rpb24iOiJzZWxlY3Rpb24ifX0nKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDIwNTE6IGUgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7ImFyLVNBIjo4NCwiYmctQkciOjkyLCJjYS1FUyI6OTksImRlLURFIjoxMDAsImVsLUdSIjo5NywiZW4iOjEwMCwiZXMtRVMiOjk5LCJmYS1JUiI6ODcsImZpLUZJIjo5OSwiZnItRlIiOjEwMCwiaGUtSUwiOjg4LCJoaS1JTiI6OTEsImh1LUhVIjo4MCwiaWQtSUQiOjEwMCwiaXQtSVQiOjEwMCwiamEtSlAiOjk2LCJrYWItS0FCIjo5OSwia28tS1IiOjkxLCJsdi1MViI6MCwibXktTU0iOjc1LCJuYi1OTyI6MTAwLCJubC1OTCI6MTAwLCJubi1OTyI6MTAwLCJvYy1GUiI6MTAwLCJwYS1JTiI6OTMsInBsLVBMIjo5NCwicHQtQlIiOjEwMCwicHQtUFQiOjk5LCJyby1STyI6MTAwLCJydS1SVSI6OTcsInNrLVNLIjoxMDAsInN2LVNFIjoxMDAsInRyLVRSIjoxMDAsInVrLVVBIjoxMDAsInpoLUNOIjoxMDAsInpoLVRXIjo5OX0nKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDc4ODogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIi4vYXItU0EuanNvbiI6IFs3Mjk0LCA1NThdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9iZy1CRy5qc29uIjogWzM4NjAsIDM4NF0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL2NhLUVTLmpzb24iOiBbNzUwLCAzNTFdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9kZS1ERS5qc29uIjogWzc0MzksIDQzXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vZWwtR1IuanNvbiI6IFs5NDIyLCA1MjZdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9lbi5qc29uIjogWzI4MjldLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9lcy1FUy5qc29uIjogWzI4NjMsIDMxN10sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL2ZhLUlSLmpzb24iOiBbMzg1MywgNzEwXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vZmktRkkuanNvbiI6IFs1NDcyLCA0NzJdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9mci1GUi5qc29uIjogWzMyODAsIDM2NF0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL2hlLUlMLmpzb24iOiBbMzk3MCwgMjYyXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vaGktSU4uanNvbiI6IFs1NTk5LCA5MzNdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9odS1IVS5qc29uIjogWzE1MTYsIDY2MV0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL2lkLUlELmpzb24iOiBbNzk5MiwgNDkxXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vaXQtSVQuanNvbiI6IFs1OTYzLCA0NjVdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9qYS1KUC5qc29uIjogWzEzMjMsIDEzN10sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL2thYi1LQUIuanNvbiI6IFs5MjMwLCAxNjRdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9rby1LUi5qc29uIjogWzc1NTIsIDYwXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vbHYtTFYuanNvbiI6IFs0MTMsIDg5OV0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL215LU1NLmpzb24iOiBbMTc3OCwgMjQyXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vbmItTk8uanNvbiI6IFs4NzUxLCAyNDZdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9ubC1OTC5qc29uIjogWzQ2NzUsIDE5Nl0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL25uLU5PLmpzb24iOiBbNzU1OCwgOTIwXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vb2MtRlIuanNvbiI6IFs5OTQ1LCA1NjVdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9wYS1JTi5qc29uIjogWzg2MywgMjgwXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vcGVyY2VudGFnZXMuanNvbiI6IFsyMDUxXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vcGwtUEwuanNvbiI6IFsxMjIsIDg1Ml0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL3B0LUJSLmpzb24iOiBbNzQ0MywgMzgxXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vcHQtUFQuanNvbiI6IFsyNTYwLCAxNDldLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9yby1STy5qc29uIjogWzU2NTQsIDc1Ml0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL3J1LVJVLmpzb24iOiBbNTYwOSwgODY5XSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vc2stU0suanNvbiI6IFs4Njg0LCA0MDFdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi9zdi1TRS5qc29uIjogWzE1NzAsIDY5OF0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL3RyLVRSLmpzb24iOiBbODE0NiwgMjEzXSwKICAgICAgICAgICAgICAgICAgICAgICAgIi4vdWstVUEuanNvbiI6IFs5NzQ2LCA1ODNdLAogICAgICAgICAgICAgICAgICAgICAgICAiLi96aC1DTi5qc29uIjogWzkwNDQsIDMwNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICIuL3poLVRXLmpzb24iOiBbMjkzOSwgNjJdCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi5vKHIsIGUpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIGUgKyAiJyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdC5jb2RlID0gIk1PRFVMRV9OT1RfRk9VTkQiLCB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSByW2VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0LnNsaWNlKDEpLm1hcChuLmUpKS50aGVuKCgoKSA9PiBuLnQobywgMykpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvLmtleXMgPSAoKSA9PiBPYmplY3Qua2V5cyhyKSwgby5pZCA9IDc4OCwgZS5leHBvcnRzID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDk3MTM6IGUgPT4gewogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGVbdF0gPSBuLCBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDcxNTQ6IGUgPT4gewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmV4cG9ydHMgPSB0ID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbikgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sIHIpICYmIChlW3JdID0gbltyXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSB0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgNjQ3OTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oNzMxNik7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCBvLCBhID0gcihlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBpLmxlbmd0aDsgbysrKSBuID0gaVtvXSwgdC5pbmRleE9mKG4pID49IDAgfHwgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIG4pICYmIChhW25dID0gZVtuXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3MzE2OiBlID0+IHsKICAgICAgICAgICAgICAgICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIG8gPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IGEubGVuZ3RoOyByKyspIG4gPSBhW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAob1tuXSA9IGVbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA0Mjk1OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ociksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuKDE2NjcpLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gbi5uKGEpLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gbig3NDY0KSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG4oOTYzOCksCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBvKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGkoKShsLlopLAogICAgICAgICAgICAgICAgICAgICAgICBkID0gaSgpKHMuWik7CiAgICAgICAgICAgICAgICAgICAgYy5wdXNoKFtlLmlkLCAnQGZvbnQtZmFjZXtmb250LWZhbWlseToiVmlyZ2lsIjtzcmM6dXJsKCcgKyB1ICsgJyk7Zm9udC1kaXNwbGF5OnN3YXB9QGZvbnQtZmFjZXtmb250LWZhbWlseToiQ2FzY2FkaWEiO3NyYzp1cmwoJyArIGQgKyAiKTtmb250LWRpc3BsYXk6c3dhcH0iLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBjCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMzcyOTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICI6ZXhwb3J0e3RoZW1lRmlsdGVyOmludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKX0uZXhjYWxpZHJhdyAuQXZhdGFye3dpZHRoOjIuNXJlbTtoZWlnaHQ6Mi41cmVtO2JvcmRlci1yYWRpdXM6MS4yNXJlbTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjhyZW07Zm9udC13ZWlnaHQ6NTAwfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA5NjA5OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIjpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5Db2xsYWJCdXR0b24uaXMtY29sbGFib3JhdGluZ3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1zcGVjaWFsLWFjdGl2ZS1iZy1jb2xvcil9LmV4Y2FsaWRyYXcgLkNvbGxhYkJ1dHRvbi5pcy1jb2xsYWJvcmF0aW5nIC5Ub29sSWNvbl9faWNvbiBzdmcsLmV4Y2FsaWRyYXcgLkNvbGxhYkJ1dHRvbi5pcy1jb2xsYWJvcmF0aW5nIC5Ub29sSWNvbl9fbGFiZWx7Y29sb3I6dmFyKC0taWNvbi1ncmVlbi1maWxsLWNvbG9yKX0uZXhjYWxpZHJhdyAuQ29sbGFiQnV0dG9uLWNvbGxhYm9yYXRvcnN7bWluLXdpZHRoOjFlbTtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTVweDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kLWNvbG9yOiM0MGMwNTc7Y29sb3I6I2ZmZjtmb250LXNpemU6LjdlbTtmb250LWZhbWlseTp2YXIoLS11aS1mb250KX06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAuQ29sbGFiQnV0dG9uLWNvbGxhYm9yYXRvcnN7cmlnaHQ6LTVweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuQ29sbGFiQnV0dG9uLWNvbGxhYm9yYXRvcnN7bGVmdDotNXB4fSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAyMzQ1OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgJzpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXJ7YmFja2dyb3VuZDp2YXIoLS1wb3B1cC1iZy1jb2xvcik7Ym9yZGVyOjAgc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMjUpO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMjUpIDAgMXB4IDRweDtib3JkZXItcmFkaXVzOjRweDtwb3NpdGlvbjphYnNvbHV0ZX06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAuY29sb3ItcGlja2Vye2xlZnQ6LTUuNXB4fTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5jb2xvci1waWNrZXJ7cmlnaHQ6LTUuNXB4fS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItY29udHJvbC1jb250YWluZXJ7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczphdXRvIDFmcjthbGlnbi1pdGVtczpjZW50ZXJ9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci10cmlhbmdsZXt3aWR0aDowO2hlaWdodDowO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MCA5cHggMTBweDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdmFyKC0tcG9wdXAtYmctY29sb3IpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMTBweH06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXRyaWFuZ2xle2xlZnQ6MTJweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXRyaWFuZ2xle3JpZ2h0OjEycHh9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci10cmlhbmdsZS1zaGFkb3d7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHJnYmEoMCwwLDAsLjEpO3RvcDotMTFweH0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWNvbnRlbnR7cGFkZGluZzouNXJlbTtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCg1LCBhdXRvKTtncmlkLWdhcDouNXJlbTtib3JkZXItcmFkaXVzOjRweH0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWNvbnRlbnQ6Zm9jdXN7b3V0bGluZTpub25lO2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcil9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci1jb250ZW50IC5jb2xvci1pbnB1dC1jb250YWluZXJ7Z3JpZC1jb2x1bW46MS9zcGFuIDV9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci1zd2F0Y2h7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjEuODc1cmVtO3dpZHRoOjEuODc1cmVtO2N1cnNvcjpwb2ludGVyO2JvcmRlci1yYWRpdXM6NHB4O21hcmdpbjowO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZC1jb2xvcjpjdXJyZW50Q29sb3IgIWltcG9ydGFudDtmaWx0ZXI6dmFyKC0tdGhlbWUtZmlsdGVyKX0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXN3YXRjaDpmb2N1c3tib3gtc2hhZG93OjAgMCA0cHggMXB4IGN1cnJlbnRDb2xvcjtib3JkZXItY29sb3I6dmFyKC0tc2VsZWN0LWhpZ2hsaWdodC1jb2xvcil9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci10cmFuc3BhcmVudHtib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjEpIDAgMCAwIDFweCBpbnNldDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MH0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXRyYW5zcGFyZW50LC5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItbGFiZWwtc3dhdGNoe2JhY2tncm91bmQ6dXJsKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBTVVsRVFWUTRUMk5rWUdBUVljQVAzdUNUWmh3MWdHR1loQUdCWklBL25ZRENnQkRBbTlCR0RXQUFKeVJDZ0xhQkNBQWdYd2l4ekFTMHBnQUFBQUJKUlU1RXJrSmdnZz09IikgbGVmdCBjZW50ZXJ9LmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci1oYXNoe2JhY2tncm91bmQ6dmFyKC0taW5wdXQtYm9yZGVyLWNvbG9yKTtoZWlnaHQ6MS44NzVyZW07d2lkdGg6MS44NzVyZW07Y29sb3I6dmFyKC0taW5wdXQtbGFiZWwtY29sb3IpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZX06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWhhc2h7Ym9yZGVyLXJhZGl1czo0cHggMCAwIDRweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWhhc2h7Ym9yZGVyLXJhZGl1czowIDRweCA0cHggMH0uZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2h7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yKX0uZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2g6OmJlZm9yZSwuZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2g6OmFmdGVye2NvbnRlbnQ6IiI7d2lkdGg6MXB4O2hlaWdodDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowfS5leGNhbGlkcmF3IC5jb2xvci1pbnB1dC1jb250YWluZXI6Zm9jdXMtd2l0aGluIC5jb2xvci1waWNrZXItaGFzaDo6YmVmb3Jle2JhY2tncm91bmQ6dmFyKC0taW5wdXQtYm9yZGVyLWNvbG9yKX06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2g6OmJlZm9yZXtyaWdodDotMXB4fTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5jb2xvci1pbnB1dC1jb250YWluZXI6Zm9jdXMtd2l0aGluIC5jb2xvci1waWNrZXItaGFzaDo6YmVmb3Jle2xlZnQ6LTFweH0uZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2g6OmFmdGVye2JhY2tncm91bmQ6dmFyKC0taW5wdXQtYmctY29sb3IpfTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5jb2xvci1pbnB1dC1jb250YWluZXI6Zm9jdXMtd2l0aGluIC5jb2xvci1waWNrZXItaGFzaDo6YWZ0ZXJ7cmlnaHQ6LTJweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVyOmZvY3VzLXdpdGhpbiAuY29sb3ItcGlja2VyLWhhc2g6OmFmdGVye2xlZnQ6LTJweH0uZXhjYWxpZHJhdyAuY29sb3ItaW5wdXQtY29udGFpbmVye2Rpc3BsYXk6ZmxleH0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWlucHV0e3dpZHRoOjEyY2g7bWFyZ2luOjA7Zm9udC1zaXplOjFyZW07YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1pbnB1dC1iZy1jb2xvcik7Y29sb3I6dmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yKTtib3JkZXI6MDtvdXRsaW5lOm5vbmU7aGVpZ2h0OjEuNzVlbTtib3gtc2hhZG93OnZhcigtLWlucHV0LWJvcmRlci1jb2xvcikgMCAwIDAgMXB4IGluc2V0O2Zsb2F0OmxlZnQ7cGFkZGluZzoxcHg7cGFkZGluZy1pbmxpbmUtc3RhcnQ6LjVlbTstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmV9OnJvb3RbZGlyPWx0cl0gLmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci1pbnB1dHtib3JkZXItcmFkaXVzOjAgNHB4IDRweCAwfTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItaW5wdXR7Ym9yZGVyLXJhZGl1czo0cHggMCAwIDRweH0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWxhYmVsLXN3YXRjaHtoZWlnaHQ6MS44NzVyZW07d2lkdGg6MS44NzVyZW07bWFyZ2luLWlubGluZS1lbmQ6LjI1cmVtO2JvcmRlcjoxcHggc29saWQgI2RlZTJlNjtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCAhaW1wb3J0YW50O2ZpbHRlcjp2YXIoLS10aGVtZS1maWx0ZXIpfS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItbGFiZWwtc3dhdGNoOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDp2YXIoLS1zd2F0Y2gtY29sb3IpfS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXIta2V5YmluZGluZ3twb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MnB4O2ZvbnQtc2l6ZTouN2VtfTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5jb2xvci1waWNrZXIta2V5YmluZGluZ3tyaWdodDoycHh9OnJvb3RbZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLmNvbG9yLXBpY2tlci1rZXliaW5kaW5ne2xlZnQ6MnB4fS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLWtleWJpbmRpbmd7ZGlzcGxheTpub25lfS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItdHlwZS1jYW52YXNCYWNrZ3JvdW5kIC5jb2xvci1waWNrZXIta2V5YmluZGluZ3tjb2xvcjojYWFhfS5leGNhbGlkcmF3IC5jb2xvci1waWNrZXItdHlwZS1lbGVtZW50QmFja2dyb3VuZCAuY29sb3ItcGlja2VyLWtleWJpbmRpbmd7Y29sb3I6I2ZmZn0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXN3YXRjaFthcmlhLWxhYmVsPXRyYW5zcGFyZW50XSAuY29sb3ItcGlja2VyLWtleWJpbmRpbmd7Y29sb3I6I2FhYX0uZXhjYWxpZHJhdyAuY29sb3ItcGlja2VyLXR5cGUtZWxlbWVudFN0cm9rZSAuY29sb3ItcGlja2VyLWtleWJpbmRpbmd7Y29sb3I6I2Q0ZDRkNH0uZXhjYWxpZHJhdy50aGVtZS0tZGFyayAuY29sb3ItcGlja2VyLXR5cGUtZWxlbWVudEJhY2tncm91bmQgLmNvbG9yLXBpY2tlci1rZXliaW5kaW5ne2NvbG9yOiMwMDB9LmV4Y2FsaWRyYXcudGhlbWUtLWRhcmsgLmNvbG9yLXBpY2tlci1zd2F0Y2hbYXJpYS1sYWJlbD10cmFuc3BhcmVudF0gLmNvbG9yLXBpY2tlci1rZXliaW5kaW5ne2NvbG9yOiMwMDB9JywgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDY1Nzg6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAnOmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9LmV4Y2FsaWRyYXcgLmNvbnRleHQtbWVudXtwb3NpdGlvbjpyZWxhdGl2ZTtib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMik7cGFkZGluZzowO2xpc3Qtc3R5bGU6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTttYXJnaW46LTAuMjVyZW0gMCAwIC4xMjVyZW07cGFkZGluZzouNXJlbSAwO2JhY2tncm91bmQtY29sb3I6dmFyKC0tcG9wdXAtc2Vjb25kYXJ5LWJnLWNvbG9yKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1ncmF5LTMpO2N1cnNvcjpkZWZhdWx0fS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUgYnV0dG9ue2NvbG9yOnZhcigtLXBvcHVwLXRleHQtY29sb3IpfS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUtb3B0aW9ue3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7bWluLXdpZHRoOjkuNXJlbTttYXJnaW46MDtwYWRkaW5nOi4yNXJlbSAxcmVtIC4yNXJlbSAxLjI1cmVtO3RleHQtYWxpZ246c3RhcnQ7Ym9yZGVyLXJhZGl1czowO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7d2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIC4yZnI7YWxpZ24taXRlbXM6Y2VudGVyfS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUtb3B0aW9uLmNoZWNrbWFyazo6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NnB4O21hcmdpbi1ib3R0b206MXB4O2NvbnRlbnQ6IuKckyJ9LmV4Y2FsaWRyYXcgLmNvbnRleHQtbWVudS1vcHRpb24uZGFuZ2Vyb3VzIC5jb250ZXh0LW1lbnUtb3B0aW9uX19sYWJlbHtjb2xvcjojZjAzZTNlfS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUtb3B0aW9uIC5jb250ZXh0LW1lbnUtb3B0aW9uX19sYWJlbHtqdXN0aWZ5LXNlbGY6c3RhcnQ7bWFyZ2luLWlubGluZS1lbmQ6MjBweH0uZXhjYWxpZHJhdyAuY29udGV4dC1tZW51LW9wdGlvbiAuY29udGV4dC1tZW51LW9wdGlvbl9fc2hvcnRjdXR7anVzdGlmeS1zZWxmOmVuZDtvcGFjaXR5Oi42O2ZvbnQtZmFtaWx5OmluaGVyaXQ7Zm9udC1zaXplOi43cmVtfS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUtb3B0aW9uOmhvdmVye2NvbG9yOnZhcigtLXBvcHVwLWJnLWNvbG9yKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXNlbGVjdC1oaWdobGlnaHQtY29sb3IpfS5leGNhbGlkcmF3IC5jb250ZXh0LW1lbnUtb3B0aW9uOmhvdmVyLmRhbmdlcm91c3tiYWNrZ3JvdW5kLWNvbG9yOiNmYTUyNTJ9LmV4Y2FsaWRyYXcgLmNvbnRleHQtbWVudS1vcHRpb246aG92ZXIuZGFuZ2Vyb3VzIC5jb250ZXh0LW1lbnUtb3B0aW9uX19sYWJlbHtjb2xvcjp2YXIoLS1wb3B1cC1iZy1jb2xvcil9LmV4Y2FsaWRyYXcgLmNvbnRleHQtbWVudS1vcHRpb246Zm9jdXN7ei1pbmRleDoxfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuY29udGV4dC1tZW51LW9wdGlvbntkaXNwbGF5OmJsb2NrfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuY29udGV4dC1tZW51LW9wdGlvbiAuY29udGV4dC1tZW51LW9wdGlvbl9fbGFiZWx7bWFyZ2luLWlubGluZS1lbmQ6MH0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLmNvbnRleHQtbWVudS1vcHRpb24gLmNvbnRleHQtbWVudS1vcHRpb25fX3Nob3J0Y3V0e2Rpc3BsYXk6bm9uZX0uZXhjYWxpZHJhdyAuY29udGV4dC1tZW51LW9wdGlvbi1zZXBhcmF0b3J7Ym9yZGVyOm5vbmU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2FkYjViZH0nLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgOTQ4MjogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICI6ZXhwb3J0e3RoZW1lRmlsdGVyOmludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKX0uZXhjYWxpZHJhdyAuRGlhbG9ney13ZWJraXQtdXNlci1zZWxlY3Q6dGV4dDt1c2VyLXNlbGVjdDp0ZXh0O2N1cnNvcjphdXRvfS5leGNhbGlkcmF3IC5EaWFsb2dfX3RpdGxle2Rpc3BsYXk6Z3JpZDthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLXRvcDowO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgY2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogNyk7Z3JpZC1nYXA6dmFyKC0tbWV0cmljKTtwYWRkaW5nOmNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIDIpO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtdmFyaWFudDpzbWFsbC1jYXBzO2ZvbnQtc2l6ZToxLjJlbX0uZXhjYWxpZHJhdyAuRGlhbG9nX190aXRsZUNvbnRlbnR7ZmxleDoxfS5leGNhbGlkcmF3IC5EaWFsb2cgLk1vZGFsX19jbG9zZXtjb2xvcjp2YXIoLS1pY29uLWZpbGwtY29sb3IpO21hcmdpbjowfS5leGNhbGlkcmF3IC5EaWFsb2dfX2NvbnRlbnR7cGFkZGluZzowIDE2cHggMTZweH0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkRpYWxvZ3stLW1ldHJpYzogY2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogNCk7LS1pbnNldC1sZWZ0OiBtYXgodmFyKC0tbWV0cmljKSwgdmFyKC0tc2FsKSk7LS1pbnNldC1yaWdodDogbWF4KHZhcigtLW1ldHJpYyksIHZhcigtLXNhcikpfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuRGlhbG9nX190aXRsZXtncmlkLXRlbXBsYXRlLWNvbHVtbnM6Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogNykgMWZyIGNhbGMoIHZhcigtLXNwYWNlLWZhY3RvcikgKiA3ICk7cG9zaXRpb246LXdlYmtpdC1zdGlja3k7cG9zaXRpb246c3RpY2t5O3RvcDowO3BhZGRpbmc6Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogMik7YmFja2dyb3VuZDp2YXIoLS1pc2xhbmQtYmctY29sb3IpO2ZvbnQtc2l6ZToxLjI1ZW07Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1ncmF5LTIpO3otaW5kZXg6MX0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkRpYWxvZ19fdGl0bGVDb250ZW50e3RleHQtYWxpZ246Y2VudGVyfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuRGlhbG9nIC5Jc2xhbmR7d2lkdGg6MTAwdnc7aGVpZ2h0OjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93LXk6YXV0bztwYWRkaW5nLWxlZnQ6bWF4KGNhbGModmFyKC0tcGFkZGluZykgKiB2YXIoLS1zcGFjZS1mYWN0b3IpKSwgdmFyKC0tc2FsKSk7cGFkZGluZy1yaWdodDptYXgoY2FsYyh2YXIoLS1wYWRkaW5nKSAqIHZhcigtLXNwYWNlLWZhY3RvcikpLCB2YXIoLS1zYXIpKTtwYWRkaW5nLWJvdHRvbTptYXgoY2FsYyh2YXIoLS1wYWRkaW5nKSAqIHZhcigtLXNwYWNlLWZhY3RvcikpLCB2YXIoLS1zYWIpKX0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkRpYWxvZyAuTW9kYWxfX2Nsb3Nle29yZGVyOi0xfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3OTU1OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgJzpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX3ByZXZpZXd7LS1wcmV2aWV3LXBhZGRpbmc6IGNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIDQpO2JhY2tncm91bmQ6dXJsKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBTVVsRVFWUTRUMk5rWUdBUVljQVAzdUNUWmh3MWdHR1loQUdCWklBL25ZRENnQkRBbTlCR0RXQUFKeVJDZ0xhQkNBQWdYd2l4ekFTMHBnQUFBQUJKUlU1RXJrSmdnZz09IikgbGVmdCBjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzp2YXIoLS1wcmV2aWV3LXBhZGRpbmcpO21hcmdpbi1ib3R0b206Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogMyl9LmV4Y2FsaWRyYXcgLkV4cG9ydERpYWxvZ19fcHJldmlldyBjYW52YXN7bWF4LXdpZHRoOmNhbGMoMTAwJSAtIHZhcigtLXByZXZpZXctcGFkZGluZykgKiAyKTttYXgtaGVpZ2h0OjI1cmVtfS5leGNhbGlkcmF3LnRoZW1lLS1kYXJrIC5FeHBvcnREaWFsb2dfX3ByZXZpZXcgY2FudmFze2ZpbHRlcjpub25lfS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX2FjdGlvbnN7d2lkdGg6MTAwJTtkaXNwbGF5OmZsZXg7Z3JpZC1nYXA6Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogMik7YWxpZ24taXRlbXM6dG9wO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX25hbWV7Z3JpZC1jb2x1bW46cHJvamVjdC1uYW1lO21hcmdpbjphdXRvO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9LmV4Y2FsaWRyYXcgLkV4cG9ydERpYWxvZ19fbmFtZSAuVGV4dElucHV0e2hlaWdodDpjYWxjKDFyZW0gLSAzcHgpO3dpZHRoOjIwMHB4O292ZXJmbG93OmhpZGRlbjt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tbGVmdDo4cHg7dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uZXhjYWxpZHJhdyAuRXhwb3J0RGlhbG9nX19uYW1lIC5UZXh0SW5wdXQtLXJlYWRvbmx5e2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTt3aWR0aDphdXRvO21heC13aWR0aDoyMDBweDtwYWRkaW5nLWxlZnQ6MnB4fS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX25hbWUgLlRleHRJbnB1dC0tcmVhZG9ubHk6aG92ZXJ7YmFja2dyb3VuZDpub25lfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuRXhwb3J0RGlhbG9ne2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX2FjdGlvbnN7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcn0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkV4cG9ydERpYWxvZ19fYWN0aW9ucz4qe21hcmdpbi1ib3R0b206Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogMyl9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX3ByZXZpZXcgY2FudmFze21heC1oZWlnaHQ6MzB2aH0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkV4cG9ydERpYWxvZ19fZGlhbG9nLC5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuRXhwb3J0RGlhbG9nX19kaWFsb2cgLklzbGFuZHtoZWlnaHQ6MTAwJTtib3gtc2l6aW5nOmJvcmRlci1ib3h9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5FeHBvcnREaWFsb2dfX2RpYWxvZyAuSXNsYW5ke292ZXJmbG93LXk6YXV0b30nLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMzE5NTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICIuZXhjYWxpZHJhdyAuRml4ZWRTaWRlQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3BvaW50ZXItZXZlbnRzOm5vbmV9LmV4Y2FsaWRyYXcgLkZpeGVkU2lkZUNvbnRhaW5lcj4qe3BvaW50ZXItZXZlbnRzOmFsbH0uZXhjYWxpZHJhdyAuRml4ZWRTaWRlQ29udGFpbmVyX3NpZGVfdG9we2xlZnQ6dmFyKC0tc3BhY2UtZmFjdG9yKTt0b3A6dmFyKC0tc3BhY2UtZmFjdG9yKTtyaWdodDp2YXIoLS1zcGFjZS1mYWN0b3IpO3otaW5kZXg6Mn0uZXhjYWxpZHJhdyAuRml4ZWRTaWRlQ29udGFpbmVyX3NpZGVfdG9wLnplbi1tb2Rle3JpZ2h0OjQycHh9IiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDI5Nzg6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAiOmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9LmV4Y2FsaWRyYXcgLkhlbHBEaWFsb2cgaDN7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYnV0dG9uLWdyYXktMik7cGFkZGluZy1ib3R0b206NHB4fS5leGNhbGlkcmF3IC5IZWxwRGlhbG9nLS1pc2xhbmR7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0yKTttYXJnaW4tYm90dG9tOjE2cHh9LmV4Y2FsaWRyYXcgLkhlbHBEaWFsb2ctLWlzbGFuZC10aXRsZXttYXJnaW46MDtwYWRkaW5nOjRweDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTEpO3RleHQtYWxpZ246Y2VudGVyfS5leGNhbGlkcmF3IC5IZWxwRGlhbG9nLS1zaG9ydGN1dHtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyAuSGVscERpYWxvZy0ta2V5e3dvcmQtYnJlYWs6a2VlcC1hbGw7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0yKTtwYWRkaW5nOjJweCA4cHg7bWFyZ2luOmF1dG8gNHB4O2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMSk7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOi44ZW07bWluLWhlaWdodDoyNnB4O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtZmFtaWx5OmluaGVyaXR9LmV4Y2FsaWRyYXcgLkhlbHBEaWFsb2ctLWhlYWRlcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpzcGFjZS1ldmVubHk7bWFyZ2luLWJvdHRvbTozMnB4O3BhZGRpbmctYm90dG9tOjE2cHh9LmV4Y2FsaWRyYXcgLkhlbHBEaWFsb2ctLWJ0bntib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmstY29sb3IpO3BhZGRpbmc6OHB4IDMycHg7Ym9yZGVyLXJhZGl1czo0cHh9LmV4Y2FsaWRyYXcgLkhlbHBEaWFsb2ctLWJ0bjpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZX0iLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMTU4NzogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICI6ZXhwb3J0e3RoZW1lRmlsdGVyOmludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKX0uZXhjYWxpZHJhdyAuSGludFZpZXdlcntwb2ludGVyLWV2ZW50czpub25lO2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtsZWZ0OjA7dG9wOjEwMCU7bWF4LXdpZHRoOjEwMCU7d2lkdGg6MTAwJTttYXJnaW4tdG9wOjZweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojODY4ZTk2O2ZvbnQtc2l6ZTouOHJlbX0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLkhpbnRWaWV3ZXJ7cG9zaXRpb246c3RhdGljO3BhZGRpbmctcmlnaHQ6MmVtfS5leGNhbGlkcmF3IC5IaW50Vmlld2VyPnNwYW57cGFkZGluZzouMnJlbSAuNHJlbTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLW92ZXJsYXktYmctY29sb3IpO2JvcmRlci1yYWRpdXM6NHB4fSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA5NDc4OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgJzpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5waWNrZXItY29udGFpbmVye2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXJnaW4tcmlnaHQ6LjI1cmVtfS5leGNhbGlkcmF3IC5waWNrZXJ7YmFja2dyb3VuZDp2YXIoLS1wb3B1cC1iZy1jb2xvcik7Ym9yZGVyOjAgc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMjUpO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMjUpIDAgMXB4IDRweDtib3JkZXItcmFkaXVzOjRweDtwb3NpdGlvbjphYnNvbHV0ZX0uZXhjYWxpZHJhdyAucGlja2VyLWNvbnRhaW5lciBidXR0b24sLmV4Y2FsaWRyYXcgLnBpY2tlciBidXR0b257cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5leGNhbGlkcmF3IC5waWNrZXItY29udGFpbmVyIGJ1dHRvbjpmb2N1cywuZXhjYWxpZHJhdyAucGlja2VyIGJ1dHRvbjpmb2N1c3tvdXRsaW5lOnRyYW5zcGFyZW50O2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMil9LmV4Y2FsaWRyYXcgLnBpY2tlci1jb250YWluZXIgYnV0dG9uOmZvY3VzIHN2ZywuZXhjYWxpZHJhdyAucGlja2VyIGJ1dHRvbjpmb2N1cyBzdmd7b3BhY2l0eToxfS5leGNhbGlkcmF3IC5waWNrZXItY29udGFpbmVyIGJ1dHRvbjpob3ZlciwuZXhjYWxpZHJhdyAucGlja2VyIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTIpfS5leGNhbGlkcmF3IC5waWNrZXItY29udGFpbmVyIGJ1dHRvbjphY3RpdmUsLmV4Y2FsaWRyYXcgLnBpY2tlciBidXR0b246YWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMyl9LmV4Y2FsaWRyYXcgLnBpY2tlci1jb250YWluZXIgYnV0dG9uOmRpc2FibGVkLC5leGNhbGlkcmF3IC5waWNrZXIgYnV0dG9uOmRpc2FibGVke2N1cnNvcjpub3QtYWxsb3dlZH0uZXhjYWxpZHJhdyAucGlja2VyLWNvbnRhaW5lciBidXR0b24gc3ZnLC5leGNhbGlkcmF3IC5waWNrZXIgYnV0dG9uIHN2Z3ttYXJnaW46MDt3aWR0aDozNnB4O2hlaWdodDoxOHB4O29wYWNpdHk6LjY7cG9pbnRlci1ldmVudHM6bm9uZX0uZXhjYWxpZHJhdyAucGlja2VyIGJ1dHRvbntwYWRkaW5nOi4yNXJlbSAuMjhyZW0gLjM1cmVtIC4yNXJlbX0uZXhjYWxpZHJhdyAucGlja2VyLXRyaWFuZ2xle3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246cmVsYXRpdmU7dG9wOi0xMHB4O3otaW5kZXg6MTB9OnJvb3RbZGlyPWx0cl0gLmV4Y2FsaWRyYXcgLnBpY2tlci10cmlhbmdsZXtsZWZ0OjEycHh9OnJvb3RbZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLnBpY2tlci10cmlhbmdsZXtyaWdodDoxMnB4fS5leGNhbGlkcmF3IC5waWNrZXItdHJpYW5nbGU6YmVmb3Jle2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDowIDlweCAxMHB4O2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudCB0cmFuc3BhcmVudCByZ2JhKDAsMCwwLC4xKTt0b3A6LTFweH0uZXhjYWxpZHJhdyAucGlja2VyLXRyaWFuZ2xlOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDowIDlweCAxMHB4O2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB2YXIoLS1wb3B1cC1iZy1jb2xvcil9LmV4Y2FsaWRyYXcgLnBpY2tlci1jb250ZW50e3BhZGRpbmc6LjVyZW07ZGlzcGxheTpncmlkO2dyaWQtYXV0by1mbG93OmNvbHVtbjtncmlkLWdhcDouNXJlbTtib3JkZXItcmFkaXVzOjRweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAucGlja2VyLWNvbnRlbnR7cGFkZGluZzouNHJlbX0uZXhjYWxpZHJhdyAucGlja2VyLWtleWJpbmRpbmd7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjJweDtmb250LXNpemU6LjdlbTtjb2xvcjp2YXIoLS1rZXliaW5kaW5nLWNvbG9yKX06cm9vdFtkaXI9bHRyXSAuZXhjYWxpZHJhdyAucGlja2VyLWtleWJpbmRpbmd7cmlnaHQ6MnB4fTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5waWNrZXIta2V5YmluZGluZ3tsZWZ0OjJweH0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLnBpY2tlci1rZXliaW5kaW5ne2Rpc3BsYXk6bm9uZX0uZXhjYWxpZHJhdyAucGlja2VyLXR5cGUtY2FudmFzQmFja2dyb3VuZCAucGlja2VyLWtleWJpbmRpbmd7Y29sb3I6I2FhYX0uZXhjYWxpZHJhdyAucGlja2VyLXR5cGUtZWxlbWVudEJhY2tncm91bmQgLnBpY2tlci1rZXliaW5kaW5ne2NvbG9yOiNmZmZ9LmV4Y2FsaWRyYXcgLnBpY2tlci1zd2F0Y2hbYXJpYS1sYWJlbD10cmFuc3BhcmVudF0gLnBpY2tlci1rZXliaW5kaW5ne2NvbG9yOiNhYWF9LmV4Y2FsaWRyYXcgLnBpY2tlci10eXBlLWVsZW1lbnRTdHJva2UgLnBpY2tlci1rZXliaW5kaW5ne2NvbG9yOiNkNGQ0ZDR9LmV4Y2FsaWRyYXcudGhlbWUtLWRhcmsgLnBpY2tlci10eXBlLWVsZW1lbnRCYWNrZ3JvdW5kIC5waWNrZXIta2V5YmluZGluZ3tjb2xvcjojMDAwfS5leGNhbGlkcmF3LnRoZW1lLS1kYXJrIC5waWNrZXItc3dhdGNoW2FyaWEtbGFiZWw9dHJhbnNwYXJlbnRdIC5waWNrZXIta2V5YmluZGluZ3tjb2xvcjojMDAwfScsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3MzY5OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIi5leGNhbGlkcmF3IC5Jc2xhbmR7LS1wYWRkaW5nOiAwO2JhY2tncm91bmQtY29sb3I6dmFyKC0taXNsYW5kLWJnLWNvbG9yKTtib3gtc2hhZG93OnZhcigtLXNoYWRvdy1pc2xhbmQpO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6Y2FsYyh2YXIoLS1wYWRkaW5nKSAqIHZhcigtLXNwYWNlLWZhY3RvcikpO3Bvc2l0aW9uOnJlbGF0aXZlO3RyYW5zaXRpb246Ym94LXNoYWRvdyAuNXMgZWFzZS1pbi1vdXR9LmV4Y2FsaWRyYXcgLklzbGFuZC56ZW4tbW9kZXtib3gtc2hhZG93Om5vbmV9IiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDE0MzQ6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAiLmV4Y2FsaWRyYXcgLmxheWVyLXVpX19saWJyYXJ5e21hcmdpbjphdXRvO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX2xpYnJhcnkgLmxheWVyLXVpX19saWJyYXJ5LWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOjEwMCU7bWFyZ2luOjJweCAwfS5leGNhbGlkcmF3IC5sYXllci11aV9fbGlicmFyeSAubGF5ZXItdWlfX2xpYnJhcnktaGVhZGVyIGJ1dHRvbnttYXJnaW46MCAycHh9LmV4Y2FsaWRyYXcgLmxheWVyLXVpX19saWJyYXJ5IC5sYXllci11aV9fbGlicmFyeS1oZWFkZXIgYXttYXJnaW4taW5saW5lLXN0YXJ0OmF1dG87cGFkZGluZy1pbmxpbmUtZW5kOjE4cHg7d2hpdGUtc3BhY2U6bm93cmFwfS5leGNhbGlkcmF3IC5sYXllci11aV9fbGlicmFyeS1tZXNzYWdle3BhZGRpbmc6MTBweCAyMHB4O21heC13aWR0aDoyMDBweH0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX2xpYnJhcnktaXRlbXN7bWF4LWhlaWdodDo1MHZoO292ZXJmbG93OmF1dG99LmV4Y2FsaWRyYXcgLmxheWVyLXVpX193cmFwcGVye3otaW5kZXg6dmFyKC0tekluZGV4LWxheWVyVUkpfS5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlcl9fdG9wLXJpZ2h0e2Rpc3BsYXk6ZmxleH0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlcnt3aWR0aDoxMDAlfS5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlcl9fZm9vdGVyLXJpZ2h0e3otaW5kZXg6MTAwO2Rpc3BsYXk6ZmxleH0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXIgLnplbi1tb2RlLXRyYW5zaXRpb257dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjVzIGVhc2UtaW4tb3V0fTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlciAuemVuLW1vZGUtdHJhbnNpdGlvbi50cmFuc2l0aW9uLWxlZnR7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtOTk5cHgsIDApfTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlciAuemVuLW1vZGUtdHJhbnNpdGlvbi50cmFuc2l0aW9uLXJpZ2h0e3RyYW5zZm9ybTp0cmFuc2xhdGUoOTk5cHgsIDApfTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlciAuemVuLW1vZGUtdHJhbnNpdGlvbi50cmFuc2l0aW9uLWxlZnR7dHJhbnNmb3JtOnRyYW5zbGF0ZSg5OTlweCwgMCl9OnJvb3RbZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLmxheWVyLXVpX193cmFwcGVyIC56ZW4tbW9kZS10cmFuc2l0aW9uLnRyYW5zaXRpb24tcmlnaHR7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtOTk5cHgsIDApfTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlciAuemVuLW1vZGUtdHJhbnNpdGlvbi5sYXllci11aV9fd3JhcHBlcl9fZm9vdGVyLWxlZnQtLXRyYW5zaXRpb24tbGVmdHt0cmFuc2Zvcm06dHJhbnNsYXRlKC05MnB4LCAwKX06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXIgLnplbi1tb2RlLXRyYW5zaXRpb24ubGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlci1sZWZ0LS10cmFuc2l0aW9uLWxlZnR7dHJhbnNmb3JtOnRyYW5zbGF0ZSg5MnB4LCAwKX0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXIgLnplbi1tb2RlLXRyYW5zaXRpb24ubGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlci1sZWZ0LS10cmFuc2l0aW9uLWJvdHRvbXt0cmFuc2Zvcm06dHJhbnNsYXRlKDAsIDkycHgpfS5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlciAuZGlzYWJsZS16ZW4tbW9kZXtoZWlnaHQ6MzBweDtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MTBweDtmb250LXNpemU6MTBweDtwYWRkaW5nOjEwcHg7Zm9udC13ZWlnaHQ6NTAwO29wYWNpdHk6MDt2aXNpYmlsaXR5OmhpZGRlbjt0cmFuc2l0aW9uOnZpc2liaWxpdHkgMHMgbGluZWFyIDBzLG9wYWNpdHkgLjVzfVtkaXI9bHRyXSAuZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXIgLmRpc2FibGUtemVuLW1vZGV7cmlnaHQ6MTVweH1bZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLmxheWVyLXVpX193cmFwcGVyIC5kaXNhYmxlLXplbi1tb2Rle2xlZnQ6MTVweH0uZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXIgLmRpc2FibGUtemVuLW1vZGUtLXZpc2libGV7b3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTt0cmFuc2l0aW9uOnZpc2liaWxpdHkgMHMgbGluZWFyIDMwMG1zLG9wYWNpdHkgLjVzO3RyYW5zaXRpb24tZGVsYXk6LjhzfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA1NjQ0OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIi5leGNhbGlkcmF3IC5saWJyYXJ5LXVuaXR7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYnV0dG9uLWdyYXktMik7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6NjNweDtoZWlnaHQ6NjNweH0uZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19kcmFnZ2Vye2Rpc3BsYXk6ZmxleDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlfS5leGNhbGlkcmF3IC5saWJyYXJ5LXVuaXRfX2RyYWdnZXI+c3Zne2ZpbHRlcjp2YXIoLS10aGVtZS1maWx0ZXIpO2ZsZXgtZ3JvdzoxO21heC1oZWlnaHQ6MTAwJTttYXgtd2lkdGg6MTAwJX0uZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19yZW1vdmVGcm9tTGlicmFyeSwuZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19yZW1vdmVGcm9tTGlicmFyeTpob3ZlciwuZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19yZW1vdmVGcm9tTGlicmFyeTphY3RpdmV7YWxpZ24taXRlbXM6Y2VudGVyO2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjb2xvcjp2YXIoLS1pY29uLWZpbGwtY29sb3IpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo1cHg7dG9wOjVweH0uZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19yZW1vdmVGcm9tTGlicmFyeT5zdmd7aGVpZ2h0OjE2cHg7d2lkdGg6MTZweH0uZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19wdWxzZXt0cmFuc2Zvcm06c2NhbGUoMSk7YW5pbWF0aW9uOmxpYnJhcnktdW5pdF9fcHVsc2UtYW5pbWF0aW9uIDFzIGVhc2UtaW4gaW5maW5pdGV9LmV4Y2FsaWRyYXcgLmxpYnJhcnktdW5pdF9fYWRkZXJ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo1MCU7dG9wOjUwJTt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O21hcmdpbi1sZWZ0Oi0xMHB4O21hcmdpbi10b3A6LTEwcHg7cG9pbnRlci1ldmVudHM6bm9uZX0uZXhjYWxpZHJhdyAubGlicmFyeS11bml0X19hY3RpdmV7Y3Vyc29yOnBvaW50ZXJ9QGtleWZyYW1lcyBsaWJyYXJ5LXVuaXRfX3B1bHNlLWFuaW1hdGlvbnswJXt0cmFuc2Zvcm06c2NhbGUoMC45NSl9NTAle3RyYW5zZm9ybTpzY2FsZSgxKX0xMDAle3RyYW5zZm9ybTpzY2FsZSgwLjk1KX19IiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDY4NDM6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAiOmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9LmV4Y2FsaWRyYXcuZXhjYWxpZHJhdy1tb2RhbC1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMH0uZXhjYWxpZHJhdyAuTW9kYWx7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO292ZXJmbG93OmF1dG87cGFkZGluZzpjYWxjKHZhcigtLXNwYWNlLWZhY3RvcikgKiAxMCl9LmV4Y2FsaWRyYXcgLk1vZGFsX19iYWNrZ3JvdW5ke3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO3otaW5kZXg6MTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjcpfS5leGNhbGlkcmF3IC5Nb2RhbF9fY29udGVudHtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjI7d2lkdGg6MTAwJTttYXgtd2lkdGg6dmFyKC0tbWF4LXdpZHRoKTttYXgtaGVpZ2h0OjEwMCU7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpO2FuaW1hdGlvbjpNb2RhbF9fY29udGVudF9mYWRlLWluIC4xcyBlYXNlLW91dCAuMDVzIGZvcndhcmRzO3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kOnZhcigtLWlzbGFuZC1iZy1jb2xvcik7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1kaWFsb2ctYm9yZGVyLWNvbG9yKTtib3gtc2hhZG93OjAgMnB4IDEwcHggcmdiYSgwLDAsMCwuMjUpO2JvcmRlci1yYWRpdXM6NnB4O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uZXhjYWxpZHJhdyAuTW9kYWxfX2NvbnRlbnQ6Zm9jdXN7b3V0bGluZTpub25lfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuTW9kYWxfX2NvbnRlbnR7bWF4LXdpZHRoOjEwMCU7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czowfUBrZXlmcmFtZXMgTW9kYWxfX2NvbnRlbnRfZmFkZS1pbntmcm9te29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KX10b3tvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9fS5leGNhbGlkcmF3IC5Nb2RhbF9fY2xvc2V7d2lkdGg6Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogNyk7aGVpZ2h0OmNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIDcpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uZXhjYWxpZHJhdyAuTW9kYWxfX2Nsb3NlIHN2Z3toZWlnaHQ6Y2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogNSl9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5Nb2RhbHtwYWRkaW5nOjB9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5Nb2RhbF9fY29udGVudHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MH0iLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgODQ2MTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICI6ZXhwb3J0e3RoZW1lRmlsdGVyOmludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKX0uZXhjYWxpZHJhdy0tbW9iaWxlLmV4Y2FsaWRyYXcgLlBhc3RlQ2hhcnREaWFsb2cgLklzbGFuZHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5leGNhbGlkcmF3IC5QYXN0ZUNoYXJ0RGlhbG9nIC5jb250YWluZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kO2ZsZXgtd3JhcDp3cmFwfS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyAuUGFzdGVDaGFydERpYWxvZyAuY29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5leGNhbGlkcmF3IC5QYXN0ZUNoYXJ0RGlhbG9nIC5DaGFydFByZXZpZXd7bWFyZ2luOjhweDt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxOTJweDtoZWlnaHQ6MTI4cHg7Ym9yZGVyLXJhZGl1czoycHg7cGFkZGluZzoxcHg7Ym9yZGVyOjFweCBzb2xpZCAjY2VkNGRhO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fS5leGNhbGlkcmF3IC5QYXN0ZUNoYXJ0RGlhbG9nIC5DaGFydFByZXZpZXcgZGl2e2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5leGNhbGlkcmF3IC5QYXN0ZUNoYXJ0RGlhbG9nIC5DaGFydFByZXZpZXcgc3Zne21heC1oZWlnaHQ6MTIwcHg7bWF4LXdpZHRoOjE4NnB4fS5leGNhbGlkcmF3IC5QYXN0ZUNoYXJ0RGlhbG9nIC5DaGFydFByZXZpZXc6aG92ZXJ7cGFkZGluZzowO2JvcmRlcjoycHggc29saWQgIzMzOWFmMH0iLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgOTkzNTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICIuZXhjYWxpZHJhdyAucG9wb3Zlcntwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAzODc0OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIi5leGNhbGlkcmF3IC5TdGFja3stLWdhcDogMDtkaXNwbGF5OmdyaWQ7Z2FwOmNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIHZhcigtLWdhcCkpfS5leGNhbGlkcmF3IC5TdGFja192ZXJ0aWNhbHtncmlkLXRlbXBsYXRlLWNvbHVtbnM6YXV0bztncmlkLWF1dG8tZmxvdzpyb3c7Z3JpZC1hdXRvLXJvd3M6LXdlYmtpdC1taW4tY29udGVudDtncmlkLWF1dG8tcm93czptaW4tY29udGVudH0uZXhjYWxpZHJhdyAuU3RhY2tfaG9yaXpvbnRhbHtncmlkLXRlbXBsYXRlLXJvd3M6YXV0bztncmlkLWF1dG8tZmxvdzpjb2x1bW47Z3JpZC1hdXRvLWNvbHVtbnM6LXdlYmtpdC1taW4tY29udGVudDtncmlkLWF1dG8tY29sdW1uczptaW4tY29udGVudH0iLCAiIl0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMjY4MTogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBhCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDM2NDUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpKCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBvLnB1c2goW2UuaWQsICI6ZXhwb3J0e3RoZW1lRmlsdGVyOmludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKX0uZXhjYWxpZHJhdyAuU3RhdHN7cG9zaXRpb246YWJzb2x1dGU7dG9wOjY0cHg7cmlnaHQ6MTJweDtmb250LXNpemU6MTJweDt6LWluZGV4Ojk5OX0uZXhjYWxpZHJhdyAuU3RhdHMgaDN7bWFyZ2luOjAgMjRweCA4cHggMDt3aGl0ZS1zcGFjZTpub3dyYXB9LmV4Y2FsaWRyYXcgLlN0YXRzIC5jbG9zZXtmbG9hdDpyaWdodDtoZWlnaHQ6MTZweDt3aWR0aDoxNnB4O2N1cnNvcjpwb2ludGVyfS5leGNhbGlkcmF3IC5TdGF0cyAuY2xvc2Ugc3Zne3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9LmV4Y2FsaWRyYXcgLlN0YXRzIHRhYmxle3dpZHRoOjEwMCV9LmV4Y2FsaWRyYXcgLlN0YXRzIHRhYmxlIHRoe2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWlucHV0LWJvcmRlci1jb2xvcik7cGFkZGluZzo0cHh9LmV4Y2FsaWRyYXcgLlN0YXRzIHRhYmxlIHRyIHRkOm50aC1jaGlsZCgyKXttaW4td2lkdGg6MjRweDt0ZXh0LWFsaWduOnJpZ2h0fTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5TdGF0c3tsZWZ0OjEycHg7cmlnaHQ6aW5pdGlhbH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuU3RhdHMgaDN7bWFyZ2luOjAgMCA4cHggMjRweH06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuU3RhdHMgLmNsb3Nle2Zsb2F0OmxlZnR9IiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDY3NTk6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAiOmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9LmV4Y2FsaWRyYXcgLlRleHRJbnB1dHtjb2xvcjp2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JvcmRlcjoxLjVweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0xKTtsaW5lLWhlaWdodDoxO3BhZGRpbmc6Ljc1cmVtO3doaXRlLXNwYWNlOm5vd3JhcDtib3JkZXItcmFkaXVzOnZhcigtLXNwYWNlLWZhY3Rvcik7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1pbnB1dC1iZy1jb2xvcil9LmV4Y2FsaWRyYXcgLlRleHRJbnB1dDpub3QoOmZvY3VzKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWlucHV0LWhvdmVyLWJnLWNvbG9yKX0uZXhjYWxpZHJhdyAuVGV4dElucHV0OmZvY3Vze291dGxpbmU6bm9uZTtib3gtc2hhZG93OjAgMCAwIDJweCB2YXIoLS1mb2N1cy1oaWdobGlnaHQtY29sb3IpfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA5NjUwOiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIjpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5Ub2FzdHthbmltYXRpb246ZmFkZS1pbiAuNXM7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0xKTtib3JkZXItcmFkaXVzOjRweDtib3R0b206MTBweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7Y3Vyc29yOmRlZmF1bHQ7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTE1MHB4O3BhZGRpbmc6NHB4IDA7cG9zaXRpb246YWJzb2x1dGU7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MzAwcHg7ei1pbmRleDo5OTk5OTl9LmV4Y2FsaWRyYXcgLlRvYXN0X19tZXNzYWdle2NvbG9yOnZhcigtLXBvcHVwLXRleHQtY29sb3IpO3doaXRlLXNwYWNlOnByZS13cmFwfUBrZXlmcmFtZXMgZmFkZS1pbntmcm9te29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAyMDQ0OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIjpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5Ub29sSWNvbntkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LWZhbWlseTpDYXNjYWRpYTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTEpOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOnZhcigtLXNwYWNlLWZhY3Rvcil9LmV4Y2FsaWRyYXcgLlRvb2xJY29uX19pY29ue3dpZHRoOjIuNXJlbTtoZWlnaHQ6Mi41cmVtO2NvbG9yOnZhcigtLWljb24tZmlsbC1jb2xvcik7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci1yYWRpdXM6dmFyKC0tc3BhY2UtZmFjdG9yKX0uZXhjYWxpZHJhdyAuVG9vbEljb25fX2ljb24gc3Zne3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxZW07ZmlsbDp2YXIoLS1pY29uLWZpbGwtY29sb3IpO2NvbG9yOnZhcigtLWljb24tZmlsbC1jb2xvcil9LmV4Y2FsaWRyYXcgLlRvb2xJY29uX19pY29uKy5Ub29sSWNvbl9fbGFiZWx7bWFyZ2luLWlubGluZS1zdGFydDowfS5leGNhbGlkcmF3IC5Ub29sSWNvbl9fbGFiZWx7Y29sb3I6dmFyKC0taWNvbi1maWxsLWNvbG9yKTtmb250LWZhbWlseTp2YXIoLS11aS1mb250KTttYXJnaW46MCAuOGVtO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9LmV4Y2FsaWRyYXcgLlRvb2xJY29uX3NpemVfcyAuVG9vbEljb25fX2ljb257d2lkdGg6MS40cmVtO2hlaWdodDoxLjRyZW07Zm9udC1zaXplOi44ZW19LmV4Y2FsaWRyYXcgLmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfYnV0dG9uLC5leGNhbGlkcmF3IC5Nb2RhbCAuVG9vbEljb25fdHlwZV9idXR0b24sLmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfYnV0dG9ue3BhZGRpbmc6MDtib3JkZXI6bm9uZTttYXJnaW46MDtmb250LXNpemU6aW5oZXJpdH0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b246aG92ZXIsLmV4Y2FsaWRyYXcgLk1vZGFsIC5Ub29sSWNvbl90eXBlX2J1dHRvbjpob3ZlciwuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0xKX0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b246YWN0aXZlLC5leGNhbGlkcmF3IC5Nb2RhbCAuVG9vbEljb25fdHlwZV9idXR0b246YWN0aXZlLC5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2J1dHRvbjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b246Zm9jdXMsLmV4Y2FsaWRyYXcgLk1vZGFsIC5Ub29sSWNvbl90eXBlX2J1dHRvbjpmb2N1cywuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b246Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yKX0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b24uVG9vbEljb24tLXNlbGVjdGVkLC5leGNhbGlkcmF3IC5Nb2RhbCAuVG9vbEljb25fdHlwZV9idXR0b24uVG9vbEljb24tLXNlbGVjdGVkLC5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2J1dHRvbi5Ub29sSWNvbi0tc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b24uVG9vbEljb24tLXNlbGVjdGVkOmFjdGl2ZSwuZXhjYWxpZHJhdyAuTW9kYWwgLlRvb2xJY29uX3R5cGVfYnV0dG9uLlRvb2xJY29uLS1zZWxlY3RlZDphY3RpdmUsLmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfYnV0dG9uLlRvb2xJY29uLS1zZWxlY3RlZDphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0zKX0uZXhjYWxpZHJhdyAuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b24tLXNob3csLmV4Y2FsaWRyYXcgLk1vZGFsIC5Ub29sSWNvbl90eXBlX2J1dHRvbi0tc2hvdywuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9idXR0b24tLXNob3d7dmlzaWJpbGl0eTp2aXNpYmxlfS5leGNhbGlkcmF3IC5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2J1dHRvbi0taGlkZSwuZXhjYWxpZHJhdyAuTW9kYWwgLlRvb2xJY29uX3R5cGVfYnV0dG9uLS1oaWRlLC5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2J1dHRvbi0taGlkZXt2aXNpYmlsaXR5OmhpZGRlbn0uZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9yYWRpbywuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9jaGVja2JveHtwb3NpdGlvbjphYnNvbHV0ZTtvcGFjaXR5OjA7cG9pbnRlci1ldmVudHM6bm9uZX0uZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9yYWRpbzpub3QoLlRvb2xJY29uX3RvZ2dsZV9vcGFxdWUpOmNoZWNrZWQrLlRvb2xJY29uX19pY29uLC5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2NoZWNrYm94Om5vdCguVG9vbEljb25fdG9nZ2xlX29wYXF1ZSk6Y2hlY2tlZCsuVG9vbEljb25fX2ljb257YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9yYWRpbzpmb2N1cysuVG9vbEljb25fX2ljb24sLmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfY2hlY2tib3g6Zm9jdXMrLlRvb2xJY29uX19pY29ue2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcil9LmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfcmFkaW86YWN0aXZlKy5Ub29sSWNvbl9faWNvbiwuZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9jaGVja2JveDphY3RpdmUrLlRvb2xJY29uX19pY29ue2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMyl9LmV4Y2FsaWRyYXcgLlRvb2xJY29uX3R5cGVfZmxvYXRpbmd7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9mbG9hdGluZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2Zsb2F0aW5nOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5leGNhbGlkcmF3IC5Ub29sSWNvbl90eXBlX2Zsb2F0aW5nOmZvY3Vze2JveC1zaGFkb3c6bm9uZX0uZXhjYWxpZHJhdyAuVG9vbEljb25fdHlwZV9mbG9hdGluZyAuVG9vbEljb25fX2ljb257d2lkdGg6MnJlbTtoZWlnaHQ6MmVtfS5leGNhbGlkcmF3IC5Ub29sSWNvbi5Ub29sSWNvbl9fbG9jay5Ub29sSWNvbl90eXBlX2Zsb2F0aW5ne21hcmdpbi1sZWZ0Oi4xcmVtfS5leGNhbGlkcmF3IC5Ub29sSWNvbl9fa2V5YmluZGluZ3twb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MnB4O3JpZ2h0OjNweDtmb250LXNpemU6LjVlbTtjb2xvcjp2YXIoLS1rZXliaW5kaW5nLWNvbG9yKTtmb250LWZhbWlseTp2YXIoLS11aS1mb250KTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX1AbWVkaWEobWF4LXdpZHRoOiA0MjVweCl7LmV4Y2FsaWRyYXcgLlNoYXBlIC5Ub29sSWNvbl9faWNvbnt3aWR0aDoycmVtO2hlaWdodDoycmVtfS5leGNhbGlkcmF3IC5TaGFwZSAuVG9vbEljb25fX2ljb24gc3Zne2hlaWdodDouOGVtfX1AbWVkaWEobWF4LXdpZHRoOiA3NjBweCl7LmV4Y2FsaWRyYXcgLlRvb2xJY29uLlRvb2xJY29uX19sb2Nre2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDo2MHB4O3JpZ2h0Oi04cHg7bWFyZ2luLWxlZnQ6MDtib3JkZXItcmFkaXVzOjIwcHggMCAwIDIwcHg7ei1pbmRleDoxO2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMSl9LmV4Y2FsaWRyYXcgLlRvb2xJY29uLlRvb2xJY29uX19sb2NrOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMSl9LmV4Y2FsaWRyYXcgLlRvb2xJY29uLlRvb2xJY29uX19sb2NrOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTIpfS5leGNhbGlkcmF3IC5Ub29sSWNvbi5Ub29sSWNvbl9fbG9jayAuVG9vbEljb25fX2ljb257Ym9yZGVyLXJhZGl1czppbmhlcml0fS5leGNhbGlkcmF3IC5Ub29sSWNvbi5Ub29sSWNvbl9fbG9jayBzdmd7cG9zaXRpb246c3RhdGljfX0uZXhjYWxpZHJhdyAuVG9vbHRpcEljb257d2lkdGg6LjllbTtoZWlnaHQ6LjllbTttYXJnaW4tbGVmdDo1cHg7bWFyZ2luLXRvcDoxcHh9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5Ub29sdGlwSWNvbntkaXNwbGF5Om5vbmV9OnJvb3RbZGlyPWx0cl0gLmV4Y2FsaWRyYXcgLnVubG9ja2VkLWljb257bGVmdDoycHh9OnJvb3RbZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLnVubG9ja2VkLWljb257cmlnaHQ6MnB4fSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA2NjI2OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgJzpleHBvcnR7dGhlbWVGaWx0ZXI6aW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpfS5leGNhbGlkcmF3IC5Ub29sdGlwe3Bvc2l0aW9uOnJlbGF0aXZlfS5leGNhbGlkcmF3IC5Ub29sdGlwX19sYWJlbHstLWFycm93LXNpemU6IDRweDt2aXNpYmlsaXR5OmhpZGRlbjtiYWNrZ3JvdW5kOiMwMDA7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXItcmFkaXVzOjZweDtwYWRkaW5nOjhweDtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwO2ZvbnQtc2l6ZToxM3B4O2xpbmUtaGVpZ2h0OjEuNTtmb250LXdlaWdodDo1MDA7bGVmdDpjYWxjKDUwJSArIHZhcigtLWFycm93LXNpemUpIC8gMiAtIDFweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7d29yZC13cmFwOmJyZWFrLXdvcmR9LmV4Y2FsaWRyYXcgLlRvb2x0aXBfX2xhYmVsOjphZnRlcntjb250ZW50OiIiO2JvcmRlcjp2YXIoLS1hcnJvdy1zaXplKSBzb2xpZCB0cmFuc3BhcmVudDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OmNhbGMoNTAlIC0gdmFyKC0tYXJyb3ctc2l6ZSkpfS5leGNhbGlkcmF3IC5Ub29sdGlwX19sYWJlbC0tYWJvdmV7Ym90dG9tOmNhbGMoMTAwJSArIHZhcigtLWFycm93LXNpemUpICsgM3B4KX0uZXhjYWxpZHJhdyAuVG9vbHRpcF9fbGFiZWwtLWFib3ZlOjphZnRlcntib3JkZXItdG9wLWNvbG9yOiMwMDA7dG9wOjEwMCV9LmV4Y2FsaWRyYXcgLlRvb2x0aXBfX2xhYmVsLS1iZWxvd3t0b3A6Y2FsYygxMDAlICsgdmFyKC0tYXJyb3ctc2l6ZSkgKyAzcHgpfS5leGNhbGlkcmF3IC5Ub29sdGlwX19sYWJlbC0tYmVsb3c6OmFmdGVye2JvcmRlci1ib3R0b20tY29sb3I6IzAwMDtib3R0b206MTAwJX0uZXhjYWxpZHJhdyAuVG9vbHRpcDpob3ZlciAuVG9vbHRpcF9fbGFiZWx7dmlzaWJpbGl0eTp2aXNpYmxlfS5leGNhbGlkcmF3IC5Ub29sdGlwX19sYWJlbDpob3Zlcnt2aXNpYmlsaXR5OnZpc2libGV9JywgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDYzNTk6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAiLmV4Y2FsaWRyYXcgLlVzZXJMaXN0e3BvaW50ZXItZXZlbnRzOm5vbmU7cGFkZGluZzp2YXIoLS1zcGFjZS1mYWN0b3IpIHZhcigtLXNwYWNlLWZhY3RvcikgdmFyKC0tc3BhY2UtZmFjdG9yKSB2YXIoLS1zcGFjZS1mYWN0b3IpO2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9LmV4Y2FsaWRyYXcgLlVzZXJMaXN0Pip7cG9pbnRlci1ldmVudHM6YWxsO21hcmdpbjowIDAgdmFyKC0tc3BhY2UtZmFjdG9yKSB2YXIoLS1zcGFjZS1mYWN0b3IpfS5leGNhbGlkcmF3IC5Vc2VyTGlzdF9tb2JpbGV7cGFkZGluZzowO2p1c3RpZnktY29udGVudDpub3JtYWx9LmV4Y2FsaWRyYXcgLlVzZXJMaXN0X21vYmlsZT4qe21hcmdpbjowIHZhcigtLXNwYWNlLWZhY3RvcikgdmFyKC0tc3BhY2UtZmFjdG9yKSAwfSIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA5OTE1OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIi52aXN1YWxseS1oaWRkZW57cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDtoZWlnaHQ6MXB4O3dpZHRoOjFweDtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDFweCwgMXB4LCAxcHgsIDFweCk7d2hpdGUtc3BhY2U6bm93cmFwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5Mb2FkaW5nTWVzc2FnZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDt6LWluZGV4Ojk5OTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cG9pbnRlci1ldmVudHM6bm9uZX0uTG9hZGluZ01lc3NhZ2Ugc3BhbntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTEpO2JvcmRlci1yYWRpdXM6NXB4O3BhZGRpbmc6LjhlbSAxLjJlbTtjb2xvcjp2YXIoLS1wb3B1cC10ZXh0LWNvbG9yKTtmb250LXNpemU6MS4zZW19IiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDkzMTA6IChlLCB0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIG4ucih0KSwgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gbigzNjQ1KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubihyKSgpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLmlkLCAnOmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9OmV4cG9ydHt0aGVtZUZpbHRlcjppbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyl9LmV4Y2FsaWRyYXd7LS10aGVtZS1maWx0ZXI6IG5vbmU7LS1idXR0b24tZGVzdHJ1Y3RpdmUtYmctY29sb3I6ICNmZmUzZTM7LS1idXR0b24tZGVzdHJ1Y3RpdmUtY29sb3I6ICNjOTJhMmE7LS1idXR0b24tZ3JheS0xOiAjZTllY2VmOy0tYnV0dG9uLWdyYXktMjogI2NlZDRkYTstLWJ1dHRvbi1ncmF5LTM6ICNhZGI1YmQ7LS1idXR0b24tc3BlY2lhbC1hY3RpdmUtYmctY29sb3I6ICNlYmZiZWU7LS1kaWFsb2ctYm9yZGVyLWNvbG9yOiAjODY4ZTk2Oy0tZHJvcGRvd24taWNvbjogdXJsKFwnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjkyLjQiIGhlaWdodD0iMjkyLjQiIHZpZXdCb3g9IjAgMCAyOTIgMjkyIj48cGF0aCBkPSJNMjg3IDE5N0wxNTkgNjljLTQtMy04LTUtMTMtNXMtOSAyLTEzIDVMNSAxOTdjLTMgNC01IDgtNSAxM3MyIDkgNSAxM2M0IDQgOCA1IDEzIDVoMjU2YzUgMCA5LTEgMTMtNXM1LTggNS0xMy0xLTktNS0xM3oiLz48L3N2Zz5cJyk7LS1mb2N1cy1oaWdobGlnaHQtY29sb3I6ICNhNWQ4ZmY7LS1pY29uLWZpbGwtY29sb3I6ICMwMDAwMDA7LS1pY29uLWdyZWVuLWZpbGwtY29sb3I6ICMyYjhhM2U7LS1kZWZhdWx0LWJnLWNvbG9yOiAjZmZmZmZmOy0taW5wdXQtYmctY29sb3I6ICNmZmZmZmY7LS1pbnB1dC1ib3JkZXItY29sb3I6ICNkZWUyZTY7LS1pbnB1dC1ob3Zlci1iZy1jb2xvcjogI2YxZjNmNTstLWlucHV0LWxhYmVsLWNvbG9yOiAjNDk1MDU3Oy0taXNsYW5kLWJnLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTYpOy0ta2V5YmluZGluZy1jb2xvcjogI2FkYjViZDstLWxpbmstY29sb3I6ICMxYzdlZDY7LS1vdmVybGF5LWJnLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuODgpOy0tcG9wdXAtYmctY29sb3I6ICNmZmZmZmY7LS1wb3B1cC1zZWNvbmRhcnktYmctY29sb3I6ICNmMWYzZjU7LS1wb3B1cC10ZXh0LWNvbG9yOiAjMDAwMDAwOy0tcG9wdXAtdGV4dC1pbnZlcnRlZC1jb2xvcjogI2ZmZmZmZjstLXNhYjogZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pOy0tc2FsOiBlbnYoc2FmZS1hcmVhLWluc2V0LWxlZnQpOy0tc2FyOiBlbnYoc2FmZS1hcmVhLWluc2V0LXJpZ2h0KTstLXNhdDogZW52KHNhZmUtYXJlYS1pbnNldC10b3ApOy0tc2VsZWN0LWhpZ2hsaWdodC1jb2xvcjogIzMzOWFmMDstLXNoYWRvdy1pc2xhbmQ6IDAgMXB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMTUpOy0tc3BhY2UtZmFjdG9yOiAwLjI1cmVtOy0tdGV4dC1wcmltYXJ5LWNvbG9yOiAjMzQzYTQwfS5leGNhbGlkcmF3LnRoZW1lLS1kYXJre2JhY2tncm91bmQ6IzAwMH0uZXhjYWxpZHJhdy50aGVtZS0tZGFyay50aGVtZS0tZGFyay1iYWNrZ3JvdW5kLW5vbmV7YmFja2dyb3VuZDpub25lfS5leGNhbGlkcmF3LnRoZW1lLS1kYXJrey0tdGhlbWUtZmlsdGVyOiBpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZyk7LS1idXR0b24tZGVzdHJ1Y3RpdmUtYmctY29sb3I6ICM1YTAwMDA7LS1idXR0b24tZGVzdHJ1Y3RpdmUtY29sb3I6ICNmZmE4YTg7LS1idXR0b24tZ3JheS0xOiAjMzYzNjM2Oy0tYnV0dG9uLWdyYXktMjogIzI3MjcyNzstLWJ1dHRvbi1ncmF5LTM6ICMyMjI7LS1idXR0b24tc3BlY2lhbC1hY3RpdmUtYmctY29sb3I6ICMyMDQ2MjQ7LS1kaWFsb2ctYm9yZGVyLWNvbG9yOiAjMjEyNTI5Oy0tZHJvcGRvd24taWNvbjogdXJsKFwnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjkyLjQiIGhlaWdodD0iMjkyLjQiIHZpZXdCb3g9IjAgMCAyOTIgMjkyIj48cGF0aCBmaWxsPSIlMjNjZWQ0ZGEiIGQ9Ik0yODcgMTk3TDE1OSA2OWMtNC0zLTgtNS0xMy01cy05IDItMTMgNUw1IDE5N2MtMyA0LTUgOC01IDEzczIgOSA1IDEzYzQgNCA4IDUgMTMgNWgyNTZjNSAwIDktMSAxMy01czUtOCA1LTEzLTEtOS01LTEzeiIvPjwvc3ZnPlwnKTstLWZvY3VzLWhpZ2hsaWdodC1jb2xvcjogIzIyOGJlNjstLWljb24tZmlsbC1jb2xvcjogI2NlZDRkYTstLWljb24tZ3JlZW4tZmlsbC1jb2xvcjogIzY5ZGI3YzstLWRlZmF1bHQtYmctY29sb3I6ICMxMjEyMTI7LS1pbnB1dC1iZy1jb2xvcjogIzEyMTIxMjstLWlucHV0LWJvcmRlci1jb2xvcjogIzJlMmUyZTstLWlucHV0LWhvdmVyLWJnLWNvbG9yOiAjMTgxODE4Oy0taW5wdXQtbGFiZWwtY29sb3I6ICNlOWVjZWY7LS1pc2xhbmQtYmctY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC45OCk7LS1rZXliaW5kaW5nLWNvbG9yOiAjODY4ZTk2Oy0tb3ZlcmxheS1iZy1jb2xvcjogcmdiYSg1MiwgNTgsIDY0LCAwLjEyKTstLXBvcHVwLWJnLWNvbG9yOiAjMmMyYzJjOy0tcG9wdXAtc2Vjb25kYXJ5LWJnLWNvbG9yOiAjMjIyOy0tcG9wdXAtdGV4dC1jb2xvcjogI2NlZDRkYTstLXBvcHVwLXRleHQtaW52ZXJ0ZWQtY29sb3I6ICMyYzJjMmM7LS1zZWxlY3QtaGlnaGxpZ2h0LWNvbG9yOiAjNGRhYmY3Oy0tc2hhZG93LWlzbGFuZDogMCAxcHggNXB4IHJnYmEoMCwgMCwgMCwgMC4zKTstLXRleHQtcHJpbWFyeS1jb2xvcjogI2NlZDRkYX06cm9vdHstLXpJbmRleC1jYW52YXM6IDE7LS16SW5kZXgtd3lzaXd5ZzogMjstLXpJbmRleC1sYXllclVJOiAzfS5leGNhbGlkcmF3e3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjtjb2xvcjp2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO2Rpc3BsYXk6ZmxleDt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5leGNhbGlkcmF3OmZvY3Vze291dGxpbmU6bm9uZX0uZXhjYWxpZHJhdyBhe2ZvbnQtd2VpZ2h0OjUwMDt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjp2YXIoLS1saW5rLWNvbG9yKX0uZXhjYWxpZHJhdyBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9LmV4Y2FsaWRyYXcgY2FudmFze3RvdWNoLWFjdGlvbjpub25lO2ltYWdlLXJlbmRlcmluZzpwaXhlbGF0ZWQ7aW1hZ2UtcmVuZGVyaW5nOi1tb3otY3Jpc3AtZWRnZXM7ei1pbmRleDp2YXIoLS16SW5kZXgtY2FudmFzKX0uZXhjYWxpZHJhdyAjY2FudmFze3Bvc2l0aW9uOmFic29sdXRlfS5leGNhbGlkcmF3LnRoZW1lLS1kYXJrIGNhbnZhc3tmaWx0ZXI6dmFyKC0tdGhlbWUtZmlsdGVyKX0uZXhjYWxpZHJhdyAuRml4ZWRTaWRlQ29udGFpbmVye3BhZGRpbmctdG9wOnZhcigtLXNhdCwgMCk7cGFkZGluZy1yaWdodDp2YXIoLS1zYXIsIDApO3BhZGRpbmctYm90dG9tOnZhcigtLXNhYiwgMCk7cGFkZGluZy1sZWZ0OnZhcigtLXNhbCwgMCl9LmV4Y2FsaWRyYXcgLnBhbmVsUm93e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW57ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gaDMsLmV4Y2FsaWRyYXcgLnBhbmVsQ29sdW1uIGxlZ2VuZCwuZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmNvbnRyb2wtbGFiZWx7bWFyZ2luLXRvcDouMzMzcmVtO21hcmdpbi1ib3R0b206LjMzM3JlbTtmb250LXNpemU6Ljc1cmVtO2NvbG9yOnZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7Zm9udC13ZWlnaHQ6Ym9sZDtkaXNwbGF5OmJsb2NrfS5leGNhbGlkcmF3IC5wYW5lbENvbHVtbiAuY29udHJvbC1sYWJlbCBpbnB1dHtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCV9LmV4Y2FsaWRyYXcgLnBhbmVsQ29sdW1uIGgzOmZpcnN0LWNoaWxkLC5leGNhbGlkcmF3IC5wYW5lbENvbHVtbiBsZWdlbmQ6Zmlyc3QtY2hpbGQsLmV4Y2FsaWRyYXcgLnBhbmVsQ29sdW1uIC5jb250cm9sLWxhYmVsOmZpcnN0LWNoaWxke21hcmdpbi10b3A6MH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gbGVnZW5ke3BhZGRpbmc6MH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmljb25TZWxlY3RMaXN0e2ZsZXgtd3JhcDp3cmFwO3Bvc2l0aW9uOnJlbGF0aXZlfS5leGNhbGlkcmF3IC5wYW5lbENvbHVtbiAuYnV0dG9uTGlzdHtmbGV4LXdyYXA6d3JhcH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgbGFiZWx7bWFyZ2luLXJpZ2h0Oi4yNXJlbTtmb250LXNpemU6Ljc1cmVtO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5leGNhbGlkcmF3IC5wYW5lbENvbHVtbiAuYnV0dG9uTGlzdCBpbnB1dFt0eXBlPXJhZGlvXSwuZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgaW5wdXRbdHlwZT1idXR0b25de29wYWNpdHk6MDtwb3NpdGlvbjphYnNvbHV0ZTtwb2ludGVyLWV2ZW50czpub25lfS5leGNhbGlkcmF3IC5wYW5lbENvbHVtbiAuYnV0dG9uTGlzdCAuaWNvblJvd3ttYXJnaW4tdG9wOjhweH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgLlRvb2xJY29ue21hcmdpbjowO21hcmdpbi1pbmxpbmUtZW5kOjhweH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgLlRvb2xJY29uOmZvY3Vze291dGxpbmU6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yKX0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgLlRvb2xJY29uOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMil9LmV4Y2FsaWRyYXcgLnBhbmVsQ29sdW1uIC5idXR0b25MaXN0IC5Ub29sSWNvbjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0zKX0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgLlRvb2xJY29uOmRpc2FibGVke2N1cnNvcjpub3QtYWxsb3dlZH0uZXhjYWxpZHJhdyAucGFuZWxDb2x1bW4gLmJ1dHRvbkxpc3QgLlRvb2xJY29uX19pY29ue3dpZHRoOjI4cHg7aGVpZ2h0OjI4cHh9LmV4Y2FsaWRyYXcgLnBhbmVsQ29sdW1uIGZpZWxkc2V0e21hcmdpbjowO21hcmdpbi10b3A6LjMzM3JlbTtwYWRkaW5nOjA7Ym9yZGVyOm5vbmV9LmV4Y2FsaWRyYXcgLmRpdmlkZXJ7d2lkdGg6MXB4O2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjttYXJnaW46MXB4fS5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsOmZvY3VzLXdpdGhpbiwuZXhjYWxpZHJhdyBpbnB1dDpmb2N1c3tvdXRsaW5lOnRyYW5zcGFyZW50O2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcil9LmV4Y2FsaWRyYXcgYnV0dG9uLC5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsey13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMSk7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czo0cHg7bWFyZ2luOi4xMjVyZW0gMDtwYWRkaW5nOi4yNXJlbTt3aGl0ZS1zcGFjZTpub3dyYXA7Y3Vyc29yOnBvaW50ZXJ9LmV4Y2FsaWRyYXcgYnV0dG9uOmZvY3VzLC5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsOmZvY3Vze291dGxpbmU6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yKX0uZXhjYWxpZHJhdyBidXR0b246aG92ZXIsLmV4Y2FsaWRyYXcgLmJ1dHRvbkxpc3QgbGFiZWw6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyBidXR0b246YWN0aXZlLC5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTMpfS5leGNhbGlkcmF3IGJ1dHRvbjpkaXNhYmxlZCwuZXhjYWxpZHJhdyAuYnV0dG9uTGlzdCBsYWJlbDpkaXNhYmxlZHtjdXJzb3I6bm90LWFsbG93ZWR9LmV4Y2FsaWRyYXcgLmFjdGl2ZSwuZXhjYWxpZHJhdyAuYnV0dG9uTGlzdCBsYWJlbC5hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0yKX0uZXhjYWxpZHJhdyAuYWN0aXZlOmhvdmVyLC5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsLmFjdGl2ZTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTIpfS5leGNhbGlkcmF3IC5hY3RpdmU6YWN0aXZlLC5leGNhbGlkcmF3IC5idXR0b25MaXN0IGxhYmVsLmFjdGl2ZTphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1idXR0b24tZ3JheS0zKX0uZXhjYWxpZHJhdyAuYnV0dG9uTGlzdC5idXR0b25MaXN0SWNvbiBsYWJlbHtkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfS5leGNhbGlkcmF3IC5idXR0b25MaXN0LmJ1dHRvbkxpc3RJY29uIGxhYmVsIHN2Z3t3aWR0aDozNnB4O2hlaWdodDoxNHB4O3BhZGRpbmc6MnB4O29wYWNpdHk6LjZ9LmV4Y2FsaWRyYXcgLmJ1dHRvbkxpc3QuYnV0dG9uTGlzdEljb24gbGFiZWwuYWN0aXZlIHN2Z3tvcGFjaXR5OjF9LmV4Y2FsaWRyYXcgLkFwcC10b3AtYmFye3otaW5kZXg6dmFyKC0tekluZGV4LWxheWVyVUkpO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyfS5leGNhbGlkcmF3IC5BcHAtYm90dG9tLWJhcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDstLWJhci1wYWRkaW5nOiBjYWxjKDQgKiB2YXIoLS1zcGFjZS1mYWN0b3IpKTtwYWRkaW5nLXRvcDptYXgodmFyKC0tYmFyLXBhZGRpbmcpLCB2YXIoLS1zYXQsMCkpO3BhZGRpbmctcmlnaHQ6dmFyKC0tc2FyLCAwKTtwYWRkaW5nLWJvdHRvbTp2YXIoLS1zYWIsIDApO3BhZGRpbmctbGVmdDp2YXIoLS1zYWwsIDApO3otaW5kZXg6NDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7cG9pbnRlci1ldmVudHM6bm9uZX0uZXhjYWxpZHJhdyAuQXBwLWJvdHRvbS1iYXI+LklzbGFuZHt3aWR0aDoxMDAlO21heC13aWR0aDoxMDAlO21pbi13aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXgtaGVpZ2h0OjEwMCU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwb2ludGVyLWV2ZW50czppbml0aWFsfS5leGNhbGlkcmF3IC5BcHAtYm90dG9tLWJhcj4uSXNsYW5kIC5wYW5lbENvbHVtbntwYWRkaW5nOjhweCA4cHggMCA4cHh9LmV4Y2FsaWRyYXcgLkFwcC10b29sYmFye3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fS5leGNhbGlkcmF3IC5BcHAtdG9vbGJhci1jb250ZW50e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzo4cHh9LmV4Y2FsaWRyYXcgLkFwcC1tb2JpbGUtbWVudXt3aWR0aDoxMDAlO292ZXJmbG93LXg6dmlzaWJsZTtvdmVyZmxvdy15OmF1dG87Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbi1ib3R0b206dmFyKC0tYmFyLXBhZGRpbmcpfS5leGNhbGlkcmF3IC5BcHAtbWVudXtkaXNwbGF5OmdyaWQ7Y29sb3I6dmFyKC0taWNvbi1maWxsLWNvbG9yKX0uZXhjYWxpZHJhdyAuQXBwLW1lbnVfdG9we2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgYXV0byAxZnI7Z3JpZC1nYXA6NHB4O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7Y3Vyc29yOmRlZmF1bHQ7cG9pbnRlci1ldmVudHM6bm9uZSAhaW1wb3J0YW50fS5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlcjpub3QoLmRpc2FibGUtcG9pbnRlckV2ZW50cykgLkFwcC1tZW51X3RvcD4qe3BvaW50ZXItZXZlbnRzOmFsbH0uZXhjYWxpZHJhdyAuQXBwLW1lbnVfdG9wPio6Zmlyc3QtY2hpbGR7anVzdGlmeS1zZWxmOmZsZXgtc3RhcnR9LmV4Y2FsaWRyYXcgLkFwcC1tZW51X3RvcD4qOmxhc3QtY2hpbGR7anVzdGlmeS1zZWxmOmZsZXgtZW5kfS5leGNhbGlkcmF3IC5BcHAtbWVudV9ib3R0b217cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOi13ZWJraXQtbWluLWNvbnRlbnQgYXV0byAtd2Via2l0LW1pbi1jb250ZW50O2dyaWQtdGVtcGxhdGUtY29sdW1uczptaW4tY29udGVudCBhdXRvIG1pbi1jb250ZW50O2dyaWQtZ2FwOjE1cHg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtjdXJzb3I6ZGVmYXVsdDtwb2ludGVyLWV2ZW50czpub25lICFpbXBvcnRhbnQ7ei1pbmRleDoxMDB9OnJvb3RbZGlyPWx0cl0gLmV4Y2FsaWRyYXcgLkFwcC1tZW51X2JvdHRvbXtsZWZ0Oi4yNXJlbX06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuQXBwLW1lbnVfYm90dG9te3JpZ2h0Oi4yNXJlbX0uZXhjYWxpZHJhdyAuQXBwLW1lbnVfYm90dG9tLS10cmFuc2l0aW9uLWxlZnQgc2VjdGlvbnt3aWR0aDoxODVweH0uZXhjYWxpZHJhdyAuQXBwLW1lbnVfYm90dG9tIHNlY3Rpb257ZGlzcGxheTpmbGV4fS5leGNhbGlkcmF3IC5sYXllci11aV9fd3JhcHBlcjpub3QoLmRpc2FibGUtcG9pbnRlckV2ZW50cykgLkFwcC1tZW51X2JvdHRvbT4qe3BvaW50ZXItZXZlbnRzOmFsbH0uZXhjYWxpZHJhdyAuQXBwLW1lbnVfYm90dG9tPio6Zmlyc3QtY2hpbGR7anVzdGlmeS1zZWxmOmZsZXgtc3RhcnR9LmV4Y2FsaWRyYXcgLkFwcC1tZW51X2JvdHRvbT4qOmxhc3QtY2hpbGR7anVzdGlmeS1zZWxmOmZsZXgtZW5kfS5leGNhbGlkcmF3IC5BcHAtbWVudV9sZWZ0e2dyaWQtdGVtcGxhdGUtcm93czoxZnIgYXV0byAxZnI7aGVpZ2h0OjEwMCV9LmV4Y2FsaWRyYXcgLkFwcC1tZW51X3JpZ2h0e2dyaWQtdGVtcGxhdGUtcm93czoxZnI7aGVpZ2h0OjEwMCV9LmV4Y2FsaWRyYXcgLkFwcC1tZW51X19sZWZ0e292ZXJmbG93LXk6YXV0b30uZXhjYWxpZHJhdyAuZHJvcGRvd24tc2VsZWN0e2hlaWdodDoxLjVyZW07cGFkZGluZzowO3BhZGRpbmctaW5saW5lLXN0YXJ0Oi41cmVtO3BhZGRpbmctaW5saW5lLWVuZDoxLjVyZW07Y29sb3I6dmFyKC0taWNvbi1maWxsLWNvbG9yKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTEpO2JvcmRlci1yYWRpdXM6dmFyKC0tc3BhY2UtZmFjdG9yKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1ncmF5LTIpO2ZvbnQtc2l6ZTouOHJlbTtvdXRsaW5lOm5vbmU7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQtaW1hZ2U6dmFyKC0tZHJvcGRvd24taWNvbik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246cmlnaHQgLjdyZW0gdG9wIDUwJSwwIDA7YmFja2dyb3VuZC1zaXplOi42NWVtIGF1dG8sMTAwJX06cm9vdFtkaXI9cnRsXSAuZXhjYWxpZHJhdyAuZHJvcGRvd24tc2VsZWN0e2JhY2tncm91bmQtcG9zaXRpb246bGVmdCAuN3JlbSB0b3AgNTAlLDAgMH0uZXhjYWxpZHJhdyAuZHJvcGRvd24tc2VsZWN0OmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcil9LmV4Y2FsaWRyYXcgLmRyb3Bkb3duLXNlbGVjdDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJ1dHRvbi1ncmF5LTIpfS5leGNhbGlkcmF3IC5kcm9wZG93bi1zZWxlY3Q6YWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tYnV0dG9uLWdyYXktMil9LmV4Y2FsaWRyYXcgLmRyb3Bkb3duLXNlbGVjdC5kcm9wZG93bi1zZWxlY3QtLWZsb2F0aW5ne21hcmdpbjouNWVtfS5leGNhbGlkcmF3IC5kcm9wZG93bi1zZWxlY3RfX2xhbmd1YWdlLmRyb3Bkb3duLXNlbGVjdC0tZmxvYXRpbmd7Ym90dG9tOjEwcHh9OnJvb3RbZGlyPWx0cl0gLmV4Y2FsaWRyYXcgLmRyb3Bkb3duLXNlbGVjdF9fbGFuZ3VhZ2UuZHJvcGRvd24tc2VsZWN0LS1mbG9hdGluZ3tyaWdodDo0NHB4fTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5kcm9wZG93bi1zZWxlY3RfX2xhbmd1YWdlLmRyb3Bkb3duLXNlbGVjdC0tZmxvYXRpbmd7bGVmdDo0NHB4fS5leGNhbGlkcmF3IC56SW5kZXhCdXR0b257bWFyZ2luOjA7bWFyZ2luLWlubGluZS1lbmQ6OHB4O3BhZGRpbmc6NXB4O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmV4Y2FsaWRyYXcgLnpJbmRleEJ1dHRvbiBzdmd7d2lkdGg6MThweDtoZWlnaHQ6MThweH0uZXhjYWxpZHJhdyAuc2Nyb2xsLWJhY2stdG8tY29udGVudHtjb2xvcjp2YXIoLS1wb3B1cC10ZXh0LWNvbG9yKTtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjUwJTtib3R0b206MzBweDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTtwYWRkaW5nOjEwcHggMjBweH0uZXhjYWxpZHJhdyAuaGVscC1pY29ue2N1cnNvcjpwb2ludGVyO2ZpbGw6Izg2OGU5Njt3aWR0aDoxLjVyZW07cGFkZGluZzowO21hcmdpbjowO21hcmdpbi10b3A6NXB4O2JhY2tncm91bmQ6bm9uZTtjb2xvcjp2YXIoLS1pY29uLWZpbGwtY29sb3IpfS5leGNhbGlkcmF3IC5oZWxwLWljb246aG92ZXJ7YmFja2dyb3VuZDpub25lfTpyb290W2Rpcj1sdHJdIC5leGNhbGlkcmF3IC5oZWxwLWljb257bWFyZ2luLXJpZ2h0OjE0cHh9OnJvb3RbZGlyPXJ0bF0gLmV4Y2FsaWRyYXcgLmhlbHAtaWNvbnttYXJnaW4tbGVmdDoxNHB4fS5leGNhbGlkcmF3LS1tb2JpbGUuZXhjYWxpZHJhdyBhc2lkZXtkaXNwbGF5Om5vbmV9LmV4Y2FsaWRyYXctLW1vYmlsZS5leGNhbGlkcmF3IC5zY3JvbGwtYmFjay10by1jb250ZW50e2JvdHRvbTpjYWxjKDgwcHggKyB2YXIoLS1zYWIsIDApKTt6LWluZGV4Oi0xfTpyb290W2Rpcj1ydGxdIC5leGNhbGlkcmF3IC5ydGwtbWlycm9ye3RyYW5zZm9ybTpzY2FsZVgoLTEpfS5leGNhbGlkcmF3IC56ZW4tbW9kZS12aXNpYmlsaXR5e3Zpc2liaWxpdHk6dmlzaWJsZTtvcGFjaXR5OjE7aGVpZ2h0OmF1dG87d2lkdGg6YXV0bzt0cmFuc2l0aW9uOm9wYWNpdHkgLjVzfS5leGNhbGlkcmF3IC56ZW4tbW9kZS12aXNpYmlsaXR5Lnplbi1tb2RlLXZpc2liaWxpdHktLWhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbjtvcGFjaXR5OjA7aGVpZ2h0OjA7d2lkdGg6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjVzfS5leGNhbGlkcmF3IC5kaXNhYmxlLXBvaW50ZXJFdmVudHN7cG9pbnRlci1ldmVudHM6bm9uZSAhaW1wb3J0YW50fS5leGNhbGlkcmF3LmV4Y2FsaWRyYXctLXZpZXctbW9kZSAuQXBwLW1lbnV7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufUBtZWRpYSBwcmludHsuZXhjYWxpZHJhdyAuQXBwLWJvdHRvbS1iYXIsLmV4Y2FsaWRyYXcgLkZpeGVkU2lkZUNvbnRhaW5lciwuZXhjYWxpZHJhdyAubGF5ZXItdWlfX3dyYXBwZXJ7ZGlzcGxheTpub25lfX0uRXJyb3JTcGxhc2guZXhjYWxpZHJhd3ttaW4taGVpZ2h0OjEwMHZoO3BhZGRpbmc6MjBweCAwO292ZXJmbG93OmF1dG87ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6dGV4dDt1c2VyLXNlbGVjdDp0ZXh0fS5FcnJvclNwbGFzaC5leGNhbGlkcmF3IC5FcnJvclNwbGFzaC1tZXNzYWdlQ29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzo0MHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZTNlMztib3JkZXI6M3B4IHNvbGlkICNjOTJhMmF9LkVycm9yU3BsYXNoLmV4Y2FsaWRyYXcgLkVycm9yU3BsYXNoLXBhcmFncmFwaHttYXJnaW46MTVweCAwO21heC13aWR0aDo2MDBweH0uRXJyb3JTcGxhc2guZXhjYWxpZHJhdyAuRXJyb3JTcGxhc2gtcGFyYWdyYXBoLmFsaWduLWNlbnRlcnt0ZXh0LWFsaWduOmNlbnRlcn0uRXJyb3JTcGxhc2guZXhjYWxpZHJhdyAuYmlnZ2VyLC5FcnJvclNwbGFzaC5leGNhbGlkcmF3IC5iaWdnZXIgYnV0dG9ue2ZvbnQtc2l6ZToxLjFlbX0uRXJyb3JTcGxhc2guZXhjYWxpZHJhdyAuc21hbGxlciwuRXJyb3JTcGxhc2guZXhjYWxpZHJhdyAuc21hbGxlciBidXR0b257Zm9udC1zaXplOi45ZW19LkVycm9yU3BsYXNoLmV4Y2FsaWRyYXcgLkVycm9yU3BsYXNoLWRldGFpbHN7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0fS5FcnJvclNwbGFzaC5leGNhbGlkcmF3IC5FcnJvclNwbGFzaC1kZXRhaWxzIHRleHRhcmVhe3dpZHRoOjEwMCU7bWFyZ2luOjEwcHggMDtmb250LWZhbWlseToiQ2FzY2FkaWEiO2ZvbnQtc2l6ZTouOGVtfScsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA2NDY0OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLnIodCksIG4uZCh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4oMzY0NSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLm4ocikoKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChbZS5pZCwgIiIsICIiXSksIG8ubG9jYWxzID0gewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZUZpbHRlcjogImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKSIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMzY0NTogZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFsyXSA/ICJAbWVkaWEgIi5jb25jYXQodFsyXSwgIiB7IikuY29uY2F0KG4sICJ9IikgOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuam9pbigiIikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5pID0gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgKGUgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW251bGwsIGUsICIiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB0aGlzLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpc1thXVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBpICYmIChvW2ldID0gITApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBlLmxlbmd0aDsgbCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBbXS5jb25jYXQoZVtsXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiBvW3NbMF1dIHx8IChuICYmIChzWzJdID8gc1syXSA9ICIiLmNvbmNhdChuLCAiIGFuZCAiKS5jb25jYXQoc1syXSkgOiBzWzJdID0gbiksIHQucHVzaChzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAxNjY3OiBlID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCB8fCAodCA9IHt9KSwgInN0cmluZyIgIT0gdHlwZW9mKGUgPSBlICYmIGUuX19lc01vZHVsZSA/IGUuZGVmYXVsdCA6IGUpID8gZSA6ICgvXlsnIl0uKlsnIl0kLy50ZXN0KGUpICYmIChlID0gZS5zbGljZSgxLCAtMSkpLCB0Lmhhc2ggJiYgKGUgKz0gdC5oYXNoKSwgL1siJygpIFx0XG5dLy50ZXN0KGUpIHx8IHQubmVlZFF1b3RlcyA/ICciJy5jb25jYXQoZS5yZXBsYWNlKC8iL2csICdcXCInKS5yZXBsYWNlKC9cbi9nLCAiXFxuIiksICciJykgOiBlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA5NjM4OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBaOiAoKSA9PiByCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4ucCArICJleGNhbGlkcmF3LWFzc2V0cy9DYXNjYWRpYS53b2ZmMiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA3NDY0OiAoZSwgdCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgICAgICBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBaOiAoKSA9PiByCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4ucCArICJleGNhbGlkcmF3LWFzc2V0cy9WaXJnaWwud29mZjIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgODI4ODogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5kKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgaUM6ICgpID0+IGksCiAgICAgICAgICAgICAgICAgICAgICAgIGY6ICgpID0+IGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHF4OiAoKSA9PiBzLAogICAgICAgICAgICAgICAgICAgICAgICBJdzogKCkgPT4gYywKICAgICAgICAgICAgICAgICAgICAgICAgJGU6ICgpID0+IHUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdaOiAoKSA9PiBkLAogICAgICAgICAgICAgICAgICAgICAgICBheTogKCkgPT4gcCwKICAgICAgICAgICAgICAgICAgICAgICAgb2M6ICgpID0+IGgsCiAgICAgICAgICAgICAgICAgICAgICAgIE9oOiAoKSA9PiBmLAogICAgICAgICAgICAgICAgICAgICAgICBLczogKCkgPT4gciwKICAgICAgICAgICAgICAgICAgICAgICAgVmk6ICgpID0+IG0sCiAgICAgICAgICAgICAgICAgICAgICAgICRDOiAoKSA9PiBnLAogICAgICAgICAgICAgICAgICAgICAgICB1dDogKCkgPT4gdiwKICAgICAgICAgICAgICAgICAgICAgICAgX0Q6ICgpID0+IGIsCiAgICAgICAgICAgICAgICAgICAgICAgIG41OiAoKSA9PiB5LAogICAgICAgICAgICAgICAgICAgICAgICByazogKCkgPT4gdywKICAgICAgICAgICAgICAgICAgICAgICAgSGc6ICgpID0+IHgsCiAgICAgICAgICAgICAgICAgICAgICAgIGhzOiAoKSA9PiBFLAogICAgICAgICAgICAgICAgICAgICAgICBrOiAoKSA9PiBrLAogICAgICAgICAgICAgICAgICAgICAgICBMTzogKCkgPT4gUywKICAgICAgICAgICAgICAgICAgICAgICAgcjg6ICgpID0+IEMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBiOiAoKSA9PiBPLAogICAgICAgICAgICAgICAgICAgICAgICBHajogKCkgPT4gTSwKICAgICAgICAgICAgICAgICAgICAgICAgbk06ICgpID0+IFAsCiAgICAgICAgICAgICAgICAgICAgICAgIExnOiAoKSA9PiBJLAogICAgICAgICAgICAgICAgICAgICAgICBITTogKCkgPT4gVCwKICAgICAgICAgICAgICAgICAgICAgICAgVjQ6ICgpID0+IEwsCiAgICAgICAgICAgICAgICAgICAgICAgIEVIOiAoKSA9PiBBLAogICAgICAgICAgICAgICAgICAgICAgICBaRjogKCkgPT4gXywKICAgICAgICAgICAgICAgICAgICAgICAgVU86ICgpID0+IEQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFoOiAoKSA9PiBqLAogICAgICAgICAgICAgICAgICAgICAgICBjVzogKCkgPT4geiwKICAgICAgICAgICAgICAgICAgICAgICAga1Y6ICgpID0+IEIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNTOiAoKSA9PiBILAogICAgICAgICAgICAgICAgICAgICAgICBZeDogKCkgPT4gTiwKICAgICAgICAgICAgICAgICAgICAgICAgeks6ICgpID0+IFIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgbyA9IG4oODYzNSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuLm4obyksCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAiRXhjYWxpZHJhdyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSA1LAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBwID0gTWF0aC5QSSAvIDEyLAogICAgICAgICAgICAgICAgICAgICAgICBoID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVEVYVDogInRleHQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JPU1NIQUlSOiAiY3Jvc3NoYWlyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdSQUJCSU5HOiAiZ3JhYmJpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUE9JTlRFUjogInBvaW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTU9WRTogIm1vdmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQVVUTzogIiIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BSU46IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXSEVFTDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFQ09OREFSWTogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRPVUNIOiAtMQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICEgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLkNPUFkgPSAiY29weSIsIGUuUEFTVEUgPSAicGFzdGUiLCBlLkNVVCA9ICJjdXQiLCBlLktFWURPV04gPSAia2V5ZG93biIsIGUuS0VZVVAgPSAia2V5dXAiLCBlLk1PVVNFX01PVkUgPSAibW91c2Vtb3ZlIiwgZS5SRVNJWkUgPSAicmVzaXplIiwgZS5VTkxPQUQgPSAidW5sb2FkIiwgZS5CTFVSID0gImJsdXIiLCBlLkRSQUdfT1ZFUiA9ICJkcmFnb3ZlciIsIGUuRFJPUCA9ICJkcm9wIiwgZS5HRVNUVVJFX0VORCA9ICJnZXN0dXJlZW5kIiwgZS5CRUZPUkVfVU5MT0FEID0gImJlZm9yZXVubG9hZCIsIGUuR0VTVFVSRV9TVEFSVCA9ICJnZXN0dXJlc3RhcnQiLCBlLkdFU1RVUkVfQ0hBTkdFID0gImdlc3R1cmVjaGFuZ2UiLCBlLlBPSU5URVJfTU9WRSA9ICJwb2ludGVybW92ZSIsIGUuUE9JTlRFUl9VUCA9ICJwb2ludGVydXAiLCBlLlNUQVRFX0NIQU5HRSA9ICJzdGF0ZWNoYW5nZSIsIGUuV0hFRUwgPSAid2hlZWwiLCBlLlRPVUNIX1NUQVJUID0gInRvdWNoc3RhcnQiLCBlLlRPVUNIX0VORCA9ICJ0b3VjaGVuZCIsIGUuSEFTSENIQU5HRSA9ICJoYXNoY2hhbmdlIiwgZS5WSVNJQklMSVRZX0NIQU5HRSA9ICJ2aXNpYmlsaXR5Y2hhbmdlIiwgZS5TQ1JPTEwgPSAic2Nyb2xsIgogICAgICAgICAgICAgICAgICAgIH0ociB8fCAociA9IHt9KSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBURVNUOiAidGVzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBERVZFTE9QTUVOVDogImRldmVsb3BtZW50IgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBnID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU0hBUEVfQUNUSU9OU19NRU5VOiAiQXBwLW1lbnVfX2xlZnQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxOiAiVmlyZ2lsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDI6ICJIZWx2ZXRpY2EiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMzogIkNhc2NhZGlhIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBiID0gIlNlZ29lIFVJIEVtb2ppIiwKICAgICAgICAgICAgICAgICAgICAgICAgeSA9IDIwLAogICAgICAgICAgICAgICAgICAgICAgICB3ID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgeCA9ICJsZWZ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgRSA9ICJ0b3AiLAogICAgICAgICAgICAgICAgICAgICAgICBrID0gMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIFMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNhbGlkcmF3OiAiYXBwbGljYXRpb24vdm5kLmV4Y2FsaWRyYXcranNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNhbGlkcmF3bGliOiAiYXBwbGljYXRpb24vdm5kLmV4Y2FsaWRyYXdsaWIranNvbiIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2FsaWRyYXc6ICJleGNhbGlkcmF3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2FsaWRyYXdDbGlwYm9hcmQ6ICJleGNhbGlkcmF3L2NsaXBib2FyZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNhbGlkcmF3TGlicmFyeTogImV4Y2FsaWRyYXdsaWIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE8gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgICAgICAgICBNID0gMzAwLAogICAgICAgICAgICAgICAgICAgICAgICBQID0gNTAwLAogICAgICAgICAgICAgICAgICAgICAgICBJID0gNWUzLAogICAgICAgICAgICAgICAgICAgICAgICBUID0gMTAwLAogICAgICAgICAgICAgICAgICAgICAgICBMID0gLjEsCiAgICAgICAgICAgICAgICAgICAgICAgIEEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWSUVXOiAidmlld01vZGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWkVOOiAiemVuTW9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHUklEOiAiZ3JpZE1vZGUiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF8gPSBhKCkudGhlbWVGaWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIEQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRMaWJyYXJ5OiAiYWRkTGlicmFyeSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZExpYnJhcnk6ICJhZGRMaWJyYXJ5IgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB6ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzQWN0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVZpZXdCYWNrZ3JvdW5kQ29sb3I6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyQ2FudmFzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTY2VuZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFzU2NlbmU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVTY2VuZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEIgPSA3MzAsCiAgICAgICAgICAgICAgICAgICAgICAgIEggPSAxZTMsCiAgICAgICAgICAgICAgICAgICAgICAgIE4gPSA1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgIFIgPSAyCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMTAxMDogKGUsIHQsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgbi5yKHQpLCBuLmQodCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBGaCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdExhbmc6ICgpID0+IHYsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFRvQmxvYjogKCkgPT4gX2gsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFRvQ2FudmFzOiAoKSA9PiBBaCwKICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0VG9Tdmc6ICgpID0+IERoLAogICAgICAgICAgICAgICAgICAgICAgICBnZXRFbGVtZW50TWFwOiAoKSA9PiBMaSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NlbmVWZXJzaW9uOiAoKSA9PiBBaSwKICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnZpc2libHlTbWFsbEVsZW1lbnQ6ICgpID0+IFpyLAogICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZXM6ICgpID0+IGIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RvcmU6ICgpID0+IEV1LAogICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlQXBwU3RhdGU6ICgpID0+IHh1LAogICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlRWxlbWVudHM6ICgpID0+IHd1LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVBc0pTT046ICgpID0+IHV1CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuKDcxNTQpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5uKHIpLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gbig2NDc5KSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4ubihhKSwKICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4oOTcxMyksCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuLm4obCksCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBuKDQ2OTgpLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gbi5uKGMpLAogICAgICAgICAgICAgICAgICAgICAgICBkID0gbig4Mjg4KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gSlNPTi5wYXJzZSgneyJ1MiI6IkBleGNhbGlkcmF3L2V4Y2FsaWRyYXciLCJpOCI6IjAuOC4wIn0nKTsKICAgICAgICAgICAgICAgICAgICAicHJvZHVjdGlvbiIgIT09IGQuVmkuVEVTVCAmJiAobi5wID0gd2luZG93LkVYQ0FMSURSQVdfQVNTRVRfUEFUSCB8fCAiaHR0cHM6Ly91bnBrZy5jb20vIi5jb25jYXQocC51MiwgIkAiKS5jb25jYXQocC5pOCwgIi9kaXN0LyIpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IG4oNjA4NiksCiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBuKDI4MjkpLAogICAgICAgICAgICAgICAgICAgICAgICBtID0gbigyMDUxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIG9bMF0pIHRocm93IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogbCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm46IGwoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoYVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGk7KSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gMSwgciAmJiAobyA9IDIgJiBhWzBdID8gci5yZXR1cm4gOiBhWzBdID8gci50aHJvdyB8fCAoKG8gPSByLnJldHVybikgJiYgby5jYWxsKHIpLCAwKSA6IHIubmV4dCkgJiYgIShvID0gby5jYWxsKHIsIGFbMV0pKS5kb25lKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSAwLCBvICYmIChhID0gWzIgJiBhWzBdLCBvLnZhbHVlXSksIGFbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwrKywgciA9IGFbMV0sIGEgPSBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gPSBpLnRyeXMsIChvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgfHwgNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gYVswXSAmJiAoIW8gfHwgYVsxXSA+IG9bMF0gJiYgYVsxXSA8IG9bM10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBvWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMV0sIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBpLmxhYmVsIDwgb1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzJdLCBpLm9wcy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFs2LCBlXSwgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNSAmIGFbMF0pIHRocm93IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFthLCBsXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJFbmdsaXNoIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBiID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJhci1TQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogItin2YTYudix2KjZitipIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ0bDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImJnLUJHIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAi0JHRitC70LPQsNGA0YHQutC4IgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiY2EtRVMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJDYXRhbMOgIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZGUtREUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJEZXV0c2NoIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZWwtR1IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLOlc67zrvOt869zrnOus6sIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZXMtRVMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJFc3Bhw7FvbCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImZhLUlSIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAi2YHYp9ix2LPbjCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydGw6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJmaS1GSSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlN1b21pIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZnItRlIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJGcmFuw6dhaXMiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJoZS1JTCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogItei15HXqNeZ16oiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnRsOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiaGktSU4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLgpLngpL/gpKjgpY3gpKbgpYAiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJodS1IVSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIk1hZ3lhciIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImlkLUlEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQmFoYXNhIEluZG9uZXNpYSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIml0LUlUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSXRhbGlhbm8iCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJqYS1KUCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIuaXpeacrOiqniIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImthYi1LQUIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJUYXFiYXlsaXQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJrby1LUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIu2VnOq1reyWtCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm15LU1NIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQnVybWVzZSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm5iLU5PIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTm9yc2sgYm9rbcOlbCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm5sLU5MIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTmVkZXJsYW5kcyIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm5uLU5PIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTm9yc2sgbnlub3JzayIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm9jLUZSIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiT2NjaXRhbiIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInBhLUlOIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAi4Kiq4Kmw4Kic4Ki+4Kis4KmAIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAicGwtUEwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJQb2xza2kiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJwdC1CUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlBvcnR1Z3XDqnMgQnJhc2lsZWlybyIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInB0LVBUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiUG9ydHVndcOqcyIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInJvLVJPIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiUm9tw6JuxIMiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJydS1SVSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogItCg0YPRgdGB0LrQuNC5IgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAic2stU0siLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJTbG92ZW7EjWluYSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInN2LVNFIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiU3ZlbnNrYSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInRyLVRSIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVMO8cmvDp2UiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ1ay1VQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogItCj0LrRgNCw0ZfQvdGB0YzQutCwIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiemgtQ04iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLnroDkvZPkuK3mlociCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ6aC1UVyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIue5gemrlOS4reaWhyIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImx2LUxWIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGF0dmllxaF1IgogICAgICAgICAgICAgICAgICAgICAgICB9XS5jb25jYXQoW3ZdKS5zb3J0KChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5sYWJlbCA+IHQubGFiZWwgPyAxIDogLTEKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1bZS5jb2RlXSA+PSA4NQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiX190ZXN0X18iOwogICAgICAgICAgICAgICAgICAgICJwcm9kdWN0aW9uIiA9PT0gZC5WaS5ERVZFTE9QTUVOVCAmJiBiLnVuc2hpZnQoewogICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiB5LAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogInRlc3QgbGFuZ3VhZ2UiCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiIi5jb25jYXQoeSwgIi5ydGwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLigKp0ZXN0IGxhbmd1YWdlIChydGwp4oCsIiwKICAgICAgICAgICAgICAgICAgICAgICAgcnRsOiAhMAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB3LCB4ID0gdiwKICAgICAgICAgICAgICAgICAgICAgICAgRSA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcodGhpcywgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0LmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggPSBlLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlyID0geC5ydGwgPyAicnRsIiA6ICJsdHIiLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyA9IHguY29kZSwgZS5jb2RlLnN0YXJ0c1dpdGgoeSkgPyAoRSA9IHt9LCBbMywgM10pIDogWzMsIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgbig3ODgpKCIuLyIuY29uY2F0KHguY29kZSwgIi5qc29uIikpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gdC5zZW50KCksIHQubGFiZWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgUyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBlW3JdKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGVbcl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LmNvZGUuc3RhcnRzV2l0aCh5KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdCA/ICIiLmNvbmNhdChlLCAiKCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeSh0KS5zbGljZSgxLCAtMSksICIpIikgOiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAi4oCqW1siLmNvbmNhdChuLCAiXV3igKwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLnNwbGl0KCIuIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IEMoRSwgcikgfHwgQyhmLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG8pIHRocm93IG5ldyBFcnJvcigiQ2FuJ3QgZmluZCB0cmFuc2xhdGlvbiBmb3IgIi5jb25jYXQoZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0KSBvID0gby5yZXBsYWNlKCJ7eyIuY29uY2F0KGEsICJ9fSIpLCB0W2FdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkxvYWRpbmdNZXNzYWdlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBPKCJsYWJlbHMubG9hZGluZ1NjZW5lIikpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQID0gKHcgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHcgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3Byb3RvX186IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLl9fcHJvdG9fXyA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHx8IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgKGVbbl0gPSB0W25dKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpIHRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIiArIFN0cmluZyh0KSArICIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcoZSwgdCksIGUucHJvdG90eXBlID0gbnVsbCA9PT0gdCA/IE9iamVjdC5jcmVhdGUodCkgOiAobi5wcm90b3R5cGUgPSB0LnByb3RvdHlwZSwgbmV3IG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBJID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIG8sIGEsIGkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxICYgb1swXSkgdGhyb3cgb1sxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9bMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBsKDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93OiBsKDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjogbCgyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIChhW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaTspIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSAxLCByICYmIChvID0gMiAmIGFbMF0gPyByLnJldHVybiA6IGFbMF0gPyByLnRocm93IHx8ICgobyA9IHIucmV0dXJuKSAmJiBvLmNhbGwociksIDApIDogci5uZXh0KSAmJiAhKG8gPSBvLmNhbGwociwgYVsxXSkpLmRvbmUpIHJldHVybiBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAociA9IDAsIG8gJiYgKGEgPSBbMiAmIGFbMF0sIG8udmFsdWVdKSwgYVswXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmxhYmVsKyssIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCsrLCByID0gYVsxXSwgYSA9IFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gaS5vcHMucG9wKCksIGkudHJ5cy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobyA9IGkudHJ5cywgKG8gPSBvLmxlbmd0aCA+IDAgJiYgb1tvLmxlbmd0aCAtIDFdKSB8fCA2ICE9PSBhWzBdICYmIDIgIT09IGFbMF0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzID09PSBhWzBdICYmICghbyB8fCBhWzFdID4gb1swXSAmJiBhWzFdIDwgb1szXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gYVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDYgPT09IGFbMF0gJiYgaS5sYWJlbCA8IG9bMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1sxXSwgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGkubGFiZWwgPCBvWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMl0sIGkub3BzLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bMl0gJiYgaS5vcHMucG9wKCksIGkudHJ5cy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmNhbGwoZSwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gWzYsIGVdLCByID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbyA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg1ICYgYVswXSkgdGhyb3cgYVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMF0gPyBhWzFdIDogdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oW2EsIGxdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IFtdLCBuID0gMDsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKykgdFtuXSA9IGFyZ3VtZW50c1tuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgbyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSBvID0gZS5hcHBseSh0aGlzLCB0KSB8fCB0aGlzLCBvLnN0YXRlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAodCwgZSksIHQucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgaC5aKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSSh0aGlzLCAoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IGIuZmluZCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY29kZSA9PT0gZS5wcm9wcy5sYW5nQ29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgfHwgdiwgWzQsIGsodCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2VudCgpLCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaXNMb2FkaW5nID8gdSgpLmNyZWF0ZUVsZW1lbnQoTSwgbnVsbCkgOiB0aGlzLnByb3BzLmNoaWxkcmVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0odSgpLkNvbXBvbmVudCk7CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEwoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogZVt0XSA9IG4sIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEEoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3IsIG9dID0gdCwgYSA9IE1hdGguUEkgLyAxODAgKiBuLCBpID0gTWF0aC5jb3MoYSksIGwgPSBNYXRoLnNpbihhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3QsIG5dID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlWzBdID0gKHQgLSByKSAqIGkgLSAobiAtIG8pICogbCArIHIsIGVbMV0gPSAodCAtIHIpICogbCArIChuIC0gbykgKiBpICsgbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF8oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHRbMF0gLSBuWzBdLCAyKSArIE1hdGgucG93KHRbMV0gLSBuWzFdLCAyKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEQoZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gdFsxXSAtIGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZVswXSAtIHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbyAqIGVbMF0gKyBhICogZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSByWzFdIC0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuWzBdIC0gclswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBsICogblswXSArIHMgKiBuWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IG8gKiBzIC0gbCAqIGE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID8gWyhzICogaSAtIGEgKiBjKSAvIHUsIChvICogYyAtIGwgKiBpKSAvIHVdIDogbnVsbAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPCAzKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIG5dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFt0LCBuXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGVbdF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGVbKHQgKyAxKSAlIHJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEgobiwgbCwgYSwgbykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gQihuLCBhLCBsKSkgcmV0dXJuIHoobiwgYSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJSAyID09IDEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHooZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFswXSA8PSBNYXRoLm1heChlWzBdLCBuWzBdKSAmJiB0WzBdID49IE1hdGgubWluKGVbMF0sIG5bMF0pICYmIHRbMV0gPD0gTWF0aC5tYXgoZVsxXSwgblsxXSkgJiYgdFsxXSA+PSBNYXRoLm1pbihlWzFdLCBuWzFdKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAodFsxXSAtIGVbMV0pICogKG5bMF0gLSB0WzBdKSAtICh0WzBdIC0gZVswXSkgKiAoblsxXSAtIHRbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gciA/IDAgOiByID4gMCA/IDEgOiAyCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IEIoZSwgdCwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gQihlLCB0LCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBCKG4sIHIsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IEIobiwgciwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvICE9PSBhICYmIGkgIT09IGwgfHwgKCEoMCAhPT0gbyB8fCAheihlLCBuLCB0KSkgfHwgKCEoMCAhPT0gYSB8fCAheihlLCByLCB0KSkgfHwgKCEoMCAhPT0gaSB8fCAheihuLCBlLCByKSkgfHwgISgwICE9PSBsIHx8ICF6KG4sIHQsIHIpKSkpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbMCwgMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gTWF0aC5yb3VuZCh0LmhhY2h1cmVBbmdsZSArIDkwKTsKICAgICAgICAgICAgICAgICAgICAgICAgciAmJiBBKGUsIG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IFsuLi5lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bMF0uam9pbigiLCIpICE9PSBuW24ubGVuZ3RoIC0gMV0uam9pbigiLCIpICYmIG4ucHVzaChbblswXVswXSwgblswXVsxXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gJiYgbi5sZW5ndGggPiAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSB0LmhhY2h1cmVHYXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA8IDAgJiYgKGUgPSA0ICogdC5zdHJva2VXaWR0aCksIGUgPSBNYXRoLm1heChlLCAuMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggLSAxOyBlKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5bZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbltlICsgMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0WzFdICE9PSByWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gTWF0aC5taW4odFsxXSwgclsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHltaW46IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeW1heDogTWF0aC5tYXgodFsxXSwgclsxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZSA9PT0gdFsxXSA/IHRbMF0gOiByWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzbG9wZTogKHJbMF0gLSB0WzBdKSAvIChyWzFdIC0gdFsxXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc29ydCgoKGUsIHQpID0+IGUueW1pbiA8IHQueW1pbiA/IC0xIDogZS55bWluID4gdC55bWluID8gMSA6IGUueCA8IHQueCA/IC0xIDogZS54ID4gdC54ID8gMSA6IGUueW1heCA9PT0gdC55bWF4ID8gMCA6IChlLnltYXggLSB0LnltYXgpIC8gTWF0aC5hYnMoZS55bWF4IC0gdC55bWF4KSkpLCAhby5sZW5ndGgpIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvWzBdLnltaW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGEubGVuZ3RoIHx8IG8ubGVuZ3RoOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG8ubGVuZ3RoICYmICEob1t0XS55bWluID4gaSk7IHQrKykgZSA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnNwbGljZSgwLCBlICsgMSkuZm9yRWFjaCgoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZTogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA9IGEuZmlsdGVyKChlID0+ICEoZS5lZGdlLnltYXggPD0gaSkpKSwgYS5zb3J0KCgoZSwgdCkgPT4gZS5lZGdlLnggPT09IHQuZWRnZS54ID8gMCA6IChlLmVkZ2UueCAtIHQuZWRnZS54KSAvIE1hdGguYWJzKGUuZWRnZS54IC0gdC5lZGdlLngpKSksIGEubGVuZ3RoID4gMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYS5sZW5ndGg7IGUgKz0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA+PSBhLmxlbmd0aCkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGFbZV0uZWRnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGFbdF0uZWRnZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnB1c2goWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbTWF0aC5yb3VuZChuLngpLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW01hdGgucm91bmQoby54KSwgaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IGUsIGEuZm9yRWFjaCgodCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmVkZ2UueCA9IHQuZWRnZS54ICsgZSAqIHQuZWRnZS5pc2xvcGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgJiYgKEEoZSwgbiwgLXIpLCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4gci5wdXNoKC4uLmUpKSksIEEociwgdCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfShvLCBuLCAtcikpLCBvCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNsYXNzIFIgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBlciA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmaWxsUG9seWdvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlsbFBvbHlnb24oZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfZmlsbFBvbHlnb24oZSwgdCwgbiA9ICExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IE4oZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbm5lY3RpbmdMaW5lcyhlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gci5jb25jYXQodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImZpbGxTa2V0Y2giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogdGhpcy5yZW5kZXJMaW5lcyhyLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxpbmVzKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlKSBuLnB1c2goLi4udGhpcy5oZWxwZXIuZG91YmxlTGluZU9wcyhyWzBdWzBdLCByWzBdWzFdLCByWzFdWzBdLCByWzFdWzFdLCB0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RpbmdMaW5lcyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPiAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAxOyByIDwgdC5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gdFtyIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfKG8pIDwgMykgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBbdFtyXVswXSwgb1sxXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfKGEpID4gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuc3BsaXRPbkludGVyc2VjdGlvbnMoZSwgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goLi4udCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbWlkUG9pbnRJblBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGooZSwgKHRbMF1bMF0gKyB0WzFdWzBdKSAvIDIsICh0WzBdWzFdICsgdFsxXVsxXSkgLyAyKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0T25JbnRlcnNlY3Rpb25zKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBNYXRoLm1heCg1LCAuMSAqIF8odCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgZS5sZW5ndGg7IG8rKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBlW29dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZVsobyArIDEpICUgZS5sZW5ndGhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIKGEsIGksIC4uLnQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBEKGEsIGksIHRbMF0sIHRbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IF8oW2UsIHRbMF1dKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gXyhbZSwgdFsxXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA+IG4gJiYgYSA+IG4gJiYgci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gci5zb3J0KCgoZSwgdCkgPT4gZS5kaXN0YW5jZSAtIHQuZGlzdGFuY2UpKS5tYXAoKGUgPT4gZS5wb2ludCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqKGUsIC4uLnRbMF0pIHx8IG4uc2hpZnQoKSwgaihlLCAuLi50WzFdKSB8fCBuLnBvcCgpLCBuLmxlbmd0aCA8PSAxKSByZXR1cm4gdGhpcy5taWRQb2ludEluUG9seWdvbihlLCB0KSA/IFt0XSA6IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbdFswXSwgLi4ubiwgdFsxXV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG8ubGVuZ3RoIC0gMTsgdCArPSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbb1t0XSwgb1t0ICsgMV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pZFBvaW50SW5Qb2x5Z29uKGUsIG4pICYmIGEucHVzaChuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWlkUG9pbnRJblBvbHlnb24oZSwgdCkgPyBbdF0gOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNsYXNzIEYgZXh0ZW5kcyBSIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGxQb2x5Z29uKGUsIHQsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNsYXNzIFcgZXh0ZW5kcyBSIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2ZpbGxQb2x5Z29uKGUsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBPYmplY3QuYXNzaWduKHt9LCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhY2h1cmVBbmdsZTogdC5oYWNodXJlQW5nbGUgKyA5MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLl9maWxsUG9seWdvbihlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm9wcyA9IG4ub3BzLmNvbmNhdChvLm9wcyksIG4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjbGFzcyBWIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IE4oZSwgdCA9IE9iamVjdC5hc3NpZ24oe30sIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJ2ZVN0ZXBDb3VudDogNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYWNodXJlQW5nbGU6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb3RzT25MaW5lcyhuLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHNPbkxpbmVzKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gdC5oYWNodXJlR2FwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA8IDAgJiYgKHIgPSA0ICogdC5zdHJva2VXaWR0aCksIHIgPSBNYXRoLm1heChyLCAuMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHQuZmlsbFdlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPCAwICYmIChvID0gdC5zdHJva2VXaWR0aCAvIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHIgLyA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gXyhpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUgLyByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gTWF0aC5jZWlsKGwpIC0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUgLSBzICogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IChpWzBdWzBdICsgaVsxXVswXSkgLyAyIC0gciAvIDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBNYXRoLm1pbihpWzBdWzFdLCBpWzFdWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gZCArIGMgKyBlICogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLmhlbHBlci5yYW5kT2Zmc2V0V2l0aFJhbmdlKHUgLSBhLCB1ICsgYSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5oZWxwZXIucmFuZE9mZnNldFdpdGhSYW5nZShpIC0gYSwgaSArIGEsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHRoaXMuaGVscGVyLmVsbGlwc2UobCwgcywgbywgbywgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCguLi5wLm9wcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJmaWxsU2tldGNoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjbGFzcyBHIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IE4oZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJmaWxsU2tldGNoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IHRoaXMuZGFzaGVkTGluZShuLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hlZExpbmUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGFzaE9mZnNldCA8IDAgPyB0LmhhY2h1cmVHYXAgPCAwID8gNCAqIHQuc3Ryb2tlV2lkdGggOiB0LmhhY2h1cmVHYXAgOiB0LmRhc2hPZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuZGFzaEdhcCA8IDAgPyB0LmhhY2h1cmVHYXAgPCAwID8gNCAqIHQuc3Ryb2tlV2lkdGggOiB0LmhhY2h1cmVHYXAgOiB0LmRhc2hHYXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IF8oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBNYXRoLmZsb29yKGEgLyAobiArIHIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IChhICsgciAtIGkgKiAobiArIHIpKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzWzBdID4gY1swXSAmJiAocyA9IGVbMV0sIGMgPSBlWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1ID0gTWF0aC5hdGFuKChjWzFdIC0gc1sxXSkgLyAoY1swXSAtIHNbMF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGk7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gZSAqIChuICsgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYSArIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW3NbMF0gKyBhICogTWF0aC5jb3ModSkgKyBsICogTWF0aC5jb3ModSksIHNbMV0gKyBhICogTWF0aC5zaW4odSkgKyBsICogTWF0aC5zaW4odSldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFtzWzBdICsgaSAqIE1hdGguY29zKHUpICsgbCAqIE1hdGguY29zKHUpLCBzWzFdICsgaSAqIE1hdGguc2luKHUpICsgbCAqIE1hdGguc2luKHUpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKC4uLnRoaXMuaGVscGVyLmRvdWJsZUxpbmVPcHMoY1swXSwgY1sxXSwgZFswXSwgZFsxXSwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2xhc3MgSyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxQb2x5Z29uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmhhY2h1cmVHYXAgPCAwID8gNCAqIHQuc3Ryb2tlV2lkdGggOiB0LmhhY2h1cmVHYXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuemlnemFnT2Zmc2V0IDwgMCA/IG4gOiB0LnppZ3phZ09mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gTihlLCB0ID0gT2JqZWN0LmFzc2lnbih7fSwgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYWNodXJlR2FwOiBuICsgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImZpbGxTa2V0Y2giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogdGhpcy56aWd6YWdMaW5lcyhvLCByLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHppZ3phZ0xpbmVzKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBfKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5yb3VuZChvIC8gKDIgKiB0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWzBdID4gbFswXSAmJiAoaSA9IGVbMV0sIGwgPSBlWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gTWF0aC5hdGFuKChsWzFdIC0gaVsxXSkgLyAobFswXSAtIGlbMF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGE7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gMiAqIGUgKiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IDIgKiAoZSArIDEpICogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBNYXRoLnNxcnQoMiAqIE1hdGgucG93KHQsIDIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBbaVswXSArIG8gKiBNYXRoLmNvcyhzKSwgaVsxXSArIG8gKiBNYXRoLnNpbihzKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gW2lbMF0gKyBhICogTWF0aC5jb3MocyksIGlbMV0gKyBhICogTWF0aC5zaW4ocyldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFtjWzBdICsgbCAqIE1hdGguY29zKHMgKyBNYXRoLlBJIC8gNCksIGNbMV0gKyBsICogTWF0aC5zaW4ocyArIE1hdGguUEkgLyA0KV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaCguLi50aGlzLmhlbHBlci5kb3VibGVMaW5lT3BzKGNbMF0sIGNbMV0sIGRbMF0sIGRbMV0sIG4pLCAuLi50aGlzLmhlbHBlci5kb3VibGVMaW5lT3BzKGRbMF0sIGRbMV0sIHVbMF0sIHVbMV0sIG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgcgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFUgPSB7fTsKICAgICAgICAgICAgICAgICAgICBjbGFzcyBaIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWVkID0gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVkID8gKDIgKiogMzEgLSAxICYgKHRoaXMuc2VlZCA9IE1hdGguaW11bCg0ODI3MSwgdGhpcy5zZWVkKSkpIC8gMiAqKiAzMSA6IE1hdGgucmFuZG9tKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBZID0gewogICAgICAgICAgICAgICAgICAgICAgICBBOiA3LAogICAgICAgICAgICAgICAgICAgICAgICBhOiA3LAogICAgICAgICAgICAgICAgICAgICAgICBDOiA2LAogICAgICAgICAgICAgICAgICAgICAgICBjOiA2LAogICAgICAgICAgICAgICAgICAgICAgICBIOiAxLAogICAgICAgICAgICAgICAgICAgICAgICBoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICBMOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBsOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBNOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBtOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBROiA0LAogICAgICAgICAgICAgICAgICAgICAgICBxOiA0LAogICAgICAgICAgICAgICAgICAgICAgICBTOiA0LAogICAgICAgICAgICAgICAgICAgICAgICBzOiA0LAogICAgICAgICAgICAgICAgICAgICAgICBUOiAyLAogICAgICAgICAgICAgICAgICAgICAgICB0OiAyLAogICAgICAgICAgICAgICAgICAgICAgICBWOiAxLAogICAgICAgICAgICAgICAgICAgICAgICB2OiAxLAogICAgICAgICAgICAgICAgICAgICAgICBaOiAwLAogICAgICAgICAgICAgICAgICAgICAgICB6OiAwCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnR5cGUgPT09IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHEoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgQXJyYXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIiICE9PSBlOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubWF0Y2goL14oWyBcdFxyXG4sXSspLykpIGUgPSBlLnN1YnN0cihSZWdFeHAuJDEubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5tYXRjaCgvXihbYUFjQ2hIbExtTXFRc1N0VHZWelpdKS8pKSB0W3QubGVuZ3RoXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVnRXhwLiQxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSA9IGUuc3Vic3RyKFJlZ0V4cC4kMS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUubWF0Y2goL14oKFstK10/WzAtOV0rKFwuWzAtOV0qKT98Wy0rXT9cLlswLTldKykoW2VFXVstK10/WzAtOV0rKT8pLykpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFt0Lmxlbmd0aF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7cGFyc2VGbG9hdChSZWdFeHAuJDEpfWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSA9IGUuc3Vic3RyKFJlZ0V4cC4kMS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0W3QubGVuZ3RoXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICJCT0QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbltvXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICFYKGEsIDIpOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJCT0QiID09PSByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJNIiAhPT0gYS50ZXh0ICYmICJtIiAhPT0gYS50ZXh0KSByZXR1cm4gcSgiTTAsMCIgKyBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKyssIGkgPSBZW2EudGV4dF0sIHIgPSBhLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBYKGEsIDEpID8gaSA9IFlbcl0gOiAobysrLCBpID0gWVthLnRleHRdLCByID0gYS50ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gKyBpIDwgbi5sZW5ndGgpKSB0aHJvdyBuZXcgRXJyb3IoIlBhdGggZGF0YSBlbmRlZCBzaG9ydCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IG87IGUgPCBvICsgaTsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5bZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFYKHQsIDEpKSB0aHJvdyBuZXcgRXJyb3IoIlBhcmFtIG5vdCBhIG51bWJlcjogIiArIHIgKyAiLCIgKyB0LnRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGhdID0gK3QudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJudW1iZXIiICE9IHR5cGVvZiBZW3JdKSB0aHJvdyBuZXcgRXJyb3IoIkJhZCBzZWdtZW50OiAiICsgcik7IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChlKSwgbyArPSBpLCBhID0gbltvXSwgIk0iID09PSByICYmIChyID0gIkwiKSwgIm0iID09PSByICYmIChyID0gImwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBRKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IG9mIGUpIHN3aXRjaCAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiTSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFsuLi5sXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbdCwgbl0gPSBsLCBbciwgb10gPSBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCArPSBsWzBdLCBuICs9IGxbMV0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIk0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbdCwgbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgciA9IHQsIG8gPSBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiTCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFsuLi5sXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbdCwgbl0gPSBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCArPSBsWzBdLCBuICs9IGxbMV0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbdCwgbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbNF0sIG4gPSBsWzVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbC5tYXAoKChlLCByKSA9PiByICUgMiA/IGUgKyBuIDogZSArIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJDIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0ID0gZVs0XSwgbiA9IGVbNV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbMl0sIG4gPSBsWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbC5tYXAoKChlLCByKSA9PiByICUgMiA/IGUgKyBuIDogZSArIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJRIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0ID0gZVsyXSwgbiA9IGVbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbNV0sIG4gPSBsWzZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCArPSBsWzVdLCBuICs9IGxbNl0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbbFswXSwgbFsxXSwgbFsyXSwgbFszXSwgbFs0XSwgdCwgbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJoIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICs9IGxbMF0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbdF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlYiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbiA9IGxbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ2IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICs9IGxbMF0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbMl0sIG4gPSBsWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbC5tYXAoKChlLCByKSA9PiByICUgMiA/IGUgKyBuIDogZSArIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJTIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0ID0gZVsyXSwgbiA9IGVbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbLi4ubF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IGxbMF0sIG4gPSBsWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCArPSBsWzBdLCBuICs9IGxbMV0sIGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIlQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbdCwgbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIloiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAieiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiWiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQgPSByLCBuID0gbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAkKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIk0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogWy4uLnVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbciwgb10gPSB1LCBbYSwgaV0gPSB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogWy4uLnVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByID0gdVs0XSwgbyA9IHVbNV0sIGwgPSB1WzJdLCBzID0gdVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJMIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFsuLi51XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW3IsIG9dID0gdTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiSCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB1WzBdLCB0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiTCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbciwgb10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlYiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdVswXSwgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW3IsIG9dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJTIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkMiID09PSBuIHx8ICJTIiA9PT0gbiA/IChlID0gciArIChyIC0gbCksIGEgPSBvICsgKG8gLSBzKSkgOiAoZSA9IHIsIGEgPSBvKSwgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2UsIGEsIC4uLnVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBsID0gdVswXSwgcyA9IHVbMV0sIHIgPSB1WzJdLCBvID0gdVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiVCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2UsIGFdID0gdTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJRIiA9PT0gbiB8fCAiVCIgPT09IG4gPyAoaSA9IHIgKyAociAtIGwpLCBjID0gbyArIChvIC0gcykpIDogKGkgPSByLCBjID0gbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSByICsgMiAqIChpIC0gcikgLyAzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IG8gKyAyICogKGMgLSBvKSAvIDMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZSArIDIgKiAoaSAtIGUpIC8gMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBhICsgMiAqIChjIC0gYSkgLyAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiQyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbZCwgcCwgaCwgZiwgZSwgYV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGwgPSBpLCBzID0gYywgciA9IGUsIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbZSwgbiwgYSwgaV0gPSB1LCBjID0gciArIDIgKiAoZSAtIHIpIC8gMywgZCA9IG8gKyAyICogKG4gLSBvKSAvIDMsIHAgPSBhICsgMiAqIChlIC0gYSkgLyAzLCBoID0gaSArIDIgKiAobiAtIGkpIC8gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2MsIGQsIHAsIGgsIGEsIGldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBsID0gZSwgcyA9IG4sIHIgPSBhLCBvID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiQSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IE1hdGguYWJzKHVbMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE1hdGguYWJzKHVbMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHVbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB1WzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHVbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdVs2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IGUgfHwgMCA9PT0gbikgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW3IsIG8sIHMsIGMsIHMsIGNdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByID0gcywgbyA9IGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHIgIT09IHMgfHwgbyAhPT0gYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWUociwgbywgcywgYywgZSwgbiwgYSwgaSwgbCkuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgciA9IHMsIG8gPSBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByID0gYSwgbyA9IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBjCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEooZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2UgKiBNYXRoLmNvcyhuKSAtIHQgKiBNYXRoLnNpbihuKSwgZSAqIE1hdGguc2luKG4pICsgdCAqIE1hdGguY29zKG4pXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZWUoZSwgdCwgbiwgciwgbywgYSwgaSwgbCwgcywgYykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1ID0gKGQgPSBpLCBNYXRoLlBJICogZCAvIDE4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKVtoLCBmLCBtLCBnXSA9IGM7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UsIHRdID0gSihlLCB0LCAtdSksIFtuLCByXSA9IEoobiwgciwgLXUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IChlIC0gbikgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAodCAtIHIpIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gaSAqIGkgLyAobyAqIG8pICsgYyAqIGMgLyAoYSAqIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA+IDEgJiYgKGQgPSBNYXRoLnNxcnQoZCksIG8gKj0gZCwgYSAqPSBkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBvICogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gYSAqIGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHAgKiB2IC0gcCAqIGMgKiBjIC0gdiAqIGkgKiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBwICogYyAqIGMgKyB2ICogaSAqIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IChsID09PSBzID8gLTEgOiAxKSAqIE1hdGguc3FydChNYXRoLmFicyhiIC8geSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHcgKiBvICogYyAvIGEgKyAoZSArIG4pIC8gMiwgZyA9IHcgKiAtYSAqIGkgLyBvICsgKHQgKyByKSAvIDIsIGggPSBNYXRoLmFzaW4ocGFyc2VGbG9hdCgoKHQgLSBnKSAvIGEpLnRvRml4ZWQoOSkpKSwgZiA9IE1hdGguYXNpbihwYXJzZUZsb2F0KCgociAtIGcpIC8gYSkudG9GaXhlZCg5KSkpLCBlIDwgbSAmJiAoaCA9IE1hdGguUEkgLSBoKSwgbiA8IG0gJiYgKGYgPSBNYXRoLlBJIC0gZiksIGggPCAwICYmIChoID0gMiAqIE1hdGguUEkgKyBoKSwgZiA8IDAgJiYgKGYgPSAyICogTWF0aC5QSSArIGYpLCBzICYmIGggPiBmICYmIChoIC09IDIgKiBNYXRoLlBJKSwgIXMgJiYgZiA+IGggJiYgKGYgLT0gMiAqIE1hdGguUEkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHYgPSBmIC0gaDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHYpID4gMTIwICogTWF0aC5QSSAvIDE4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gcyAmJiBmID4gaCA/IGggKyAxMjAgKiBNYXRoLlBJIC8gMTgwICogMSA6IGggKyAxMjAgKiBNYXRoLlBJIC8gMTgwICogLTEsIHAgPSBlZShuID0gbSArIG8gKiBNYXRoLmNvcyhmKSwgciA9IGcgKyBhICogTWF0aC5zaW4oZiksIHQsIGwsIG8sIGEsIGksIDAsIHMsIFtmLCBlLCBtLCBnXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2ID0gZiAtIGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBNYXRoLmNvcyhoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLnNpbihoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNYXRoLmNvcyhmKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBNYXRoLnNpbihmKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBNYXRoLnRhbih2IC8gNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gNCAvIDMgKiBvICogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSA0IC8gMyAqIGEgKiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IFtlLCB0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8gPSBbZSArIGsgKiB5LCB0IC0gUyAqIGJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTSA9IFtuICsgayAqIHgsIHIgLSBTICogd10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQID0gW24sIHJdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT1swXSA9IDIgKiBDWzBdIC0gT1swXSwgT1sxXSA9IDIgKiBDWzFdIC0gT1sxXSwgYykgcmV0dXJuIFtPLCBNLCBQXS5jb25jYXQocCk7IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBbTywgTSwgUF0uY29uY2F0KHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBwLmxlbmd0aDsgdCArPSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEoocFt0XVswXSwgcFt0XVsxXSwgdSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBKKHBbdCArIDFdWzBdLCBwW3QgKyAxXVsxXSwgdSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBKKHBbdCArIDJdWzBdLCBwW3QgKyAyXVsxXSwgdSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKFtuWzBdLCBuWzFdLCByWzBdLCByWzFdLCBvWzBdLCBvWzFdXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRPZmZzZXQ6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoZShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByYW5kT2Zmc2V0V2l0aFJhbmdlOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGUoZSwgdCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZWxsaXBzZTogZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IGllKG4sIHIsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlKGUsIHQsIG8sIGEpLm9wc2V0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZUxpbmVPcHM6IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZShlLCB0LCBuLCByLCBvLCAhMCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5lKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJwYXRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogZmUoZSwgdCwgbiwgciwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmUoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gKGUgfHwgW10pLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPiAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIgLSAxOyB0KyspIG8ucHVzaCguLi5mZShlW3RdWzBdLCBlW3RdWzFdLCBlW3QgKyAxXVswXSwgZVt0ICsgMV1bMV0sIG4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIG8ucHVzaCguLi5mZShlW3IgLSAxXVswXSwgZVtyIC0gMV1bMV0sIGVbMF1bMF0sIGVbMF1bMV0sIG4pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJwYXRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMiA9PT0gciA/IG5lKGVbMF1bMF0sIGVbMF1bMV0sIGVbMV1bMF0sIGVbMV1bMV0sIG4pIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInBhdGgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvZShlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmUoZSwgITAsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0oWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UsIHRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UgKyBuLCB0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlICsgbiwgdCArIHJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UsIHQgKyByXQogICAgICAgICAgICAgICAgICAgICAgICBdLCBvKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGdlKGUsIDEgKiAoMSArIC4yICogdC5yb3VnaG5lc3MpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0LmRpc2FibGVNdWx0aVN0cm9rZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGdlKGUsIDEuNSAqICgxICsgLjIyICogdC5yb3VnaG5lc3MpLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IE9iamVjdC5hc3NpZ24oe30sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucmFuZG9taXplciA9IHZvaWQgMCwgZS5zZWVkICYmICh0LnNlZWQgPSBlLnNlZWQgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbi5jb25jYXQocikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInBhdGgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGllKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IE1hdGguc3FydCgyICogTWF0aC5QSSAqIE1hdGguc3FydCgoTWF0aC5wb3coZSAvIDIsIDIpICsgTWF0aC5wb3codCAvIDIsIDIpKSAvIDIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLm1heChuLmN1cnZlU3RlcENvdW50LCBuLmN1cnZlU3RlcENvdW50IC8gTWF0aC5zcXJ0KDIwMCkgKiByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAyICogTWF0aC5QSSAvIG87CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gTWF0aC5hYnMoZSAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IE1hdGguYWJzKHQgLyAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IDEgLSBuLmN1cnZlRml0dGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgKz0gaGUoaSAqIHMsIG4pLCBsICs9IGhlKGwgKiBzLCBuKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50OiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcng6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByeTogbAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsZShlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtvLCBhXSA9IGJlKHIuaW5jcmVtZW50LCBlLCB0LCByLnJ4LCByLnJ5LCAxLCByLmluY3JlbWVudCAqIHBlKC4xLCBwZSguNCwgMSwgbiksIG4pLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSB2ZShvLCBudWxsLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuLmRpc2FibGVNdWx0aVN0cm9rZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW29dID0gYmUoci5pbmNyZW1lbnQsIGUsIHQsIHIucngsIHIucnksIDEuNSwgMCwgbiksIGEgPSB2ZShvLCBudWxsLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpLmNvbmNhdChhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRQb2ludHM6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNldDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJwYXRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2UoZSwgdCwgbiwgciwgbywgYSwgaSwgbCwgcykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZCA9IE1hdGguYWJzKG4gLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBNYXRoLmFicyhyIC8gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGQgKz0gaGUoLjAxICogZCwgcyksIHAgKz0gaGUoLjAxICogcCwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoID0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBhOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaCA8IDA7KSBoICs9IDIgKiBNYXRoLlBJLCBmICs9IDIgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICBmIC0gaCA+IDIgKiBNYXRoLlBJICYmIChoID0gMCwgZiA9IDIgKiBNYXRoLlBJKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IDIgKiBNYXRoLlBJIC8gcy5jdXJ2ZVN0ZXBDb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBNYXRoLm1pbihtIC8gMiwgKGYgLSBoKSAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHllKGcsIGMsIHUsIGQsIHAsIGgsIGYsIDEsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMuZGlzYWJsZU11bHRpU3Ryb2tlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0geWUoZywgYywgdSwgZCwgcCwgaCwgZiwgMS41LCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYucHVzaCguLi5lKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpICYmIChsID8gdi5wdXNoKC4uLmZlKGMsIHUsIGMgKyBkICogTWF0aC5jb3MoaCksIHUgKyBwICogTWF0aC5zaW4oaCksIHMpLCAuLi5mZShjLCB1LCBjICsgZCAqIE1hdGguY29zKGYpLCB1ICsgcCAqIE1hdGguc2luKGYpLCBzKSkgOiB2LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJsaW5lVG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2MsIHVdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibGluZVRvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtjICsgZCAqIE1hdGguY29zKGgpLCB1ICsgcCAqIE1hdGguc2luKGgpXQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJwYXRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogdgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjZShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gdC5tYXhSYW5kb21uZXNzT2Zmc2V0IHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPiAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJtb3ZlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2VbMF1bMF0gKyBoZShyLCB0KSwgZVswXVsxXSArIGhlKHIsIHQpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgPSAxOyBhIDwgbzsgYSsrKSBuLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogImxpbmVUbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtlW2FdWzBdICsgaGUociwgdCksIGVbYV1bMV0gKyBoZShyLCB0KV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZmlsbFBhdGgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVlKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gZS5maWxsU3R5bGUgfHwgImhhY2h1cmUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFVW25dKSBzd2l0Y2ggKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ6aWd6YWciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVW25dIHx8IChVW25dID0gbmV3IEYodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJjcm9zcy1oYXRjaCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVbbl0gfHwgKFVbbl0gPSBuZXcgVyh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRvdHMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVW25dIHx8IChVW25dID0gbmV3IFYodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJkYXNoZWQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVW25dIHx8IChVW25dID0gbmV3IEcodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ6aWd6YWctbGluZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVbbl0gfHwgKFVbbl0gPSBuZXcgSyh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImhhY2h1cmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAiaGFjaHVyZSIsIFVbbl0gfHwgKFVbbl0gPSBuZXcgUih0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVW25dCiAgICAgICAgICAgICAgICAgICAgICAgIH0odCwgdGUpLmZpbGxQb2x5Z29uKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZShlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJhbmRvbWl6ZXIgfHwgKGUucmFuZG9taXplciA9IG5ldyBaKGUuc2VlZCB8fCAwKSksIGUucmFuZG9taXplci5uZXh0KCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBlKGUsIHQsIG4sIHIgPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnJvdWdobmVzcyAqIHIgKiAoZGUobikgKiAodCAtIGUpICsgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhlKGUsIHQsIG4gPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwZSgtZSwgZSwgdCwgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZlKGUsIHQsIG4sIHIsIG8sIGEgPSAhMSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gYSA/IG8uZGlzYWJsZU11bHRpU3Ryb2tlRmlsbCA6IG8uZGlzYWJsZU11bHRpU3Ryb2tlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG1lKGUsIHQsIG4sIHIsIG8sICEwLCAhMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gbDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG1lKGUsIHQsIG4sIHIsIG8sICEwLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLmNvbmNhdChzKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbWUoZSwgdCwgbiwgciwgbywgYSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gTWF0aC5wb3coZSAtIG4sIDIpICsgTWF0aC5wb3codCAtIHIsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IE1hdGguc3FydChsKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBjID0gcyA8IDIwMCA/IDEgOiBzID4gNTAwID8gLjQgOiAtLjAwMTY2NjggKiBzICsgMS4yMzMzMzQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1ID0gby5tYXhSYW5kb21uZXNzT2Zmc2V0IHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHUgKiB1ICogMTAwID4gbCAmJiAodSA9IHMgLyAxMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB1IC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAuMiArIC4yICogZGUobyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoID0gby5ib3dpbmcgKiBvLm1heFJhbmRvbW5lc3NPZmZzZXQgKiAociAtIHQpIC8gMjAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IG8uYm93aW5nICogby5tYXhSYW5kb21uZXNzT2Zmc2V0ICogKGUgLSBuKSAvIDIwMDsKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGhlKGgsIG8sIGMpLCBmID0gaGUoZiwgbywgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSAoKSA9PiBoZShkLCBvLCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAoKSA9PiBoZSh1LCBvLCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBvLnByZXNlcnZlVmVydGljZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICYmIChpID8gbS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibW92ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbZSArIChiID8gMCA6IGcoKSksIHQgKyAoYiA/IDAgOiBnKCkpXQogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IG0ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogIm1vdmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2UgKyAoYiA/IDAgOiBoZSh1LCBvLCBjKSksIHQgKyAoYiA/IDAgOiBoZSh1LCBvLCBjKSldCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgaSA/IG0ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogImJjdXJ2ZVRvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtoICsgZSArIChuIC0gZSkgKiBwICsgZygpLCBmICsgdCArIChyIC0gdCkgKiBwICsgZygpLCBoICsgZSArIDIgKiAobiAtIGUpICogcCArIGcoKSwgZiArIHQgKyAyICogKHIgLSB0KSAqIHAgKyBnKCksIG4gKyAoYiA/IDAgOiBnKCkpLCByICsgKGIgPyAwIDogZygpKV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBtLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJiY3VydmVUbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbaCArIGUgKyAobiAtIGUpICogcCArIHYoKSwgZiArIHQgKyAociAtIHQpICogcCArIHYoKSwgaCArIGUgKyAyICogKG4gLSBlKSAqIHAgKyB2KCksIGYgKyB0ICsgMiAqIChyIC0gdCkgKiBwICsgdigpLCBuICsgKGIgPyAwIDogdigpKSwgciArIChiID8gMCA6IHYoKSldCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBtCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZShlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKFtlWzBdWzBdICsgaGUodCwgbiksIGVbMF1bMV0gKyBoZSh0LCBuKV0pLCByLnB1c2goW2VbMF1bMF0gKyBoZSh0LCBuKSwgZVswXVsxXSArIGhlKHQsIG4pXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG8gPSAxOyBvIDwgZS5sZW5ndGg7IG8rKykgci5wdXNoKFtlW29dWzBdICsgaGUodCwgbiksIGVbb11bMV0gKyBoZSh0LCBuKV0pLCBvID09PSBlLmxlbmd0aCAtIDEgJiYgci5wdXNoKFtlW29dWzBdICsgaGUodCwgbiksIGVbb11bMV0gKyBoZSh0LCBuKV0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmUociwgbnVsbCwgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZlKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGUubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAociA+IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMSAtIG4uY3VydmVUaWdodG5lc3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibW92ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW2VbMV1bMF0sIGVbMV1bMV1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAxOyB0ICsgMiA8IHI7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlW3RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbMF0gPSBbblswXSwgblsxXV0sIGFbMV0gPSBbblswXSArIChpICogZVt0ICsgMV1bMF0gLSBpICogZVt0IC0gMV1bMF0pIC8gNiwgblsxXSArIChpICogZVt0ICsgMV1bMV0gLSBpICogZVt0IC0gMV1bMV0pIC8gNl0sIGFbMl0gPSBbZVt0ICsgMV1bMF0gKyAoaSAqIGVbdF1bMF0gLSBpICogZVt0ICsgMl1bMF0pIC8gNiwgZVt0ICsgMV1bMV0gKyAoaSAqIGVbdF1bMV0gLSBpICogZVt0ICsgMl1bMV0pIC8gNl0sIGFbM10gPSBbZVt0ICsgMV1bMF0sIGVbdCArIDFdWzFdXSwgby5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJiY3VydmVUbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFthWzFdWzBdLCBhWzFdWzFdLCBhWzJdWzBdLCBhWzJdWzFdLCBhWzNdWzBdLCBhWzNdWzFdXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiAyID09PSB0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLm1heFJhbmRvbW5lc3NPZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJsaW5lVG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbdFswXSArIGhlKGUsIG4pLCB0WzFdICsgaGUoZSwgbildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIDMgPT09IHIgPyAoby5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibW92ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbZVsxXVswXSwgZVsxXVsxXV0KICAgICAgICAgICAgICAgICAgICAgICAgfSksIG8ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogImJjdXJ2ZVRvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtlWzFdWzBdLCBlWzFdWzFdLCBlWzJdWzBdLCBlWzJdWzFdLCBlWzJdWzBdLCBlWzJdWzFdXQogICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiAyID09PSByICYmIG8ucHVzaCguLi5mZShlWzBdWzBdLCBlWzBdWzFdLCBlWzFdWzBdLCBlWzFdWzFdLCBuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBiZShlLCB0LCBuLCByLCBvLCBhLCBpLCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBoZSguNSwgbCkgLSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKFtoZShhLCBsKSArIHQgKyAuOSAqIHIgKiBNYXRoLmNvcyh1IC0gZSksIGhlKGEsIGwpICsgbiArIC45ICogbyAqIE1hdGguc2luKHUgLSBlKV0pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdTsgaSA8IDIgKiBNYXRoLlBJICsgdSAtIC4wMTsgaSArPSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gW2hlKGEsIGwpICsgdCArIHIgKiBNYXRoLmNvcyhpKSwgaGUoYSwgbCkgKyBuICsgbyAqIE1hdGguc2luKGkpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucHVzaChlKSwgYy5wdXNoKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMucHVzaChbaGUoYSwgbCkgKyB0ICsgciAqIE1hdGguY29zKHUgKyAyICogTWF0aC5QSSArIC41ICogaSksIGhlKGEsIGwpICsgbiArIG8gKiBNYXRoLnNpbih1ICsgMiAqIE1hdGguUEkgKyAuNSAqIGkpXSksIGMucHVzaChbaGUoYSwgbCkgKyB0ICsgLjk4ICogciAqIE1hdGguY29zKHUgKyBpKSwgaGUoYSwgbCkgKyBuICsgLjk4ICogbyAqIE1hdGguc2luKHUgKyBpKV0pLCBjLnB1c2goW2hlKGEsIGwpICsgdCArIC45ICogciAqIE1hdGguY29zKHUgKyAuNSAqIGkpLCBoZShhLCBsKSArIG4gKyAuOSAqIG8gKiBNYXRoLnNpbih1ICsgLjUgKiBpKV0pLCBbYywgc10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHllKGUsIHQsIG4sIHIsIG8sIGEsIGksIGwsIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGEgKyBoZSguMSwgcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHUucHVzaChbaGUobCwgcykgKyB0ICsgLjkgKiByICogTWF0aC5jb3MoYyAtIGUpLCBoZShsLCBzKSArIG4gKyAuOSAqIG8gKiBNYXRoLnNpbihjIC0gZSldKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSA9IGM7IGEgPD0gaTsgYSArPSBlKSB1LnB1c2goW2hlKGwsIHMpICsgdCArIHIgKiBNYXRoLmNvcyhhKSwgaGUobCwgcykgKyBuICsgbyAqIE1hdGguc2luKGEpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1LnB1c2goW3QgKyByICogTWF0aC5jb3MoaSksIG4gKyBvICogTWF0aC5zaW4oaSldKSwgdS5wdXNoKFt0ICsgciAqIE1hdGguY29zKGkpLCBuICsgbyAqIE1hdGguc2luKGkpXSksIHZlKHUsIG51bGwsIHMpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3ZShlLCB0LCBuLCByLCBvLCBhLCBpLCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBbbC5tYXhSYW5kb21uZXNzT2Zmc2V0IHx8IDEsIChsLm1heFJhbmRvbW5lc3NPZmZzZXQgfHwgMSkgKyAuM107CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1ID0gWzAsIDBdOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gbC5kaXNhYmxlTXVsdGlTdHJva2UgPyAxIDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBsLnByZXNlcnZlVmVydGljZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgZDsgaCsrKSAwID09PSBoID8gcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibW92ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbaVswXSwgaVsxXV0KICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJtb3ZlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtpWzBdICsgKHAgPyAwIDogaGUoY1swXSwgbCkpLCBpWzFdICsgKHAgPyAwIDogaGUoY1swXSwgbCkpXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSA9IHAgPyBbbywgYV0gOiBbbyArIGhlKGNbaF0sIGwpLCBhICsgaGUoY1toXSwgbCldLCBzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJiY3VydmVUbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbZSArIGhlKGNbaF0sIGwpLCB0ICsgaGUoY1toXSwgbCksIG4gKyBoZShjW2hdLCBsKSwgciArIGhlKGNbaF0sIGwpLCB1WzBdLCB1WzFdXQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHhlKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5lXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRWUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5wb3coZVswXSAtIHRbMF0sIDIpICsgTWF0aC5wb3coZVsxXSAtIHRbMV0sIDIpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBrZShlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBFZSh0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiBFZShlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSAoKGVbMF0gLSB0WzBdKSAqIChuWzBdIC0gdFswXSkgKyAoZVsxXSAtIHRbMV0pICogKG5bMV0gLSB0WzFdKSkgLyByOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG8pKSwgRWUoZSwgU2UodCwgbiwgbykpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBTZShlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVswXSArICh0WzBdIC0gZVswXSkgKiBuLCBlWzFdICsgKHRbMV0gLSBlWzFdKSAqIG5dCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBDZShlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSByIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlW3QgKyAwXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGVbdCArIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZVt0ICsgMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlW3QgKyAzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDMgKiByWzBdIC0gMiAqIG5bMF0gLSBhWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKj0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbCA9IDMgKiByWzFdIC0gMiAqIG5bMV0gLSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgKj0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IDMgKiBvWzBdIC0gMiAqIGFbMF0gLSBuWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgKj0gczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IDMgKiBvWzFdIC0gMiAqIGFbMV0gLSBuWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjICo9IGMsIGkgPCBzICYmIChpID0gcyksIGwgPCBjICYmIChsID0gYyksIGkgKyBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIHQpIDwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGVbdCArIDBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSBvW28ubGVuZ3RoIC0gMV0sIGkgPSBuLCBNYXRoLnNxcnQoRWUoYSwgaSkpKSA+IDEgJiYgby5wdXNoKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugby5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKGVbdCArIDNdKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IC41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlW3QgKyAwXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZVt0ICsgMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGVbdCArIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlW3QgKyAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gU2UoYSwgaSwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFNlKGksIGwsIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBTZShsLCBzLCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gU2UoYywgdSwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFNlKHUsIGQsIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBTZShwLCBoLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENlKFthLCBjLCBwLCBmXSwgMCwgbiwgbyksIENlKFtmLCBoLCBkLCBzXSwgMCwgbiwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgaTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9lKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1lKGUsIDAsIGUubGVuZ3RoLCB0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTWUoZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gbyB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlW3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGVbbiAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IHQgKyAxOyByIDwgbiAtIDE7ICsrcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGtlKGVbcl0sIGksIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA+IHMgJiYgKHMgPSB0LCBjID0gcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHMpID4gciA/IChNZShlLCB0LCBjICsgMSwgciwgYSksIE1lKGUsIGMsIG4sIHIsIGEpKSA6IChhLmxlbmd0aCB8fCBhLnB1c2goaSksIGEucHVzaChsKSksIGEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFBlKGUsIHQgPSAuMTUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IChlLmxlbmd0aCAtIDEpIC8gMzsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBvOyBuKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENlKGUsIDMgKiBuLCB0LCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIG4gPiAwID8gTWUociwgMCwgci5sZW5ndGgsIG4pIDogcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBJZSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICBjbGFzcyBUZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmFuZG9tbmVzc09mZnNldDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VnaG5lc3M6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm93aW5nOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogIiMwMDAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlVGlnaHRuZXNzOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlRml0dGluZzogLjk1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlU3RlcENvdW50OiA5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogImhhY2h1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxXZWlnaHQ6IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhY2h1cmVBbmdsZTogLTQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhY2h1cmVHYXA6IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hPZmZzZXQ6IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hHYXA6IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppZ3phZ09mZnNldDogLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lTmVzdGVkU3ZnUGF0aHM6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVNdWx0aVN0cm9rZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU11bHRpU3Ryb2tlRmlsbDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2VydmVWZXJ0aWNlczogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuY29uZmlnID0gZSB8fCB7fSwgdGhpcy5jb25maWcub3B0aW9ucyAmJiAodGhpcy5kZWZhdWx0T3B0aW9ucyA9IHRoaXMuX28odGhpcy5jb25maWcub3B0aW9ucykpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljIG5ld1NlZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMiAqKiAzMSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfbyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIGUpIDogdGhpcy5kZWZhdWx0T3B0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF9kKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0czogdCB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBuIHx8IHRoaXMuZGVmYXVsdE9wdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLl9vKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2QoImxpbmUiLCBbbmUoZSwgdCwgbiwgciwgYSldLCBhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZShlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gdGhpcy5fbyhvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG9lKGUsIHQsIG4sIHIsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuZmlsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlLCB0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UgKyBuLCB0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2UgKyBuLCB0ICsgcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlLCB0ICsgcl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2xpZCIgPT09IGEuZmlsbFN0eWxlID8gaS5wdXNoKGNlKG8sIGEpKSA6IGkucHVzaCh1ZShvLCBhKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnN0cm9rZSAhPT0gSWUgJiYgaS5wdXNoKGwpLCB0aGlzLl9kKCJyZWN0YW5nbGUiLCBpLCBhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsbGlwc2UoZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuX28obyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpZShuLCByLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbGUoZSwgdCwgYSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5maWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic29saWQiID09PSBhLmZpbGxTdHlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbGUoZSwgdCwgYSwgbCkub3BzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4udHlwZSA9ICJmaWxsUGF0aCIsIGkucHVzaChuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpLnB1c2godWUocy5lc3RpbWF0ZWRQb2ludHMsIGEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnN0cm9rZSAhPT0gSWUgJiYgaS5wdXNoKHMub3BzZXQpLCB0aGlzLl9kKCJlbGxpcHNlIiwgaSwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGUoZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuZWxsaXBzZShlLCB0LCBuLCBuLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnNoYXBlID0gImNpcmNsZSIsIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lYXJQYXRoKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9vKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2QoImxpbmVhclBhdGgiLCBbcmUoZSwgITEsIG4pXSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhcmMoZSwgdCwgbiwgciwgbywgYSwgaSA9ICExLCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5fbyhsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHNlKGUsIHQsIG4sIHIsIG8sIGEsIGksICEwLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICYmIHMuZmlsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInNvbGlkIiA9PT0gcy5maWxsU3R5bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHNlKGUsIHQsIG4sIHIsIG8sIGEsICEwLCAhMSwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkudHlwZSA9ICJmaWxsUGF0aCIsIGMucHVzaChpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjLnB1c2goZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IE1hdGguYWJzKG4gLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBNYXRoLmFicyhyIC8gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgKz0gaGUoLjAxICogYywgaSksIHUgKz0gaGUoLjAxICogdSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkID0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZCA8IDA7KSBkICs9IDIgKiBNYXRoLlBJLCBwICs9IDIgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwIC0gZCA+IDIgKiBNYXRoLlBJICYmIChkID0gMCwgcCA9IDIgKiBNYXRoLlBJKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IChwIC0gZCkgLyBpLmN1cnZlU3RlcENvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gZDsgZSA8PSBwOyBlICs9IGgpIGYucHVzaChbbCArIGMgKiBNYXRoLmNvcyhlKSwgcyArIHUgKiBNYXRoLnNpbihlKV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5wdXNoKFtsICsgYyAqIE1hdGguY29zKHApLCBzICsgdSAqIE1hdGguc2luKHApXSksIGYucHVzaChbbCwgc10pLCB1ZShmLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSwgdCwgbiwgciwgbywgYSwgcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuc3Ryb2tlICE9PSBJZSAmJiBjLnB1c2godSksIHRoaXMuX2QoImFyYyIsIGMsIHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3VydmUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX28odCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBhZShlLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmZpbGwgJiYgbi5maWxsICE9PSBJZSAmJiBlLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IFBlKGZ1bmN0aW9uKGUsIHQgPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPCAzKSB0aHJvdyBuZXcgRXJyb3IoIkEgY3VydmUgbXVzdCBoYXZlIGF0IGxlYXN0IHRocmVlIHBvaW50cy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gbikgci5wdXNoKHhlKGVbMF0pLCB4ZShlWzFdKSwgeGUoZVsyXSksIHhlKGVbMl0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goZVswXSwgZVswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IGUubGVuZ3RoOyB0KyspIG4ucHVzaChlW3RdKSwgdCA9PT0gZS5sZW5ndGggLSAxICYmIG4ucHVzaChlW3RdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gMSAtIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnB1c2goeGUoblswXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgKyAyIDwgbi5sZW5ndGg7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuW2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bMF0gPSBbdFswXSwgdFsxXV0sIG9bMV0gPSBbdFswXSArIChhICogbltlICsgMV1bMF0gLSBhICogbltlIC0gMV1bMF0pIC8gNiwgdFsxXSArIChhICogbltlICsgMV1bMV0gLSBhICogbltlIC0gMV1bMV0pIC8gNl0sIG9bMl0gPSBbbltlICsgMV1bMF0gKyAoYSAqIG5bZV1bMF0gLSBhICogbltlICsgMl1bMF0pIC8gNiwgbltlICsgMV1bMV0gKyAoYSAqIG5bZV1bMV0gLSBhICogbltlICsgMl1bMV0pIC8gNl0sIG9bM10gPSBbbltlICsgMV1bMF0sIG5bZSArIDFdWzFdXSwgci5wdXNoKG9bMV0sIG9bMl0sIG9bM10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUpLCAxMCwgKDEgKyBuLnJvdWdobmVzcykgLyAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic29saWQiID09PSBuLmZpbGxTdHlsZSA/IHIucHVzaChjZSh0LCBuKSkgOiByLnB1c2godWUodCwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zdHJva2UgIT09IEllICYmIHIucHVzaChvKSwgdGhpcy5fZCgiY3VydmUiLCByLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX28odCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByZShlLCAhMCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5maWxsICYmICgic29saWQiID09PSBuLmZpbGxTdHlsZSA/IHIucHVzaChjZShlLCBuKSkgOiByLnB1c2godWUoZSwgbikpKSwgbi5zdHJva2UgIT09IEllICYmIHIucHVzaChvKSwgdGhpcy5fZCgicG9seWdvbiIsIHIsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fbyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIHJldHVybiB0aGlzLl9kKCJwYXRoIiwgciwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gKGUgfHwgIiIpLnJlcGxhY2UoL1xuL2csICIgIikucmVwbGFjZSgvKC1ccykvZywgIi0iKS5yZXBsYWNlKCIvKHNzKS9nIiwgIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBuLmZpbGwgJiYgInRyYW5zcGFyZW50IiAhPT0gbi5maWxsICYmIG4uZmlsbCAhPT0gSWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG4uc3Ryb2tlICE9PSBJZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gISEobi5zaW1wbGlmaWNhdGlvbiAmJiBuLnNpbXBsaWZpY2F0aW9uIDwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9ICQoUShxKGUpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoID49IDQgJiYgYS5wdXNoKC4uLlBlKGwsIHQpKSwgbCA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKCksIGEubGVuZ3RoICYmIChvLnB1c2goYSksIGEgPSBbXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IG9mIHIpIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYygpLCBpID0gW3RbMF0sIHRbMV1dLCBhLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJMIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKCksIGEucHVzaChbdFswXSwgdFsxXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiQyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gYS5sZW5ndGggPyBhW2EubGVuZ3RoIC0gMV0gOiBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goW2VbMF0sIGVbMV1dKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goW3RbMF0sIHRbMV1dKSwgbC5wdXNoKFt0WzJdLCB0WzNdXSksIGwucHVzaChbdFs0XSwgdFs1XV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcygpLCBhLnB1c2goW2lbMF0sIGlbMV1dKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKCksICFuKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IE9lKGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5sZW5ndGggJiYgdS5wdXNoKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIDEsIGkgPyA0IC0gNCAqIG4uc2ltcGxpZmljYXRpb24gOiAoMSArIG4ucm91Z2huZXNzKSAvIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uY29tYmluZU5lc3RlZFN2Z1BhdGhzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5mb3JFYWNoKCh0ID0+IGUucHVzaCguLi50KSkpLCAic29saWQiID09PSBuLmZpbGxTdHlsZSA/IHIucHVzaChjZShlLCBuKSkgOiByLnB1c2godWUoZSwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGwuZm9yRWFjaCgoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2xpZCIgPT09IG4uZmlsbFN0eWxlID8gci5wdXNoKGNlKGUsIG4pKSA6IHIucHVzaCh1ZShlLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAmJiAoaSA/IGwuZm9yRWFjaCgoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKHJlKGUsICExLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IHIucHVzaChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9ICQoUShxKGUpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IFswLCAwXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFswLCAwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBvZiBuKSBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAxICogKHQubWF4UmFuZG9tbmVzc09mZnNldCB8fCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdC5wcmVzZXJ2ZVZlcnRpY2VzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogIm1vdmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGkubWFwKChyID0+IHIgKyAobiA/IDAgOiBoZShlLCB0KSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGEgPSBbaVswXSwgaVsxXV0sIG8gPSBbaVswXSwgaVsxXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkwiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKC4uLmZlKGFbMF0sIGFbMV0sIGlbMF0sIGlbMV0sIHQpKSwgYSA9IFtpWzBdLCBpWzFdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2UsIG4sIG8sIGwsIHMsIGNdID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaCguLi53ZShlLCBuLCBvLCBsLCBzLCBjLCBhLCB0KSksIGEgPSBbcywgY107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIloiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKC4uLmZlKGFbMF0sIGFbMV0sIG9bMF0sIG9bMV0sIHQpKSwgYSA9IFtvWzBdLCBvWzFdXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAicGF0aCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wczogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSwgbikpKSwgdGhpcy5fZCgicGF0aCIsIHIsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3BzVG9QYXRoKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS5vcHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgdCA+PSAwID8gci5kYXRhLm1hcCgoZSA9PiArZS50b0ZpeGVkKHQpKSkgOiByLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyLm9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm1vdmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiArPSBgTSR7ZVswXX0gJHtlWzFdfSBgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImJjdXJ2ZVRvIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKz0gYEMke2VbMF19ICR7ZVsxXX0sICR7ZVsyXX0gJHtlWzNdfSwgJHtlWzRdfSAke2VbNV19IGA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibGluZVRvIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKz0gYEwke2VbMF19ICR7ZVsxXX0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRyaW0oKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRvUGF0aHMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuc2V0cyB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5vcHRpb25zIHx8IHRoaXMuZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicGF0aCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6IHRoaXMub3BzVG9QYXRoKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbi5zdHJva2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IG4uc3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZmlsbFBhdGgiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiB0aGlzLm9wc1RvUGF0aChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IEllLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IG4uZmlsbCB8fCBJZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmaWxsU2tldGNoIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLmZpbGxTa2V0Y2goZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiByLnB1c2godCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFNrZXRjaChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IHQuZmlsbFdlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuIDwgMCAmJiAobiA9IHQuc3Ryb2tlV2lkdGggLyAyKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6IHRoaXMub3BzVG9QYXRoKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogdC5maWxsIHx8IEllLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IEllCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2xhc3MgTGUgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9IGUsIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKSwgdGhpcy5nZW4gPSBuZXcgVGUodCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBkcmF3KGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnNldHMgfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUub3B0aW9ucyB8fCB0aGlzLmdldERlZmF1bHRPcHRpb25zKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMuY3R4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIHQpIHN3aXRjaCAoby50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicGF0aCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuc2F2ZSgpLCByLnN0cm9rZVN0eWxlID0gIm5vbmUiID09PSBuLnN0cm9rZSA/ICJ0cmFuc3BhcmVudCIgOiBuLnN0cm9rZSwgci5saW5lV2lkdGggPSBuLnN0cm9rZVdpZHRoLCBuLnN0cm9rZUxpbmVEYXNoICYmIHIuc2V0TGluZURhc2gobi5zdHJva2VMaW5lRGFzaCksIG4uc3Ryb2tlTGluZURhc2hPZmZzZXQgJiYgKHIubGluZURhc2hPZmZzZXQgPSBuLnN0cm9rZUxpbmVEYXNoT2Zmc2V0KSwgdGhpcy5fZHJhd1RvQ29udGV4dChyLCBvKSwgci5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZpbGxQYXRoIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zYXZlKCksIHIuZmlsbFN0eWxlID0gbi5maWxsIHx8ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gImN1cnZlIiA9PT0gZS5zaGFwZSB8fCAicG9seWdvbiIgPT09IGUuc2hhcGUgPyAiZXZlbm9kZCIgOiAibm9uemVybyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RyYXdUb0NvbnRleHQociwgbywgdCksIHIucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmaWxsU2tldGNoIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsU2tldGNoKHIsIG8sIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFNrZXRjaChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IG4uZmlsbFdlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPCAwICYmIChyID0gbi5zdHJva2VXaWR0aCAvIDIpLCBlLnNhdmUoKSwgbi5maWxsTGluZURhc2ggJiYgZS5zZXRMaW5lRGFzaChuLmZpbGxMaW5lRGFzaCksIG4uZmlsbExpbmVEYXNoT2Zmc2V0ICYmIChlLmxpbmVEYXNoT2Zmc2V0ID0gbi5maWxsTGluZURhc2hPZmZzZXQpLCBlLnN0cm9rZVN0eWxlID0gbi5maWxsIHx8ICIiLCBlLmxpbmVXaWR0aCA9IHIsIHRoaXMuX2RyYXdUb0NvbnRleHQoZSwgdCksIGUucmVzdG9yZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX2RyYXdUb0NvbnRleHQoZSwgdCwgbiA9ICJub256ZXJvIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0Lm9wcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLm9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm1vdmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5tb3ZlVG8odFswXSwgdFsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYmN1cnZlVG8iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5iZXppZXJDdXJ2ZVRvKHRbMF0sIHRbMV0sIHRbMl0sIHRbM10sIHRbNF0sIHRbNV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImxpbmVUbyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxpbmVUbyh0WzBdLCB0WzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmaWxsUGF0aCIgPT09IHQudHlwZSA/IGUuZmlsbChuKSA6IGUuc3Ryb2tlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBnZXQgZ2VuZXJhdG9yKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGVmYXVsdE9wdGlvbnMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZW4uZGVmYXVsdE9wdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmdlbi5saW5lKGUsIHQsIG4sIHIsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdyhhKSwgYQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZShlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gdGhpcy5nZW4ucmVjdGFuZ2xlKGUsIHQsIG4sIHIsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdyhhKSwgYQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsbGlwc2UoZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuZ2VuLmVsbGlwc2UoZSwgdCwgbiwgciwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KGEpLCBhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLmdlbi5jaXJjbGUoZSwgdCwgbiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KG8pLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbGluZWFyUGF0aChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5nZW4ubGluZWFyUGF0aChlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcobiksIG4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmdlbi5wb2x5Z29uKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdyhuKSwgbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFyYyhlLCB0LCBuLCByLCBvLCBhLCBpID0gITEsIGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmdlbi5hcmMoZSwgdCwgbiwgciwgbywgYSwgaSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KHMpLCBzCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3VydmUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2VuLmN1cnZlKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdyhuKSwgbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2VuLnBhdGgoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KG4pLCBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgQWUgPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwogICAgICAgICAgICAgICAgICAgIGNsYXNzIF9lIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdmcgPSBlLCB0aGlzLmdlbiA9IG5ldyBUZSh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXcoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuc2V0cyB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5vcHRpb25zIHx8IHRoaXMuZ2V0RGVmYXVsdE9wdGlvbnMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5zdmcub3duZXJEb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHIuY3JlYXRlRWxlbWVudE5TKEFlLCAiZyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLm9wdGlvbnMuZml4ZWREZWNpbWFsUGxhY2VEaWdpdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJwYXRoIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSByLmNyZWF0ZUVsZW1lbnROUyhBZSwgInBhdGgiKSwgdC5zZXRBdHRyaWJ1dGUoImQiLCB0aGlzLm9wc1RvUGF0aChpLCBhKSksIHQuc2V0QXR0cmlidXRlKCJzdHJva2UiLCBuLnN0cm9rZSksIHQuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCBuLnN0cm9rZVdpZHRoICsgIiIpLCB0LnNldEF0dHJpYnV0ZSgiZmlsbCIsICJub25lIiksIG4uc3Ryb2tlTGluZURhc2ggJiYgdC5zZXRBdHRyaWJ1dGUoInN0cm9rZS1kYXNoYXJyYXkiLCBuLnN0cm9rZUxpbmVEYXNoLmpvaW4oIiAiKS50cmltKCkpLCBuLnN0cm9rZUxpbmVEYXNoT2Zmc2V0ICYmIHQuc2V0QXR0cmlidXRlKCJzdHJva2UtZGFzaG9mZnNldCIsIGAke24uc3Ryb2tlTGluZURhc2hPZmZzZXR9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZmlsbFBhdGgiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHIuY3JlYXRlRWxlbWVudE5TKEFlLCAicGF0aCIpLCB0LnNldEF0dHJpYnV0ZSgiZCIsIHRoaXMub3BzVG9QYXRoKGksIGEpKSwgdC5zZXRBdHRyaWJ1dGUoInN0cm9rZSIsICJub25lIiksIHQuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCAiMCIpLCB0LnNldEF0dHJpYnV0ZSgiZmlsbCIsIG4uZmlsbCB8fCAiIiksICJjdXJ2ZSIgIT09IGUuc2hhcGUgJiYgInBvbHlnb24iICE9PSBlLnNoYXBlIHx8IHQuc2V0QXR0cmlidXRlKCJmaWxsLXJ1bGUiLCAiZXZlbm9kZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZpbGxTa2V0Y2giOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuZmlsbFNrZXRjaChyLCBpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIG8uYXBwZW5kQ2hpbGQodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFNrZXRjaChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IG4uZmlsbFdlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPCAwICYmIChyID0gbi5zdHJva2VXaWR0aCAvIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGUuY3JlYXRlRWxlbWVudE5TKEFlLCAicGF0aCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uc2V0QXR0cmlidXRlKCJkIiwgdGhpcy5vcHNUb1BhdGgodCwgbi5maXhlZERlY2ltYWxQbGFjZURpZ2l0cykpLCBvLnNldEF0dHJpYnV0ZSgic3Ryb2tlIiwgbi5maWxsIHx8ICIiKSwgby5zZXRBdHRyaWJ1dGUoInN0cm9rZS13aWR0aCIsIHIgKyAiIiksIG8uc2V0QXR0cmlidXRlKCJmaWxsIiwgIm5vbmUiKSwgbi5maWxsTGluZURhc2ggJiYgby5zZXRBdHRyaWJ1dGUoInN0cm9rZS1kYXNoYXJyYXkiLCBuLmZpbGxMaW5lRGFzaC5qb2luKCIgIikudHJpbSgpKSwgbi5maWxsTGluZURhc2hPZmZzZXQgJiYgby5zZXRBdHRyaWJ1dGUoInN0cm9rZS1kYXNob2Zmc2V0IiwgYCR7bi5maWxsTGluZURhc2hPZmZzZXR9YCksIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBnZXQgZ2VuZXJhdG9yKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGVmYXVsdE9wdGlvbnMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZW4uZGVmYXVsdE9wdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvcHNUb1BhdGgoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuLm9wc1RvUGF0aChlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUoZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuZ2VuLmxpbmUoZSwgdCwgbiwgciwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjdGFuZ2xlKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmdlbi5yZWN0YW5nbGUoZSwgdCwgbiwgciwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxsaXBzZShlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gdGhpcy5nZW4uZWxsaXBzZShlLCB0LCBuLCByLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcoYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGUoZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuZ2VuLmNpcmNsZShlLCB0LCBuLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcobykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lYXJQYXRoKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmdlbi5saW5lYXJQYXRoKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdyhuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2VuLnBvbHlnb24oZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYXJjKGUsIHQsIG4sIHIsIG8sIGEsIGkgPSAhMSwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuZ2VuLmFyYyhlLCB0LCBuLCByLCBvLCBhLCBpLCBsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcocykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdXJ2ZShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5nZW4uY3VydmUoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5nZW4ucGF0aChlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcobikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBEZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzOiAoZSwgdCkgPT4gbmV3IExlKGUsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICBzdmc6IChlLCB0KSA9PiBuZXcgX2UoZSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvcjogZSA9PiBuZXcgVGUoZSksCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlZWQ6ICgpID0+IFRlLm5ld1NlZWQoKQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGplKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4sIHIgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlIHx8ICJudW1iZXIiID09IHR5cGVvZiBlKSByICs9IGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJvYmplY3QiID09IHR5cGVvZiBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGVbdF0gJiYgKG4gPSBqZShlW3RdKSkgJiYgKHIgJiYgKHIgKz0gIiAiKSwgciArPSBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHQgaW4gZSkgZVt0XSAmJiAociAmJiAociArPSAiICIpLCByICs9IHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gemUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIHQsIG4gPSAwLCByID0gIiI7IG4gPCBhcmd1bWVudHMubGVuZ3RoOykoZSA9IGFyZ3VtZW50c1tuKytdKSAmJiAodCA9IGplKGUpKSAmJiAociAmJiAociArPSAiICIpLCByICs9IHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBCZSA9ICgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInRvcCIgaW4gc2VsZiAmJiBzZWxmICE9PSB0b3ApIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJjaG9vc2VGaWxlU3lzdGVtRW50cmllcyIgaW4gc2VsZikgcmV0dXJuICJjaG9vc2VGaWxlU3lzdGVtRW50cmllcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzaG93T3BlbkZpbGVQaWNrZXIiIGluIHNlbGYpIHJldHVybiAic2hvd09wZW5GaWxlUGlja2VyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKCksCiAgICAgICAgICAgICAgICAgICAgICAgIEhlID0gQmUgPyAiY2hvb3NlRmlsZVN5c3RlbUVudHJpZXMiID09PSBCZSA/IG4uZSg3MzYpLnRoZW4obi5iaW5kKG4sIDkwMTIpKSA6IG4uZSg3MzYpLnRoZW4obi5iaW5kKG4sIDQ5OSkpIDogbi5lKDczNikudGhlbihuLmJpbmQobiwgNTAzNCkpOwogICAgICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIE5lKC4uLmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhd2FpdCBIZSkuZGVmYXVsdCguLi5lKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBCZSA/ICJjaG9vc2VGaWxlU3lzdGVtRW50cmllcyIgPT09IEJlID8gbi5lKDczNikudGhlbihuLmJpbmQobiwgNjk4MCkpIDogbi5lKDczNikudGhlbihuLmJpbmQobiwgODY4KSkgOiBuLmUoNzM2KS50aGVuKG4uYmluZChuLCAzMTEwKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgUmUgPSBCZSA/ICJjaG9vc2VGaWxlU3lzdGVtRW50cmllcyIgPT09IEJlID8gbi5lKDczNikudGhlbihuLmJpbmQobiwgMTE3MCkpIDogbi5lKDczNikudGhlbihuLmJpbmQobiwgNzgxNCkpIDogbi5lKDczNikudGhlbihuLmJpbmQobiwgNDAwMSkpOwogICAgICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIEZlKC4uLmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhd2FpdCBSZSkuZGVmYXVsdCguLi5lKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgV2UgPSAoZSA9IDIxKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IDYzICYgbltlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgKz0gciA8IDM2ID8gci50b1N0cmluZygzNikgOiByIDwgNjIgPyAociAtIDI2KS50b1N0cmluZygzNikudG9VcHBlckNhc2UoKSA6IHIgPCA2MyA/ICJfIiA6ICItIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB2YXIgVmUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlICYmICJ0ZXh0IiA9PT0gZS50eXBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEdlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSAmJiBLZShlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEtlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmcmVlZHJhdyIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVWUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlICYmIFplKGUudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWmUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImFycm93IiA9PT0gZSB8fCAibGluZSIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWWUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlICYmIFhlKGUudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImFycm93IiA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBxZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUgJiYgKCJyZWN0YW5nbGUiID09PSBlLnR5cGUgfHwgImRpYW1vbmQiID09PSBlLnR5cGUgfHwgImVsbGlwc2UiID09PSBlLnR5cGUgfHwgInRleHQiID09PSBlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFFlID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsoZSAtIG4pICogTWF0aC5jb3MobykgLSAodCAtIHIpICogTWF0aC5zaW4obykgKyBuLCAoZSAtIG4pICogTWF0aC5zaW4obykgKyAodCAtIHIpICogTWF0aC5jb3MobykgKyByXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAkZSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShlWzBdLCBlWzFdLCB0WzBdLCB0WzFdLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBKZSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8sIGEsIGksIGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gTWF0aC5jb3MociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IE1hdGguc2luKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZSAmJiBlLncgPyB0ICs9IG8gKyBpIDogZS5lID8gKHQgKz0gbyAqICgxICsgcyksIG4gKz0gbyAqIGMsIHQgKz0gaSAqICgxIC0gcyksIG4gKz0gaSAqIC1jKSA6IGUudyAmJiAodCArPSBvICogKDEgLSBzKSwgbiArPSBvICogLWMsIHQgKz0gaSAqICgxICsgcyksIG4gKz0gaSAqIGMpLCBlLm4gJiYgZS5zID8gbiArPSBhICsgbCA6IGUubiA/ICh0ICs9IGEgKiBjLCBuICs9IGEgKiAoMSAtIHMpLCB0ICs9IGwgKiAtYywgbiArPSBsICogKDEgKyBzKSkgOiBlLnMgJiYgKHQgKz0gYSAqIC1jLCBuICs9IGEgKiAoMSArIHMpLCB0ICs9IGwgKiBjLCBuICs9IGwgKiAoMSAtIHMpKSwgW3QsIG5dCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGV0ID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBuIC0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gciAtIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5oeXBvdChvLCBhKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0dCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHQgJiYgKHQgPSAxKSwgZS5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gW2VbMF0sIGVbZS5sZW5ndGggLSAxXV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXQoclswXSwgclsxXSwgb1swXSwgb1sxXSkgPD0gZC5xeCAvIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBudCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA8IDMpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSBbTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIG5dLCBhID0gW3QsIG5dLCBpID0gMCwgbCA9IDA7IGwgPCByOyBsKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGVbbF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBlWyhsICsgMSkgJSByXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXQocywgYywgYSwgbykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IG90KHMsIGEsIGMpKSByZXR1cm4gcnQocywgYSwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpICUgMiA9PSAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHJ0ID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMF0gPD0gTWF0aC5tYXgoZVswXSwgblswXSkgJiYgdFswXSA+PSBNYXRoLm1pbihlWzBdLCBuWzBdKSAmJiB0WzFdIDw9IE1hdGgubWF4KGVbMV0sIG5bMV0pICYmIHRbMV0gPj0gTWF0aC5taW4oZVsxXSwgblsxXSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgb3QgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9ICh0WzFdIC0gZVsxXSkgKiAoblswXSAtIHRbMF0pIC0gKHRbMF0gLSBlWzBdKSAqIChuWzFdIC0gdFsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gciA/IDAgOiByID4gMCA/IDEgOiAyCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0ID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBvdChlLCB0LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gb3QoZSwgdCwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG90KG4sIHIsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBvdChuLCByLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvICE9PSBhICYmIGkgIT09IGwgfHwgKCEoMCAhPT0gbyB8fCAhcnQoZSwgbiwgdCkpIHx8ICghKDAgIT09IGEgfHwgIXJ0KGUsIHIsIHQpKSB8fCAoISgwICE9PSBpIHx8ICFydChuLCBlLCByKSkgfHwgISgwICE9PSBsIHx8ICFydChuLCB0LCByKSkpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaXQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IFtNYXRoLnJvdW5kKGUgLyBuKSAqIG4sIE1hdGgucm91bmQodCAvIG4pICogbl0gOiBbZSwgdF0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbHQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4ubWFwKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0W2VdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLm1heC5hcHBseShNYXRoLCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAwID09PSBpID8gMSA6IHQgLyBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAxIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbi5tYXAoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubWFwKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAhPT0gZSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgKiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgPSBNYXRoLm1pbihyLCBzKSwgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA9PT0gYy5sZW5ndGgpIHJldHVybiBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBhIC0gczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLm1hcCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm1hcCgoZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gZSA/IHQgKyB1IDogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlKGUpID8gcHQoZSkgOiBVZShlKSA/IGh0KGUpIDogW2UueCwgZS55LCBlLnggKyBlLndpZHRoLCBlLnkgKyBlLmhlaWdodF0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY3QgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgbiA9IGUuc2V0czsgdCA8IG4ubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG5bdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJwYXRoIiA9PT0gci50eXBlKSByZXR1cm4gci5vcHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNldHNbMF0ub3BzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHV0ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBbMCwgMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUucmVkdWNlKChmdW5jdGlvbihlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLCBhID0gci5vcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibW92ZSIgPT09IGEpIG4gPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiYmN1cnZlVG8iID09PSBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IFtpWzBdLCBpWzFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gW2lbMl0sIGlbM11dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBbaVs0XSwgaVs1XV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygxIC0gZSwgMykgKiBjW3RdICsgMyAqIGUgKiBNYXRoLnBvdygxIC0gZSwgMikgKiBzW3RdICsgMyAqIE1hdGgucG93KGUsIDIpICogKDEgLSBlKSAqIGxbdF0gKyB1W3RdICogTWF0aC5wb3coZSwgMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwID0gMDsgcCA8PSAxOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gZChwLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGQocCwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAoaCA9IChvID0gdChoLCBmKSlbMF0sIGYgPSBvWzFdKSwgZS5taW5ZID0gTWF0aC5taW4oZS5taW5ZLCBmKSwgZS5taW5YID0gTWF0aC5taW4oZS5taW5YLCBoKSwgZS5tYXhYID0gTWF0aC5tYXgoZS5tYXhYLCBoKSwgZS5tYXhZID0gTWF0aC5tYXgoZS5tYXhZLCBmKSwgcCArPSAuMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblk6IDEgLyAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYOiAtMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFk6IC0xIC8gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtyLm1pblgsIHIubWluWSwgci5tYXhYLCByLm1heFldCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGR0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDEgLyAwLCBuID0gMSAvIDAsIHIgPSAtMSAvIDAsIG8gPSAtMSAvIDAsIGEgPSAwLCBpID0gZTsgYSA8IGkubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGlbYV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBsWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gTWF0aC5taW4odCwgcyksIG4gPSBNYXRoLm1pbihuLCBjKSwgciA9IE1hdGgubWF4KHIsIHMpLCBvID0gTWF0aC5tYXgobywgYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdCwgbiwgciwgb10KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcHQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGR0KGUucG9pbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdFsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdFszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbbiArIGUueCwgciArIGUueSwgbyArIGUueCwgYSArIGUueV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaHQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnBvaW50cy5sZW5ndGggPCAyIHx8ICFDcihlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5wb2ludHMucmVkdWNlKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5taW5ZID0gTWF0aC5taW4oZS5taW5ZLCByKSwgZS5taW5YID0gTWF0aC5taW4oZS5taW5YLCBuKSwgZS5tYXhYID0gTWF0aC5tYXgoZS5tYXhYLCBuKSwgZS5tYXhZID0gTWF0aC5tYXgoZS5tYXhZLCByKSwgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5ZOiAxIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFg6IC0xIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFk6IC0xIC8gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4ubWluWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4ubWluWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG4ubWF4WCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4ubWF4WTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gW3IgKyBlLngsIG8gKyBlLnksIGEgKyBlLngsIGkgKyBlLnldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gQ3IoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBjdChsWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHV0KHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBjWzBdLCBvID0gY1sxXSwgYSA9IGNbMl0sIGkgPSBjWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBbciArIGUueCwgbyArIGUueSwgYSArIGUueCwgaSArIGUueV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gblswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gblszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gKHIgKyBhKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IChvICsgaSkgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEdlKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBkdChlLnBvaW50cy5tYXAoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShuLCByLCBsIC0gZS54LCBzIC0gZS55LCBlLmFuZ2xlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gY1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gY1szXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3UgKyBlLngsIGQgKyBlLnksIHAgKyBlLngsIGggKyBlLnldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVWUoZSkpIHQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUucG9pbnRzLmxlbmd0aCA8IDIgfHwgIUNyKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS5wb2ludHMucmVkdWNlKChmdW5jdGlvbihyLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgaSA9IG9bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSA9IChhID0gUWUoZS54ICsgaSwgZS55ICsgbCwgdCwgbiwgZS5hbmdsZSkpWzBdLCBsID0gYVsxXSwgci5taW5ZID0gTWF0aC5taW4oci5taW5ZLCBsKSwgci5taW5YID0gTWF0aC5taW4oci5taW5YLCBpKSwgci5tYXhYID0gTWF0aC5tYXgoci5tYXhYLCBpKSwgci5tYXhZID0gTWF0aC5tYXgoci5tYXhZLCBsKSwgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5ZOiAxIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFg6IC0xIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFk6IC0xIC8gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtyLm1pblgsIHIubWluWSwgci5tYXhYLCByLm1heFldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gQ3IoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBjdChvWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXQoYSwgKGZ1bmN0aW9uKHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKGUueCArIHIsIGUueSArIG8sIHQsIG4sIGUuYW5nbGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIGwsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoImRpYW1vbmQiID09PSBlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IFFlKGwsIG8sIGwsIHMsIGUuYW5nbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGZbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBRZShsLCBpLCBsLCBzLCBlLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHZbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB2WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gUWUociwgcywgbCwgcywgZS5hbmdsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSB3WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gd1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IFFlKGEsIHMsIGwsIHMsIGUuYW5nbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTID0ga1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGtbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IFt1ID0gTWF0aC5taW4obSwgYiwgeCwgUyksIGQgPSBNYXRoLm1pbihnLCB5LCBFLCBDKSwgcCA9IE1hdGgubWF4KG0sIGIsIHgsIFMpLCBoID0gTWF0aC5tYXgoZywgeSwgRSwgQyldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCJlbGxpcHNlIiA9PT0gZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSAoYSAtIHIpIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSA9IChpIC0gbykgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQID0gTWF0aC5jb3MoZS5hbmdsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgPSBNYXRoLnNpbihlLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IE1hdGguaHlwb3QoTyAqIFAsIE0gKiBJKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTCA9IE1hdGguaHlwb3QoTSAqIFAsIE8gKiBJKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gW2wgLSBULCBzIC0gTCwgbCArIFQsIHMgKyBMXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQSA9IFFlKHIsIG8sIGwsIHMsIGUuYW5nbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfID0gKG0gPSBBWzBdLCBnID0gQVsxXSwgUWUociwgaSwgbCwgcywgZS5hbmdsZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gKGIgPSBfWzBdLCB5ID0gX1sxXSwgUWUoYSwgaSwgbCwgcywgZS5hbmdsZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gKHggPSBEWzBdLCBFID0gRFsxXSwgUWUoYSwgbywgbCwgcywgZS5hbmdsZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSBqWzBdLCBDID0galsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gW3UgPSBNYXRoLm1pbihtLCBiLCB4LCBTKSwgZCA9IE1hdGgubWluKGcsIHksIEUsIEMpLCBwID0gTWF0aC5tYXgobSwgYiwgeCwgUyksIGggPSBNYXRoLm1heChnLCB5LCBFLCBDKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG10ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmxlbmd0aCkgcmV0dXJuIFswLCAwLCAwLCAwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IC0xIC8gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gMSAvIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IC0xIC8gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGZ0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gTWF0aC5taW4odCwgaSksIHIgPSBNYXRoLm1pbihyLCBsKSwgbiA9IE1hdGgubWF4KG4sIHMpLCBvID0gTWF0aC5tYXgobywgYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgW3QsIHIsIG4sIG9dCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGd0ID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFVZShlKSAmJiAhR2UoZSkpIHJldHVybiBbZS54LCBlLnksIGUueCArIHQsIGUueSArIG5dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8gPSBsdCgwLCB0LCBsdCgxLCBuLCBlLnBvaW50cykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEdlKGUpKSByID0gZHQobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IERlLmdlbmVyYXRvcigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gInNoYXJwIiA9PT0gZS5zdHJva2VTaGFycG5lc3MgPyBhLmxpbmVhclBhdGgobywgTXIoZSkpIDogYS5jdXJ2ZShvLCBNcihlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBjdChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdXQobCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gclswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gclsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gclsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gclszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbcyArIGUueCwgYyArIGUueSwgdSArIGUueCwgZCArIGUueV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgdnQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IERlLmdlbmVyYXRvcigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAic2hhcnAiID09PSBuID8gci5saW5lYXJQYXRoKHQsIE1yKGUpKSA6IHIuY3VydmUodCwgTXIoZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBjdChvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdXQoYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGlbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGlbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2wgKyBlLngsIHMgKyBlLnksIGMgKyBlLngsIHUgKyBlLnldCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnQgPSBKU09OLnBhcnNlKCd7Iml4IjoiI2ZmZmZmZiIsIlNuIjoiIzAwMDAwMCIsIk1BIjpbIiNmOGY5ZmEiLCIjZjFmM2Y1IiwwLDAsIiNjZWQ0ZGEiLCIjYWRiNWJkIiwiIzg2OGU5NiIsIiM0OTUwNTciLCIjMzQzYTQwIl0sIlE2IjpbIiNmZmY1ZjUiLCIjZmZlM2UzIiwiI2ZmYzljOSIsIiNmZmE4YTgiLCIjZmY4Nzg3IiwiI2ZmNmI2YiIsIiNmYTUyNTIiLCIjZjAzZTNlIiwiI2UwMzEzMSIsIiNjOTJhMmEiXSwiaVEiOlsiI2ZmZjBmNiIsIiNmZmRlZWIiLCIjZmNjMmQ3IiwiI2ZhYTJjMSIsIiNmNzgzYWMiLCIjZjA2NTk1IiwiI2U2NDk4MCIsIiNkNjMzNmMiLCIjYzIyNTVjIiwiI2E2MWU0ZCJdLCJwbCI6WyIjZjhmMGZjIiwiI2YzZDlmYSIsIiNlZWJlZmEiLCIjZTU5OWY3IiwiI2RhNzdmMiIsIiNjYzVkZTgiLCIjYmU0YmRiIiwiI2FlM2VjOSIsIiM5YzM2YjUiLCIjODYyZTljIl0sImh0IjpbIiNmM2YwZmYiLCIjZTVkYmZmIiwiI2QwYmZmZiIsIiNiMTk3ZmMiLCIjOTc3NWZhIiwiIzg0NWVmNyIsIiM3OTUwZjIiLCIjNzA0OGU4IiwiIzY3NDFkOSIsIiM1ZjNkYzQiXSwiUU4iOlsiI2VkZjJmZiIsIiNkYmU0ZmYiLCIjYmFjOGZmIiwiIzkxYTdmZiIsIiM3NDhmZmMiLCIjNWM3Y2ZhIiwiIzRjNmVmNSIsIiM0MjYzZWIiLCIjM2I1YmRiIiwiIzM2NGZjNyJdLCJpTiI6WyIjZTdmNWZmIiwiI2QwZWJmZiIsIiNhNWQ4ZmYiLCIjNzRjMGZjIiwiIzRkYWJmNyIsIiMzMzlhZjAiLCIjMjI4YmU2IiwiIzFjN2VkNiIsIiMxOTcxYzIiLCIjMTg2NGFiIl0sInNsIjpbIiNlM2ZhZmMiLCIjYzVmNmZhIiwiIzk5ZTlmMiIsIiM2NmQ5ZTgiLCIjM2JjOWRiIiwiIzIyYjhjZiIsIiMxNWFhYmYiLCIjMTA5OGFkIiwiIzBjODU5OSIsIiMwYjcyODUiXSwiJEMiOlsiI2U2ZmNmNSIsIiNjM2ZhZTgiLCIjOTZmMmQ3IiwiIzYzZTZiZSIsIiMzOGQ5YTkiLCIjMjBjOTk3IiwiIzEyYjg4NiIsIiMwY2E2NzgiLCIjMDk5MjY4IiwiIzA4N2Y1YiJdLCJlayI6WyIjZWJmYmVlIiwiI2QzZjlkOCIsIiNiMmYyYmIiLCIjOGNlOTlhIiwiIzY5ZGI3YyIsIiM1MWNmNjYiLCIjNDBjMDU3IiwiIzM3YjI0ZCIsIiMyZjllNDQiLCIjMmI4YTNlIl0sIkxSIjpbIiNmNGZjZTMiLCIjZTlmYWM4IiwiI2Q4ZjVhMiIsIiNjMGViNzUiLCIjYTllMzRiIiwiIzk0ZDgyZCIsIiM4MmM5MWUiLCIjNzRiODE2IiwiIzY2YTgwZiIsIiM1Yzk0MGQiXSwiZXIiOlsiI2ZmZjlkYiIsIiNmZmYzYmYiLCIjZmZlYzk5IiwiI2ZmZTA2NiIsIiNmZmQ0M2IiLCIjZmNjNDE5IiwiI2ZhYjAwNSIsIiNmNTlmMDAiLCIjZjA4YzAwIiwiI2U2NzcwMCJdLCIkeSI6WyIjZmZmNGU2IiwiI2ZmZThjYyIsIiNmZmQ4YTgiLCIjZmZjMDc4IiwiI2ZmYTk0ZCIsIiNmZjkyMmIiLCIjZmQ3ZTE0IiwiI2Y3NjcwNyIsIiNlODU5MGMiLCIjZDk0ODBmIl19Jyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHl0ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSB0Lmxlbmd0aCwgbyA9IGUubGVuZ3RoOyBuIDwgcjsgbisrLCBvKyspIGVbb10gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgd3QgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2J0LlE2W2VdLCBidC5pUVtlXSwgYnQucGxbZV0sIGJ0Lmh0W2VdLCBidC5RTltlXSwgYnQuaU5bZV0sIGJ0LnNsW2VdLCBidC4kQ1tlXSwgYnQuZWtbZV0sIGJ0LkxSW2VdLCBidC5lcltlXSwgYnQuJHlbZV1dCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0JhY2tncm91bmQ6IHl0KFtidC5peCwgYnQuTUFbMF0sIGJ0Lk1BWzFdXSwgd3QoMCkpLAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50QmFja2dyb3VuZDogeXQoWyJ0cmFuc3BhcmVudCIsIGJ0Lk1BWzRdLCBidC5NQVs2XV0sIHd0KDYpKSwKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0cm9rZTogeXQoW2J0LlNuLCBidC5NQVs4XSwgYnQuTUFbN11dLCB3dCg5KSkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciBFdCA9IG4oNjIwNyksCiAgICAgICAgICAgICAgICAgICAgICAgIGt0ID0gL01hY3xpUG9kfGlQaG9uZXxpUGFkLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0pLAogICAgICAgICAgICAgICAgICAgICAgICBTdCA9IC9eV2luLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0pLAogICAgICAgICAgICAgICAgICAgICAgICBDdCA9ICJFcXVhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIE90ID0gIk1pbnVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgTXQgPSAiTnVtcGFkQWRkIiwKICAgICAgICAgICAgICAgICAgICAgICAgUHQgPSAiTnVtcGFkU3VidHJhY3QiLAogICAgICAgICAgICAgICAgICAgICAgICBJdCA9ICJOdW1wYWQwIiwKICAgICAgICAgICAgICAgICAgICAgICAgVHQgPSAiQnJhY2tldFJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgTHQgPSAiQnJhY2tldExlZnQiLAogICAgICAgICAgICAgICAgICAgICAgICBBdCA9ICJEaWdpdDEiLAogICAgICAgICAgICAgICAgICAgICAgICBfdCA9ICJEaWdpdDIiLAogICAgICAgICAgICAgICAgICAgICAgICBEdCA9ICJEaWdpdDkiLAogICAgICAgICAgICAgICAgICAgICAgICBqdCA9ICJRdW90ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHp0ID0gIkRpZ2l0MCIsCiAgICAgICAgICAgICAgICAgICAgICAgIEJ0ID0gIlNsYXNoIiwKICAgICAgICAgICAgICAgICAgICAgICAgSHQgPSAiS2V5QyIsCiAgICAgICAgICAgICAgICAgICAgICAgIE50ID0gIktleUQiLAogICAgICAgICAgICAgICAgICAgICAgICBSdCA9ICJLZXlHIiwKICAgICAgICAgICAgICAgICAgICAgICAgRnQgPSAiS2V5RiIsCiAgICAgICAgICAgICAgICAgICAgICAgIFd0ID0gIktleUgiLAogICAgICAgICAgICAgICAgICAgICAgICBWdCA9ICJLZXlWIiwKICAgICAgICAgICAgICAgICAgICAgICAgR3QgPSAiS2V5WCIsCiAgICAgICAgICAgICAgICAgICAgICAgIEt0ID0gIktleVoiLAogICAgICAgICAgICAgICAgICAgICAgICBVdCA9ICJLZXlSIiwKICAgICAgICAgICAgICAgICAgICAgICAgWnQgPSAiQXJyb3dEb3duIiwKICAgICAgICAgICAgICAgICAgICAgICAgWXQgPSAiQXJyb3dMZWZ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgWHQgPSAiQXJyb3dSaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHF0ID0gIkFycm93VXAiLAogICAgICAgICAgICAgICAgICAgICAgICBRdCA9ICJCYWNrc3BhY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAkdCA9ICJBbHQiLAogICAgICAgICAgICAgICAgICAgICAgICBKdCA9IGt0ID8gIm1ldGFLZXkiIDogImN0cmxLZXkiLAogICAgICAgICAgICAgICAgICAgICAgICBlbiA9ICJEZWxldGUiLAogICAgICAgICAgICAgICAgICAgICAgICB0biA9ICJFbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIG5uID0gIkVzY2FwZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJuID0gIj8iLAogICAgICAgICAgICAgICAgICAgICAgICBvbiA9ICIgIiwKICAgICAgICAgICAgICAgICAgICAgICAgYW4gPSAiVGFiIiwKICAgICAgICAgICAgICAgICAgICAgICAgbG4gPSAiYSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNuID0gImQiLAogICAgICAgICAgICAgICAgICAgICAgICBjbiA9ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgdW4gPSAibCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRuID0gIm8iLAogICAgICAgICAgICAgICAgICAgICAgICBwbiA9ICJwIiwKICAgICAgICAgICAgICAgICAgICAgICAgaG4gPSAicSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZuID0gInIiLAogICAgICAgICAgICAgICAgICAgICAgICBtbiA9ICJzIiwKICAgICAgICAgICAgICAgICAgICAgICAgZ24gPSAidCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHZuID0gInYiLAogICAgICAgICAgICAgICAgICAgICAgICBibiA9ICJ4IiwKICAgICAgICAgICAgICAgICAgICAgICAgeW4gPSAieSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHduID0gInoiLAogICAgICAgICAgICAgICAgICAgICAgICB4biA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSBZdCB8fCBlID09PSBYdCB8fCBlID09PSBadCB8fCBlID09PSBxdAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBFbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFsdEtleQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNoaWZ0S2V5CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFNuID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2hpZnRLZXkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQ24gPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICAgICAgICAgICAgICAgICAgICBPbiA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIE1uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT24pIHJldHVybiBPbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IERhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gIiIuY29uY2F0KGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICIwIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9ICIiLmNvbmNhdChlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgIjAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gIiIuY29uY2F0KGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgIjAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gIiIuY29uY2F0KGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAiMCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0LCAiLSIpLmNvbmNhdChuLCAiLSIpLmNvbmNhdChyLCAiLSIpLmNvbmNhdChvKS5jb25jYXQoYSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUG4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGUuc2xpY2UoMSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSW4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmICJ3eXNpd3lnIiA9PT0gZS5kYXRhc2V0LnR5cGUgfHwgZSBpbnN0YW5jZW9mIEhUTUxCUkVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgKCJ0ZXh0IiA9PT0gZS50eXBlIHx8ICJudW1iZXIiID09PSBlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRuID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmZvbnRGYW1pbHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KGQudXRbdF0sICIsICIpLmNvbmNhdChkLl9EKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBMbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5mb250U2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5mb250RmFtaWx5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0LCAicHggIikuY29uY2F0KFRuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQW4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBkb2N1bWVudC5ib2R5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSIsIG4uc3R5bGUud2hpdGVTcGFjZSA9ICJwcmUiLCBuLnN0eWxlLmZvbnQgPSB0LCByLmFwcGVuZENoaWxkKG4pLCBuLmlubmVyVGV4dCA9IGUuc3BsaXQoIlxuIikubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgfHwgIiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuam9pbigiXG4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbi5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbi5vZmZzZXRIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siLCBpLnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiIsIGkuc3R5bGUud2lkdGggPSAiMXB4IiwgaS5zdHlsZS5oZWlnaHQgPSAiMXB4Iiwgbi5hcHBlbmRDaGlsZChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gaS5vZmZzZXRUb3AgKyBpLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VsaW5lOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9uID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IFtdLCBhID0gMDsgYSA8IGFyZ3VtZW50cy5sZW5ndGg7IGErKykgb1thXSA9IGFyZ3VtZW50c1thXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG8sIGNsZWFyVGltZW91dChuKSwgbiA9IHdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBudWxsLCBlLmFwcGx5KHZvaWQgMCwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLmZsdXNoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyVGltZW91dChuKSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBudWxsLCBlLmFwcGx5KHZvaWQgMCwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvLmNhbmNlbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBudWxsLCBjbGVhclRpbWVvdXQobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRG4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoZSAtIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGpuID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiAoZS5zdHlsZS5jdXJzb3IgPSAiIikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgem4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmIChlLnN0eWxlLmN1cnNvciA9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEJuID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiAoInNlbGVjdGlvbiIgPT09IHQgPyBqbihlKSA6IGUuc3R5bGUuY3Vyc29yID0gZC5vYy5DUk9TU0hBSVIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEhuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiSFRNTCIgPT09IChudWxsID09PSAoZSA9IGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm5vZGVOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBObiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gZS5yZXBsYWNlKC9cYkFsdFxiL2ksICJBbHQiKS5yZXBsYWNlKC9cYlNoaWZ0XGIvaSwgIlNoaWZ0IikucmVwbGFjZSgvXGIoRW50ZXJ8UmV0dXJuKVxiL2ksICJFbnRlciIpLnJlcGxhY2UoL1xiRGVsXGIvaSwgIkRlbGV0ZSIpLCBrdCA/IGUucmVwbGFjZSgvXGJDdHJsT3JDbWRcYi9pLCAiQ21kIikucmVwbGFjZSgvXGJBbHRcYi9pLCAiT3B0aW9uIikgOiBlLnJlcGxhY2UoL1xiQ3RybE9yQ21kXGIvaSwgIkN0cmwiKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBSbiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmNsaWVudFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5vZmZzZXRMZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lm9mZnNldFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdC5zY3JvbGxYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0LnNjcm9sbFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IDEgLyBvLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAobiAtIG8udHJhbnNsYXRpb24ueCAtIGEpICogYyAtIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogKHIgLSBvLnRyYW5zbGF0aW9uLnkgLSBpKSAqIGMgLSBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEZuID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLnNjZW5lWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5zY2VuZVksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5vZmZzZXRMZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lm9mZnNldFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdC5zY3JvbGxYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0LnNjcm9sbFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IChuICsgbCArIGEpICogby52YWx1ZSArIG8udHJhbnNsYXRpb24ueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAociArIHMgKyBpKSAqIG8udmFsdWUgKyBvLnRyYW5zbGF0aW9uLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgV24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoIi0tIi5jb25jYXQoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFZuID0gbmV3IFJlZ0V4cCgiXlteIi5jb25jYXQoIkEtWmEtesOALcOWw5gtw7bDuC3KuMyALdaQ4KCALeG/v+KwgC3vrJzvt74t77mv77u9Le+/vyIsICJdKlsiKS5jb25jYXQoItaRLd+/76ydLe+3ve+5sC3vu7wiLCAiXSIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgR24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVm4udGVzdChlKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBLbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFVuID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJBYm9ydEVycm9yIiAhPT0gKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUubmFtZSkpIHRocm93IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWm4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBFdC51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcykoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWW4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5wYXJlbnRFbGVtZW50OyB0OykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnRhYkluZGV4ID4gLTEpIHJldHVybiB2b2lkIHQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5wYXJlbnRFbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFhuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiAibGlnaHQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhYm9yYXRvcnM6IG5ldyBNYXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJ0VHlwZTogImJhciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1CYWNrZ3JvdW5kQ29sb3I6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1FbmRBcnJvd2hlYWQ6ICJhcnJvdyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1GaWxsU3R5bGU6ICJoYWNodXJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUZvbnRGYW1pbHk6IGQucmssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1Gb250U2l6ZTogZC5uNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzczogInJvdW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbU9wYWNpdHk6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVJvdWdobmVzczogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVN0YXJ0QXJyb3doZWFkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlQ29sb3I6IGJ0LlNuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU2hhcnBuZXNzOiAic2hhcnAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU3R5bGU6ICJzb2xpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1TdHJva2VXaWR0aDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVRleHRBbGlnbjogZC5IZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JCdXR0b246ICJ1cCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRMb2NrZWQ6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiAic2VsZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QmFja2dyb3VuZDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0RW1iZWRTY2VuZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0V2l0aERhcmtNb2RlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSGFuZGxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRTaXplOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmluZGluZ0VuYWJsZWQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlicmFyeU9wZW46ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXNpemluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSb3RhdGluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXJEb3duV2l0aDogIm1vdXNlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUVsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIiIuY29uY2F0KE8oImxhYmVscy51bnRpdGxlZCIpLCAiLSIpLmNvbmNhdChNbigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuTWVudTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXN0ZURpYWxvZzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93bjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50SWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZ0VsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsZWRPdXRzaWRlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxYOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFk6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEFkZFdhdGVybWFyazogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQ2FjaGVJZ25vcmVab29tOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93SGVscERpYWxvZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N0YXRzOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEJvdW5kRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRCaW5kaW5nczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCYWNrZ3JvdW5kQ29sb3I6IGJ0Lml4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHplbk1vZGVFbmFibGVkOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVFbmFibGVkOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBxbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhYm9yYXRvcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJ0VHlwZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUJhY2tncm91bmRDb2xvcjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUVuZEFycm93aGVhZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUZpbGxTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUZvbnRGYW1pbHk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1Gb250U2l6ZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbU9wYWNpdHk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1Sb3VnaG5lc3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1TdGFydEFycm93aGVhZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVN0cm9rZUNvbG9yOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU2hhcnBuZXNzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1TdHJva2VXaWR0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVRleHRBbGlnbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JCdXR0b246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRMb2NrZWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydEJhY2tncm91bmQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0RW1iZWRTY2VuZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRXaXRoRGFya01vZGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUhhbmRsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkU2l6ZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCaW5kaW5nRW5hYmxlZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpYnJhcnlPcGVuOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Jlc2l6aW5nOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUm90YXRpbmc6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXJEb3duV2l0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUVsZW1lbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuTWVudTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXN0ZURpYWxvZzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudElkczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZ0VsZW1lbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsZWRPdXRzaWRlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEFkZFdhdGVybWFyazogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRDYWNoZUlnbm9yZVpvb206IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0hlbHBEaWFsb2c6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N0YXRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Qm91bmRFbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXI6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHplbk1vZGVFbmFibGVkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQ6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVFbmFibGVkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlcjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBRbiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB7fSwgciA9IDAsIG8gPSBPYmplY3Qua2V5cyhlKTsgciA8IG8ubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG9bcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBxblthXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGkgJiYgaVt0XSAmJiAoblthXSA9IGVbYV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAkbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRbihlLCAiZXhwb3J0IikKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSm4oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAqICgxIC0gbikgKyB0ICogbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZXIoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgodCwgTWF0aC5taW4obiwgZSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHIgJiYgKHIgPSAuNSksIHQgPyAociA9IGVyKG4ociksIDAsIDEpLCAodCA8IDAgPyBKbihlLCBlICsgZSAqIGVyKHQsIC0uOTUsIC0uMDUpLCByKSA6IEpuKGUgLSBlICogZXIodCwgLjA1LCAuOTUpLCBlLCByKSkgLyAyKSA6IGUgLyAyCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBucihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVswXSArIHRbMF0sIGVbMV0gKyB0WzFdXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcnIoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VbMF0gLSB0WzBdLCBlWzFdIC0gdFsxXV0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9yKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0WzBdIC0gZVswXSwgdFsxXSAtIGVbMV1dCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhcihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVswXSAqIHQsIGVbMV0gKiB0XQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaXIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VbMV0sIC1lWzBdXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbHIoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVswXSAqIHRbMF0gKyBlWzFdICogdFsxXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3IoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMF0gKiBlWzBdICsgZVsxXSAqIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgfShycihlLCB0KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZVswXSAvIHQsIGVbMV0gLyB0XQogICAgICAgICAgICAgICAgICAgICAgICB9KGUsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmh5cG90KGVbMF0sIGVbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0oZSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmh5cG90KGVbMV0gLSB0WzFdLCBlWzBdIC0gdFswXSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnNpbihuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLmNvcyhuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlWzBdIC0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlWzFdIC0gdFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhICogciArIGkgKiBvOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2EgKiBvIC0gaSAqIHIgKyB0WzBdLCBsICsgdFsxXV0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5yKGUsIGFyKG9yKGUsIHQpLCBuKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGhyID0gTWF0aC5taW4sCiAgICAgICAgICAgICAgICAgICAgICAgIGZyID0gTWF0aC5QSTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbXIoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuc2ltdWxhdGVQcmVzc3VyZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB2b2lkIDAgPT09IG4gfHwgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LnN0cmVhbWxpbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdm9pZCAwID09PSBvID8gLjUgOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQuc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB2b2lkIDAgPT09IGkgPyA4IDogaTsKICAgICAgICAgICAgICAgICAgICAgICAgYSAvPSAyLCByIHx8IChhIC89IDIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlWzBdKSA/IGUubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGVbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdCwgbiwgdm9pZCAwID09PSByID8gLjUgOiByXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IGUubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUueSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnByZXNzdXJlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QsIG4sIHZvaWQgMCA9PT0gciA/IC41IDogcl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBjKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIDEgPT09IGMgJiYgcy5wdXNoKG5yKHNbMF0sIFsxLCAwXSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB1ID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludDogW3NbMF1bMF0sIHNbMF1bMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNzdXJlOiBzWzBdWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvcjogWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdMZW5ndGg6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLCBkID0gMSwgcCA9IHNbZF0sIGggPSB1WzBdOyBkIDwgcy5sZW5ndGg7IHAgPSBzWysrZF0sIGggPSB1W2QgLSAxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBwcihoLnBvaW50LCBwLCAxIC0gYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHBbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGNyKG9yKGYsIGgucG9pbnQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gdXIoZiwgaC5wb2ludCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGgucnVubmluZ0xlbmd0aCArIHY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50OiBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNzdXJlOiBtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvcjogZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogdiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nTGVuZ3RoOiBiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSB1W2MgLSAxXS5ydW5uaW5nTGVuZ3RoLCB3ID0gYyAtIDI7IHcgPiAxOyB3LS0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdVt3XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0geC5ydW5uaW5nTGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSB4LnZlY3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTID0gbHIodVt3IC0gMV0udmVjdG9yLCB1W3ddLnZlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSAtIEUgPiBsIC8gMiB8fCBTIDwgLjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBDID0gdzsgQyA8IGM7IEMrKykgdVtDXS52ZWN0b3IgPSBrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3IgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgKHQgPSB7fSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4uc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHZvaWQgMCA9PT0gciA/IDggOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbi50aGlubmluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZvaWQgMCA9PT0gYSA/IC41IDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4uc21vb3RoaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdm9pZCAwID09PSBsID8gLjUgOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbi5zaW11bGF0ZVByZXNzdXJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdm9pZCAwID09PSBjIHx8IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBuLmVhc2luZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHZvaWQgMCA9PT0gZCA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gbi5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHZvaWQgMCA9PT0gaCA/IHt9IDogaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG4uZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gdm9pZCAwID09PSBtID8ge30gOiBtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gbi5sYXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdm9pZCAwICE9PSB2ICYmIHYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB0LnN0cmVhbWxpbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB2b2lkIDAgPT09IHkgPyAuNSA6IHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyAvPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZi50YXBlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9IHZvaWQgMCA9PT0geCA/IDAgOiB4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gZi5lYXNpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSB2b2lkIDAgPT09IGsgPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAqICgyIC0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBnLnRhcGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gdm9pZCAwID09PSBDID8gMCA6IEMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBnLmVhc2luZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUCA9IHZvaWQgMCA9PT0gTSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtLWUgKiBlICogZSArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IE0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgPSBlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gSSkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIFQgPSBlW0kgLSAxXS5ydW5uaW5nTGVuZ3RoLCBMID0gW10sIEEgPSBbXSwgXyA9IGUuc2xpY2UoMCwgNSkucmVkdWNlKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgKyB0LnByZXNzdXJlKSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGVbMF0ucHJlc3N1cmUpLCBEID0gdHIobywgaSwgcCwgZVtJIC0gMV0ucHJlc3N1cmUpLCBqID0gZVswXS52ZWN0b3IsIHogPSBlWzBdLnBvaW50LCBCID0geiwgSCA9IHosIE4gPSBCLCBSID0gMTsgUiA8IEkgLSAxOyBSKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEYgPSBlW1JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVyA9IEYucG9pbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWID0gRi5wcmVzc3VyZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEcgPSBGLnZlY3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEsgPSBGLmRpc3RhbmNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVSA9IEYucnVubmluZ0xlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFogPSBocigxLCAxIC0gSyAvIG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZID0gaHIoMSwgSyAvIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYgPSBocigxLCBfICsgWSAvIDIgKiAoWiAtIF8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IHRyKG8sIGksIHAsIFYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBEID0gbyAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBYID0gVSA8IEUgPyBTKFUgLyBFKSA6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gVCAtIFUgPCBPID8gUCgoVCAtIFUpIC8gTykgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEICo9IE1hdGgubWluKFgsIHEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUSA9IGVbUiArIDFdLnZlY3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQgPSBscihHLCBRKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBKID0gYXIoaXIoaiksIEQpLCBlZSA9IG5yKFcsIEopLCB0ZSA9IHJyKFcsIEopLCBuZSA9IC4yOyBuZSA8IDE7IG5lICs9IC4yKSBOID0gZHIoZWUsIFcsIGZyICogLW5lKSwgSCA9IGRyKHRlLCBXLCBmciAqIG5lKSwgQS5wdXNoKE4pLCBMLnB1c2goSCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0gSCwgQiA9IE4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZSA9IGFyKGlyKHByKFEsIEcsICQpKSwgRCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIID0gcnIoVywgcmUpLCBOID0gbnIoVywgcmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9lID0gMSA9PT0gUiB8fCAkIDwgLjI1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFlID0gTWF0aC5wb3coKFUgPiBvID8gbyA6IG8gLyAyKSAqIHMsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9lIHx8IHNyKHosIEgpID4gYWUpICYmIChMLnB1c2gocHIoeiwgSCwgdykpLCB6ID0gSCksIChvZSB8fCBzcihCLCBOKSA+IGFlKSAmJiAoQS5wdXNoKHByKEIsIE4sIHcpKSwgQiA9IE4pLCBfID0gViwgaiA9IEcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWUgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZSA9IGVbSSAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZSA9IEEubGVuZ3RoIDwgMiB8fCBMLmxlbmd0aCA8IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlICYmICghRSAmJiAhTyB8fCBiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjZSA9IDAsIHVlID0gMDsgdWUgPCBJOyB1ZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGUgPSBlW3VlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZSA9IGRlLnByZXNzdXJlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlLnJ1bm5pbmdMZW5ndGggPiBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2UgPSB0cihvLCBpLCBwLCBwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBoZSA9IHJyKGllLnBvaW50LCBhcihpcihjcihvcihsZS5wb2ludCwgaWUucG9pbnQpKSksIGNlIHx8IEQpKSwgZmUgPSBbXSwgbWUgPSAwOyBtZSA8PSAxOyBtZSArPSAuMSkgZmUucHVzaChkcihoZSwgaWUucG9pbnQsIDIgKiBmciAqIG1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2UgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShFIHx8IE8gJiYgc2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE4gPSBBWzFdLCBIID0gTFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdmUgPSBycihpZS5wb2ludCwgYXIoY3Iob3IoTiwgSCkpLCB1cihOLCBIKSAvIDIpKSwgYmUgPSAwOyBiZSA8PSAxOyBiZSArPSAuMikgZ2UucHVzaChkcih2ZSwgaWUucG9pbnQsIGZyICogYmUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTC5zaGlmdCgpLCBBLnNoaWZ0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHllID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8gfHwgRSAmJiBzZSkgeWUucHVzaChsZS5wb2ludCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB3ZSA9IHJyKGxlLnBvaW50LCBhcihpcihsZS52ZWN0b3IpLCBEKSksIHhlID0gMDsgeGUgPD0gMTsgeGUgKz0gLjEpIHllLnB1c2goZHIod2UsIGxlLnBvaW50LCAzICogZnIgKiB4ZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMLmNvbmNhdCh5ZSwgQS5yZXZlcnNlKCksIGdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShtcihlLCB0KSwgdCkKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB2cihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYnIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyB2cihPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiB2cihPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciB5ciA9IFhuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHdyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsxLjUsIDYgKyBlXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB4ciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnJlZWRyYXciID09PSBlLnR5cGUgPyAxMiAqIGUuc3Ryb2tlV2lkdGggOiAyMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBFciA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobi5nbG9iYWxBbHBoYSA9IGUub3BhY2l0eSAvIDEwMCwgZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVjdGFuZ2xlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJkaWFtb25kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5saW5lSm9pbiA9ICJyb3VuZCIsIG4ubGluZUNhcCA9ICJyb3VuZCIsIHQuZHJhdyhDcihlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImFycm93IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJsaW5lIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5saW5lSm9pbiA9ICJyb3VuZCIsIG4ubGluZUNhcCA9ICJyb3VuZCIsIENyKGUpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZHJhdyhlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZyZWVkcmF3IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zYXZlKCksIG4uZmlsbFN0eWxlID0gZS5zdHJva2VDb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3IuZ2V0KGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZmlsbFN0eWxlID0gZS5zdHJva2VDb2xvciwgbi5maWxsKHIpLCBuLnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFWZShlKSkgdGhyb3cgbmV3IEVycm9yKCJVbmltcGxlbWVudGVkIHR5cGUgIi5jb25jYXQoZS50eXBlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gR24oZS50ZXh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvICYmICFuLmNhbnZhcy5pc0Nvbm5lY3RlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4uY2FudmFzKSwgbi5jYW52YXMuc2V0QXR0cmlidXRlKCJkaXIiLCBvID8gInJ0bCIgOiAibHRyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbi5mb250OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmZvbnQgPSBMbihlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBuLmZpbGxTdHlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5maWxsU3R5bGUgPSBlLnN0cm9rZUNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG4udGV4dEFsaWduOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnRleHRBbGlnbiA9IGUudGV4dEFsaWduOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gZS50ZXh0LnJlcGxhY2UoL1xyXG4/L2csICJcbiIpLnNwbGl0KCJcbiIpLCB1ID0gZS5oZWlnaHQgLyBjLmxlbmd0aCwgZCA9IGUuaGVpZ2h0IC0gZS5iYXNlbGluZSwgcCA9ICJjZW50ZXIiID09PSBlLnRleHRBbGlnbiA/IGUud2lkdGggLyAyIDogInJpZ2h0IiA9PT0gZS50ZXh0QWxpZ24gPyBlLndpZHRoIDogMCwgaCA9IDA7IGggPCBjLmxlbmd0aDsgaCsrKSBuLmZpbGxUZXh0KGNbaF0sIHAsIChoICsgMSkgKiB1IC0gZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZmlsbFN0eWxlID0gbCwgbi5mb250ID0gaSwgbi50ZXh0QWxpZ24gPSBzLCBhICYmIG4uY2FudmFzLnJlbW92ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmdsb2JhbEFscGhhID0gMQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrciA9IG5ldyBXZWFrTWFwLAogICAgICAgICAgICAgICAgICAgICAgICBTciA9IG5ldyBXZWFrTWFwLAogICAgICAgICAgICAgICAgICAgICAgICBDciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTci5nZXQoZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgT3IgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3IuZGVsZXRlKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE1yID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZDogZS5zZWVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVEYXNoOiAiZGFzaGVkIiA9PT0gZS5zdHJva2VTdHlsZSA/IChuID0gZS5zdHJva2VXaWR0aCwgWzgsIDggKyBuXSkgOiAiZG90dGVkIiA9PT0gZS5zdHJva2VTdHlsZSA/IHdyKGUuc3Ryb2tlV2lkdGgpIDogdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVNdWx0aVN0cm9rZTogInNvbGlkIiAhPT0gZS5zdHJva2VTdHlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogInNvbGlkIiAhPT0gZS5zdHJva2VTdHlsZSA/IGUuc3Ryb2tlV2lkdGggKyAuNSA6IGUuc3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFdlaWdodDogZS5zdHJva2VXaWR0aCAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFjaHVyZUdhcDogNCAqIGUuc3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiBlLnJvdWdobmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGUuc3Ryb2tlQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2VydmVWZXJ0aWNlczogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVjdGFuZ2xlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJkaWFtb25kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZmlsbFN0eWxlID0gZS5maWxsU3R5bGUsIHIuZmlsbCA9ICJ0cmFuc3BhcmVudCIgPT09IGUuYmFja2dyb3VuZENvbG9yID8gdm9pZCAwIDogZS5iYWNrZ3JvdW5kQ29sb3IsICJlbGxpcHNlIiA9PT0gZS50eXBlICYmIChyLmN1cnZlRml0dGluZyA9IDEpLCByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImxpbmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHQoZS5wb2ludHMpICYmIChyLmZpbGxTdHlsZSA9IGUuZmlsbFN0eWxlLCByLmZpbGwgPSAidHJhbnNwYXJlbnQiID09PSBlLmJhY2tncm91bmRDb2xvciA/IHZvaWQgMCA6IGUuYmFja2dyb3VuZENvbG9yKSwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmcmVlZHJhdyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYXJyb3ciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVuaW1wbGVtZW50ZWQgdHlwZSAiLmNvbmNhdChlLnR5cGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQciA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gU3IuZ2V0KGUpIHx8IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtyLmRlbGV0ZShlKSwgZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInJlY3RhbmdsZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInJvdW5kIiA9PT0gZS5zdHJva2VTaGFycG5lc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IC4yNSAqIE1hdGgubWluKHIsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0LnBhdGgoIk0gIi5jb25jYXQoYSwgIiAwIEwgIikuY29uY2F0KHIgLSBhLCAiIDAgUSAiKS5jb25jYXQociwgIiAwLCAiKS5jb25jYXQociwgIiAiKS5jb25jYXQoYSwgIiBMICIpLmNvbmNhdChyLCAiICIpLmNvbmNhdChvIC0gYSwgIiBRICIpLmNvbmNhdChyLCAiICIpLmNvbmNhdChvLCAiLCAiKS5jb25jYXQociAtIGEsICIgIikuY29uY2F0KG8sICIgTCAiKS5jb25jYXQoYSwgIiAiKS5jb25jYXQobywgIiBRIDAgIikuY29uY2F0KG8sICIsIDAgIikuY29uY2F0KG8gLSBhLCAiIEwgMCAiKS5jb25jYXQoYSwgIiBRIDAgMCwgIikuY29uY2F0KGEsICIgMCIpLCBNcihlLCAhMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbiA9IHQucmVjdGFuZ2xlKDAsIDAsIGUud2lkdGgsIGUuaGVpZ2h0LCBNcihlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBNYXRoLmZsb29yKGUud2lkdGggLyAyKSArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBNYXRoLmZsb29yKGUuaGVpZ2h0IC8gMikgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QsIDAsIG4sIHIsIHQsIGUuaGVpZ2h0LCAwLCByXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGlbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGlbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGlbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGlbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGlbNl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGlbN107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdC5wb2x5Z29uKFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbCwgc10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2MsIHVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkLCBwXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaCwgZl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sIE1yKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0LmVsbGlwc2UoZS53aWR0aCAvIDIsIGUuaGVpZ2h0IC8gMiwgZS53aWR0aCwgZS5oZWlnaHQsIE1yKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJsaW5lIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYXJyb3ciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBNcihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZS5wb2ludHMubGVuZ3RoID8gZS5wb2ludHMgOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9ICJzaGFycCIgPT09IGUuc3Ryb2tlU2hhcnBuZXNzID8gbS5maWxsID8gW3QucG9seWdvbihnLCBtKV0gOiBbdC5saW5lYXJQYXRoKGcsIG0pXSA6IFt0LmN1cnZlKGcsIG0pXSwgImFycm93IiA9PT0gZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBlLnN0YXJ0QXJyb3doZWFkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdm9pZCAwID09PSB2ID8gbnVsbCA6IHYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBlLmVuZEFycm93aGVhZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHZvaWQgMCA9PT0geSA/ICJhcnJvdyIgOiB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gZnVuY3Rpb24oZSwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBjdCh0WzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5sZW5ndGggPCAxKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9ICJzdGFydCIgPT09IG4gPyAxIDogby5sZW5ndGggLSAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gb1thXS5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gW2lbNF0sIGlbNV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gW2lbMl0sIGlbM11dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW2lbMF0sIGlbMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gb1thIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBbMCwgMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1vdmUiID09PSB1Lm9wID8gZCA9IHUuZGF0YSA6ICJiY3VydmVUbyIgPT09IHUub3AgJiYgKGQgPSBbdS5kYXRhWzRdLCB1LmRhdGFbNV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygxIC0gZSwgMykgKiBsW3RdICsgMyAqIGUgKiBNYXRoLnBvdygxIC0gZSwgMikgKiBzW3RdICsgMyAqIE1hdGgucG93KGUsIDIpICogKDEgLSBlKSAqIGNbdF0gKyBkW3RdICogTWF0aC5wb3coZSwgMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9ICJzdGFydCIgPT09IG4gPyBkIDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGhbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gW3AoLjMsIDApLCBwKC4zLCAxKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBnWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gZ1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IE1hdGguaHlwb3QoZiAtIHYsIG0gLSBiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IChmIC0gdikgLyB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gKG0gLSBiKSAvIHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJvdzogMzAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXI6IDE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90OiAxNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFtyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGUucG9pbnRzLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuID4gMCA/IHJbbiAtIDFdIDogWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBpWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgKyBNYXRoLmh5cG90KG8gLSBsLCBhIC0gcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTID0gTWF0aC5taW4oRSwgayAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gZiAtIHcgKiBTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gbSAtIHggKiBTOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZG90IiA9PT0gcikgcmV0dXJuIFtmLCBtLCBNYXRoLmh5cG90KE8gLSBtLCBDIC0gZikgKyBlLnN0cm9rZVdpZHRoXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycm93OiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcjogOTAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBbcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAgPSBRZShDLCBPLCBmLCBtLCAtTSAqIE1hdGguUEkgLyAxODApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJID0gUFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IFBbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwgPSBRZShDLCBPLCBmLCBtLCBNICogTWF0aC5QSSAvIDE4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmLCBtLCBJLCBULCBMWzBdLCBMWzFdXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCBuLCByLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBhKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImRvdCIgPT09IG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYVsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QuY2lyY2xlKGksIGwsIHMsIGJyKGJyKHt9LCBtKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZS5zdHJva2VDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiAic29saWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gYVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gYVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gYVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gYVs0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gYVs1XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZG90dGVkIiA9PT0gZS5zdHJva2VTdHlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gd3IoZS5zdHJva2VXaWR0aCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc3Ryb2tlTGluZURhc2ggPSBbZ1swXSwgZ1sxXSAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZGVsZXRlIG0uc3Ryb2tlTGluZURhc2g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QubGluZShkLCBwLCBjLCB1LCBtKSwgdC5saW5lKGgsIGYsIGMsIHUsIG0pXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFID0geChlLCBuLCAic3RhcnQiLCBiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoLmFwcGx5KG4sIEUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSB4KGUsIG4sICJlbmQiLCB3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoLmFwcGx5KG4sIEUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZyZWVkcmF3IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyKGUpLCBuID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3Iuc2V0KGUsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIElyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0ID8gdC56b29tIDogeXIuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0ga3IuZ2V0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByICYmIHIuY2FudmFzWm9vbSAhPT0gbi52YWx1ZSAmJiAhKG51bGwgIT0gdCAmJiB0LnNob3VsZENhY2hlSWdub3JlWm9vbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIgfHwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4uZ2V0Q29udGV4dCgiMmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB4cihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChVZShlKSB8fCBHZShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbFsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gbFszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBNYXRoLmZsb29yKHMpLCB1ID0gTWF0aC5jZWlsKHUpLCBjID0gTWF0aC5mbG9vcihjKSwgZCA9IE1hdGguY2VpbChkKSwgbi53aWR0aCA9IERuKHMsIHUpICogd2luZG93LmRldmljZVBpeGVsUmF0aW8gKiB0LnZhbHVlICsgbyAqIHQudmFsdWUgKiAyLCBuLmhlaWdodCA9IERuKGMsIGQpICogd2luZG93LmRldmljZVBpeGVsUmF0aW8gKiB0LnZhbHVlICsgbyAqIHQudmFsdWUgKiAyLCBhID0gZS54ID4gcyA/IE1hdGguZmxvb3IoRG4oZS54LCBzKSkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUgOiAwLCBpID0gZS55ID4gYyA/IE1hdGguZmxvb3IoRG4oZS55LCBjKSkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUgOiAwLCByLnRyYW5zbGF0ZShhLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugbi53aWR0aCA9IGUud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUgKyBvICogdC52YWx1ZSAqIDIsIG4uaGVpZ2h0ID0gZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUgKyBvICogdC52YWx1ZSAqIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIudHJhbnNsYXRlKG8gKiB0LnZhbHVlLCBvICogdC52YWx1ZSksIHIuc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8gKiB0LnZhbHVlLCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IERlLmNhbnZhcyhuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVyKGUsIHAsIHIpLCByLnRyYW5zbGF0ZSgtbyAqIHQudmFsdWUsIC1vICogdC52YWx1ZSksIHIuc2NhbGUoMSAvICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAqIHQudmFsdWUpLCAxIC8gKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICogdC52YWx1ZSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzWm9vbTogdC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc09mZnNldFg6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNPZmZzZXRZOiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrci5zZXQoZSwgYSksIGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRyID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLmVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHhyKG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzdChvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gaVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdlKG8pICYmIChsID0gTWF0aC5mbG9vcihsKSwgYyA9IE1hdGguY2VpbChjKSwgcyA9IE1hdGguZmxvb3IocyksIHUgPSBNYXRoLmNlaWwodSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAoKGwgKyBjKSAvIDIgKyByLnNjcm9sbFgpICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9ICgocyArIHUpIC8gMiArIHIuc2Nyb2xsWSkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2NhbGUoMSAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAxIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pLCBuLnRyYW5zbGF0ZShkLCBwKSwgbi5yb3RhdGUoby5hbmdsZSksIG4uZHJhd0ltYWdlKGUuY2FudmFzLCAtKGMgLSBsKSAvIDIgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAtIGEgKiBlLmNhbnZhc1pvb20gLyBlLmNhbnZhc1pvb20sIC0odSAtIHMpIC8gMiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC0gYSAqIGUuY2FudmFzWm9vbSAvIGUuY2FudmFzWm9vbSwgZS5jYW52YXMud2lkdGggLyBlLmNhbnZhc1pvb20sIGUuY2FudmFzLmhlaWdodCAvIGUuY2FudmFzWm9vbSksIG4ucm90YXRlKC1vLmFuZ2xlKSwgbi50cmFuc2xhdGUoLWQsIC1wKSwgbi5zY2FsZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIExyID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0LmdlbmVyYXRvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic2VsZWN0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi50cmFuc2xhdGUoZS54ICsgby5zY3JvbGxYLCBlLnkgKyBvLnNjcm9sbFkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4uZmlsbFN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmZpbGxTdHlsZSA9ICJyZ2JhKDAsIDAsIDI1NSwgMC4xMCkiLCBuLmZpbGxSZWN0KDAsIDAsIGUud2lkdGgsIGUuaGVpZ2h0KSwgbi5maWxsU3R5bGUgPSBpLCBuLnRyYW5zbGF0ZSgtZS54IC0gby5zY3JvbGxYLCAtZS55IC0gby5zY3JvbGxZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZnJlZWRyYXciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUHIoZSwgYSksIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gSXIoZSwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcihsLCAwLCBuLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gc1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gc1szXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gKGMgKyBkKSAvIDIgKyBvLnNjcm9sbFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9ICh1ICsgcCkgLyAyICsgby5zY3JvbGxZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAoZCAtIGMpIC8gMiAtIChlLnggLSBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gKHAgLSB1KSAvIDIgLSAoZS55IC0gdSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnRyYW5zbGF0ZShoLCBmKSwgbi5yb3RhdGUoZS5hbmdsZSksIG4udHJhbnNsYXRlKC1tLCAtZyksIEVyKGUsIHQsIG4pLCBuLnRyYW5zbGF0ZShtLCBnKSwgbi5yb3RhdGUoLWUuYW5nbGUpLCBuLnRyYW5zbGF0ZSgtaCwgLWYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVjdGFuZ2xlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJkaWFtb25kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJsaW5lIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJhcnJvdyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChQcihlLCBhKSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IElyKGUsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHIobCwgMCwgbiwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gc3QoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdlswXSwgdSA9IHZbMV0sIGQgPSB2WzJdLCBwID0gdlszXSwgaCA9IChjICsgZCkgLyAyICsgby5zY3JvbGxYLCBmID0gKHUgKyBwKSAvIDIgKyBvLnNjcm9sbFksIG0gPSAoZCAtIGMpIC8gMiAtIChlLnggLSBjKSwgZyA9IChwIC0gdSkgLyAyIC0gKGUueSAtIHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi50cmFuc2xhdGUoaCwgZiksIG4ucm90YXRlKGUuYW5nbGUpLCBuLnRyYW5zbGF0ZSgtbSwgLWcpLCBFcihlLCB0LCBuKSwgbi50cmFuc2xhdGUobSwgZyksIG4ucm90YXRlKC1lLmFuZ2xlKSwgbi50cmFuc2xhdGUoLWgsIC1mKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5pbXBsZW1lbnRlZCB0eXBlICIuY29uY2F0KGUudHlwZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEFyID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIGUuZHJhdyh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHM6IHQuc2V0cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogdC5zaGFwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBicihicih7fSwgdC5vcHRpb25zKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWREZWNpbWFsUGxhY2VEaWdpdHM6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRyYXcocikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX3IgPSBuZXcgV2Vha01hcChbXSk7CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERyKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBqcihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuZXcgUGF0aDJEKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3Iuc2V0KGUsIG4pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqcihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5zaW11bGF0ZVByZXNzdXJlID8gZS5wb2ludHMgOiBlLnBvaW50cy5sZW5ndGggPyBlLnBvaW50cy5tYXAoKGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RbMF0sIHRbMV0sIGUucHJlc3N1cmVzW25dXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAwLCAwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVQcmVzc3VyZTogZS5zaW11bGF0ZVByZXNzdXJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDYgKiBlLnN0cm9rZVdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5uaW5nOiAuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGhpbmc6IC41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbWxpbmU6IC41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAqICgyIC0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3Q6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGdyKHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gclsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKCJNIiwgYVswXSwgYVsxXSwgIlEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCByLmxlbmd0aDsgbCsrKSBvLnB1c2goYVswXSwgYVsxXSwgKGFbMF0gKyBpWzBdKSAvIDIsIChhWzFdICsgaVsxXSkgLyAyKSwgYSA9IGksIGkgPSByW2xdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSA9IHJbMF0sIG8ucHVzaChhWzBdLCBhWzFdLCAoYVswXSArIGlbMF0pIC8gMiwgKGFbMV0gKyBpWzFdKSAvIDIpLCBvLnB1c2goIloiKSwgby5qb2luKCIgIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHpyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEJyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IFNldCwgdGhpcy5ub25EZWxldGVkRWxlbWVudHMgPSBbXSwgdGhpcy5lbGVtZW50cyA9IFtdLCB0aGlzLmVsZW1lbnRzTWFwID0gbmV3IE1hcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubWFwRWxlbWVudFRvU2NlbmUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgenIoZSkgPyB0aGlzLnNjZW5lTWFwQnlJZC5zZXQoZSwgdCkgOiB0aGlzLnNjZW5lTWFwQnlFbGVtZW50LnNldChlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5nZXRTY2VuZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4genIoZSkgPyB0aGlzLnNjZW5lTWFwQnlJZC5nZXQoZSkgfHwgbnVsbCA6IHRoaXMuc2NlbmVNYXBCeUVsZW1lbnQuZ2V0KGUpIHx8IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUucHJvdG90eXBlLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5nZXRFbGVtZW50cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vbkRlbGV0ZWRFbGVtZW50cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c01hcC5nZXQoZSkgfHwgbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuZ2V0Tm9uRGVsZXRlZEVsZW1lbnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmdldEVsZW1lbnQoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgRGkodCkgPyB0IDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuZ2V0Tm9uRGVsZXRlZEVsZW1lbnRzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0LmdldE5vbkRlbGV0ZWRFbGVtZW50KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHIgJiYgbi5wdXNoKHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5yZXBsYWNlQWxsRWxlbWVudHMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSB0LCB0aGlzLmVsZW1lbnRzTWFwLmNsZWFyKCksIHQuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmVsZW1lbnRzTWFwLnNldCh0LmlkLCB0KSwgZS5tYXBFbGVtZW50VG9TY2VuZSh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdGhpcy5ub25EZWxldGVkRWxlbWVudHMgPSBfaSh0aGlzLmVsZW1lbnRzKSwgdGhpcy5pbmZvcm1NdXRhdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5pbmZvcm1NdXRhdGlvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCB0ID0gQXJyYXkuZnJvbSh0aGlzLmNhbGxiYWNrcyk7IGUgPCB0Lmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCB0W2VdKSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuYWRkQ2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy5oYXMoZSkpIHRocm93IG5ldyBFcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja3MuYWRkKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdC5jYWxsYmFja3MuaGFzKGUpKSB0aHJvdyBuZXcgRXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNhbGxiYWNrcy5kZWxldGUoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNjZW5lTWFwQnlJZC5mb3JFYWNoKChmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPT09IHQgJiYgZS5zY2VuZU1hcEJ5SWQuZGVsZXRlKHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLmNhbGxiYWNrcy5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAgICAgICBCci5zY2VuZU1hcEJ5RWxlbWVudCA9IG5ldyBXZWFrTWFwLCBCci5zY2VuZU1hcEJ5SWQgPSBuZXcgTWFwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IEhyID0gQnI7CiAgICAgICAgICAgICAgICAgICAgdmFyIE5yID0gbmV3IFooRGF0ZS5ub3coKSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihOci5uZXh0KCkgKiBNYXRoLnBvdygyLCAzMSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEZyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBXcihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVnIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBXcihPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBXcihPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBHciA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQucG9pbnRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB2b2lkIDAgIT09IG8gJiYgKHQgPSBWcihWcih7fSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogTWF0aC5tYXguYXBwbHkoTWF0aCwgdCkgLSBNYXRoLm1pbi5hcHBseShNYXRoLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5tYXguYXBwbHkoTWF0aCwgbikgLSBNYXRoLm1pbi5hcHBseShNYXRoLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShvKSksIHQpKSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdFthXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlW2FdID09PSBpICYmICgib2JqZWN0IiAhPSB0eXBlb2YgaSB8fCBudWxsID09PSBpIHx8ICJncm91cElkcyIgPT09IGEpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJwb2ludHMiID09PSBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGVbYV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobC5sZW5ndGggPT09IHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9ICExLCB1ID0gbC5sZW5ndGg7IC0tdTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBsW3VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHNbdV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkWzBdICE9PSBwWzBdIHx8IGRbMV0gIT09IHBbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjKSBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbYV0gPSBpLCByID0gITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmICh2b2lkIDAgPT09IHQuaGVpZ2h0ICYmIHZvaWQgMCA9PT0gdC53aWR0aCAmJiB2b2lkIDAgPT09IG8gfHwgT3IoZSksIGUudmVyc2lvbisrLCBlLnZlcnNpb25Ob25jZSA9IFJyKCksIG51bGwgPT09IChuID0gSHIuZ2V0U2NlbmUoZSkpIHx8IHZvaWQgMCA9PT0gbiB8fCBuLmluZm9ybU11dGF0aW9uKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEtyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlW3JdID09PSBvICYmICgib2JqZWN0IiAhPSB0eXBlb2YgbyB8fCBudWxsID09PSBvIHx8ICJncm91cElkcyIgPT09IHIpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyBWcihWcihWcih7fSwgZSksIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvbiArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk5vbmNlOiBScigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS52ZXJzaW9uID0gZS52ZXJzaW9uICsgMSwgZS52ZXJzaW9uTm9uY2UgPSBScigpLCBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFpyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVlKGUpIHx8IEdlKGUpID8gZS5wb2ludHMubGVuZ3RoIDwgMiA6IDAgPT09IGUud2lkdGggJiYgMCA9PT0gZS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWXIgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguYWJzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLmFicyhuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibGluZSIgPT09IGUgfHwgImFycm93IiA9PT0gZSB8fCAiZnJlZWRyYXciID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBNYXRoLnJvdW5kKE1hdGguYXRhbihvIC8gcikgLyBkLmF5KSAqIGQuYXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gYSA/IG4gPSAwIDogYSA9PT0gTWF0aC5QSSAvIDIgPyB0ID0gMCA6IG4gPSBNYXRoLnJvdW5kKHIgKiBNYXRoLnRhbihhKSkgKiBNYXRoLnNpZ24obikgfHwgbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlICJzZWxlY3Rpb24iICE9PSBlICYmIChuID0gciAqIE1hdGguc2lnbihuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBYciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZS5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLndpZHRoIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gTWF0aC5hYnMoZS53aWR0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC53aWR0aCA9IG4sIHQueCA9IGUueCAtIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmhlaWdodCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguYWJzKGUuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmhlaWdodCA9IHIsIHQueSA9IGUueSAtIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHFyKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IGEubGVuZ3RoOyByKyspIG4gPSBhW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAob1tuXSA9IGVbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBhLmxlbmd0aDsgcisrKSBuID0gYVtyXSwgdC5pbmRleE9mKG4pID49IDAgfHwgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIG4pICYmIChvW25dID0gZVtuXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgUXIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAkcihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSnIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyAkcihPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiAkcihPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBlbyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBvLCBhID0gbi5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ncm91cElkcy5pbmNsdWRlcyhlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubGVuZ3RoIDwgMiA/IHQuc2VsZWN0ZWRHcm91cElkc1tlXSB8fCB0LmVkaXRpbmdHcm91cElkID09PSBlID8gSnIoSnIoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IEpyKEpyKHt9LCB0LnNlbGVjdGVkR3JvdXBJZHMpLCB7fSwgKHIgPSB7fSwgcltlXSA9ICExLCByKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogdCA6IEpyKEpyKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiBKcihKcih7fSwgdC5zZWxlY3RlZEdyb3VwSWRzKSwge30sIChvID0ge30sIG9bZV0gPSAhMCwgbykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogSnIoSnIoe30sIHQuc2VsZWN0ZWRFbGVtZW50SWRzKSwgT2JqZWN0LmZyb21FbnRyaWVzKGEubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZS5pZCwgITBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gbm8oZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbm8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ncm91cElkcy5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAhPT0gZS5lZGl0aW5nR3JvdXBJZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmZpbmQoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZWxlY3RlZEdyb3VwSWRzW3RdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcm8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZS5zZWxlY3RlZEdyb3VwSWRzKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBKcih7fSwgZSksIHIgPSAwLCBvID0gTmkodCwgZSk7IHIgPCBvLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvW3JdLmdyb3VwSWRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmVkaXRpbmdHcm91cElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYS5pbmRleE9mKGUuZWRpdGluZ0dyb3VwSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID4gLTEgJiYgKGEgPSBhLnNsaWNlKDAsIGkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gYVthLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZW8obCwgbiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBhbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdyb3VwSWRzLmluY2x1ZGVzKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGlvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFvKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbG8gPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFFyKFtdLCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbiA/IHIuaW5kZXhPZihuKSA6IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvID4gLTEgPyBvIDogci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5zcGxpY2UoYSwgMCwgdCksIHIKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc28oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gc28oT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogc28oT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdW8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbyA9IHQueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC55LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0LnN0cm9rZUNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0LmJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdC5maWxsU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHQuc3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHQuc3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHQucm91Z2huZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0Lm9wYWNpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHZvaWQgMCA9PT0gaCA/IDAgOiBoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB0LmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gdm9pZCAwID09PSBtID8gMCA6IG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHQuYW5nbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHZvaWQgMCA9PT0gdiA/IDAgOiB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB0Lmdyb3VwSWRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB2b2lkIDAgPT09IHkgPyBbXSA6IHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHQuc3Ryb2tlU2hhcnBuZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSB0LmJvdW5kRWxlbWVudElkcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gdm9pZCAwID09PSBFID8gbnVsbCA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyA9IHFyKHQsIFsieCIsICJ5IiwgInN0cm9rZUNvbG9yIiwgImJhY2tncm91bmRDb2xvciIsICJmaWxsU3R5bGUiLCAic3Ryb2tlV2lkdGgiLCAic3Ryb2tlU3R5bGUiLCAicm91Z2huZXNzIiwgIm9wYWNpdHkiLCAid2lkdGgiLCAiaGVpZ2h0IiwgImFuZ2xlIiwgImdyb3VwSWRzIiwgInN0cm9rZVNoYXJwbmVzcyIsICJib3VuZEVsZW1lbnRJZHMiXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBTLmlkIHx8IEZyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IHUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiBkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IHcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU2hhcnBuZXNzOiB4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQ6IG51bGwgIT09IChuID0gUy5zZWVkKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogUnIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBTLnZlcnNpb24gfHwgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uTm9uY2U6IG51bGwgIT09IChyID0gUy52ZXJzaW9uTm9uY2UpICYmIHZvaWQgMCAhPT0gciA/IHIgOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50SWRzOiBrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBvID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVvKGUudHlwZSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaG8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ICJjZW50ZXIiID09PSBlLnRleHRBbGlnbiA/IHQud2lkdGggLyAyIDogInJpZ2h0IiA9PT0gZS50ZXh0QWxpZ24gPyB0LndpZHRoIDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAibWlkZGxlIiA9PT0gZS52ZXJ0aWNhbEFsaWduID8gdC5oZWlnaHQgLyAyIDogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmbyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gQW4oZS50ZXh0LCBMbihlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGhvKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtyKGNvKGNvKHt9LCB1bygidGV4dCIsIGUpKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IGUuZm9udFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogZS5mb250RmFtaWx5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogZS50ZXh0QWxpZ24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogZS52ZXJ0aWNhbEFsaWduLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCAtIG4ueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnkgLSBuLnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0LmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlbGluZTogdC5iYXNlbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBtbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmlzRGVsZXRlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLcihlLCBjbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IG51bGwgIT0gciA/IHIgOiBlLmlzRGVsZXRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhID0gQW4odCwgTG4oZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYS53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGEuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYS5iYXNlbGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUudGV4dEFsaWduLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gZS52ZXJ0aWNhbEFsaWduOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiY2VudGVyIiA9PT0gYyAmJiAibWlkZGxlIiA9PT0gdSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IEFuKGUudGV4dCwgTG4oZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGhvKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaSAtIGQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBsIC0gZC5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS54IC0gcC54LCBvID0gZS55IC0gcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBoWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGhbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gaFsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBoWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGd0KGUsIGksIGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IChmIC0gYlswXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IChtIC0gYlsxXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IChnIC0gYlsyXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9ICh2IC0gYlszXSkgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gKG4gPSBKZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU6ICJjZW50ZXIiID09PSBjIHx8ICJsZWZ0IiA9PT0gYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6ICJjZW50ZXIiID09PSBjIHx8ICJyaWdodCIgPT09IGMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS54LCBlLnksIGUuYW5nbGUsIHksIHcsIHgsIEUpKVswXSwgbyA9IG5bMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogTnVtYmVyLmlzRmluaXRlKHIpID8gciA6IGUueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogTnVtYmVyLmlzRmluaXRlKG8pID8gbyA6IGUueSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZWxpbmU6IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIG4pKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZ28gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY28oY28oe30sIHVvKGUudHlwZSwgZSkpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogZS5wb2ludHMgfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENvbW1pdHRlZFBvaW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QmluZGluZzogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRCaW5kaW5nOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiBlLnN0YXJ0QXJyb3doZWFkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFycm93aGVhZDogZS5lbmRBcnJvd2hlYWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHZvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCAmJiAodCA9IDApLCBudWxsID09IGUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIGUpIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJbb2JqZWN0IE9iamVjdF0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUuY29uc3RydWN0b3IgPyBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkgOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmhhc093blByb3BlcnR5KHIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdCAmJiAoInNoYXBlIiA9PT0gciB8fCAiY2FudmFzIiA9PT0gcikpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbltyXSA9IHZvKGVbcl0sIHQgKyAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSBlLmxlbmd0aCwgYSA9IG5ldyBBcnJheShvKTsgby0tOykgYVtvXSA9IHZvKGVbb10sIHQgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYm8gPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHZvKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uaWQgPSBGcigpLCBvLnNlZWQgPSBScigpLCBvLmdyb3VwSWRzID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBRcihbXSwgZSksIG8gPSB0ID8gZS5pbmRleE9mKHQpIDogLTEsIGEgPSBvID4gLTEgPyBvIDogZS5sZW5ndGgsIGkgPSAwOyBpIDwgYTsgaSsrKSByW2ldID0gbihyW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShvLmdyb3VwSWRzLCBlLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmhhcyhlKSB8fCB0LnNldChlLCBGcigpKSwgdC5nZXQoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgciAmJiAobyA9IE9iamVjdC5hc3NpZ24obywgcikpLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHlvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2U6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW46IDE2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2g6IDI4CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG46ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeG8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBFbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgczogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnc6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2U6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG46ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdzogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgU28gPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IFFlKGUgKyBuIC8gMiwgdCArIHIgLyAyLCBvLCBhLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbbFswXSAtIG4gLyAyLCBsWzFdIC0gciAvIDIsIG4sIHJdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIENvID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBvICYmIChvID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB5b1tyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gYyAvIG4udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGMgLyBuLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjIC8gbi52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gYyAvIG4udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGwgLSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBzIC0gaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gKGEgKyBsKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IChpICsgcykgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSA0IC8gbi52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gKGMgLSA4KSAvICgyICogbi52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnc6IG8ubncgPyB2b2lkIDAgOiBTbyhhIC0gYiAtIHAgKyB5LCBpIC0gYiAtIGggKyB5LCB1LCBkLCBnLCB2LCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmU6IG8ubmUgPyB2b2lkIDAgOiBTbyhsICsgYiAtIHksIGkgLSBiIC0gaCArIHksIHUsIGQsIGcsIHYsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdzogby5zdyA/IHZvaWQgMCA6IFNvKGEgLSBiIC0gcCArIHksIHMgKyBiIC0geSwgdSwgZCwgZywgdiwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlOiBvLnNlID8gdm9pZCAwIDogU28obCArIGIgLSB5LCBzICsgYiAtIHksIHUsIGQsIGcsIHYsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogby5yb3RhdGlvbiA/IHZvaWQgMCA6IFNvKGEgKyBmIC8gMiAtIHUgLyAyLCBpIC0gYiAtIGggKyB5IC0gMTYgLyBuLnZhbHVlLCB1LCBkLCBnLCB2LCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDUgKiB5by5tb3VzZSAvIG4udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoZikgPiB4ICYmIChvLm4gfHwgKHcubiA9IFNvKGEgKyBmIC8gMiAtIHUgLyAyLCBpIC0gYiAtIGggKyB5LCB1LCBkLCBnLCB2LCB0KSksIG8ucyB8fCAody5zID0gU28oYSArIGYgLyAyIC0gdSAvIDIsIHMgKyBiIC0geSwgdSwgZCwgZywgdiwgdCkpKSwgTWF0aC5hYnMobSkgPiB4ICYmIChvLncgfHwgKHcudyA9IFNvKGEgLSBiIC0gcCArIHksIGkgKyBtIC8gMiAtIGQgLyAyLCB1LCBkLCBnLCB2LCB0KSksIG8uZSB8fCAody5lID0gU28obCArIGIgLSB5LCBpICsgbSAvIDIgLSBkIC8gMiwgdSwgZCwgZywgdiwgdCkpKSwgdwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBPbyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9ICJtb3VzZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiYXJyb3ciID09PSBlLnR5cGUgfHwgImxpbmUiID09PSBlLnR5cGUgfHwgImZyZWVkcmF3IiA9PT0gZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDIgPT09IGUucG9pbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGUucG9pbnRzWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBvWzBdIHx8IDAgPT09IG9bMV0gPyByID0ga28gOiBvWzBdID4gMCAmJiBvWzFdIDwgMCA/IHIgPSBFbyA6IG9bMF0gPiAwICYmIG9bMV0gPiAwID8gciA9IGtvIDogb1swXSA8IDAgJiYgb1sxXSA+IDAgPyByID0gRW8gOiBvWzBdIDwgMCAmJiBvWzFdIDwgMCAmJiAociA9IGtvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAidGV4dCIgPT09IGUudHlwZSAmJiAociA9IHhvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDbyhzdChlKSwgZS5hbmdsZSwgdCwgbiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTW8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzAsIDAsIDAsIDAsIHQsIGUsIDEsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gMCksIHZvaWQgMCA9PT0gdCAmJiAodCA9IDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA8IDAgfHwgdCA+IDcpIHRocm93IG5ldyBFcnJvcigiRXhwZWN0ZWQgYGluZGV4YCBiZXR3ZW4gMCBhbmQgNywgZ290IGAiLmNvbmNhdCh0LCAiYCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwICE9PSBlICYmIChuW3RdID0gZSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSW8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VbMF0sIGVbMV0sIGVbMl0sIGVbM10sIC1lWzRdLCAtZVs1XSwgLWVbNl0sIC1lWzddXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBUbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIbyh0KSA/IFtlWzBdIC0gdCwgZVsxXSwgZVsyXSwgZVszXSwgZVs0XSwgZVs1XSwgZVs2XSwgZVs3XV0gOiBbZVswXSAtIHRbMF0sIGVbMV0gLSB0WzFdLCBlWzJdIC0gdFsyXSwgZVszXSAtIHRbM10sIGVbNF0gLSB0WzRdLCBlWzVdIC0gdFs1XSwgZVs2XSAtIHRbNl0sIGVbN10gLSB0WzddXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBMbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIbyh0KSA/IFtlWzBdICogdCwgZVsxXSAqIHQsIGVbMl0gKiB0LCBlWzNdICogdCwgZVs0XSAqIHQsIGVbNV0gKiB0LCBlWzZdICogdCwgZVs3XSAqIHRdIDogW0FvKGUsIHQpLCB0WzFdICogZVswXSArIHRbMF0gKiBlWzFdIC0gdFs0XSAqIGVbMl0gKyB0WzVdICogZVszXSArIHRbMl0gKiBlWzRdIC0gdFszXSAqIGVbNV0gLSB0WzddICogZVs2XSAtIHRbNl0gKiBlWzddLCB0WzJdICogZVswXSArIHRbMF0gKiBlWzJdIC0gdFs2XSAqIGVbM10gKyB0WzNdICogZVs2XSwgdFszXSAqIGVbMF0gKyB0WzZdICogZVsyXSArIHRbMF0gKiBlWzNdIC0gdFsyXSAqIGVbNl0sIHRbNF0gKiBlWzBdICsgdFsyXSAqIGVbMV0gLSB0WzFdICogZVsyXSArIHRbN10gKiBlWzNdICsgdFswXSAqIGVbNF0gKyB0WzZdICogZVs1XSAtIHRbNV0gKiBlWzZdICsgdFszXSAqIGVbN10sIHRbNV0gKiBlWzBdIC0gdFszXSAqIGVbMV0gKyB0WzddICogZVsyXSArIHRbMV0gKiBlWzNdIC0gdFs2XSAqIGVbNF0gKyB0WzBdICogZVs1XSArIHRbNF0gKiBlWzZdICsgdFsyXSAqIGVbN10sIHRbNl0gKiBlWzBdICsgdFszXSAqIGVbMl0gLSB0WzJdICogZVszXSArIHRbMF0gKiBlWzZdLCB0WzddICogZVswXSArIHRbNl0gKiBlWzFdICsgdFs1XSAqIGVbMl0gKyB0WzRdICogZVszXSArIHRbM10gKiBlWzRdICsgdFsyXSAqIGVbNV0gKyB0WzFdICogZVs2XSArIHRbMF0gKiBlWzddXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBBbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0WzBdICogZVswXSArIHRbMl0gKiBlWzJdICsgdFszXSAqIGVbM10gLSB0WzZdICogZVs2XQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBfbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbRG8oZSwgdCksIGVbMV0gKiB0WzddICsgZVs0XSAqIHRbNV0gLSBlWzVdICogdFs0XSArIGVbN10gKiB0WzFdLCBlWzJdICogdFs3XSAtIGVbNF0gKiB0WzZdICsgZVs2XSAqIHRbNF0gKyBlWzddICogdFsyXSwgZVszXSAqIHRbN10gKyBlWzVdICogdFs2XSAtIGVbNl0gKiB0WzVdICsgZVs3XSAqIHRbM10sIGVbNF0gKiB0WzddICsgZVs3XSAqIHRbNF0sIGVbNV0gKiB0WzddICsgZVs3XSAqIHRbNV0sIGVbNl0gKiB0WzddICsgZVs3XSAqIHRbNl0sIGVbN10gKiB0WzddXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBEbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzBdICogdFs3XSArIGVbMV0gKiB0WzZdICsgZVsyXSAqIHRbNV0gKyBlWzNdICogdFs0XSArIGVbNF0gKiB0WzNdICsgZVs1XSAqIHRbMl0gKyBlWzZdICogdFsxXSArIGVbN10gKiB0WzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGpvID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLmFicyhlWzBdICogZVswXSAtIGVbMl0gKiBlWzJdIC0gZVszXSAqIGVbM10gKyBlWzZdICogZVs2XSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHpvID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBqbyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0IHx8IDEgPT09IHQpIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlWzZdIDwgMCA/IC0xIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMbyhlLCBuIC8gdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQm8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGguYWJzKGVbN10gKiBlWzddIC0gZVs1XSAqIGVbNV0gLSBlWzRdICogZVs0XSArIGVbMV0gKiBlWzFdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gdCB8fCAxID09PSB0ID8gZSA6IExvKGUsIDEgLyB0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBIbyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBObyA9IChQbygxLCAxKSwgUG8oMSwgMiksIFBvKDEsIDMpLCBQbygxLCA0KSwgUG8oMSwgNSksIFBvKDEsIDYpLCBQbygxLCA3KSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHpvKFswLCBuLCBlLCB0LCAwLCAwLCAwLCAwXSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHpvKF9vKHQsIGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBGbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gZSwgWyhyID0gdClbMF0gKiBuWzBdICsgclsyXSAqIG5bMl0gKyByWzNdICogblszXSAtIHJbNl0gKiBuWzZdLCByWzFdICogblswXSArIHJbMF0gKiBuWzFdIC0gcls0XSAqIG5bMl0gKyByWzVdICogblszXSArIHJbMl0gKiBuWzRdIC0gclszXSAqIG5bNV0gLSByWzddICogbls2XSAtIHJbNl0gKiBuWzddLCByWzJdICogblswXSArIHJbMF0gKiBuWzJdIC0gcls2XSAqIG5bM10gKyByWzNdICogbls2XSwgclszXSAqIG5bMF0gKyByWzZdICogblsyXSArIHJbMF0gKiBuWzNdIC0gclsyXSAqIG5bNl0sIHJbNF0gKiBuWzBdICsgcls3XSAqIG5bM10gKyByWzBdICogbls0XSArIHJbM10gKiBuWzddLCByWzVdICogblswXSArIHJbN10gKiBuWzJdICsgclswXSAqIG5bNV0gKyByWzJdICogbls3XSwgcls2XSAqIG5bMF0gKyByWzBdICogbls2XSwgcls3XSAqIG5bMF0gKyByWzBdICogbls3XV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgcgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBXbyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMCwgMCwgMCwgMCwgZVsxXSwgdCwgMSwgMF0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVm8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VbNV0sIGVbNF1dCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEdvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHpvKChuID0gZSwgWyhyID0gdClbMF0gKiBuWzBdLCByWzFdICogblswXSArIHJbMF0gKiBuWzFdLCByWzJdICogblswXSArIHJbMF0gKiBuWzJdLCByWzNdICogblswXSArIHJbMF0gKiBuWzNdLCByWzRdICogblswXSArIHJbMl0gKiBuWzFdIC0gclsxXSAqIG5bMl0gKyByWzBdICogbls0XSwgcls1XSAqIG5bMF0gLSByWzNdICogblsxXSArIHJbMV0gKiBuWzNdICsgclswXSAqIG5bNV0sIHJbNl0gKiBuWzBdICsgclszXSAqIG5bMl0gLSByWzJdICogblszXSArIHJbMF0gKiBuWzZdLCByWzddICogblswXSArIHJbNl0gKiBuWzFdICsgcls1XSAqIG5bMl0gKyByWzRdICogblszXSArIHJbM10gKiBuWzRdICsgclsyXSAqIG5bNV0gKyByWzFdICogbls2XV0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEtvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpvKF9vKGUsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBVbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEbyhlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBabyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMCwgMCwgMCwgMCwgZVs0XSwgZVs1XSwgMCwgMF0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWW8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IExvKGUsIE1hdGguc2luKHQgLyAyKSksIHIgPSBNYXRoLmNvcyh0IC8gMiksIEhvKHIpID8gW25bMF0gKyByLCBuWzFdLCBuWzJdLCBuWzNdLCBuWzRdLCBuWzVdLCBuWzZdLCBuWzddXSA6IFtuWzBdICsgclswXSwgblsxXSArIHJbMV0sIG5bMl0gKyByWzJdLCBuWzNdICsgclszXSwgbls0XSArIHJbNF0sIG5bNV0gKyByWzVdLCBuWzZdICsgcls2XSwgbls3XSArIHJbN11dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWG8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gem8oTG8oTG8oZSwgdCksIElvKGUpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcW8gPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IDEwIC8gdC56b29tLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFRbyhlLCB0LCBbbiwgcl0pICYmIEpvKGUsIFtuLCByXSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUW8gPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IDEwIC8gdC56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAidGV4dCIgPT09IGUudHlwZSA/IG9hIDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImFycm93IiA9PT0gZS50eXBlKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnJlZWRyYXciID09PSBlLnR5cGUpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAidHJhbnNwYXJlbnQiICE9PSBlLmJhY2tncm91bmRDb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJsaW5lIiA9PT0gZS50eXBlID8gdCAmJiB0dChlLnBvaW50cykgOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlKSA/IGFhIDogaWE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmEoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQ6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrOiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAkbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNlbGVjdGVkRWxlbWVudElkc1t0LmlkXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBKbyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGFbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFFlKHIsIG8sIChpICsgcykgLyAyLCAobCArIGMpIC8gMiwgLWUuYW5nbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB1WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB1WzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgPiBpIC0gbiAmJiBkIDwgcyArIG4gJiYgcCA+IGwgLSBuICYmIHAgPCBjICsgbgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRhKGUsIGUud2lkdGgsIGUuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludDogW24sIHJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogbGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRhID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAoImRpYW1vbmQiID09PSBlLnR5cGUgPyAxIC8gTWF0aC5zcXJ0KDIpIDogMSkgKiBNYXRoLm1pbih0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgxNiwgTWF0aC5taW4oLjI1ICogciwgMzIpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBuYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5lbGVtZW50LnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJyZWN0YW5nbGUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRpYW1vbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVsbGlwc2UiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHJhKGUuZWxlbWVudCwgZS5wb2ludCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmNoZWNrKHQsIGUudGhyZXNob2xkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmcmVlZHJhdyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIWUuY2hlY2soc2EoZS5lbGVtZW50LCBlLnBvaW50KSwgZS50aHJlc2hvbGQpICYmIHBhKGUuZWxlbWVudCwgZS5wb2ludCwgZS50aHJlc2hvbGQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImFycm93IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJsaW5lIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNlbGVjdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oIlRoaXMgc2hvdWxkIG5vdCBoYXBwZW4sIHdlIG5lZWQgdG8gaW52ZXN0aWdhdGUgd2h5IGl0IGRvZXMuIiksICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHJhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJyZWN0YW5nbGUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2EoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYShlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVhKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9hID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPCB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGlhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKGUpIDwgdAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBsYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwIDw9IGUgJiYgZSA8IHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2EgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGZhKGUsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KFVvKHIsIE5vKDAsIDEsIC1hKSksIFVvKHIsIE5vKDEsIDAsIC1vKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmYShlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gTm8oYSwgbywgLWEgKiBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVbyhyLCBpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB1YSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZGEoZSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG5bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG5bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc2lnbihlWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShvKSAqIFVvKHIsIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmYShlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gVm8ociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGlbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IC43MDcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IC43MDcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMCwgMSwgMiwgM10uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZCAqIGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBwICogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IChkICogZCAtIHAgKiBwKSAqIE1hdGgucG93KGMsIDMpIC8gZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IChwICogcCAtIGQgKiBkKSAqIE1hdGgucG93KHUsIDMpIC8gcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQgLSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbiAtIG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBsIC0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHMgLSBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gTWF0aC5oeXBvdChpLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IE1hdGguaHlwb3QoZiwgaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIChoICogbSAvIGcgKyByKSAvIGQpKSwgdSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIChmICogbSAvIGcgKyBvKSAvIHApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IE1hdGguaHlwb3QodSwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyAvPSB2LCB1IC89IHYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoLCBmID0gTW8oZCAqIGMsIHAgKiB1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbciwgRm8oUm8ociwgaCA9IGYpLCBoKV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcGEgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBlLmFuZ2xlKSByID0gdFswXSAtIGUueCwgbyA9IHRbMV0gLSBlLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHN0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICRlKHQsIFtpICsgKHMgLSBpKSAvIDIsIGwgKyAoYyAtIGwpIC8gMl0sIC1lLmFuZ2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdVswXSAtIGUueCwgbyA9IHVbMV0gLSBlLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkLCBwID0gZS5wb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHBbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA9PT0gZS5wb2ludHMubGVuZ3RoKSByZXR1cm4gZXQoaFswXSwgaFsxXSwgciwgbykgPCBuIHx8IGV0KGZbMF0sIGZbMV0sIHIsIG8pIDwgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAxOyBtIDwgZS5wb2ludHMubGVuZ3RoIC0gMTsgbSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBbZlswXSAtIGhbMF0sIGZbMV0gLSBoWzFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IE1hdGguaHlwb3QoZ1sxXSwgZ1swXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBbZ1swXSAvIHYsIGdbMV0gLyB2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IFtyIC0gaFswXSwgbyAtIGhbMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gKHlbMF0gKiBiWzBdICsgeVsxXSAqIGJbMV0pIC8gTWF0aC5oeXBvdChiWzFdLCBiWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gW2hbMF0gKyBiWzBdICogdywgaFsxXSArIGJbMV0gKiB3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGV0KGRbMF0sIGRbMV0sIGhbMF0sIGhbMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gZXQoZFswXSwgZFsxXSwgZlswXSwgZlsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPSBFIDwgeCAmJiB4ID4gdiA/IGYgOiB4IDwgRSAmJiBFID4gdiA/IGggOiBkLCBNYXRoLmh5cG90KG8gLSBkWzFdLCByIC0gZFswXSkgPCBuKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGYsIGYgPSBlLnBvaW50c1ttICsgMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBoYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ3IodCkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZmEoZS5lbGVtZW50LCBlLnBvaW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gclswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gclsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gclsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gclszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gTm8oMCwgMSwgLWwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBObygxLCAwLCAtaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFhKFVvKGEsIHMpLCBuKSB8fCAhYWEoVW8oYSwgYyksIG4pKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IFZvKG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB1WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB1WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBDcih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmNoZWNrID09PSBhYSAmJiBoLnNvbWUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9hKGUsIGQsIHAsIHQuc3Ryb2tlU2hhcnBuZXNzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGguc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYShlLCBkLCBwLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSBXbyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGdhKG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBZbyhhLCBlLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gWG8oaSwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwLCBNYXRoLmFicyhlWzRdKSwgTWF0aC5hYnMoZVs1XSksIDEsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShUbyhsLCBabyhhKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAobiA9IGUueCwgWzAsIDAsIDAsIDAsIGUueSwgbiwgMCwgMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBUbyhsLCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gb1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gb1sxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdSwgcywgKG9bMl0gLSBkKSAvIDIsIChvWzNdIC0gcCkgLyAyXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBtYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGdhKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBZbyhuLCBlLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gSW8oZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzEsIDAsIDAsIDAsIC0uNSAqIGVbNV0sIC41ICogZVs0XSwgMCwgMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFpvKG4pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTG8obywgcikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2EgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGVbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGVbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGVbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTW8oKHQgKyByKSAvIDIsIChuICsgbykgLyAyKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB2YSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbWEoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFhvKHIsIFdvKHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gWG8ociwgV28obikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBSbyhvLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5oZWlnaHQgLyBlLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLndpZHRoIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZS5oZWlnaHQgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBpWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBpWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBNYXRoLmFicyhkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gTWF0aC5hYnModSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInJlY3RhbmdsZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwIC8gKHMgKiAoZiArIGwgKiBoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoIDwgZiA/IHAgLyAoZiAqIHMpIDogcCAvIChoICogYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZWxsaXBzZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwIC8gKHMgKiBNYXRoLnNxcnQoTWF0aC5wb3codSwgMikgKyBNYXRoLnBvdyhsLCAyKSAqIE1hdGgucG93KGQsIDIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYmEgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodm9pZCAwID09PSByICYmIChyID0gMCksIGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInJlY3RhbmdsZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0geWEoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBhLmZsYXRNYXAoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gW2UsIGFbKG4gKyAxKSAlIDRdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YSh0LCB4YShvLCByKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNvbmNhdChhLmZsYXRNYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrYShlLCByLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IEVhKGUsIHIsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5sZW5ndGggPCAyKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG8uc29ydCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLbyhlLCBuKSAtIEtvKHQsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2lbMF0sIGlbaS5sZW5ndGggLSAxXV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeWEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdCAqIGUud2lkdGggLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0ICogZS5oZWlnaHQgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJyZWN0YW5nbGUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW01vKG4sIHIpLCBNbyhuLCAtciksIE1vKC1uLCAtciksIE1vKC1uLCByKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbTW8oMCwgciksIE1vKG4sIDApLCBNbygwLCAtciksIE1vKC1uLCAwKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgd2EgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVW8obiwgZSkgKiBVbyhyLCBlKSA+PSAwID8gW10gOiBbR28oZSwgUm8obiwgcikpXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB4YSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC41ICogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsxLCAwLCAwLCAwLCBuICogZVs0XSwgbiAqIGVbNV0sIDAsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCbyhbMCwgMCwgMCwgMCwgdFs0XSAtIGVbNF0sIHRbNV0gLSBlWzVdLCAwLCAwXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KG4sIHIpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbWG8obywgbiksIFhvKG8sIHIpXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBFYSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS53aWR0aCAvIDIgKyB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmhlaWdodCAvIDIgKyB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBuWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSByICogciAqIGEgKiBhICsgbyAqIG8gKiBpICogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcyAtIGwgKiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHMgfHwgYyA8PSAwKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IE1hdGguc3FydChjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gLXIgKiByICogYSAqIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IC1vICogbyAqIGkgKiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtNbygoZCArIHIgKiBvICogaSAqIHUpIC8gcywgKHAgLSByICogbyAqIGEgKiB1KSAvIHMpLCBNbygoZCAtIHIgKiBvICogaSAqIHUpIC8gcywgKHAgKyByICogbyAqIGEgKiB1KSAvIHMpXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrYSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gMCA9PT0gVW8obiwgZSkgPyBbZV0gOiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gblsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gVm8oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGlbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHIgKiByICsgbyAqIG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHQgKiB0ICogYyAtIE1hdGgucG93KHIgKiBsICsgbyAqIHMgKyBhLCAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBjIHx8IHUgPD0gMCkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBNYXRoLnNxcnQodSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGwgKiBvICogbyAtIHMgKiByICogbyAtIHIgKiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBzICogciAqIHIgLSBsICogciAqIG8gLSBvICogYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbTW8oKHAgKyBvICogZCkgLyBjLCAoaCAtIHIgKiBkKSAvIGMpLCBNbygocCAtIG8gKiBkKSAvIGMsIChoICsgciAqIGQpIC8gYyldCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFNhID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmFicyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS53aWR0aCAqIHIgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmhlaWdodCAqIHIgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBNYXRoLnNpZ24odCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IFZvKG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBsWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBsWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAwID09PSBjID8gMWUtNCA6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IE1hdGgucG93KHMsIDIpICogTWF0aC5wb3coYSwgMikgKyBNYXRoLnBvdyh1LCAyKSAqIE1hdGgucG93KG8sIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAoLXMgKiBNYXRoLnBvdyhhLCAyKSArIGkgKiB1ICogTWF0aC5zcXJ0KE1hdGgubWF4KDAsIGQgLSBNYXRoLnBvdyhvLCAyKSAqIE1hdGgucG93KGEsIDIpKSkpIC8gZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gKC1wICogcyAtIDEpIC8gdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gLU1hdGgucG93KG8sIDIpICogcCAvIChNYXRoLnBvdyhoLCAyKSAqIE1hdGgucG93KGEsIDIpICsgTWF0aC5wb3cocCwgMikgKiBNYXRoLnBvdyhvLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTW8oZiwgKC1wICogZiAtIDEpIC8gaCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQ2EgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguYWJzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLnNpZ24odCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHlhKGUsIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbyAqIFJvKG4sIGUpWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPiBpICYmIChpID0gdCwgbCA9IGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgT2EgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gW10sIGEgPSAhMSwgaSA9IDAsIGwgPSBjdChlKTsgaSA8IGwubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGxbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1vdmUiID09PSBzLm9wID8gKGEgPSAhYSkgJiYgby5wdXNoKFtzLmRhdGFbMF0sIHMuZGF0YVsxXV0pIDogImJjdXJ2ZVRvIiA9PT0gcy5vcCAmJiBhICYmIChvLnB1c2goW3MuZGF0YVswXSwgcy5kYXRhWzFdXSksIG8ucHVzaChbcy5kYXRhWzJdLCBzLmRhdGFbM11dKSwgby5wdXNoKFtzLmRhdGFbNF0sIHMuZGF0YVs1XV0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ubGVuZ3RoID49IDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInNoYXJwIiA9PT0gcikgcmV0dXJuIG50KG8sIHQsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gUGUobywgMTAsIDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudChjLCB0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE1hID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBjdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gWzAsIDBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uc29tZSgoZnVuY3Rpb24oZSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5vcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm1vdmUiID09PSBpKSBhID0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiYmN1cnZlVG8iID09PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gW2xbMF0sIGxbMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFtsWzJdLCBsWzNdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBbbFs0XSwgbFs1XV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBvWzBdLCBsID0gb1sxXSwgcyA9IGZ1bmN0aW9uKG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygxIC0gbywgMykgKiByW2FdICsgMyAqIG8gKiBNYXRoLnBvdygxIC0gbywgMikgKiBuW2FdICsgMyAqIE1hdGgucG93KG8sIDIpICogKDEgLSBvKSAqIHRbYV0gKyBlW2FdICogTWF0aC5wb3cobywgMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgYyA9IDA7IGMgPD0gMTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBzKGMsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHMoYywgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnNxcnQoTWF0aC5wb3codSAtIGksIDIpICsgTWF0aC5wb3coZCAtIGwsIDIpKSA8IGEpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyArPSAuMDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGQsIHMsIGMsIHUsIFt0LCBuXSwgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGEgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA+PSBlWzBdICYmIHQgPD0gZVswXSArIGVbMl0gJiYgbiA+PSBlWzFdICYmIG4gPD0gZVsxXSArIGVbM10KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSWEgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdC5zZWxlY3RlZEVsZW1lbnRJZHNbZS5pZF0pIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBPbyhlLCBvLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpLnJvdGF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHFyKGksIFsicm90YXRpb24iXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsICYmIFBhKGwsIG4sIHIpKSByZXR1cm4gInJvdGF0aW9uIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBPYmplY3Qua2V5cyhzKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gc1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXQgJiYgUGEodCwgbiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5sZW5ndGggPiAwICYmIGNbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGksIHQsIG4sIHIsIG8sIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1IYW5kbGVUeXBlOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBUYSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gQ28oW2EsIGksIGwsIHNdLCAwLCByLCBvLCB3byk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYykuZmluZCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gY1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAmJiBQYShyLCB0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHx8ICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIExhID0gWyJucyIsICJuZXN3IiwgImV3IiwgIm53c2UiXSwKICAgICAgICAgICAgICAgICAgICAgICAgQWEgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS50cmFuc2Zvcm1IYW5kbGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0ICYmIE1hdGguc2lnbih0LmhlaWdodCkgKiBNYXRoLnNpZ24odC53aWR0aCkgPT0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJuIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICJucyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gImV3IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibnciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHIgPyAibmVzdyIgOiAibndzZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm5lIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzdyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByID8gIm53c2UiIDogIm5lc3ciOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJyb3RhdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZ3JhYiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvICYmIHQgJiYgKG8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBMYS5pbmRleE9mKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID49IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnJvdW5kKHQgLyAoTWF0aC5QSSAvIDQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IExhWyhuICsgcikgJSBMYS5sZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KG8sIHQuYW5nbGUpKSwgbyA/ICIiLmNvbmNhdChvLCAiLXJlc2l6ZSIpIDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEYShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gamEoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBEYShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBEYShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciB6YSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudElkID0gdC5pZCwgSHIubWFwRWxlbWVudFRvU2NlbmUodGhpcy5lbGVtZW50SWQsIG4pLCBlLm5vcm1hbGl6ZVBvaW50cyh0KSwgdGhpcy5hY3RpdmVQb2ludEluZGV4ID0gbnVsbCwgdGhpcy5sYXN0VW5jb21taXR0ZWRQb2ludCA9IG51bGwsIHRoaXMuaXNEcmFnZ2luZyA9ICExLCB0aGlzLnBvaW50ZXJPZmZzZXQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnN0YXJ0QmluZGluZ0VsZW1lbnQgPSAia2VlcCIsIHRoaXMuZW5kQmluZGluZ0VsZW1lbnQgPSAia2VlcCIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nZXRFbGVtZW50ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBudWxsID09PSAodCA9IEhyLmdldFNjZW5lKGUpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmdldE5vbkRlbGV0ZWRFbGVtZW50KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gfHwgbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmhhbmRsZVBvaW50RHJhZ2dpbmcgPSBmdW5jdGlvbih0LCBuLCByLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQuZWRpdGluZ0xpbmVhckVsZW1lbnQpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5lZGl0aW5nTGluZWFyRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaS5hY3RpdmVQb2ludEluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBpLmVsZW1lbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaS5pc0RyYWdnaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBlLmdldEVsZW1lbnQocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXUpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGwgJiYgbCA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IGMgJiYgbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiBqYShqYSh7fSwgaSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RyYWdnaW5nOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gZS5jcmVhdGVQb2ludEF0KHUsIHIgLSBpLnBvaW50ZXJPZmZzZXQueCwgbyAtIGkucG9pbnRlck9mZnNldC55LCB0LmdyaWRTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5tb3ZlUG9pbnQodSwgbCwgZCksIFllKHUpICYmIGEodSwgMCA9PT0gbCA/ICJzdGFydCIgOiAiZW5kIiksICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5oYW5kbGVQb2ludGVyVXAgPSBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSA9IG4uZWxlbWVudElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuLmFjdGl2ZVBvaW50SW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4uaXNEcmFnZ2luZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5nZXRFbGVtZW50KGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCAmJiAoMCA9PT0gaSB8fCBpID09PSBzLnBvaW50cy5sZW5ndGggLSAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0KHMucG9pbnRzLCByLnpvb20udmFsdWUpICYmIGUubW92ZVBvaW50KHMsIGksIDAgPT09IGkgPyBzLnBvaW50c1tzLnBvaW50cy5sZW5ndGggLSAxXSA6IHMucG9pbnRzWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IE5hKHIpID8gcWEoS24oZS5nZXRQb2ludEF0SW5kZXhHbG9iYWxDb29yZGluYXRlcyhzLCBpKSksIEhyLmdldFNjZW5lKHMpKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSB7fSlbMCA9PT0gaSA/ICJzdGFydEJpbmRpbmdFbGVtZW50IiA6ICJlbmRCaW5kaW5nRWxlbWVudCJdID0gdSwgYyA9IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqYShqYShqYSh7fSwgbiksIGMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmc6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJPZmZzZXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuaGFuZGxlUG9pbnRlckRvd24gPSBmdW5jdGlvbih0LCBuLCByLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRBZGRQb2ludDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0RWxlbWVudDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi5lZGl0aW5nTGluZWFyRWxlbWVudCkgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG4uZWRpdGluZ0xpbmVhckVsZW1lbnQuZWxlbWVudElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmdldEVsZW1lbnQobCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMpIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuYWx0S2V5KSByZXR1cm4gbnVsbCA9PSBuLmVkaXRpbmdMaW5lYXJFbGVtZW50Lmxhc3RVbmNvbW1pdHRlZFBvaW50ICYmIEdyKHMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IF9hKF9hKFtdLCBzLnBvaW50cyksIFtlLmNyZWF0ZVBvaW50QXQocywgYS54LCBhLnksIG4uZ3JpZFNpemUpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvLnJlc3VtZVJlY29yZGluZygpLCByKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nTGluZWFyRWxlbWVudDogamEoamEoe30sIG4uZWRpdGluZ0xpbmVhckVsZW1lbnQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQb2ludEluZGV4OiBzLnBvaW50cy5sZW5ndGggLSAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VW5jb21taXR0ZWRQb2ludDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQmluZGluZ0VsZW1lbnQ6IHFhKGEsIEhyLmdldFNjZW5lKHMpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgaS5kaWRBZGRQb2ludCA9ICEwLCBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlLmdldFBvaW50SW5kZXhVbmRlckN1cnNvcihzLCBuLnpvb20sIGEueCwgYS55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID4gLTEpIGkuaGl0RWxlbWVudCA9IHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IG4uZWRpdGluZ0xpbmVhckVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB1LnN0YXJ0QmluZGluZ0VsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB1LmVuZEJpbmRpbmdFbGVtZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hKG4pICYmIFllKHMpICYmIFJhKHMsIGQsIHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHN0KHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBoWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSAoZiArIGhbMl0pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gKG0gKyBoWzNdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGMgPiAtMSAmJiBRZShzLnggKyBzLnBvaW50c1tjXVswXSwgcy55ICsgcy5wb2ludHNbY11bMV0sIGcsIHYsIHMuYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiBqYShqYSh7fSwgbi5lZGl0aW5nTGluZWFyRWxlbWVudCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVBvaW50SW5kZXg6IGMgPiAtMSA/IGMgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyT2Zmc2V0OiBiID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogYS54IC0gYlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGEueSAtIGJbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5oYW5kbGVQb2ludGVyTW92ZSA9IGZ1bmN0aW9uKHQsIG4sIHIsIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gby5lbGVtZW50SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG8ubGFzdFVuY29tbWl0dGVkUG9pbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUuZ2V0RWxlbWVudChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcykgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHMucG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBjW2MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQuYWx0S2V5KSByZXR1cm4gdSA9PT0gbCAmJiBlLm1vdmVQb2ludChzLCBjLmxlbmd0aCAtIDEsICJkZWxldGUiKSwgamEoamEoe30sIG8pLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RVbmNvbW1pdHRlZFBvaW50OiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gZS5jcmVhdGVQb2ludEF0KHMsIG4gLSBvLnBvaW50ZXJPZmZzZXQueCwgciAtIG8ucG9pbnRlck9mZnNldC55LCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID09PSBsID8gZS5tb3ZlUG9pbnQocywgcy5wb2ludHMubGVuZ3RoIC0gMSwgZCkgOiBlLm1vdmVQb2ludChzLCAibmV3IiwgZCksIGphKGphKHt9LCBvKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VW5jb21taXR0ZWRQb2ludDogcy5wb2ludHNbcy5wb2ludHMubGVuZ3RoIC0gMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuZ2V0UG9pbnRzR2xvYmFsQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHN0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAobiArIG8pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gKHIgKyBhKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wb2ludHMubWFwKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSBlLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtyID0gKG4gPSBRZShyICsgdFswXSwgbyArIHRbMV0sIGksIGwsIGUuYW5nbGUpKVswXSwgbyA9IG5bMV1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5nZXRQb2ludEF0SW5kZXhHbG9iYWxDb29yZGluYXRlcyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdCA8IDAgPyBlLnBvaW50cy5sZW5ndGggKyB0IDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IChvICsgclsyXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAoYSArIHJbM10pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5wb2ludHNbbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gZS55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKGMgKyBzWzBdLCB1ICsgc1sxXSwgaSwgbCwgZS5hbmdsZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wb2ludEZyb21BYnNvbHV0ZUNvb3JkcyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG5bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG5bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IChyICsgblsyXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAobyArIG5bM10pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gUWUodFswXSwgdFsxXSwgYSwgaSwgLWUuYW5nbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBsWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBsWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtzIC0gZS54LCBjIC0gZS55XQogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmdldFBvaW50SW5kZXhVbmRlckN1cnNvciA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSB0aGlzLmdldFBvaW50c0dsb2JhbENvb3JkaW5hdGVzKGUpLCBhID0gby5sZW5ndGg7IC0tYSA+IC0xOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gb1thXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXQobiwgciwgaVswXSwgaVsxXSkgKiB0LnZhbHVlIDwgdGhpcy5QT0lOVF9IQU5ETEVfU0laRSAvIDIgKyAxKSByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuY3JlYXRlUG9pbnRBdCA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gaXQodCwgbiwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHN0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAoaSArIGFbMl0pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gKGwgKyBhWzNdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFFlKG9bMF0sIG9bMV0sIHMsIGMsIC1lLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gdVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZCAtIGUueCwgcCAtIGUueV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5ub3JtYWxpemVQb2ludHMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0WzBdWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0WzBdWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogdC5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtlWzBdIC0gbiwgZVsxXSAtIHJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCArIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS55ICsgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5tb3ZlUG9pbnRCeU9mZnNldCA9IGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdC5wb2ludHNbbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG9bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1vdmVQb2ludCh0LCBuLCBbYSArIHIueCwgaSArIHIueV0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUubW92ZVBvaW50ID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEgPSBlLnBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZGVsZXRlIiA9PT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibmV3IiA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGFyZ3MgaW4gbW92ZVBvaW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSBhLnNsaWNlKCkpLnNwbGljZSh0LCAxKSwgMCA9PT0gdCAmJiAoaSA9IG9bMF1bMF0sIGwgPSBvWzBdWzFdLCBvID0gby5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQgPyBbMCwgMF0gOiBbZVswXSAtIGksIGVbMV0gLSBsXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIm5ldyIgPT09IHQpIG8gPSBfYShfYShbXSwgYSksIFtuXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5bMF0gLSBhW3RdWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gblsxXSAtIGFbdF1bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGEubWFwKChmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID09PSB0ID8gMCA9PT0gbiA/IChpID0gcywgbCA9IGMsIGUpIDogKGkgPSAwLCBsID0gMCwgW2VbMF0gKyBzLCBlWzFdICsgY10pIDogaSB8fCBsID8gW2VbMF0gLSBpLCBlWzFdIC0gbF0gOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHZ0KGUsIG8sIGUuc3Ryb2tlU2hhcnBuZXNzIHx8ICJyb3VuZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB2dChlLCBhLCBlLnN0cm9rZVNoYXJwbmVzcyB8fCAicm91bmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gKHVbMF0gKyB1WzJdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9ICh1WzFdICsgdVszXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAoZFswXSArIGRbMl0pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gKGRbMV0gKyBkWzNdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IFFlKGksIGwsIGYgLSBwLCBtIC0gaCwgZS5hbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCBqYShqYSh7fSwgciksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCArIGdbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS55ICsgZ1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUKICAgICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICAgICAgemEuUE9JTlRfSEFORExFX1NJWkUgPSAyMDsKICAgICAgICAgICAgICAgICAgICB2YXIgQmEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIYShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgTmEgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pc0JpbmRpbmdFbmFibGVkCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJhID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuZXcgU2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuZXcgU2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgRmEoZSwgdCwgbiwgInN0YXJ0IiwgciwgbyksIEZhKGUsIG4sIHQsICJlbmQiLCByLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gQXJyYXkuZnJvbShvKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXIuaGFzKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIci5nZXRTY2VuZShlKS5nZXROb25EZWxldGVkRWxlbWVudHMoYSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyKHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50SWRzOiBudWxsID09PSAobiA9IHQuYm91bmRFbGVtZW50SWRzKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgIT09IGUuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBGYSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgia2VlcCIgIT09IHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgbnVsbCAhPSBuICYmICgia2VlcCIgPT09IG4gPyBVYShlLCB0LCByKSA6ICJzdGFydCIgIT09IHIgJiYgbi5pZCA9PT0gdC5pZCkgfHwgKEthKGUsIHQsIHIpLCBvLmFkZCh0LmlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gWGEoZSwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gaSAmJiBhLmFkZChpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgV2EgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZZShlKSA/IFJhKGUsIG9pKGUsICJzdGFydCIpLCBvaShlLCAiZW5kIikpIDogcWUoZSkgJiYgVmEoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBWYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlpKGUpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0WzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSYShuLCAiZW5kIiA9PT0gciA/ICJrZWVwIiA6IGUsICJzdGFydCIgPT09IHIgPyAia2VlcCIgOiBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEdhID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSB0LnN0YXJ0Qm91bmRFbGVtZW50ICYmIEthKGUsIHQuc3RhcnRCb3VuZEVsZW1lbnQsICJzdGFydCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBxYShyLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gbyB8fCBVYShlLCBvLCAiZW5kIikgfHwgS2EoZSwgbywgImVuZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEthID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCAoKHIgPSB7fSlbInN0YXJ0IiA9PT0gbiA/ICJzdGFydEJpbmRpbmciIDogImVuZEJpbmRpbmciXSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gSGEoT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IEhhKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudElkOiB0LmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBRYShlLCB0LCBuKSksIHIpKSwgR3IodCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudElkczogQXJyYXkuZnJvbShuZXcgU2V0KEJhKEJhKFtdLCBudWxsICE9PSAobyA9IHQuYm91bmRFbGVtZW50SWRzKSAmJiB2b2lkIDAgIT09IG8gPyBvIDogW10pLCBbZS5pZF0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFVhID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlWyJzdGFydCIgPT09IG4gPyAiZW5kQmluZGluZyIgOiAic3RhcnRCaW5kaW5nIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWmEoZSwgbnVsbCA9PSByID8gdm9pZCAwIDogci5lbGVtZW50SWQsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFphID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IG4uaWQgJiYgZS5wb2ludHMubGVuZ3RoIDwgMwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBZYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFllKGUpICYmIFJhKGUsIG51bGwsIG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWGEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9ICJzdGFydCIgPT09IHQgPyAic3RhcnRCaW5kaW5nIiA6ICJlbmRCaW5kaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IG8gPyBudWxsIDogKEdyKGUsICgobiA9IHt9KVtyXSA9IG51bGwsIG4pKSwgby5lbGVtZW50SWQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHFhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhpKHQuZ2V0RWxlbWVudHMoKSwgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcWUodCkgJiYgZWEodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBRYSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gInN0YXJ0IiA9PT0gbiA/IC0xIDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gLTEgPT09IHIgPyAwIDogZS5wb2ludHMubGVuZ3RoIC0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbyAtIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHphLmdldFBvaW50QXRJbmRleEdsb2JhbENvb3JkaW5hdGVzKGUsIG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB6YS5nZXRQb2ludEF0SW5kZXhHbG9iYWxDb29yZGluYXRlcyhlLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHZhKHQsIGwsIGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogTWF0aC5tYXgoMSwgcmEodCwgaSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICRhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSBudWxsICE9PSAobiA9IGUuYm91bmRFbGVtZW50SWRzKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG51bGwgIT0gdCA/IHQgOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8ubmV3U2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8uc2ltdWx0YW5lb3VzbHlVcGRhdGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZWkoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSHIuZ2V0U2NlbmUoZSkuZ2V0Tm9uRGVsZXRlZEVsZW1lbnRzKHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSmEodCwgbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbmkobiwgdC5zdGFydEJpbmRpbmcsIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuaShuLCB0LmVuZEJpbmRpbmcsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5oYXModC5pZCkgPyBHcih0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRCaW5kaW5nOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEJpbmRpbmc6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogKHRpKHQsICJzdGFydCIsIHIsIGUpLCB0aSh0LCAiZW5kIiwgbywgZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSmEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobnVsbCA9PT0gKG4gPSBlLnN0YXJ0QmluZGluZykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5lbGVtZW50SWQpID09PSB0LmlkIHx8IChudWxsID09PSAociA9IGUuZW5kQmluZGluZykgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5lbGVtZW50SWQpID09PSB0LmlkCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVpID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXQoKGUgfHwgW10pLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRpID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShudWxsID09IG4gfHwgbi5lbGVtZW50SWQgIT09IHIuaWQgJiYgZS5wb2ludHMubGVuZ3RoID4gMikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IEhyLmdldFNjZW5lKGUpLmdldEVsZW1lbnQobi5lbGVtZW50SWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIGwgPSAic3RhcnQiID09PSB0ID8gLTEgOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IC0xID09PSBsID8gMCA6IGUucG9pbnRzLmxlbmd0aCAtIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcyAtIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gemEuZ2V0UG9pbnRBdEluZGV4R2xvYmFsQ29vcmRpbmF0ZXMoZSwgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZ2Eocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWbyhvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgaSA9IG1hKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gWG8oaSwgV28obikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gSW8oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVjdGFuZ2xlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRpYW1vbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IENhKGUsIHQsIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVsbGlwc2UiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFNhKGUsIHQsIGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWbyhYbyhzLCBhKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oYSwgbi5mb2N1cywgdSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBuLmdhcCkgaSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSByICYmIChyID0gMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBtYShlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFhvKG8sIFdvKHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFhvKG8sIFdvKG4pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IFJvKGEsIGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gSW8obyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhKGUsIGwsIGEsIHIpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVm8oWG8ocywgZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGEsIHUsIGQsIG4uZ2FwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwID09PSBwLmxlbmd0aCA/IGQgOiBwWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemEubW92ZVBvaW50KGUsIHMsIHphLnBvaW50RnJvbUFic29sdXRlQ29vcmRzKGUsIGkpLCAoKG8gPSB7fSlbInN0YXJ0IiA9PT0gdCA/ICJzdGFydEJpbmRpbmciIDogImVuZEJpbmRpbmciXSA9IG4sIG8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbmkgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8IG51bGwgPT0gbikgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQuZ2FwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LmZvY3VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmVsZW1lbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbi53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbi5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50SWQ6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiBNYXRoLm1heCgxLCBNYXRoLm1pbih0YShlLCBpLCBsKSwgciAqIChpIDwgbCA/IGkgLyBzIDogbCAvIGMpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW29pKGUsICJzdGFydCIpLCBvaShlLCAiZW5kIildLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvaSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxYShhaShlLCB0KSwgSHIuZ2V0U2NlbmUoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFpID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAic3RhcnQiID09PSB0ID8gMCA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtuKHphLmdldFBvaW50QXRJbmRleEdsb2JhbENvb3JkaW5hdGVzKGUsIG4pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBpaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIci5nZXRTY2VuZShlKS5nZXRFbGVtZW50cygpLm1hcCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghWWUodCkpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbGkodCwgInN0YXJ0IiwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBsaSh0LCAiZW5kIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gfHwgciA/IFt0LCBuICYmIHIgPyAiYm90aCIgOiBuID8gInN0YXJ0IiA6ICJlbmQiLCBlXSA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbGkgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlWyJzdGFydCIgPT09IHQgPyAic3RhcnRCaW5kaW5nIiA6ICJlbmRCaW5kaW5nIl0gJiYgIVVhKGUsIG4sIHQpICYmIGVhKG4sIGFpKGUsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzaSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbmV3IFNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbmV3IFNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gImR1cGxpY2F0ZXNTZXJ2ZUFzT2xkIiA9PT0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5ib3VuZEVsZW1lbnRJZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCAmJiB0Lmxlbmd0aCA+IDAgJiYgKHQuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiAhbi5oYXMoZSkgJiYgby5hZGQoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBhLmFkZChuLmdldChlLmlkKSkpLCBZZShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlLnN0YXJ0QmluZGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLnN0YXJ0QmluZGluZy5lbGVtZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmICFuLmhhcyhyKSAmJiBhLmFkZChyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGUuZW5kQmluZGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuZW5kQmluZGluZy5lbGVtZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmICFuLmhhcyhyKSAmJiBhLmFkZChyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gZS5zdGFydEJpbmRpbmcgJiYgbnVsbCA9PSBlLmVuZEJpbmRpbmcgfHwgby5hZGQobi5nZXQoZS5pZCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5oYXModCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnN0YXJ0QmluZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuZW5kQmluZGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QmluZGluZzogY2kodCwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEJpbmRpbmc6IGNpKHIsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaGFzKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5ib3VuZEVsZW1lbnRJZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSB0ICYmIHQubGVuZ3RoID4gMCAmJiBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudElkczogdC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gbi5nZXQoZSkpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2kgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLmVsZW1lbnRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IGUuZm9jdXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiBlLmdhcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50SWQ6IG51bGwgIT09IChuID0gdC5nZXQocikpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHVpID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgU2V0KHQubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbmV3IFNldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFlKGUpICYmIChudWxsID09PSAodCA9IGUuYm91bmRFbGVtZW50SWRzKSB8fCB2b2lkIDAgPT09IHQgfHwgdC5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaGFzKGUpIHx8IHIuYWRkKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5oYXModCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnN0YXJ0QmluZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuZW5kQmluZGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QmluZGluZzogZGkodCwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEJpbmRpbmc6IGRpKHIsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkaSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgfHwgdC5oYXMoZS5lbGVtZW50SWQpID8gbnVsbCA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcGkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoaShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZmkoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBoaShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBoaShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBtaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID49IDIgKiBNYXRoLlBJID8gZSAtIDIgKiBNYXRoLlBJIDogZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBnaSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG9bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG9bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IChhICsgb1syXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAoaSArIG9bM10pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gNSAqIE1hdGguUEkgLyAyICsgTWF0aC5hdGFuMihuIC0gcywgdCAtIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiAoYyArPSBkLmF5IC8gMiwgYyAtPSBjICUgZC5heSksIGMgPSBtaShjKSwgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB2aSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gaVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gUWUociwgbywgKGwgKyBjKSAvIDIsIChzICsgdSkgLyAyLCAtZS5hbmdsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9ICJlbmQiID09PSB0ID8gW3AgLSBlLngsIGggLSBlLnldIDogW2UueCArIGUucG9pbnRzWzFdWzBdIC0gcCwgZS55ICsgZS5wb2ludHNbMV1bMV0gLSBoXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZlsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgKG0gPSAoYSA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFlyLmFwcGx5KHZvaWQgMCwgcGkoW2VdLCBRZSh0LCBuLCAwLCAwLCByKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShvLndpZHRoLCBvLmhlaWdodCwgMCwgMCwgLXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUudHlwZSwgbSwgZywgZS5hbmdsZSkpWzBdLCBnID0gYVsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IEplKCJlbmQiID09PSB0ID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLngsIGUueSwgZS5hbmdsZSwgMCwgMCwgKGUucG9pbnRzWzFdWzBdIC0gbSkgLyAyLCAoZS5wb2ludHNbMV1bMV0gLSBnKSAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB2WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB2WzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbSwgZ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBiaSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVZShlKSB8fCBHZShlKSA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IGx0KDAsIHQsIGx0KDEsIG4sIGUucG9pbnRzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7fQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB5aSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS5mb250U2l6ZSAqICh0IC8gZS53aWR0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA8IDEpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBBbihlLnRleHQsIExuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBlLmZvbnRGYW1pbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlbGluZTogby5iYXNlbGluZSArIChuIC0gby5oZWlnaHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdpID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEsIGkgPSBzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gaVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gUWUociwgbywgKGwgKyBjKSAvIDIsIChzICsgdSkgLyAyLCAtZS5hbmdsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGRbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLm1heCgocCAtIGwpIC8gKGMgLSBsKSwgKGggLSBzKSAvICh1IC0gcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJudyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLm1heCgoYyAtIHApIC8gKGMgLSBsKSwgKHUgLSBoKSAvICh1IC0gcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJuZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLm1heCgocCAtIGwpIC8gKGMgLSBsKSwgKHUgLSBoKSAvICh1IC0gcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzdyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLm1heCgoYyAtIHApIC8gKGMgLSBsKSwgKGggLSBzKSAvICh1IC0gcykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGUud2lkdGggKiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZS5oZWlnaHQgKiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0geWkoZSwgZiwgbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGd0KGUsIGYsIG0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gKGwgLSB2WzBdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAocyAtIHZbMV0pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IChjIC0gdlsyXSkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gKHUgLSB2WzNdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBKZShmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG46IC9eKG58bmV8bncpJC8udGVzdChlKSB8fCB0ICYmIC9eKHN8c2V8c3cpJC8udGVzdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAvXihzfHNlfHN3KSQvLnRlc3QoZSkgfHwgdCAmJiAvXihufG5lfG53KSQvLnRlc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogL14od3xud3xzdykkLy50ZXN0KGUpIHx8IHQgJiYgL14oZXxuZXxzZSkkLy50ZXN0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU6IC9eKGV8bmV8c2UpJC8udGVzdChlKSB8fCB0ICYmIC9eKHd8bnd8c3cpJC8udGVzdChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQsIG4pLCBlLngsIGUueSwgZS5hbmdsZSwgYiwgeSwgdywgeCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBFWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTID0gRVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBnLnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VsaW5lOiBnLmJhc2VsaW5lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBTCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeGkgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCwgcywgYyA9IGd0KGUsIGUud2lkdGgsIGUuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gW2NbMF0sIGNbMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBbY1syXSwgY1szXV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IFsoKGwgPSB1KVswXSArIChzID0gZClbMF0pIC8gMiwgKGxbMV0gKyBzWzFdKSAvIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSAkZShbYSwgaV0sIHAsIC1lLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZ3Qobiwgbi53aWR0aCwgbi5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBmWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBmWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBmWzJdIC0gbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gZlszXSAtIGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IChkWzBdIC0gdVswXSkgLyB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSAoZFsxXSAtIHVbMV0pIC8gYjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuaW5jbHVkZXMoImUiKSAmJiAoeSA9IChoWzBdIC0gdVswXSkgLyB2KSwgci5pbmNsdWRlcygicyIpICYmICh3ID0gKGhbMV0gLSB1WzFdKSAvIGIpLCByLmluY2x1ZGVzKCJ3IikgJiYgKHkgPSAoZFswXSAtIGhbMF0pIC8gdiksIHIuaW5jbHVkZXMoIm4iKSAmJiAodyA9IChkWzFdIC0gaFsxXSkgLyBiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZS53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gZS5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IG4ud2lkdGggKiB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSBuLmhlaWdodCAqIHc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiAoayA9IDIgKiBrIC0geCwgUyA9IDIgKiBTIC0gRSksIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQyA9IE1hdGguYWJzKGspIC8geCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IE1hdGguYWJzKFMpIC8gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gci5sZW5ndGggJiYgKFMgKj0gQywgayAqPSBPKSwgMiA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE0gPSBNYXRoLm1heChDLCBPKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IHggKiBNICogTWF0aC5zaWduKGspLCBTID0gRSAqIE0gKiBNYXRoLnNpZ24oUykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUCA9IGd0KGUsIGssIFMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgPSBQWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBQWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwgPSBQWzJdIC0gSSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBID0gUFszXSAtIFQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXyA9IHBpKFtdLCB1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbIm4iLCAidyIsICJudyJdLmluY2x1ZGVzKHIpICYmIChfID0gW2RbMF0gLSBNYXRoLmFicyhMKSwgZFsxXSAtIE1hdGguYWJzKEEpXSksICJuZSIgPT09IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRCA9IFt1WzBdLCBkWzFdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfID0gW0RbMF0sIERbMV0gLSBNYXRoLmFicyhBKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3ciID09PSByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGogPSBbZFswXSwgdVsxXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXyA9IFtqWzBdIC0gTWF0aC5hYnMoTCksIGpbMV1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChbInMiLCAibiJdLmluY2x1ZGVzKHIpICYmIChfWzBdID0gcFswXSAtIEwgLyAyKSwgWyJlIiwgInciXS5pbmNsdWRlcyhyKSAmJiAoX1sxXSA9IHBbMV0gLSBBIC8gMikpLCBrIDwgMCAmJiAoci5pbmNsdWRlcygiZSIpICYmIChfWzBdIC09IE1hdGguYWJzKEwpKSwgci5pbmNsdWRlcygidyIpICYmIChfWzBdICs9IE1hdGguYWJzKEwpKSksIFMgPCAwICYmIChyLmluY2x1ZGVzKCJzIikgJiYgKF9bMV0gLT0gTWF0aC5hYnMoQSkpLCByLmluY2x1ZGVzKCJuIikgJiYgKF9bMV0gKz0gTWF0aC5hYnMoQSkpKSwgbyAmJiAoX1swXSA9IHBbMF0gLSBNYXRoLmFicyhMKSAvIDIsIF9bMV0gPSBwWzFdIC0gTWF0aC5hYnMoQSkgLyAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gZS5hbmdsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCID0gJGUoXywgcCwgeiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSCA9IFtfWzBdICsgTWF0aC5hYnMoTCkgLyAyLCBfWzFdICsgTWF0aC5hYnMoQSkgLyAyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOID0gJGUoSCwgcCwgeik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfID0gJGUoQiwgTiwgLXopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFIgPSBiaShlLCBrLCBTKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGID0gcGkoW10sIF8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgRlswXSArPSBlLnggLSBJLCBGWzFdICs9IGUueSAtIFQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgVyA9IGZpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogTWF0aC5hYnMoayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhTKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBGWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IEZbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCAhPT0gVy53aWR0aCAmJiAwICE9PSBXLmhlaWdodCAmJiBOdW1iZXIuaXNGaW5pdGUoVy54KSAmJiBOdW1iZXIuaXNGaW5pdGUoVy55KSAmJiAoJGEobiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NpemU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFcud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogVy5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgR3IobiwgVykpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEVpID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEsIGkgPSBtdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gaVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IE1hdGgubWF4KChuIC0gbCkgLyAoYyAtIGwpLCAociAtIHMpIC8gKHUgLSBzKSksIGEgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG5bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCArIChyIC0gbCkgKiAobyAtIDEpICsgciAtIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS55ICsgKGEgLSBzKSAqIChvIC0gMSkgKyBhIC0gYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJudyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBNYXRoLm1heCgoYyAtIG4pIC8gKGMgLSBsKSwgKHUgLSByKSAvICh1IC0gcykpLCBhID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBuWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlLnggLSAoYyAtIHIpICogKG8gLSAxKSArIHIgLSBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUueSAtICh1IC0gYSkgKiAobyAtIDEpICsgYSAtIGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gTWF0aC5tYXgoKG4gLSBsKSAvIChjIC0gbCksICh1IC0gcikgLyAodSAtIHMpKSwgYSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdFszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gblswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gblszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgKHIgLSBsKSAqIChvIC0gMSkgKyByIC0gaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnkgLSAodSAtIGEpICogKG8gLSAxKSArIGEgLSBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInN3IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IE1hdGgubWF4KChjIC0gbikgLyAoYyAtIGwpLCAociAtIHMpIC8gKHUgLSBzKSksIGEgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG5bMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCAtIChjIC0gYSkgKiAobyAtIDEpICsgYSAtIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS55ICsgKHIgLSBzKSAqIChvIC0gMSkgKyByIC0gaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGUucmVkdWNlKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbi53aWR0aCAqIG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbi5oZWlnaHQgKiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInRleHQiID09PSBuLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0geWkobiwgciwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gcykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBzLnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZWxpbmU6IHMuYmFzZWxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHN0KG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGJpKG4sIHIsIGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYShuLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTaXplOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWx0YW5lb3VzbHlVcGRhdGVkOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGd0KGZpKGZpKHt9LCBuKSwgdSksIHIsIGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGEobiwgYywgZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gcC54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHAueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBpKHBpKFtdLCB0KSwgW2ZpKGZpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSksIGwpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgJiYgZS5mb3JFYWNoKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyKGUsIGRbdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtpID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSA1ICogTWF0aC5QSSAvIDIgKyBNYXRoLmF0YW4yKHIgLSBpLCBuIC0gYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIChsICs9IGQuYXkgLyAyLCBsIC09IGwgJSBkLmF5KSwgdC5mb3JFYWNoKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8sIHMgPSBzdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gKGMgKyBzWzJdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAodSArIHNbM10pIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG51bGwgIT09IChyID0gbnVsbCA9PT0gKG8gPSBlLm9yaWdpbmFsRWxlbWVudHMuZ2V0KHQuaWQpKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmFuZ2xlKSAmJiB2b2lkIDAgIT09IHIgPyByIDogdC5hbmdsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IFFlKGQsIHAsIGEsIGksIGwgKyBoIC0gdC5hbmdsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBmWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZlsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcih0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQueCArIChtIC0gZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHQueSArIChnIC0gcCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBtaShsICsgaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFNpID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSwgaSwgbCwgcywgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzICYmIChpID0gKHUgPSBZcih0LCBpLCBhIDwgciA/IC1sIDogbCkpLndpZHRoLCAobCA9IHUuaGVpZ2h0KSA8IDAgJiYgKGwgPSAtbCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBvIDwgbiA/IG4gLSBpIDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gYSA8IHIgPyByIC0gbCA6IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICYmIChkID0gbiAtIChpICs9IGkpIC8gMiwgcCA9IHIgLSAobCArPSBsKSAvIDIpLCAwICE9PSBpICYmIDAgIT09IGwgJiYgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIENpID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucmVwbGFjZSgvXHQvZywgIiAgICAgICAgIikucmVwbGFjZSgvXHI/XG58XHIvZywgIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgT2kgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHIuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gci5vZmZzZXRUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHIub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gMTgwICogbiAvIE1hdGguUEksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IChlIC0gMiAqIGwpICogKGEudmFsdWUgLSAxKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICh0IC0gMiAqIGkpICogKGEudmFsdWUgLSAxKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA+IG8gJiYgMSAhPT0gYS52YWx1ZSAmJiAoYyA9IG8gLyAyICogKGEudmFsdWUgLSAxKSksICJ0cmFuc2xhdGUoIi5jb25jYXQoYywgInB4LCAiKS5jb25jYXQodSwgInB4KSBzY2FsZSgiKS5jb25jYXQoYS52YWx1ZSwgIikgcm90YXRlKCIpLmNvbmNhdChzLCAiZGVnKSIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE1pID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBBbihlLnRleHQsIExuKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdC53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHQuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VsaW5lOiB0LmJhc2VsaW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQaSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKCFlLnZpZXdNb2RlRW5hYmxlZCAmJiAoZS5lZGl0aW5nRWxlbWVudCB8fCBOaSh0LCBlKS5sZW5ndGggfHwgInNlbGVjdGlvbiIgIT09IGUuZWxlbWVudFR5cGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJaShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVGkoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBJaShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBJaShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBMaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3QuaWRdID0gdCwgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBBaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICsgdC52ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWUuaXNEZWxldGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRGkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWUuaXNEZWxldGVkCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGppID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pKGUpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaZShlLnR5cGUpID8gVGkoVGkoe30sIGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q29tbWl0dGVkUG9pbnQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB6aSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqaShlKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBCaSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gW2UuaG9yaXpvbnRhbCwgZS52ZXJ0aWNhbF0ubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUgJiYgZS54IDw9IHQgJiYgdCA8PSBlLnggKyBlLndpZHRoICYmIGUueSA8PSBuICYmIG4gPD0gZS55ICsgZS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3ZlckVpdGhlcjogbyB8fCBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Zlckhvcml6b250YWw6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPdmVyVmVydGljYWw6IGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSGkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zb21lKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2VsZWN0ZWRFbGVtZW50SWRzW2UuaWRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTmkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zZWxlY3RlZEVsZW1lbnRJZHNbZS5pZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBSaSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmVkaXRpbmdFbGVtZW50ID8gW3QuZWRpdGluZ0VsZW1lbnRdIDogTmkoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRmkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuc2NlbmVQb2ludCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS52aWV3cG9ydERpbWVuc2lvbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuem9vbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogbi53aWR0aCAvIDIgKiAoMSAvIHIudmFsdWUpIC0gdC54IC0gci50cmFuc2xhdGlvbi54ICogKDEgLyByLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiBuLmhlaWdodCAvIDIgKiAoMSAvIHIudmFsdWUpIC0gdC55IC0gci50cmFuc2xhdGlvbi55ICogKDEgLyByLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBXaSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWUuaXNEZWxldGVkICYmICFacihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUpKS5sZW5ndGgpIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBtdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gb1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gb1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gb1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gb1szXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG5bMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gRm4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVYOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVZOiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbC54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbC55LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gRm4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVYOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVZOiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gdS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdS55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkIC0gcyA+IGUud2lkdGggfHwgcCAtIGMgPiBlLmhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LCAwLCBbYSwgaSwgbCwgc10pICYmIChhID0gKHIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmxlbmd0aCkgcmV0dXJuIFswLCAwLCAwLCAwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDEgLyAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZnQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gb1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG9bMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gb1szXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBldCgoYSArIGwpIC8gMiwgKGkgKyBzKSAvIDIsIHQueCwgdC55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA8IG4gJiYgKG4gPSBjLCByID0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGZ0KHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIFJuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRYOiB0LnNjcm9sbFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WTogdC5zY3JvbGxZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0KSkpWzBdLCBpID0gclsxXSwgbCA9IHJbMl0sIHMgPSByWzNdKSwgRmkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lUG9pbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogKGEgKyBsKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IChpICsgcykgLyAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydERpbWVuc2lvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdC5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHQuem9vbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVmkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInJlY3RhbmdsZSIgPT09IGUgfHwgImVsbGlwc2UiID09PSBlIHx8ICJkaWFtb25kIiA9PT0gZSB8fCAibGluZSIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgR2kgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInJlY3RhbmdsZSIgPT09IGUgfHwgImVsbGlwc2UiID09PSBlIHx8ICJkaWFtb25kIiA9PT0gZSB8fCAiZnJlZWRyYXciID09PSBlIHx8ICJhcnJvdyIgPT09IGUgfHwgImxpbmUiID09PSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEtpID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJyZWN0YW5nbGUiID09PSBlIHx8ICJlbGxpcHNlIiA9PT0gZSB8fCAiZGlhbW9uZCIgPT09IGUgfHwgImFycm93IiA9PT0gZSB8fCAibGluZSIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVWkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInJlY3RhbmdsZSIgPT09IGUgfHwgImFycm93IiA9PT0gZSB8fCAibGluZSIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWmkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInRleHQiID09PSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFlpID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJhcnJvdyIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWGkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gbnVsbCwgciA9IGUubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvLmlzRGVsZXRlZCAmJiB0KG8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHFpID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gciAmJiAociA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogci54IC0gbi5sZWZ0IC0gKHIueCAtIG4ubGVmdCAtIHQudHJhbnNsYXRpb24ueCkgKiAoZSAvIHQudmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiByLnkgLSBuLnRvcCAtIChyLnkgLSBuLnRvcCAtIHQudHJhbnNsYXRpb24ueSkgKiAoZSAvIHQudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBRaSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gcGFyc2VGbG9hdChlLnRvRml4ZWQoMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KC4xLCBNYXRoLm1pbih0LCAxMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICRpID0gKG4oNTQyMiksIHUoKS5mb3J3YXJkUmVmKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHUoKS51c2VSZWYobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KCkudXNlSW1wZXJhdGl2ZUhhbmRsZSh0LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY3VycmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAiVG9vbEljb25fc2l6ZV8iLmNvbmNhdChlLnNpemUgfHwgIm0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiYnV0dG9uIiA9PT0gZS50eXBlID8gdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJUb29sSWNvbl90eXBlX2J1dHRvbiIsIHIsIGUuY2xhc3NOYW1lLCBlLnZpc2libGUgJiYgIWUuaGlkZGVuID8gIlRvb2xJY29uX3R5cGVfYnV0dG9uLS1zaG93IiA6ICJUb29sSWNvbl90eXBlX2J1dHRvbi0taGlkZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9vbEljb246ICFlLmhpZGRlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRvb2xJY29uLS1zZWxlY3RlZCI6IGUuc2VsZWN0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiBlWyJkYXRhLXRlc3RpZCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogZS5oaWRkZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGUudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBlWyJhcmlhLWxhYmVsIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZS5vbkNsaWNrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sSWNvbl9faWNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtaGlkZGVuIjogInRydWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmljb24gfHwgZS5sYWJlbCwgZS5rZXlCaW5kaW5nTGFiZWwgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVG9vbEljb25fX2tleWJpbmRpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmtleUJpbmRpbmdMYWJlbCkpLCBlLnNob3dBcmlhTGFiZWwgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sSWNvbl9fbGFiZWwiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlWyJhcmlhLWxhYmVsIl0pLCBlLmNoaWxkcmVuKSA6IHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJUb29sSWNvbiIsIGUuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZS50aXRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIlRvb2xJY29uX3R5cGVfcmFkaW8gIi5jb25jYXQociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJhZGlvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBlWyJhcmlhLWxhYmVsIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEta2V5c2hvcnRjdXRzIjogZVsiYXJpYS1rZXlzaG9ydGN1dHMiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiBlWyJkYXRhLXRlc3RpZCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGUuY2hlY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIlRvb2xJY29uX19pY29uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5pY29uLCBlLmtleUJpbmRpbmdMYWJlbCAmJiB1KCkuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sSWNvbl9fa2V5YmluZGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUua2V5QmluZGluZ0xhYmVsKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgJGkuZGVmYXVsdFByb3BzID0gewogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdmFyIEppID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJsaWdodCIgPT09IGUgPyBidC4keVs0XSA6IGJ0LiR5WzldCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJsaWdodCIgPT09IGUgPyBidC5TbiA6IGJ0Lk1BWzRdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRsID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJsaWdodCIgPT09IGUgPyBidC5peCA6ICIjMWUxZTFlIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBubCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IDUxMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICJudW1iZXIiID09IHR5cGVvZiB0ID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB2b2lkIDAgPT09IHIgPyA1MTIgOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuLmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdm9pZCAwID09PSBhID8gbyA6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4ubWlycm9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuLnN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtaGlkZGVuIjogInRydWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzYWJsZTogImZhbHNlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAiaW1nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAiMCAwICIuY29uY2F0KG8sICIgIikuY29uY2F0KGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicnRsLW1pcnJvciI6IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgInN0cmluZyIgPT0gdHlwZW9mIGUgPyB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHJsID0gbmwoIk0zMjYuNjEyIDE4NS4zOTFjNTkuNzQ3IDU5LjgwOSA1OC45MjcgMTU1LjY5OC4zNiAyMTQuNTktLjExLjEyLS4yNC4yNS0uMzYuMzdsLTY3LjIgNjcuMmMtNTkuMjcgNTkuMjctMTU1LjY5OSA1OS4yNjItMjE0Ljk2IDAtNTkuMjctNTkuMjYtNTkuMjctMTU1LjcgMC0yMTQuOTZsMzcuMTA2LTM3LjEwNmM5Ljg0LTkuODQgMjYuNzg2LTMuMyAyNy4yOTQgMTAuNjA2LjY0OCAxNy43MjIgMy44MjYgMzUuNTI3IDkuNjkgNTIuNzIxIDEuOTg2IDUuODIyLjU2NyAxMi4yNjItMy43ODMgMTYuNjEybC0xMy4wODcgMTMuMDg3Yy0yOC4wMjYgMjguMDI2LTI4LjkwNSA3My42Ni0xLjE1NSAxMDEuOTYgMjguMDI0IDI4LjU3OSA3NC4wODYgMjguNzQ5IDEwMi4zMjUuNTFsNjcuMi02Ny4xOWMyOC4xOTEtMjguMTkxIDI4LjA3My03My43NTcgMC0xMDEuODMtMy43MDEtMy42OTQtNy40MjktNi41NjQtMTAuMzQxLTguNTY5YTE2LjAzNyAxNi4wMzcgMCAwIDEtNi45NDctMTIuNjA2Yy0uMzk2LTEwLjU2NyAzLjM0OC0yMS40NTYgMTEuNjk4LTI5LjgwNmwyMS4wNTQtMjEuMDU1YzUuNTIxLTUuNTIxIDE0LjE4Mi02LjE5OSAyMC41ODQtMS43MzFhMTUyLjQ4MiAxNTIuNDgyIDAgMCAxIDIwLjUyMiAxNy4xOTd6TTQ2Ny41NDcgNDQuNDQ5Yy01OS4yNjEtNTkuMjYyLTE1NS42OS01OS4yNy0yMTQuOTYgMGwtNjcuMiA2Ny4yYy0uMTIuMTItLjI1LjI1LS4zNi4zNy01OC41NjYgNTguODkyLTU5LjM4NyAxNTQuNzgxLjM2IDIxNC41OWExNTIuNDU0IDE1Mi40NTQgMCAwIDAgMjAuNTIxIDE3LjE5NmM2LjQwMiA0LjQ2OCAxNS4wNjQgMy43ODkgMjAuNTg0LTEuNzMxbDIxLjA1NC0yMS4wNTVjOC4zNS04LjM1IDEyLjA5NC0xOS4yMzkgMTEuNjk4LTI5LjgwNmExNi4wMzcgMTYuMDM3IDAgMCAwLTYuOTQ3LTEyLjYwNmMtMi45MTItMi4wMDUtNi42NC00Ljg3NS0xMC4zNDEtOC41NjktMjguMDczLTI4LjA3My0yOC4xOTEtNzMuNjM5IDAtMTAxLjgzbDY3LjItNjcuMTljMjguMjM5LTI4LjIzOSA3NC4zLTI4LjA2OSAxMDIuMzI1LjUxIDI3Ljc1IDI4LjMgMjYuODcyIDczLjkzNC0xLjE1NSAxMDEuOTZsLTEzLjA4NyAxMy4wODdjLTQuMzUgNC4zNS01Ljc2OSAxMC43OS0zLjc4MyAxNi42MTIgNS44NjQgMTcuMTk0IDkuMDQyIDM0Ljk5OSA5LjY5IDUyLjcyMS41MDkgMTMuOTA2IDE3LjQ1NCAyMC40NDYgMjcuMjk0IDEwLjYwNmwzNy4xMDYtMzcuMTA2YzU5LjI3MS01OS4yNTkgNTkuMjcxLTE1NS42OTkuMDAxLTIxNC45NTl6IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgb2wgPSBubCgiTTQzMy45NDEgMTI5Ljk0MWwtODMuODgyLTgzLjg4MkE0OCA0OCAwIDAgMCAzMTYuMTE4IDMySDQ4QzIxLjQ5IDMyIDAgNTMuNDkgMCA4MHYzNTJjMCAyNi41MSAyMS40OSA0OCA0OCA0OGgzNTJjMjYuNTEgMCA0OC0yMS40OSA0OC00OFYxNjMuODgyYTQ4IDQ4IDAgMCAwLTE0LjA1OS0zMy45NDF6TTIyNCA0MTZjLTM1LjM0NiAwLTY0LTI4LjY1NC02NC02NCAwLTM1LjM0NiAyOC42NTQtNjQgNjQtNjRzNjQgMjguNjU0IDY0IDY0YzAgMzUuMzQ2LTI4LjY1NCA2NC02NCA2NHptOTYtMzA0LjUyVjIxMmMwIDYuNjI3LTUuMzczIDEyLTEyIDEySDc2Yy02LjYyNyAwLTEyLTUuMzczLTEyLTEyVjEwOGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDIyOC41MmMzLjE4MyAwIDYuMjM1IDEuMjY0IDguNDg1IDMuNTE1bDMuNDggMy40OEExMS45OTYgMTEuOTk2IDAgMCAxIDMyMCAxMTEuNDh6IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0OCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTEyCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBhbCA9IG5sKCJNMjUyIDU0TDIwMyA4YTI4IDI3IDAgMDAtMjAtOEgyOEMxMiAwIDAgMTIgMCAyN3YxOTVjMCAxNSAxMiAyNiAyOCAyNmgyMDRjMTUgMCAyOC0xMSAyOC0yNlY3M2EyOCAyNyAwIDAwLTgtMTl6TTEzMCAyMTNjLTIxIDAtMzctMTYtMzctMzYgMC0xOSAxNi0zNSAzNy0zNSAyMCAwIDM3IDE2IDM3IDM1IDAgMjAtMTcgMzYtMzcgMzZ6bTU2LTE2OXY1NmMwIDQtNCA2LTcgNkg0NGMtNCAwLTctMi03LTZWNDJjMC00IDMtNyA3LTdoMTMzbDQgMiAzIDJhNyA3IDAgMDEyIDV6IE0yOTYgMjAxbDg3IDk1LTE4OCAyMDUtNzggOWMtMTAgMS0xOS04LTE4LTIwbDktODR6bTE0MS0xNGwtNDEtNDRhMzEgMzEgMCAwMC00NiAwbC0zOCA0MSA4NyA5NSAzOC00MmMxMy0xNCAxMy0zNiAwLTUweiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgaWwgPSBubCgiTTU3Mi42OTQgMjkyLjA5M0w1MDAuMjcgNDE2LjI0OEE2My45OTcgNjMuOTk3IDAgMCAxIDQ0NC45ODkgNDQ4SDQ1LjAyNWMtMTguNTIzIDAtMzAuMDY0LTIwLjA5My0yMC43MzEtMzYuMDkzbDcyLjQyNC0xMjQuMTU1QTY0IDY0IDAgMCAxIDE1MiAyNTZoMzk5Ljk2NGMxOC41MjMgMCAzMC4wNjQgMjAuMDkzIDIwLjczIDM2LjA5M3pNMTUyIDIyNGgzMjh2LTQ4YzAtMjYuNTEtMjEuNDktNDgtNDgtNDhIMjcybC02NC02NEg0OEMyMS40OSA2NCAwIDg1LjQ5IDAgMTEydjI3OC4wNDZsNjkuMDc3LTExOC40MThDODYuMjE0IDI0Mi4yNSAxMTcuOTg5IDIyNCAxNTIgMjI0eiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1NzYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGxsID0gbmwoIk0zODQgMTEydjM1MmMwIDI2LjUxLTIxLjQ5IDQ4LTQ4IDQ4SDQ4Yy0yNi41MSAwLTQ4LTIxLjQ5LTQ4LTQ4VjExMmMwLTI2LjUxIDIxLjQ5LTQ4IDQ4LTQ4aDgwYzAtMzUuMjkgMjguNzEtNjQgNjQtNjRzNjQgMjguNzEgNjQgNjRoODBjMjYuNTEgMCA0OCAyMS40OSA0OCA0OHpNMTkyIDQwYy0xMy4yNTUgMC0yNCAxMC43NDUtMjQgMjRzMTAuNzQ1IDI0IDI0IDI0IDI0LTEwLjc0NSAyNC0yNC0xMC43NDUtMjQtMjQtMjRtOTYgMTE0di0yMGE2IDYgMCAwIDAtNi02SDEwMmE2IDYgMCAwIDAtNiA2djIwYTYgNiAwIDAgMCA2IDZoMTgwYTYgNiAwIDAgMCA2LTZ6IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDM4NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTEyCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBzbCA9IG5sKCJNMzIgNDY0YTQ4IDQ4IDAgMCAwIDQ4IDQ4aDI4OGE0OCA0OCAwIDAgMCA0OC00OFYxMjhIMzJ6bTI3Mi0yNTZhMTYgMTYgMCAwIDEgMzIgMHYyMjRhMTYgMTYgMCAwIDEtMzIgMHptLTk2IDBhMTYgMTYgMCAwIDEgMzIgMHYyMjRhMTYgMTYgMCAwIDEtMzIgMHptLTk2IDBhMTYgMTYgMCAwIDEgMzIgMHYyMjRhMTYgMTYgMCAwIDEtMzIgMHpNNDMyIDMySDMxMmwtOS40LTE4LjdBMjQgMjQgMCAwIDAgMjgxLjEgMEgxNjYuOGEyMy43MiAyMy43MiAwIDAgMC0yMS40IDEzLjNMMTM2IDMySDE2QTE2IDE2IDAgMCAwIDAgNDh2MzJhMTYgMTYgMCAwIDAgMTYgMTZoNDE2YTE2IDE2IDAgMCAwIDE2LTE2VjQ4YTE2IDE2IDAgMCAwLTE2LTE2eiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgY2wgPSBubCgiTTIwNC4zIDVDMTA0LjkgMjQuNCAyNC44IDEwNC4zIDUuMiAyMDMuNGMtMzcgMTg3IDEzMS43IDMyNi40IDI1OC44IDMwNi43IDQxLjItNi40IDYxLjQtNTQuNiA0Mi41LTkxLjctMjMuMS00NS40IDkuOS05OC40IDYwLjktOTguNGg3OS43YzM1LjggMCA2NC44LTI5LjYgNjQuOS02NS4zQzUxMS41IDk3LjEgMzY4LjEtMjYuOSAyMDQuMyA1ek05NiAzMjBjLTE3LjcgMC0zMi0xNC4zLTMyLTMyczE0LjMtMzIgMzItMzIgMzIgMTQuMyAzMiAzMi0xNC4zIDMyLTMyIDMyem0zMi0xMjhjLTE3LjcgMC0zMi0xNC4zLTMyLTMyczE0LjMtMzIgMzItMzIgMzIgMTQuMyAzMiAzMi0xNC4zIDMyLTMyIDMyem0xMjgtNjRjLTE3LjcgMC0zMi0xNC4zLTMyLTMyczE0LjMtMzIgMzItMzIgMzIgMTQuMyAzMiAzMi0xNC4zIDMyLTMyIDMyem0xMjggNjRjLTE3LjcgMC0zMi0xNC4zLTMyLTMyczE0LjMtMzIgMzItMzIgMzIgMTQuMyAzMiAzMi0xNC4zIDMyLTMyIDMyeiIpLAogICAgICAgICAgICAgICAgICAgICAgICB1bCA9IG5sKCJNMzg0IDEyMS45YzAtNi4zLTIuNS0xMi40LTctMTYuOUwyNzkuMSA3Yy00LjUtNC41LTEwLjYtNy0xNy03SDI1NnYxMjhoMTI4ek01NzEgMzA4bC05NS43LTk2LjRjLTEwLjEtMTAuMS0yNy40LTMtMjcuNCAxMS4zVjI4OGgtNjR2NjRoNjR2NjUuMmMwIDE0LjMgMTcuMyAyMS40IDI3LjQgMTEuM0w1NzEgMzMyYzYuNi02LjYgNi42LTE3LjQgMC0yNHptLTM3OSAyOHYtMzJjMC04LjggNy4yLTE2IDE2LTE2aDE3NlYxNjBIMjQ4Yy0xMy4yIDAtMjQtMTAuOC0yNC0yNFYwSDI0QzEwLjcgMCAwIDEwLjcgMCAyNHY0NjRjMCAxMy4zIDEwLjcgMjQgMjQgMjRoMzM2YzEzLjMgMCAyNC0xMC43IDI0LTI0VjM1MkgyMDhjLTguOCAwLTE2LTcuMi0xNi0xNnoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTc2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBkbCA9IG5sKCJNNDE2IDIwOEgyNzJWNjRjMC0xNy42Ny0xNC4zMy0zMi0zMi0zMmgtMzJjLTE3LjY3IDAtMzIgMTQuMzMtMzIgMzJ2MTQ0SDMyYy0xNy42NyAwLTMyIDE0LjMzLTMyIDMydjMyYzAgMTcuNjcgMTQuMzMgMzIgMzIgMzJoMTQ0djE0NGMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDMyYzE3LjY3IDAgMzItMTQuMzMgMzItMzJWMzA0aDE0NGMxNy42NyAwIDMyLTE0LjMzIDMyLTMydi0zMmMwLTE3LjY3LTE0LjMzLTMyLTMyLTMyeiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcGwgPSBubCgiTTQxNiAyMDhIMzJjLTE3LjY3IDAtMzIgMTQuMzMtMzIgMzJ2MzJjMCAxNy42NyAxNC4zMyAzMiAzMiAzMmgzODRjMTcuNjcgMCAzMi0xNC4zMyAzMi0zMnYtMzJjMC0xNy42Ny0xNC4zMy0zMi0zMi0zMnoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDQ4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGhsID0gbmwoIk0xNzMuODk4IDQzOS40MDRsLTE2Ni40LTE2Ni40Yy05Ljk5Ny05Ljk5Ny05Ljk5Ny0yNi4yMDYgMC0zNi4yMDRsMzYuMjAzLTM2LjIwNGM5Ljk5Ny05Ljk5OCAyNi4yMDctOS45OTggMzYuMjA0IDBMMTkyIDMxMi42OSA0MzIuMDk1IDcyLjU5NmM5Ljk5Ny05Ljk5NyAyNi4yMDctOS45OTcgMzYuMjA0IDBsMzYuMjAzIDM2LjIwNGM5Ljk5NyA5Ljk5NyA5Ljk5NyAyNi4yMDYgMCAzNi4yMDRsLTI5NC40IDI5NC40MDFjLTkuOTk4IDkuOTk3LTI2LjIwNyA5Ljk5Ny0zNi4yMDQtLjAwMXoiKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmwgPSBubCgiTTE2IDEzMmg0MTZjOC44MzcgMCAxNi03LjE2MyAxNi0xNlY3NmMwLTguODM3LTcuMTYzLTE2LTE2LTE2SDE2QzcuMTYzIDYwIDAgNjcuMTYzIDAgNzZ2NDBjMCA4LjgzNyA3LjE2MyAxNiAxNiAxNnptMCAxNjBoNDE2YzguODM3IDAgMTYtNy4xNjMgMTYtMTZ2LTQwYzAtOC44MzctNy4xNjMtMTYtMTYtMTZIMTZjLTguODM3IDAtMTYgNy4xNjMtMTYgMTZ2NDBjMCA4LjgzNyA3LjE2MyAxNiAxNiAxNnptMCAxNjBoNDE2YzguODM3IDAgMTYtNy4xNjMgMTYtMTZ2LTQwYzAtOC44MzctNy4xNjMtMTYtMTYtMTZIMTZjLTguODM3IDAtMTYgNy4xNjMtMTYgMTZ2NDBjMCA4LjgzNyA3LjE2MyAxNiAxNiAxNnoiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWwgPSBubCgiTTI1NS41NDUgOGMtNjYuMjY5LjExOS0xMjYuNDM4IDI2LjIzMy0xNzAuODYgNjguNjg1TDQ4Ljk3MSA0MC45NzFDMzMuODUxIDI1Ljg1MSA4IDM2LjU1OSA4IDU3Ljk0MVYxOTJjMCAxMy4yNTUgMTAuNzQ1IDI0IDI0IDI0aDEzNC4wNTljMjEuMzgyIDAgMzIuMDktMjUuODUxIDE2Ljk3MS00MC45NzFsLTQxLjc1LTQxLjc1YzMwLjg2NC0yOC44OTkgNzAuODAxLTQ0LjkwNyAxMTMuMjMtNDUuMjczIDkyLjM5OC0uNzk4IDE3MC4yODMgNzMuOTc3IDE2OS40ODQgMTY5LjQ0MkM0MjMuMjM2IDM0OC4wMDkgMzQ5LjgxNiA0MjQgMjU2IDQyNGMtNDEuMTI3IDAtNzkuOTk3LTE0LjY3OC0xMTAuNjMtNDEuNTU2LTQuNzQzLTQuMTYxLTExLjkwNi0zLjkwOC0xNi4zNjguNTUzTDg5LjM0IDQyMi42NTljLTQuODcyIDQuODcyLTQuNjMxIDEyLjgxNS40ODIgMTcuNDMzQzEzMy43OTggNDc5LjgxMyAxOTIuMDc0IDUwNCAyNTYgNTA0YzEzNi45NjYgMCAyNDcuOTk5LTExMS4wMzMgMjQ4LTI0Ny45OThDNTA0LjAwMSAxMTkuMTkzIDM5Mi4zNTQgNy43NTUgMjU1LjU0NSA4eiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGdsID0gbmwoIk0yNTYuNDU1IDhjNjYuMjY5LjExOSAxMjYuNDM3IDI2LjIzMyAxNzAuODU5IDY4LjY4NWwzNS43MTUtMzUuNzE1QzQ3OC4xNDkgMjUuODUxIDUwNCAzNi41NTkgNTA0IDU3Ljk0MVYxOTJjMCAxMy4yNTUtMTAuNzQ1IDI0LTI0IDI0SDM0NS45NDFjLTIxLjM4MiAwLTMyLjA5LTI1Ljg1MS0xNi45NzEtNDAuOTcxbDQxLjc1LTQxLjc1Yy0zMC44NjQtMjguODk5LTcwLjgwMS00NC45MDctMTEzLjIzLTQ1LjI3My05Mi4zOTgtLjc5OC0xNzAuMjgzIDczLjk3Ny0xNjkuNDg0IDE2OS40NDJDODguNzY0IDM0OC4wMDkgMTYyLjE4NCA0MjQgMjU2IDQyNGM0MS4xMjcgMCA3OS45OTctMTQuNjc4IDExMC42MjktNDEuNTU2IDQuNzQzLTQuMTYxIDExLjkwNi0zLjkwOCAxNi4zNjguNTUzbDM5LjY2MiAzOS42NjJjNC44NzIgNC44NzIgNC42MzEgMTIuODE1LS40ODIgMTcuNDMzQzM3OC4yMDIgNDc5LjgxMyAzMTkuOTI2IDUwNCAyNTYgNTA0IDExOS4wMzQgNTA0IDguMDAxIDM5Mi45NjcgOCAyNTYuMDAyIDcuOTk5IDExOS4xOTMgMTE5LjY0NiA3Ljc1NSAyNTYuNDU1IDh6IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdmwgPSBubCgiTTUwNCAyNTZjMCAxMzYuOTk3LTExMS4wNDMgMjQ4LTI0OCAyNDhTOCAzOTIuOTk3IDggMjU2QzggMTE5LjA4MyAxMTkuMDQzIDggMjU2IDhzMjQ4IDExMS4wODMgMjQ4IDI0OHpNMjYyLjY1NSA5MGMtNTQuNDk3IDAtODkuMjU1IDIyLjk1Ny0xMTYuNTQ5IDYzLjc1OC0zLjUzNiA1LjI4Ni0yLjM1MyAxMi40MTUgMi43MTUgMTYuMjU4bDM0LjY5OSAyNi4zMWM1LjIwNSAzLjk0NyAxMi42MjEgMy4wMDggMTYuNjY1LTIuMTIyIDE3Ljg2NC0yMi42NTggMzAuMTEzLTM1Ljc5NyA1Ny4zMDMtMzUuNzk3IDIwLjQyOSAwIDQ1LjY5OCAxMy4xNDggNDUuNjk4IDMyLjk1OCAwIDE0Ljk3Ni0xMi4zNjMgMjIuNjY3LTMyLjUzNCAzMy45NzZDMjQ3LjEyOCAyMzguNTI4IDIxNiAyNTQuOTQxIDIxNiAyOTZ2NGMwIDYuNjI3IDUuMzczIDEyIDEyIDEyaDU2YzYuNjI3IDAgMTItNS4zNzMgMTItMTJ2LTEuMzMzYzAtMjguNDYyIDgzLjE4Ni0yOS42NDcgODMuMTg2LTEwNi42NjcgMC01OC4wMDItNjAuMTY1LTEwMi0xMTYuNTMxLTEwMnpNMjU2IDMzOGMtMjUuMzY1IDAtNDYgMjAuNjM1LTQ2IDQ2IDAgMjUuMzY0IDIwLjYzNSA0NiA0NiA0NnM0Ni0yMC42MzYgNDYtNDZjMC0yNS4zNjUtMjAuNjM1LTQ2LTQ2LTQ2eiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGJsID0gKG5sKCJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2MuMDUtLjIzLjA5LS40Ni4wOS0uN3MtLjA0LS40Ny0uMDktLjdsNy4wNS00LjExYy41NC41IDEuMjUuODEgMi4wNC44MSAxLjY2IDAgMy0xLjM0IDMtM3MtMS4zNC0zLTMtMy0zIDEuMzQtMyAzYzAgLjI0LjA0LjQ3LjA5LjdMOC4wNCA5LjgxQzcuNSA5LjMxIDYuNzkgOSA2IDljLTEuNjYgMC0zIDEuMzQtMyAzczEuMzQgMyAzIDNjLjc5IDAgMS41LS4zMSAyLjA0LS44MWw3LjEyIDQuMTZjLS4wNS4yMS0uMDguNDMtLjA4LjY1IDAgMS42MSAxLjMxIDIuOTIgMi45MiAyLjkyIDEuNjEgMCAyLjkyLTEuMzEgMi45Mi0yLjkycy0xLjMxLTIuOTItMi45Mi0yLjkyeiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjQKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG5sKCJNMTYgNWwtMS40MiAxLjQyLTEuNTktMS41OVYxNmgtMS45OFY0LjgzTDkuNDIgNi40MiA4IDVsNC00IDQgNHptNCA1djExYzAgMS4xLS45IDItMiAySDZjLTEuMTEgMC0yLS45LTItMlYxMGMwLTEuMTEuODktMiAyLTJoM3YySDZ2MTFoMTJWMTBoLTNWOGgzYzEuMSAwIDIgLjg5IDIgMnoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJjdXJyZW50Q29sb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk00MCA1LjZ2Ni4xbC00LjEuN2MtOC45IDEuNC0xNi41IDYuOS0yMC42IDE1QzEzIDMyIDEwLjkgNDMgMTIuNCA0M2MuNCAwIDIuNC0xLjMgNC40LTMgNS0zLjkgMTIuMS03IDE4LjItNy43bDUtLjZ2MTIuOGwxMS4yLTExLjNMNjIuNSAyMiA1MS4yIDEwLjggNDAtLjV2Ni4xem0xMC4yIDIyLjZMNDQgMzQuNXYtNi44bC02LjkuNmMtMy45LjMtOS44IDEuNy0xMy4yIDMuMS0zLjUgMS40LTYuNSAyLjQtNi43IDIuMi0uOS0xIDMtNy41IDYuNC0xMC44QzI4IDE4LjYgMzQuNCAxNiA0MC4xIDE2YzMuNyAwIDMuOS0uMSAzLjktMy4yVjkuNWw2LjIgNi4zIDYuMyA2LjItNi4zIDYuMnoiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogImN1cnJlbnRDb2xvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMCAzNnYyMGg0OHYtNi4yYzAtNiAwLTYuMS0yLTQuMy0xLjEgMS0yIDIuOS0yIDQuMlY1Mkg0VjM0YzAtMTcuMy0uMS0xOC0yLTE4cy0yIC43LTIgMjB6IgogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNjQKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiNDAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogImN1cnJlbnRDb2xvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTE0OCA1NjBhMzE4IDMxOCAwIDAgMCA1MjIgMTEwIDMxNiAzMTYgMCAwIDAgMC00NTAgMzE2IDMxNiAwIDAgMC00NTAgMGMtMTEgMTEtMjEgMjItMzAgMzR2NGg0N2MyNSAwIDQ2IDIxIDQ2IDQ2cy0yMSA0NS00NiA0NUg5MGMtMTMgMC0yNS02LTMzLTE0LTktOS0xNC0yMC0xNC0zM1YxNTZjMC0yNSAyMC00NSA0NS00NXM0NSAyMCA0NSA0NXYzMmwxIDFhNDAxIDQwMSAwIDAgMSA2MjMgNTA5bDIxMiAyMTJhNDIgNDIgMCAwIDEtNTkgNTlMNjk4IDc1N0E0MDEgNDAxIDAgMCAxIDY1IDU3MGE0MiA0MiAwIDAgMSA4My0xMHoiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAyNAogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIHlsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjIgOS41NTZDMjIgOC42OTYgMjEuMzAzIDggMjAuNDQ0IDhIMTZ2OEg4djQuNDQ0QzggMjEuMzA0IDguNjk3IDIyIDkuNTU2IDIyaDEwLjg4OGMuODYgMCAxLjU1Ni0uNjk3IDEuNTU2LTEuNTU2VjkuNTU2eiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xNiAzLjU1NkMxNiAyLjY5NiAxNS4zMDMgMiAxNC40NDQgMkgzLjU1NkMyLjY5NiAyIDIgMi42OTcgMiAzLjU1NnYxMC44ODhDMiAxNS4zMDQgMi42OTcgMTYgMy41NTYgMTZoMTAuODg4Yy44NiAwIDEuNTU2LS42OTcgMS41NTYtMS41NTZWMy41NTZ6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IEppKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIHdsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTYgMy41NTZDMTYgMi42OTYgMTUuMzAzIDIgMTQuNDQ0IDJIMy41NTZDMi42OTYgMiAyIDIuNjk3IDIgMy41NTZ2MTAuODg4QzIgMTUuMzA0IDIuNjk3IDE2IDMuNTU2IDE2aDEwLjg4OGMuODYgMCAxLjU1Ni0uNjk3IDEuNTU2LTEuNTU2VjMuNTU2eiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yMiA5LjU1NkMyMiA4LjY5NiAyMS4zMDMgOCAyMC40NDQgOEg5LjU1NkM4LjY5NiA4IDggOC42OTcgOCA5LjU1NnYxMC44ODhDOCAyMS4zMDQgOC42OTcgMjIgOS41NTYgMjJoMTAuODg4Yy44NiAwIDEuNTU2LS42OTcgMS41NTYtMS41NTZWOS41NTZ6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIHhsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTMgMjFhMSAxIDAgMDAxIDFoN2ExIDEgMCAwMDEtMXYtN2ExIDEgMCAwMC0xLTFoLTN2NWgtNXYzek0xMSAzYTEgMSAwIDAwLTEtMUgzYTEgMSAwIDAwLTEgMXY3YTEgMSAwIDAwMSAxaDNWNmg1VjN6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTE4IDcuMzMzQzE4IDYuNTk3IDE3LjQwMyA2IDE2LjY2NyA2SDcuMzMzQzYuNTk3IDYgNiA2LjU5NyA2IDcuMzMzdjkuMzM0QzYgMTcuNDAzIDYuNTk3IDE4IDcuMzMzIDE4aDkuMzM0Yy43MzYgMCAxLjMzMy0uNTk3IDEuMzMzLTEuMzMzVjcuMzMzeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBFbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTE4IDcuMzMzQzE4IDYuNTk3IDE3LjQwMyA2IDE2LjY2NyA2SDcuMzMzQzYuNTk3IDYgNiA2LjU5NyA2IDcuMzMzdjkuMzM0QzYgMTcuNDAzIDYuNTk3IDE4IDcuMzMzIDE4aDkuMzM0Yy43MzYgMCAxLjMzMy0uNTk3IDEuMzMzLTEuMzMzVjcuMzMzeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xMSAzYTEgMSAwIDAwLTEtMUgzYTEgMSAwIDAwLTEgMXY3YTEgMSAwIDAwMSAxaDhWM3pNMjIgMTRhMSAxIDAgMDAtMS0xaC03YTEgMSAwIDAwLTEgMXY3YTEgMSAwIDAwMSAxaDh2LTh6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIGtsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDIsNSBIIDIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDYsNyBDIDUuNDQ2LDcgNSw3LjQ0NiA1LDggdiA5Ljk5OTk5MiBjIDAsMC41NTQgMC40NDYsMSAxLDEgaCAzLjAwMDAwMDEgYyAwLjU1NCwwIDAuOTk5OTk5OSwtMC40NDYgMC45OTk5OTk5LC0xIFYgOCBDIDEwLDcuNDQ2IDkuNTU0MDAwMSw3IDkuMDAwMDAwMSw3IFogbSA5LDAgYyAtMC41NTQsMCAtMSwwLjQ0NiAtMSwxIHYgNS45OTk5OTIgYyAwLDAuNTU0IDAuNDQ2LDEgMSwxIGggMyBjIDAuNTU0LDAgMSwtMC40NDYgMSwtMSBWIDggQyAxOSw3LjQ0NiAxOC41NTQsNyAxOCw3IFoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IEppKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDI0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgU2wgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0gMiwxOSBIIDIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJtIDYsMTYuOTk5OTkyIGMgLTAuNTU0LDAgLTEsLTAuNDQ2IC0xLC0xIFYgNiBDIDUsNS40NDYgNS40NDYsNSA2LDUgSCA5LjAwMDAwMDEgQyA5LjU1NDAwMDEsNSAxMCw1LjQ0NiAxMCw2IHYgOS45OTk5OTIgYyAwLDAuNTU0IC0wLjQ0NTk5OTksMSAtMC45OTk5OTk5LDEgeiBtIDksMCBjIC0wLjU1NCwwIC0xLC0wLjQ0NiAtMSwtMSBWIDEwIGMgMCwtMC41NTQgMC40NDYsLTEgMSwtMSBoIDMgYyAwLjU1NCwwIDEsMC40NDYgMSwxIHYgNS45OTk5OTIgYyAwLDAuNTU0IC0wLjQ0NiwxIC0xLDEgeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBDbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTSA1LDIgViAyMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAibSA3LjAwMDAwNCw1Ljk5OTk5NiBjIDAsLTAuNTU0IDAuNDQ2LC0xIDEsLTEgaCA5Ljk5OTk5MiBjIDAuNTU0LDAgMSwwLjQ0NiAxLDEgdiAzLjAwMDAwMDEgYyAwLDAuNTU0IC0wLjQ0NiwwLjk5OTk5OTkgLTEsMC45OTk5OTk5IEggOC4wMDAwMDQgYyAtMC41NTQsMCAtMSwtMC40NDU5OTk5IC0xLC0wLjk5OTk5OTkgeiBtIDAsOSBjIDAsLTAuNTU0IDAuNDQ2LC0xIDEsLTEgaCA1Ljk5OTk5MiBjIDAuNTU0LDAgMSwwLjQ0NiAxLDEgdiAzIGMgMCwwLjU1NCAtMC40NDYsMSAtMSwxIEggOC4wMDAwMDQgYyAtMC41NTQsMCAtMSwtMC40NDYgLTEsLTEgeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgT2wgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0gMTksMiBWIDIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJtIDE2Ljk5OTk5Niw1Ljk5OTk5NiBjIDAsLTAuNTU0IC0wLjQ0NiwtMSAtMSwtMSBIIDYuMDAwMDA0IGMgLTAuNTU0LDAgLTEsMC40NDYgLTEsMSB2IDMuMDAwMDAwMSBjIDAsMC41NTQgMC40NDYsMC45OTk5OTk5IDEsMC45OTk5OTk5IGggOS45OTk5OTIgYyAwLjU1NCwwIDEsLTAuNDQ1OTk5OSAxLC0wLjk5OTk5OTkgeiBtIDAsOSBjIDAsLTAuNTU0IC0wLjQ0NiwtMSAtMSwtMSBoIC01Ljk5OTk5MiBjIC0wLjU1NCwwIC0xLDAuNDQ2IC0xLDEgdiAzIGMgMCwwLjU1NCAwLjQ0NiwxIDEsMSBoIDUuOTk5OTkyIGMgMC41NTQsMCAxLC0wLjQ0NiAxLC0xIHoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IEppKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDI0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIE1sID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTkgNVYxOU01IDVWMTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xNSA5QzE1LjU1NCA5IDE2IDkuNDQ2IDE2IDEwVjE0QzE2IDE0LjU1NCAxNS41NTQgMTUgMTUgMTVIOUM4LjQ0NiAxNSA4IDE0LjU1NCA4IDE0VjEwQzggOS40NDYgOC40NDYgOSA5IDlIMTVaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IEppKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBQbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTUgNUwxOSA1TTUgMTlIMTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xNSA5QzE1LjU1NCA5IDE2IDkuNDQ2IDE2IDEwVjE0QzE2IDE0LjU1NCAxNS41NTQgMTUgMTUgMTVIOUM4LjQ0NiAxNSA4IDE0LjU1NCA4IDE0VjEwQzggOS40NDYgOC40NDYgOSA5IDlIMTVaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IEppKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBJbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAibSA1LjAwMDAwNCwxNi45OTk5OTYgYyAwLDAuNTU0IDAuNDQ2LDEgMSwxIGggMyBjIDAuNTU0LDAgMSwtMC40NDYgMSwtMSB2IC0xMCBjIDAsLTAuNTU0IC0wLjQ0NiwtMSAtMSwtMSBoIC0zIGMgLTAuNTU0LDAgLTEsMC40NDYgLTEsMSB6IG0gOSwtMiBjIDAsMC41NTQgMC40NDYsMSAxLDEgaCAzIGMgMC41NTQsMCAxLC0wLjQ0NiAxLC0xIHYgLTYgYyAwLC0wLjU1NCAtMC40NDYsLTEgLTEsLTEgaCAtMyBjIC0wLjU1NCwwIC0xLDAuNDQ2IC0xLDEgeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0gMiwxMiBIIDIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlRGFzaGFycmF5OiAiMSwgMi44IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBUbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTSA3IDUgQyA2LjQ0NiA1IDYgNS40NDYgNiA2IEwgNiA5IEMgNiA5LjU1NCA2LjQ0NiAxMCA3IDEwIEwgMTcgMTAgQyAxNy41NTQgMTAgMTggOS41NTQgMTggOSBMIDE4IDYgQyAxOCA1LjQ0NiAxNy41NTQgNSAxNyA1IEwgNyA1IHogTSA5IDE0IEMgOC40NDYgMTQgOCAxNC40NDYgOCAxNSBMIDggMTggQyA4IDE4LjU1NCA4LjQ0NiAxOSA5IDE5IEwgMTUgMTkgQyAxNS41NTQgMTkgMTYgMTguNTU0IDE2IDE4IEwgMTYgMTUgQyAxNiAxNC40NDYgMTUuNTU0IDE0IDE1IDE0IEwgOSAxNCB6ICIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogSmkodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBKaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0gMTIsMiBWIDIyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlRGFzaGFycmF5OiAiMSwgMi44IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgTGwgPSBubCgiTTE5MiAyNTZjNjEuOSAwIDExMi01MC4xIDExMi0xMTJTMjUzLjkgMzIgMTkyIDMyIDgwIDgyLjEgODAgMTQ0czUwLjEgMTEyIDExMiAxMTJ6bTc2LjggMzJoLTguM2MtMjAuOCAxMC00My45IDE2LTY4LjUgMTZzLTQ3LjYtNi02OC41LTE2aC04LjNDNTEuNiAyODggMCAzMzkuNiAwIDQwMy4yVjQzMmMwIDI2LjUgMjEuNSA0OCA0OCA0OGgyODhjMjYuNSAwIDQ4LTIxLjUgNDgtNDh2LTI4LjhjMC02My42LTUxLjYtMTE1LjItMTE1LjItMTE1LjJ6TTQ4MCAyNTZjNTMgMCA5Ni00MyA5Ni05NnMtNDMtOTYtOTYtOTYtOTYgNDMtOTYgOTYgNDMgOTYgOTYgOTZ6bTQ4IDMyaC0zLjhjLTEzLjkgNC44LTI4LjYgOC00NC4yIDhzLTMwLjMtMy4yLTQ0LjItOEg0MzJjLTIwLjQgMC0zOS4yIDUuOS01NS43IDE1LjQgMjQuNCAyNi4zIDM5LjcgNjEuMiAzOS43IDk5Ljh2MzguNGMwIDIuMi0uNSA0LjMtLjYgNi40SDU5MmMyNi41IDAgNDgtMjEuNSA0OC00OCAwLTYxLjktNTAuMS0xMTItMTEyLTExMnoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBBbCA9IChubCgiTTI1NiA4QzExOSA4IDggMTE5IDggMjU2czExMSAyNDggMjQ4IDI0OCAyNDgtMTExIDI0OC0yNDhTMzkzIDggMjU2IDh6bTExNS43IDI3MmwtMTc2IDEwMWMtMTUuOCA4LjgtMzUuNy0yLjUtMzUuNy0yMVYxNTJjMC0xOC40IDE5LjgtMjkuOCAzNS43LTIxbDE3NiAxMDdjMTYuNCA5LjIgMTYuNCAzMi45IDAgNDJ6IiksIG5sKCJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIpLCBubCgiTTI0Mi43MiAyNTZsMTAwLjA3LTEwMC4wN2MxMi4yOC0xMi4yOCAxMi4yOC0zMi4xOSAwLTQ0LjQ4bC0yMi4yNC0yMi4yNGMtMTIuMjgtMTIuMjgtMzIuMTktMTIuMjgtNDQuNDggMEwxNzYgMTg5LjI4IDc1LjkzIDg5LjIxYy0xMi4yOC0xMi4yOC0zMi4xOS0xMi4yOC00NC40OCAwTDkuMjEgMTExLjQ1Yy0xMi4yOCAxMi4yOC0xMi4yOCAzMi4xOSAwIDQ0LjQ4TDEwOS4yOCAyNTYgOS4yMSAzNTYuMDdjLTEyLjI4IDEyLjI4LTEyLjI4IDMyLjE5IDAgNDQuNDhsMjIuMjQgMjIuMjRjMTIuMjggMTIuMjggMzIuMiAxMi4yOCA0NC40OCAwTDE3NiAzMjIuNzJsMTAwLjA3IDEwMC4wN2MxMi4yOCAxMi4yOCAzMi4yIDEyLjI4IDQ0LjQ4IDBsMjIuMjQtMjIuMjRjMTIuMjgtMTIuMjggMTIuMjgtMzIuMTkgMC00NC40OEwyNDIuNzIgMjU2eiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMgogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIF9sID0gbmwoIk0zNC41MiAyMzkuMDNMMjI4Ljg3IDQ0LjY5YzkuMzctOS4zNyAyNC41Ny05LjM3IDMzLjk0IDBsMjIuNjcgMjIuNjdjOS4zNiA5LjM2IDkuMzcgMjQuNTIuMDQgMzMuOUwxMzEuNDkgMjU2bDE1NC4wMiAxNTQuNzVjOS4zNCA5LjM4IDkuMzIgMjQuNTQtLjA0IDMzLjlsLTIyLjY3IDIyLjY3Yy05LjM3IDkuMzctMjQuNTcgOS4zNy0zMy45NCAwTDM0LjUyIDI3Mi45N2MtOS4zNy05LjM3LTkuMzctMjQuNTcgMC0zMy45NHoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICItMC4ycmVtIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIERsID0gbmwoIk00NjQgMGMyNi41MSAwIDQ4IDIxLjQ5IDQ4IDQ4djI4OGMwIDI2LjUxLTIxLjQ5IDQ4LTQ4IDQ4SDE3NmMtMjYuNTEgMC00OC0yMS40OS00OC00OFY0OGMwLTI2LjUxIDIxLjQ5LTQ4IDQ4LTQ4aDI4OE0xNzYgNDE2Yy00NC4xMTIgMC04MC0zNS44ODgtODAtODBWMTI4SDQ4Yy0yNi41MSAwLTQ4IDIxLjQ5LTQ4IDQ4djI4OGMwIDI2LjUxIDIxLjQ5IDQ4IDQ4IDQ4aDI4OGMyNi41MSAwIDQ4LTIxLjQ5IDQ4LTQ4di00OEgxNzZ6IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgamwgPSAobmwoIk0xMS41NTMgMjIuODk0YS45OTguOTk4IDAgMDAuODk0IDBzMy4wMzctMS41MTYgNS40NjUtNC4wOTdDMTkuNjE2IDE2Ljk4NyAyMSAxNC42NjMgMjEgMTJWNWExIDEgMCAwMC0uNjQ5LS45MzZsLTgtM2EuOTk4Ljk5OCAwIDAwLS43MDIgMGwtOCAzQTEgMSAwIDAwMyA1djdjMCAyLjY2MyAxLjM4NCA0Ljk4NyAzLjA4OCA2Ljc5NyAyLjQyOCAyLjU4MSA1LjQ2NSA0LjA5NyA1LjQ2NSA0LjA5N3ptLTEuMzAzLTguNDgxbDYuNjQ0LTYuNjQ0YS44NTYuODU2IDAgMTExLjIxMiAxLjIxMmwtNy4yNSA3LjI1YS44NTYuODU2IDAgMDEtMS4yMTIgMGwtMy43NS0zLjc1YS44NTYuODU2IDAgMTExLjIxMi0xLjIxMmwzLjE0NCAzLjE0NHoiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjQKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTI1IDI2SDExMVYxMTFIMjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yNSAxMTFDMjUgODAuMjA2OCAyNSA0OS40MTM1IDI1IDI2TTI1IDI2QzQ4LjYxNzQgMjYgNzIuMjM0OCAyNiAxMTEgMjZIMjVaTTI1IDI2QzUzLjM2NzEgMjYgODEuNzM0MyAyNiAxMTEgMjZIMjVaTTExMSAyNkMxMTEgNTIuMzAzIDExMSA3OC42MDYgMTExIDExMVYyNlpNMTExIDI2QzExMSA1MS4yOTQ3IDExMSA3Ni41ODkzIDExMSAxMTFWMjZaTTExMSAxMTFDODcuMDc5MiAxMTEgNjMuMTU4NSAxMTEgMjUgMTExSDExMVpNMTExIDExMUM4Ny40NjQ2IDExMSA2My45MjkzIDExMSAyNSAxMTFIMTExWk0yNSAxMTFDMjUgODEuMTUxNCAyNSA1MS4zMDI4IDI1IDI2VjExMVoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTAwIDEwMEgxNjBWMTYwSDEwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTEwMCAxNjBDMTAwIDE0NC4xMDYgMTAwIDEyOC4yMTEgMTAwIDEwME0xMDAgMTAwQzExNy43MDYgMTAwIDEzNS40MTIgMTAwIDE2MCAxMDBIMTAwWk0xMDAgMTAwQzExNC4yMTQgMTAwIDEyOC40MjggMTAwIDE2MCAxMDBIMTAwWk0xNjAgMTAwQzE2MCAxMjAuMTg0IDE2MCAxNDAuMzY5IDE2MCAxNjBWMTAwWk0xNjAgMTAwQzE2MCAxMTMuMjE5IDE2MCAxMjYuNDM3IDE2MCAxNjBWMTAwWk0xNjAgMTYwQzE0NS41MzQgMTYwIDEzMS4wNjggMTYwIDEwMCAxNjBIMTYwWk0xNjAgMTYwQzE0My40NjcgMTYwIDEyNi45MzQgMTYwIDEwMCAxNjBIMTYwWk0xMDAgMTYwQzEwMCAxNDMuNjYxIDEwMCAxMjcuMzIxIDEwMCAxMDBWMTYwWiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoImciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogdGwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAiMi41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAiMi41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjMwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIzMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAiMi41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAiMTQ5LjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMzAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjMwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ICIxNDcuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogIjE0OS41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjMwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIzMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAiMTQ3LjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6ICIyLjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMzAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjMwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxODIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxODIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgemwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yNSAyNkgxMTFWMTExSDI1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjUgMTExQzI1IDgwLjIwNjggMjUgNDkuNDEzNSAyNSAyNk0yNSAyNkM0OC42MTc0IDI2IDcyLjIzNDggMjYgMTExIDI2SDI1Wk0yNSAyNkM1My4zNjcxIDI2IDgxLjczNDMgMjYgMTExIDI2SDI1Wk0xMTEgMjZDMTExIDUyLjMwMyAxMTEgNzguNjA2IDExMSAxMTFWMjZaTTExMSAyNkMxMTEgNTEuMjk0NyAxMTEgNzYuNTg5MyAxMTEgMTExVjI2Wk0xMTEgMTExQzg3LjA3OTIgMTExIDYzLjE1ODUgMTExIDI1IDExMUgxMTFaTTExMSAxMTFDODcuNDY0NiAxMTEgNjMuOTI5MyAxMTEgMjUgMTExSDExMVpNMjUgMTExQzI1IDgxLjE1MTQgMjUgNTEuMzAyOCAyNSAyNlYxMTFaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAiMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTEwMCAxMDBIMTYwVjE2MEgxMDAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xMDAgMTYwQzEwMCAxNDQuMTA2IDEwMCAxMjguMjExIDEwMCAxMDBNMTAwIDEwMEMxMTcuNzA2IDEwMCAxMzUuNDEyIDEwMCAxNjAgMTAwSDEwMFpNMTAwIDEwMEMxMTQuMjE0IDEwMCAxMjguNDI4IDEwMCAxNjAgMTAwSDEwMFpNMTYwIDEwMEMxNjAgMTIwLjE4NCAxNjAgMTQwLjM2OSAxNjAgMTYwVjEwMFpNMTYwIDEwMEMxNjAgMTEzLjIxOSAxNjAgMTI2LjQzNyAxNjAgMTYwVjEwMFpNMTYwIDE2MEMxNDUuNTM0IDE2MCAxMzEuMDY4IDE2MCAxMDAgMTYwSDE2MFpNMTYwIDE2MEMxNDMuNDY3IDE2MCAxMjYuOTM0IDE2MCAxMDAgMTYwSDE2MFpNMTAwIDE2MEMxMDAgMTQzLjY2MSAxMDAgMTI3LjMyMSAxMDAgMTAwVjE2MFoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHRsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICI2IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogIjIuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogIjIuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICIzMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiMzAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogIjc4LjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6ICIxNDkuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICIzMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiMzAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogIjE0Ny41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAiMTQ5LjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMzAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjMwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ICIxNDcuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogIjc4LjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMzAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjMwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ICIxMDUuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogIjIuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICIzMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiMzAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogIjIuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogIjEwMi41IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjMwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIzMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTgyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTgyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgQmwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTIwLjEwMSAxNkgyOC4wOTM0TDM2IDguOTU5ODlWNEgzMy41Nzc5TDIwLjEwMSAxNlpNMzAuNTcwNCA0TDE3LjA5MzUgMTZIOS4xMDEwMUwyMi41Nzc5IDRIMzAuNTcwNFpNMTkuNTcwNCA0TDYuMDkzNDkgMTZINFYxMC43NDc1TDExLjU3NzkgNEgxOS41NzA0Wk04LjU3MDM2IDRINFY4LjA2OTUyTDguNTcwMzYgNFpNMzYgMTEuNjM3OEwzMS4xMDEgMTZIMzZWMTEuNjM3OFpNMiAyVjE4SDM4VjJIMloiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIEhsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCgiZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjAuMTAxIDE2SDI4LjA5MzRMMzYgOC45NTk4OVY0SDMzLjU3NzlMMjAuMTAxIDE2Wk0zMC41NzA0IDRMMTcuMDkzNSAxNkg5LjEwMTAxTDIyLjU3NzkgNEgzMC41NzA0Wk0xOS41NzA0IDRMNi4wOTM0OSAxNkg0VjEwLjc0NzVMMTEuNTc3OSA0SDE5LjU3MDRaTTguNTcwMzYgNEg0VjguMDY5NTJMOC41NzAzNiA0Wk0zNiAxMS42Mzc4TDMxLjEwMSAxNkgzNlYxMS42Mzc4Wk0yIDJWMThIMzhWMkgyWiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTE0LjAwMDEgMThMMy4wMDAwNiA0LjAwMDAyTDQuNTcyNyAyLjc2NDM4TDE1LjU3MjcgMTYuNzY0NEwxNC4wMDAxIDE4Wk0yNS4wMDAxIDE4TDE0LjAwMDEgNC4wMDAwMkwxNS41NzI3IDIuNzY0MzhMMjYuNTcyNyAxNi43NjQ0TDI1LjAwMDEgMThaTTM2LjAwMDEgMThMMjUuMDAwMSA0LjAwMDAyTDI2LjU3MjcgMi43NjQzOEwzNy41NzI3IDE2Ljc2NDRMMzYuMDAwMSAxOFoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBObCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yIDJIMzhWMThIMlYyWiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgUmwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnN0cm9rZVdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNNiAxMEgzMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBGbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk02IDEwSDM0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIFdsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTYgMTBIMzQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VEYXNoYXJyYXk6ICIxMCwgOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgVmwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNNiAxMEgzNiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMi41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZURhc2hhcnJheTogIjIsIDQuNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgR2wgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMy4wMDA5OCAxNi4xNjkxQzYuMjg3NzQgMTMuOTc0NCAxOS42Mzk5IDIuODkwNSAyMi43MjE1IDMuMDAwODJDMjUuODA0MSAzLjExMTEzIDE5LjExNTggMTUuNTQ4OCAyMS40OTYyIDE2LjgzMDlDMjMuODc1NyAxOC4xMTMxIDM0LjQxNTUgMTEuNzE0OCAzNy4wMDAxIDEwLjY5MTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAibm9uZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlycm9yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBLbCA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0zIDE3QzYuNjgxNTggMTQuODc1MiAxNi4xMjk2IDkuMDk4NDkgMjIuMDY0OCA2LjU0OTIyQzI4IDMuOTk5OTUgMjIuMjg5NiAxMy4zMjA5IDI1IDE0QzI3LjcxMDQgMTQuNjc5MSAzNi4zNzU3IDkuNjQ3MSAzNi4zNzU3IDkuNjQ3MU02LjQwNzA2IDE1QzEzIDExLjE5MTggMjAuMDQ2OCAxLjUxMDQ1IDIzLjAyMzQgMy4wMDUyQzI2IDQuNDk5OTUgMjAuNDU3IDEyLjg2NTkgMjIuNzI4NSAxNi40MzI5QzI1IDIwIDM2LjM3NTcgMTMgMzYuMzc1NyAxMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3I6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIFVsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTMgMTUuNjQ2OEM2LjkzNjkyIDEzLjUzNzggMjIuNTU0NCAyLjgxNTI4IDI2LjYyMDYgMy4wMDI0MkMzMC42ODc3IDMuMTg5NTYgMjUuNjcwOCAxNS4zMzQ2IDI3LjQwMDkgMTYuNzcwNUMyOS4xMzA5IDE4LjIwNTUgMzUuNDAwMSAxMi40NzYyIDM3IDExLjYxNzdNMy45NzE0MyAxMC40OTE3QzYuNjExNTggOS4yNDU2MyAxNi4zNzA2IDIuNjE4ODYgMTkuODEwNCAzLjAxNzI0QzIzLjI1MjIgMy40MTQ3MiAyMi4wNzczIDEyLjIwMTMgMjQuNjE4MSAxMi44NzgzQzI3LjE1OTggMTMuNTUzNiAzMy4zMTc5IDguMDQwNjggMzUuMDU3MSA3LjA3MjQ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgWmwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTAgMTdMMTAgNUwzNSA1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgWWwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTAgMTdWMTVDMTAgOCAxMyA1IDIxIDVMMzMuNSA1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pcnJvcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgWGwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNNiAxMEgzNCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAibm9uZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgcWwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmZsaXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHZvaWQgMCAhPT0gbiAmJiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogciA/ICJ0cmFuc2xhdGUoNDAsIDApIHNjYWxlKC0xLCAxKSIgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0zNCAxMEg2TTM0IDEwTDI3IDVNMzQgMTBMMjcgMTUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yNy41IDVMMzQuNSAxMEwyNy41IDE1IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgUWwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmZsaXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHZvaWQgMCAhPT0gbiAmJiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByID8gInRyYW5zbGF0ZSg0MCwgMCkgc2NhbGUoLTEsIDEpIiA6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTMyIDEwTDYgMTAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoImNpcmNsZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByOiAiNCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAibWF0cml4KC0xIDAgMCAxIDMwIDEwKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICRsID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5mbGlwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB2b2lkIDAgIT09IG4gJiYgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCgiZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHIgPyAidHJhbnNsYXRlKDQwLCAwKSBzY2FsZSgtMSwgMSkiIDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMzQgMTBINS45OTk5Nk0zNCAxMEwzNCA1TTM0IDEwTDM0IDE1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgSmwgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDAgNjkuMDkyIEwgMCA1NS4wMyBBIDEyNC4yNCAxMjQuMjQgMCAwIDAgNC43MDYgNTcuMDIgUSA2LjgyNiA1Ny44NjMgOC43MDggNTguNSBBIDUzLjQ2NiA1My40NjYgMCAwIDAgMTIuMjMxIDU5LjU3MSBRIDE3LjIzNiA2MC44ODkgMjEuMzg3IDYwLjg4OSBBIDIwLjkwOSAyMC45MDkgMCAwIDAgMjQuMjY1IDYwLjcwNCBRIDI1LjcxOSA2MC41MDIgMjYuOTAzIDYwLjA3NyBBIDguNjQ5IDguNjQ5IDAgMCAwIDI5LjAyOCA1OC45ODUgUSAzMS42ODkgNTcuMDggMzEuNjg5IDUzLjMyMSBRIDMxLjY4OSA1MS4yMjEgMzAuNTE4IDQ5LjU4NSBBIDEwLjEyNiAxMC4xMjYgMCAwIDAgMjkuMjgyIDQ4LjE3NyBRIDI4LjM1MiA0Ny4yODcgMjcuMDc1IDQ2LjQzNiBBIDIzLjcxOSAyMy43MTkgMCAwIDAgMjUuNzUyIDQ1LjYyNyBRIDIzLjc3NCA0NC40OTIgMjAuMTc2IDQyLjczNSBBIDI1NC40NCAyNTQuNDQgMCAwIDAgMTcuODIyIDQxLjYwMiBRIDExLjUwMyAzOC42MzEgOC4yMzYgMzUuODg4IEEgMTkuNzQyIDE5Ljc0MiAwIDAgMSA4LjAwOCAzNS42OTQgQSAyMi4xOCAyMi4xOCAwIDAgMSAyLjc4MyAyOS4xMDIgUSAwLjgzIDI1LjM0MiAwLjgzIDIwLjMxMyBBIDIyLjQ3MSAyMi40NzEgMCAwIDEgMS43MzMgMTMuNzc4IEEgMTcuMjgzIDE3LjI4MyAwIDAgMSA3LjI1MSA1LjQyIEEgMjEuNDg2IDIxLjQ4NiAwIDAgMSAxNS4xNzcgMS4yNzIgUSAxOC4zNjEgMC4zMzggMjIuMTY2IDAuMDkgQSA0My41NzMgNDMuNTczIDAgMCAxIDI1IDAgQSA0Mi4zOTkgNDIuMzk5IDAgMCAxIDM0LjM0OSAxLjAxIEEgMzkuMDc1IDM5LjA3NSAwIDAgMSAzNS42MiAxLjMxOSBBIDY3LjQwNyA2Ny40MDcgMCAwIDEgNDIuMTA4IDMuMzgyIEEgODMuMzU3IDgzLjM1NyAwIDAgMSA0Ni4xOTEgNS4wMyBMIDQxLjMwOSAxNi43OTcgUSAzNS41OTYgMTQuNDUzIDMxLjg2IDEzLjUyNiBBIDMwLjc2MiAzMC43NjIgMCAwIDAgMjUuNDE3IDEyLjYxMiBBIDI4LjMzNyAyOC4zMzcgMCAwIDAgMjQuNTEyIDEyLjU5OCBBIDE0Ljg0NiAxNC44NDYgMCAwIDAgMjIuMDIyIDEyLjc5MyBRIDE5LjQ5OCAxMy4yMjQgMTcuOTIgMTQuNiBRIDE1LjYyNSAxNi42MDIgMTUuNjI1IDE5LjgyNCBRIDE1LjYyNSAyMS44MjYgMTYuNTUzIDIzLjMxNiBRIDE3LjQ4IDI0LjgwNSAxOS41MDcgMjYuMTk3IEEgMTguMzQzIDE4LjM0MyAwIDAgMCAyMC42NTkgMjYuOTEyIFEgMjIuNTk2IDI4LjAzNSAyNi41MTYgMjkuOTUzIEEgMjk5Ljk5IDI5OS45OSAwIDAgMCAyOS4xMDIgMzEuMjAxIFEgMzcuOTEgMzUuNDEyIDQxLjg0MSAzOS42NDIgQSAxNi41NTMgMTYuNTUzIDAgMCAxIDQyLjgyMiA0MC43OTYgQSAxNy42NzUgMTcuNjc1IDAgMCAxIDQ2LjMwMSA0OS4yMzMgQSAyMy41MTcgMjMuNTE3IDAgMCAxIDQ2LjUzMyA1Mi41ODggQSAyMS41ODEgMjEuNTgxIDAgMCAxIDQ1LjQ3MSA1OS41MTUgQSAxNy43MzMgMTcuNzMzIDAgMCAxIDM5LjU3NSA2Ny44MjMgUSAzMy43NDUgNzIuNDg2IDI0LjA5NCA3My4yNDMgQSA0OS42ODMgNDkuNjgzIDAgMCAxIDIwLjIxNSA3My4zODkgQSA1MS43MTIgNTEuNzEyIDAgMCAxIDkuNDQ4IDcyLjMxNSBBIDQwLjY3MiA0MC42NzIgMCAwIDEgMCA2OS4wOTIgWiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNzcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgZXMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDQ0LjA5MiA3MS4zODcgTCAzMC4yMjUgNzEuMzg3IEwgMTMuMDM3IDE1LjM4MSBMIDEyLjU5OCAxNS4zODEgQSAxNTA1LjA5MyAxNTA1LjA5MyAwIDAgMSAxMi45NTkgMjIuMzEzIFEgMTMuNDI2IDMxLjcxNSAxMy41MDggMzYuNCBBIDEwMi45OTEgMTAyLjk5MSAwIDAgMSAxMy41MjUgMzguMTg0IEwgMTMuNTI1IDcxLjM4NyBMIDAgNzEuMzg3IEwgMCAwIEwgMjAuNjA1IDAgTCAzNy41IDU0LjU5IEwgMzcuNzkzIDU0LjU5IEwgNTUuNzEzIDAgTCA3Ni4zMTggMCBMIDc2LjMxOCA3MS4zODcgTCA2Mi4yMDcgNzEuMzg3IEwgNjIuMjA3IDM3LjU5OCBRIDYyLjIwNyAzNS4yMDUgNjIuMjggMzIuMDggQSAxNjAuNzAzIDE2MC43MDMgMCAwIDEgNjIuMzI2IDMwLjU0NCBRIDYyLjQ1MiAyNi43NTQgNjIuODY2IDE3LjE2OCBBIDUzOTAuNTM2IDUzOTAuNTM2IDAgMCAxIDYyLjkzOSAxNS40NzkgTCA2Mi41IDE1LjQ3OSBMIDQ0LjA5MiA3MS4zODcgWiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDc3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNzUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgdHMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDQ0LjA5MiA3MS4zODcgTCAwIDcxLjM4NyBMIDAgMCBMIDE1LjEzNyAwIEwgMTUuMTM3IDU4Ljg4NyBMIDQ0LjA5MiA1OC44ODcgTCA0NC4wOTIgNzEuMzg3IFoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDc1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIG5zID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTSA0Mi41NzggMzUuNCBMIDY2LjY5OSA3MS4zODcgTCA0OS40MTQgNzEuMzg3IEwgMzIuODEzIDQ0LjM4NSBMIDE2LjIxMSA3MS4zODcgTCAwIDcxLjM4NyBMIDIzLjY4MiAzNC41NyBMIDEuNTE0IDAgTCAxOC4yMTMgMCBMIDMzLjU5NCAyNS42ODQgTCA0OC42ODIgMCBMIDY0Ljk5IDAgTCA0Mi41NzggMzUuNCBaIE0gMTE5Ljc3NSA3MS4zODcgTCA3NS42ODQgNzEuMzg3IEwgNzUuNjg0IDAgTCA5MC44MiAwIEwgOTAuODIgNTguODg3IEwgMTE5Ljc3NSA1OC44ODcgTCAxMTkuNzc1IDcxLjM4NyBaIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNzUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgcnMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjkwLjc0IDkzLjI0bDEyOC4wMiAxMjguMDItMjc3Ljk5IDI3Ny45OS0xMTQuMTQgMTIuNkMxMS4zNSA1MTMuNTQtMS41NiA1MDAuNjIuMTQgNDg1LjM0bDEyLjctMTE0LjIyIDI3Ny45LTI3Ny44OHptMjA3LjItMTkuMDZsLTYwLjExLTYwLjExYy0xOC43NS0xOC43NS00OS4xNi0xOC43NS02Ny45MSAwbC01Ni41NSA1Ni41NSAxMjguMDIgMTI4LjAyIDU2LjU1LTU2LjU1YzE4Ljc1LTE4Ljc2IDE4Ljc1LTQ5LjE2IDAtNjcuOTF6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDQ4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTEyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9zID0gdSgpLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubCh1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDYzLjgxOCA3MS42OCBMIDU0LjQ5MiA3MS42OCBMIDQ1Ljg5OCA0OS41NjEgTCAxNy41NzggNDkuNTYxIEwgOS4wODIgNzEuNjggTCAwIDcxLjY4IEwgMjcuODgxIDAgTCAzNS45ODYgMCBMIDYzLjgxOCA3MS42OCBaIE0gMjAuNjA1IDQxLjYwMiBMIDQzLjIxMyA0MS42MDIgTCAzNS4yMDUgMTkuOTcxIEwgMzEuNzg3IDkuMjc3IFEgMzAuMzIyIDE1LjEzNyAyOC43MTEgMTkuOTcxIEwgMjAuNjA1IDQxLjYwMiBaIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGVsKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNIDY4Ljk5NCA3MS42OCBMIDUyLjY4NiA3MS42OCBMIDQ3LjUxIDU0LjY4OCBMIDIxLjQ4NCA1NC42ODggTCAxNi4zMDkgNzEuNjggTCAwIDcxLjY4IEwgMjUuMTk1IDAgTCA0My43MDEgMCBMIDY4Ljk5NCA3MS42OCBaIE0gMjUuMjkzIDQxLjk5MiBMIDQzLjg5NiA0MS45OTIgQSAyNzU5MC40NjMgMjc1OTAuNDYzIDAgMCAxIDQyLjIgMzYuNTMyIFEgMzYuOTY1IDE5LjY3NiAzNS45MzcgMTYuMjczIEEgMTIwLjkzMiAxMjAuOTMyIDAgMCAxIDM1LjgxNSAxNS44NjkgQSAxMzEuNjUgMTMxLjY1IDAgMCAxIDM1LjM5NiAxNC40MzUgUSAzNC45NTEgMTIuODc5IDM0LjY3NSAxMS43NDEgQSAzNC44NjYgMzQuODY2IDAgMCAxIDM0LjUyMSAxMS4wODQgQSAxNDEuNzYyIDE0MS43NjIgMCAwIDEgMzMuNzA2IDE0LjA3NSBRIDMxLjQ4MiAyMS45NTcgMjUuMjkzIDQxLjk5MiBaIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDcwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNzgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgYXMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yNzguOSA1MTEuNWwtNjEtMTcuN2MtNi40LTEuOC0xMC04LjUtOC4yLTE0LjlMMzQ2LjIgOC43YzEuOC02LjQgOC41LTEwIDE0LjktOC4ybDYxIDE3LjdjNi40IDEuOCAxMCA4LjUgOC4yIDE0LjlMMjkzLjggNTAzLjNjLTEuOSA2LjQtOC41IDEwLjEtMTQuOSA4LjJ6bS0xMTQtMTEyLjJsNDMuNS00Ni40YzQuNi00LjkgNC4zLTEyLjctLjgtMTcuMkwxMTcgMjU2bDkwLjYtNzkuN2M1LjEtNC41IDUuNS0xMi4zLjgtMTcuMmwtNDMuNS00Ni40Yy00LjUtNC44LTEyLjEtNS4xLTE3LS41TDMuOCAyNDcuMmMtNS4xIDQuNy01LjEgMTIuOCAwIDE3LjVsMTQ0LjEgMTM1LjFjNC45IDQuNiAxMi41IDQuNCAxNy0uNXptMzI3LjIuNmwxNDQuMS0xMzUuMWM1LjEtNC43IDUuMS0xMi44IDAtMTcuNUw0OTIuMSAxMTIuMWMtNC44LTQuNS0xMi40LTQuMy0xNyAuNUw0MzEuNiAxNTljLTQuNiA0LjktNC4zIDEyLjcuOCAxNy4yTDUyMyAyNTZsLTkwLjYgNzkuN2MtNS4xIDQuNS01LjUgMTIuMy0uOCAxNy4ybDQzLjUgNDYuNGM0LjUgNC45IDEyLjEgNS4xIDE3IC42eiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA2NDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgaXMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTIuODMgMzUyaDI2Mi4zNEExMi44MiAxMi44MiAwIDAwMjg4IDMzOS4xN3YtMzguMzRBMTIuODIgMTIuODIgMCAwMDI3NS4xNyAyODhIMTIuODNBMTIuODIgMTIuODIgMCAwMDAgMzAwLjgzdjM4LjM0QTEyLjgyIDEyLjgyIDAgMDAxMi44MyAzNTJ6bTAtMjU2aDI2Mi4zNEExMi44MiAxMi44MiAwIDAwMjg4IDgzLjE3VjQ0LjgzQTEyLjgyIDEyLjgyIDAgMDAyNzUuMTcgMzJIMTIuODNBMTIuODIgMTIuODIgMCAwMDAgNDQuODN2MzguMzRBMTIuODIgMTIuODIgMCAwMDEyLjgzIDk2ek00MzIgMTYwSDE2YTE2IDE2IDAgMDAtMTYgMTZ2MzJhMTYgMTYgMCAwMDE2IDE2aDQxNmExNiAxNiAwIDAwMTYtMTZ2LTMyYTE2IDE2IDAgMDAtMTYtMTZ6bTAgMjU2SDE2YTE2IDE2IDAgMDAtMTYgMTZ2MzJhMTYgMTYgMCAwMDE2IDE2aDQxNmExNiAxNiAwIDAwMTYtMTZ2LTMyYTE2IDE2IDAgMDAtMTYtMTZ6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBlbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgbHMgPSB1KCkubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5sKHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNNDMyIDE2MEgxNmExNiAxNiAwIDAwLTE2IDE2djMyYTE2IDE2IDAgMDAxNiAxNmg0MTZhMTYgMTYgMCAwMDE2LTE2di0zMmExNiAxNiAwIDAwLTE2LTE2em0wIDI1NkgxNmExNiAxNiAwIDAwLTE2IDE2djMyYTE2IDE2IDAgMDAxNiAxNmg0MTZhMTYgMTYgMCAwMDE2LTE2di0zMmExNiAxNiAwIDAwLTE2LTE2ek0xMDguMSA5NmgyMzEuODFBMTIuMDkgMTIuMDkgMCAwMDM1MiA4My45VjQ0LjA5QTEyLjA5IDEyLjA5IDAgMDAzMzkuOTEgMzJIMTA4LjFBMTIuMDkgMTIuMDkgMCAwMDk2IDQ0LjA5VjgzLjlBMTIuMSAxMi4xIDAgMDAxMDguMSA5NnptMjMxLjgxIDI1NkExMi4wOSAxMi4wOSAwIDAwMzUyIDMzOS45di0zOS44MUExMi4wOSAxMi4wOSAwIDAwMzM5LjkxIDI4OEgxMDguMUExMi4wOSAxMi4wOSAwIDAwOTYgMzAwLjA5djM5LjgxYTEyLjEgMTIuMSAwIDAwMTIuMSAxMi4xeiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0OCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUxMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBzcyA9IHUoKS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGhlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmwodSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xNiAyMjRoNDE2YTE2IDE2IDAgMDAxNi0xNnYtMzJhMTYgMTYgMCAwMC0xNi0xNkgxNmExNiAxNiAwIDAwLTE2IDE2djMyYTE2IDE2IDAgMDAxNiAxNnptNDE2IDE5MkgxNmExNiAxNiAwIDAwLTE2IDE2djMyYTE2IDE2IDAgMDAxNiAxNmg0MTZhMTYgMTYgMCAwMDE2LTE2di0zMmExNiAxNiAwIDAwLTE2LTE2em0zLjE3LTM4NEgxNzIuODNBMTIuODIgMTIuODIgMCAwMDE2MCA0NC44M3YzOC4zNEExMi44MiAxMi44MiAwIDAwMTcyLjgzIDk2aDI2Mi4zNEExMi44MiAxMi44MiAwIDAwNDQ4IDgzLjE3VjQ0LjgzQTEyLjgyIDEyLjgyIDAgMDA0MzUuMTcgMzJ6bTAgMjU2SDE3Mi44M0ExMi44MiAxMi44MiAwIDAwMTYwIDMwMC44M3YzOC4zNEExMi44MiAxMi44MiAwIDAwMTcyLjgzIDM1MmgyNjIuMzRBMTIuODIgMTIuODIgMCAwMDQ0OCAzMzkuMTd2LTM4LjM0QTEyLjgyIDEyLjgyIDAgMDA0MzUuMTcgMjg4eiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZWwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDQ4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTEyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNzID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHVzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNzID0gY3MuY29uY2F0KGUpLCBlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRzKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IGRzKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IGRzKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGhzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5lZGl0aW5nR3JvdXBJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gaW8oX2kodCksIGUuZWRpdGluZ0dyb3VwSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmxlbmd0aCkgcmV0dXJuIHBzKHBzKHt9LCBlKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiAobiA9IHt9LCBuW3JbMF0uaWRdID0gITAsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZzID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRlbGV0ZVNlbGVjdGVkRWxlbWVudHMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LmVkaXRpbmdMaW5lYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5lZGl0aW5nTGluZWFyRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLmVsZW1lbnRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLmFjdGl2ZVBvaW50SW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbi5zdGFydEJpbmRpbmdFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4uZW5kQmluZGluZ0VsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gemEuZ2V0RWxlbWVudChyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG8gfHwgLTEgPT09IG8gfHwgbC5wb2ludHMubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBlLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkICE9PSBsLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBwcyhwcyh7fSwgaHModCwgcykpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nTGluZWFyRWxlbWVudDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QmluZGluZ0VsZW1lbnQ6IDAgPT09IG8gPyBudWxsIDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEJpbmRpbmdFbGVtZW50OiBvID09PSBsLnBvaW50cy5sZW5ndGggLSAxID8gbnVsbCA6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHphLm1vdmVQb2ludChsLCBvLCAiZGVsZXRlIiksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHBzKHBzKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nTGluZWFyRWxlbWVudDogcHMocHMocHMoe30sIHQuZWRpdGluZ0xpbmVhckVsZW1lbnQpLCBjKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUG9pbnRJbmRleDogbyA+IDAgPyBvIC0gMSA6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBlLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zZWxlY3RlZEVsZW1lbnRJZHNbZS5pZF0gPyBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogcHMocHMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB1LmFwcFN0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1aShkLCBlLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnNlbGVjdGVkRWxlbWVudElkc1tuXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBwcyhwcyh7fSwgcCA9IGhzKHAsIGQpKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiAic2VsZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRWxlbWVudDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiBIaShfaShlKSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5kZWxldGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmtleSA9PT0gUXQgfHwgZS5rZXkgPT09IGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogc2wsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJsYWJlbHMuZGVsZXRlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygibGFiZWxzLmRlbGV0ZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IEhpKF9pKHQpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBtcyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGdzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCByID0gW10sIG8gPSBudWxsLCBhID0gLTE7ICsrYSA8IGUubGVuZ3RoOykgdC5zZWxlY3RlZEVsZW1lbnRJZHNbZVthXS5pZF0gPyAoci5sZW5ndGggJiYgKG4gPSBuLmNvbmNhdChyKSwgciA9IFtdKSwgbi5wdXNoKGEpLCBvID0gYSArIDEpIDogZVthXS5pc0RlbGV0ZWQgJiYgbyA9PT0gYSA/IChvID0gYSArIDEsIHIucHVzaChhKSkgOiByID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB2cyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtuXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXQuaXNEZWxldGVkICYmICghZS5lZGl0aW5nR3JvdXBJZCB8fCB0Lmdyb3VwSWRzLmluY2x1ZGVzKGUuZWRpdGluZ0dyb3VwSWQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9ICJsZWZ0IiA9PT0gciA/IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gZS5sZW5ndGggLSAxKSwgbiA8IDAgJiYgKG4gPSBlLmxlbmd0aCArIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gKG4gPSBNYXRoLm1pbihlLmxlbmd0aCAtIDEsIE1hdGgubWF4KG4sIDApKSkgKyAxOyAtLXIgPiAtMTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodChlW3JdLCByLCBlKSkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odCwgYSwgTWF0aC5tYXgoMCwgbiAtIDEpKSA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gMCksIG4gPCAwICYmIChuID0gZS5sZW5ndGggKyBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IChuID0gTWF0aC5taW4oZS5sZW5ndGgsIE1hdGgubWF4KG4sIDApKSkgLSAxOyArK3IgPCBlLmxlbmd0aDspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodChlW3JdLCByLCBlKSkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odCwgYSwgbiArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0W2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsKSByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5lZGl0aW5nR3JvdXBJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobnVsbCA9PSBvID8gdm9pZCAwIDogby5ncm91cElkcy5qb2luKCIiKSkgPT09IChudWxsID09IGwgPyB2b2lkIDAgOiBsLmdyb3VwSWRzLmpvaW4oIiIpKSkgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbCB8fCAhbC5ncm91cElkcy5pbmNsdWRlcyhlLmVkaXRpbmdHcm91cElkKSkgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWwuZ3JvdXBJZHMubGVuZ3RoKSByZXR1cm4gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZS5lZGl0aW5nR3JvdXBJZCA/IGwuZ3JvdXBJZHNbbC5ncm91cElkcy5pbmRleE9mKGUuZWRpdGluZ0dyb3VwSWQpIC0gMV0gOiBsLmdyb3VwSWRzW2wuZ3JvdXBJZHMubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlvKHQsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMubGVuZ3RoID8gImxlZnQiID09PSByID8gdC5pbmRleE9mKGNbMF0pIDogdC5pbmRleE9mKGNbYy5sZW5ndGggLSAxXSkgOiBpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGJzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQucmVkdWNlKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0W3IuaWRdID0gciwgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB5cyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBvLCBhID0gZ3ModCwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGJzKHQsIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAobyA9IDAsIChyID0gYSkucmVkdWNlKChmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID4gMCAmJiByW24gLSAxXSAhPT0gdCAtIDEgJiYgKG8gPSArK28pLCAoZVtvXSB8fCAoZVtvXSA9IFtdKSkucHVzaCh0KSwgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJyaWdodCIgPT09IG4gJiYgKGwgPSBsLnJldmVyc2UoKSksIGwuZm9yRWFjaCgoZnVuY3Rpb24ociwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gclswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHJbci5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9ICJsZWZ0IiA9PT0gbiA/IGEgOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdnMoZSwgdCwgbCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0xICE9PSBzICYmIGwgIT09IHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAibGVmdCIgPT09IG4gPyB0LnNsaWNlKDAsIHMpIDogdC5zbGljZSgwLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0LnNsaWNlKGEsIGkgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAibGVmdCIgPT09IG4gPyB0LnNsaWNlKHMsIGEpIDogdC5zbGljZShpICsgMSwgcyArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9ICJsZWZ0IiA9PT0gbiA/IHQuc2xpY2UoaSArIDEpIDogdC5zbGljZShzICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBtcygibGVmdCIgPT09IG4gPyBtcyhtcyhtcyhbXSwgYyksIHUpLCBkKSA6IG1zKG1zKG1zKFtdLCBjKSwgZCksIHUpLCBwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaVtlLmlkXSA/IFVyKGUpIDogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdzID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8sIGEgPSBncyhlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYnMoZSwgYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJsZWZ0IiA9PT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LmVkaXRpbmdHcm91cElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHMgPSBpbyhlLCB0LmVkaXRpbmdHcm91cElkKSkubGVuZ3RoKSByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuaW5kZXhPZihzWzBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSByID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYVthLmxlbmd0aCAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LmVkaXRpbmdHcm91cElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzID0gaW8oZSwgdC5lZGl0aW5nR3JvdXBJZCkpLmxlbmd0aCkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmluZGV4T2Yoc1tzLmxlbmd0aCAtIDFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBvID0gZS5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gcjsgYyA8IG8gKyAxOyBjKyspIGEuaW5jbHVkZXMoYykgfHwgbC5wdXNoKGVbY10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBPYmplY3QudmFsdWVzKGkpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGUuc2xpY2UoMCwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGUuc2xpY2UobyArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zKCJsZWZ0IiA9PT0gbiA/IG1zKG1zKG1zKFtdLCBkKSwgdSksIGwpIDogbXMobXMobXMoW10sIGQpLCBsKSwgdSksIHApCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHhzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlzKHQsIGUsICJsZWZ0IikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRXMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geXModCwgZSwgInJpZ2h0IikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga3MgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3MoZSwgdCwgImxlZnQiKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBTcyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cyhlLCB0LCAicmlnaHQiKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBDcyA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJzZW5kQmFja3dhcmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB4cyhlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5zZW5kQmFja3dhcmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5UHJpb3JpdHk6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW0p0XSAmJiAhZS5zaGlmdEtleSAmJiBlLmNvZGUgPT09IEx0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ6SW5kZXhCdXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0KG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLnNlbmRCYWNrd2FyZCIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkN0cmxPckNtZCtbIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQod2wsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIE9zID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImJyaW5nRm9yd2FyZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IEVzKGUsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbUxhYmVsOiAibGFiZWxzLmJyaW5nRm9yd2FyZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQcmlvcml0eTogNDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbSnRdICYmICFlLnNoaWZ0S2V5ICYmIGUuY29kZSA9PT0gVHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInpJbmRleEJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQobnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChPKCJsYWJlbHMuYnJpbmdGb3J3YXJkIiksICIg4oCUICIpLmNvbmNhdChObigiQ3RybE9yQ21kK10iKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCh5bCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgTXMgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAic2VuZFRvQmFjayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGtzKGUsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbUxhYmVsOiAibGFiZWxzLnNlbmRUb0JhY2siLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrdCA/IGVbSnRdICYmIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gTHQgOiBlW0p0XSAmJiBlLnNoaWZ0S2V5ICYmIGUuY29kZSA9PT0gTHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInpJbmRleEJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQobnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChPKCJsYWJlbHMuc2VuZFRvQmFjayIpLCAiIOKAlCAiKS5jb25jYXQoTm4oa3QgPyAiQ3RybE9yQ21kK0FsdCtbIiA6ICJDdHJsT3JDbWQrU2hpZnQrWyIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KEVsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBQcyA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJicmluZ1RvRnJvbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBTcyhlLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5icmluZ1RvRnJvbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrdCA/IGVbSnRdICYmIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gVHQgOiBlW0p0XSAmJiBlLnNoaWZ0S2V5ICYmIGUuY29kZSA9PT0gVHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInpJbmRleEJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0KG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLmJyaW5nVG9Gcm9udCIpLCAiIOKAlCAiKS5jb25jYXQoTm4oa3QgPyAiQ3RybE9yQ21kK0FsdCtdIiA6ICJDdHJsT3JDbWQrU2hpZnQrXSIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KHhsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJcyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVHMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBJcyhPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBJcyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBMcyA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJzZWxlY3RBbGwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdC5lZGl0aW5nTGluZWFyRWxlbWVudCAmJiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBvbyhUcyhUcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nR3JvdXBJZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pc0RlbGV0ZWQgfHwgKGVbdC5pZF0gPSAhMCksIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9pKGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbUxhYmVsOiAibGFiZWxzLnNlbGVjdEFsbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbSnRdICYmIGUua2V5ID09PSBsbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgQXMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfcyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRHMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBfcyhPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBfcyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBqcyA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJkdXBsaWNhdGVTZWxlY3Rpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LmVkaXRpbmdMaW5lYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5lZGl0aW5nTGluZWFyRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLmFjdGl2ZVBvaW50SW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5lbGVtZW50SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gemEuZ2V0RWxlbWVudChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhIHx8IG51bGwgPT09IHIpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhLnBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGlbciArIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR3IoYSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBBcyhBcyhBcyhbXSwgaS5zbGljZSgwLCByICsgMSkpLCBbcyA/IFsobFswXSArIHNbMF0pIC8gMiwgKGxbMV0gKyBzWzFdKSAvIDJdIDogW2xbMF0gKyAzMCwgbFsxXSArIDMwXV0pLCBpLnNsaWNlKHIgKyAxKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBEcyhEcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0xpbmVhckVsZW1lbnQ6IERzKERzKHt9LCB0LmVkaXRpbmdMaW5lYXJFbGVtZW50KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUG9pbnRJbmRleDogciArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRHMoRHMoe30sIHpzKGUsIHQpKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5kdXBsaWNhdGVTZWxlY3Rpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW0p0XSAmJiBlLmtleSA9PT0gc24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBEbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChPKCJsYWJlbHMuZHVwbGljYXRlU2VsZWN0aW9uIiksICIg4oCUICIpLmNvbmNhdChObigiQ3RybE9yQ21kK0QiKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygibGFiZWxzLmR1cGxpY2F0ZVNlbGVjdGlvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IEhpKF9pKHQpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB6cyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBuZXcgTWFwLCByID0gW10sIG8gPSBbXSwgYSA9IG5ldyBNYXAsIGkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYm8odC5lZGl0aW5nR3JvdXBJZCwgbiwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgZC5rIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUueSArIGQuayAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNldChlLmlkLCBpLmlkKSwgby5wdXNoKGUpLCByLnB1c2goaSksIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBsID0gW10sIHMgPSAwOyBzIDwgZS5sZW5ndGg7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlW3NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnNlbGVjdGVkRWxlbWVudElkc1tjLmlkXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5ncm91cElkcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gbm8odCwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gaW8oZSwgdSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoLmFwcGx5KGwsIEFzKEFzKFtdLCBwKSwgcC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpKSwgcyArPSBwLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChjLCBpKGMpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBsLnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcysrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2kobCwgbywgYSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogb28oRHMoRHMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiByLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbdC5pZF0gPSAhMCwgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwge30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9pKGwpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBCcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5vcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmdyb3VwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnV0dG9uTGlzdCBidXR0b25MaXN0SWNvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBuID09PSBlLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAicmFkaW8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihlLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBuID09PSBlLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuaWNvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSHMgPSAobig0MzAxKSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLm9uQ2xvc2VSZXF1ZXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmZpdEluVmlld3BvcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZvaWQgMCAhPT0gYSAmJiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAoMCwgYy51c2VSZWYpKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLnVzZUxheW91dEVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICYmIGwuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGwuY3VycmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHQueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiArIG8gPiBzICYmIChlLnN0eWxlLmxlZnQgPSAiIi5jb25jYXQocyAtIG8sICJweCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKyBhID4gYyAmJiAoZS5zdHlsZS50b3AgPSAiIi5jb25jYXQoYyAtIGEsICJweCIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbaV0pLCAoMCwgYy51c2VFZmZlY3QpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gKHQgPSBsLmN1cnJlbnQpICYmIHZvaWQgMCAhPT0gdCAmJiB0LmNvbnRhaW5zKGUudGFyZ2V0KSB8fCAoMCwgRXQudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyhlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIGUsICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIGUsICExKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbb10pLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInBvcG92ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgTnMgPSAobig0MjIwKSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAobmV3IE9wdGlvbikuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jb2xvciA9IGUsICEhdC5jb2xvcgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUnMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJxIiwgInciLCAiZSIsICJyIiwgInQiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiYSIsICJzIiwgImQiLCAiZiIsICJnIl0KICAgICAgICAgICAgICAgICAgICAgICAgXS5mbGF0KCksCiAgICAgICAgICAgICAgICAgICAgICAgIEZzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNvbG9ycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5jb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5vbkNoYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vbkNsb3NlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLnNob3dJbnB1dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdm9pZCAwID09PSBpIHx8IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUudHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdSgpLnVzZVJlZigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB1KCkudXNlUmVmKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHUoKS51c2VSZWYoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gdSgpLnVzZVJlZigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSgpLnVzZUVmZmVjdCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5jdXJyZW50ID8gZC5jdXJyZW50LmZvY3VzKCkgOiBoLmN1cnJlbnQgPyBoLmN1cnJlbnQuZm9jdXMoKSA6IHAuY3VycmVudCAmJiBwLmN1cnJlbnQuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlciBjb2xvci1waWNrZXItdHlwZS0iLmNvbmNhdChzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAiZGlhbG9nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1tb2RhbCI6ICJ0cnVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5jb2xvclBpY2tlciIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IGFuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID09PSBjLmN1cnJlbnQpIG51bGwgPT09ICh0ID0gaC5jdXJyZW50KSB8fCB2b2lkIDAgPT09IHQgfHwgdC5mb2N1cygpLCBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gaC5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKHIgPSBjLmN1cnJlbnQpIHx8IHZvaWQgMCA9PT0gciB8fCByLmZvY3VzKCksIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHhuKGUua2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IFMoKS5ydGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09ICh1ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChwLmN1cnJlbnQuY2hpbGRyZW4sIG4pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gcC5jdXJyZW50LmNoaWxkcmVuLmxlbmd0aCAtIChsID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5rZXkgPT09IChhID8gWXQgOiBYdCkgPyAodSArIDEpICUgaSA6IGUua2V5ID09PSAoYSA/IFh0IDogWXQpID8gKGkgKyB1IC0gMSkgJSBpIDogZS5rZXkgPT09IFp0ID8gKHUgKyA1KSAlIGkgOiBlLmtleSA9PT0gcXQgPyAoaSArIHUgLSA1KSAlIGkgOiB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuY3VycmVudC5jaGlsZHJlbltzXS5mb2N1cygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChScy5pbmNsdWRlcyhlLmtleS50b0xvd2VyQ2FzZSgpKSAmJiAhSW4oZS50YXJnZXQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IFJzLmluZGV4T2YoZS5rZXkudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmN1cnJlbnQuY2hpbGRyZW5bdV0uZm9jdXMoKSwgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBlLmtleSAhPT0gbm4gJiYgZS5rZXkgIT09IHRuIHx8IChlLnByZXZlbnREZWZhdWx0KCksIG8oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubmF0aXZlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci10cmlhbmdsZSBjb2xvci1waWNrZXItdHJpYW5nbGUtc2hhZG93IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiY29sb3ItcGlja2VyLXRyaWFuZ2xlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiY29sb3ItcGlja2VyLWNvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmIChwLmN1cnJlbnQgPSBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQubWFwKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci1zd2F0Y2giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmN1cnJlbnRUYXJnZXQuZm9jdXMoKSwgcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KGUsICIg4oCUICIpLmNvbmNhdChSc1t0XS50b1VwcGVyQ2FzZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1rZXlzaG9ydGN1dHMiOiBSc1t0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmIDAgPT09IHQgJiYgKGMuY3VycmVudCA9IHIpLCByICYmIGUgPT09IG4gJiYgKGQuY3VycmVudCA9IHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgInRyYW5zcGFyZW50IiA9PT0gZSA/IHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci10cmFuc3BhcmVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHZvaWQgMCwgdSgpLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci1rZXliaW5kaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFJzW3RdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbCAmJiB1KCkuY3JlYXRlRWxlbWVudChXcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBXcyA9IHUoKS5mb3J3YXJkUmVmKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuY29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUub25DaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHUoKS51c2VTdGF0ZShuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdSgpLnVzZVJlZihudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUoKS51c2VFZmZlY3QoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbl0pLCB1KCkudXNlSW1wZXJhdGl2ZUhhbmRsZSh0LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuY3VycmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB1KCkudXNlQ2FsbGJhY2soKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAidHJhbnNwYXJlbnQiID09PSBlIHx8IE5zKGUpID8gZSA6IE5zKCIjIi5jb25jYXQoZSkpID8gIiMiLmNvbmNhdChlKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIHIobiksIGwodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbcl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjb2xvci1pbnB1dC1jb250YWluZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci1oYXNoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgIiMiKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2s6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci1pbnB1dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjKGUudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IChpIHx8ICIiKS5yZXBsYWNlKC9eIy8sICIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbChuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBWcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB1KCkudXNlU3RhdGUoITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB1KCkudXNlUmVmKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbG9yLXBpY2tlci1jb250cm9sLWNvbnRhaW5lciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiY29sb3ItcGlja2VyLWxhYmVsLXN3YXRjaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBuID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLS1zd2F0Y2gtY29sb3IiOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwoIWkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChXcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5TdXNwZW5zZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaSA/IHUoKS5jcmVhdGVFbGVtZW50KEhzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0ICE9PSBzLmN1cnJlbnQgJiYgbCghMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChGcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yczogeHRbdF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IG4gfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwoITEpLCBudWxsID09PSAoZSA9IHMuY3VycmVudCkgfHwgdm9pZCAwID09PSBlIHx8IGUuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0lucHV0OiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBudWxsKSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gR3MoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoR3MgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcikgJiYgKGVbcl0gPSBuW3JdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSkuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuKDcxMTcpOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBLcyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5vcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUub25DbG9zZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB1KCkudXNlUmVmKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdSgpLnVzZVJlZigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHUoKS51c2VSZWYobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHUoKS51c2VFZmZlY3QoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5jdXJyZW50ID8gbC5jdXJyZW50LmZvY3VzKCkgOiBzLmN1cnJlbnQgJiYgcy5jdXJyZW50LmZvY3VzKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJwaWNrZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogImRpYWxvZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1tb2RhbCI6ICJ0cnVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5maW5kKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmtleUJpbmRpbmcgPT09IGUua2V5LnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgIW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gYW4pIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5jdXJyZW50ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGEoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHhuKGUua2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gUygpLnJ0bDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0xICE9PSAodSA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwocy5jdXJyZW50LmNoaWxkcmVuLCByKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBvID8gWXQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFh0OiBjYXNlIFp0OiBjID0gKHUgKyAxKSAlIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgbyA/IFh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZdDogY2FzZSBxdDogYyA9IChpICsgdSAtIDEpICUgaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jdXJyZW50LmNoaWxkcmVuW2NdLmZvY3VzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZS5rZXkgIT09IG5uICYmIGUua2V5ICE9PSB0biB8fCAoZS5wcmV2ZW50RGVmYXVsdCgpLCBhKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHQuaW5kZXhPZihuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jdXJyZW50LmNoaWxkcmVuW3VdLmZvY3VzKCksIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCBlLnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJwaWNrZXItY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHMKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInBpY2tlci1vcHRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jdXJyZW50VGFyZ2V0LmZvY3VzKCksIG8oZS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoZS50ZXh0LCAiIOKAlCAiKS5jb25jYXQoZS5rZXlCaW5kaW5nLnRvVXBwZXJDYXNlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogZS50ZXh0IHx8ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1rZXlzaG9ydGN1dHMiOiBlLmtleUJpbmRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgMCA9PT0gdCAmJiAoaS5jdXJyZW50ID0gciksIHIgJiYgZS52YWx1ZSA9PT0gbiAmJiAobC5jdXJyZW50ID0gcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKGUudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5pY29uLCB1KCkuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJwaWNrZXIta2V5YmluZGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUua2V5QmluZGluZykpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBVcyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuID0gZS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUub3B0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuZ3JvdXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdm9pZCAwID09PSBpID8gIiIgOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHUoKS51c2VTdGF0ZSghMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHUoKS51c2VSZWYobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gUygpLnJ0bDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInBpY2tlci1jb250YWluZXIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjID8gImFjdGl2ZSIgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkKCFjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogcAogICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsID09PSAodCA9IG8uZmluZCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudmFsdWUgPT09IG4KICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lmljb24pLCB1KCkuY3JlYXRlRWxlbWVudCh1KCkuU3VzcGVuc2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrOiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9LCBjID8gdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudChIcywgR3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50YXJnZXQgIT09IHAuY3VycmVudCAmJiBkKCExKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBoID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDUuNQogICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLTUuNQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoS3MsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKCExKSwgbnVsbCA9PT0gKGUgPSBwLmN1cnJlbnQpIHx8IHZvaWQgMCA9PT0gZSB8fCBlLmZvY3VzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAicGlja2VyLXRyaWFuZ2xlIgogICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBudWxsKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFpzKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZcyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IFpzKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IFpzKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIFhzID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2VsZWN0ZWRFbGVtZW50SWRzW2UuaWRdIHx8IGUuaWQgPT09IChudWxsID09PSAociA9IHQuZWRpdGluZ0VsZW1lbnQpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuaWQpID8gbihlKSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBxcyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLCBhLCBpID0gdC5lZGl0aW5nRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gX2koZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKG8gPSBudWxsICE9PSAoYSA9IGkgJiYgbihpKSkgJiYgdm9pZCAwICE9PSBhID8gYSA6IEhpKGwsIHQpID8gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gQXJyYXkuZnJvbShuZXcgU2V0KE5pKGUsIHQpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxID09PSByLmxlbmd0aCA/IHJbMF0gOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGwsIHQsIG4pIDogcikgJiYgdm9pZCAwICE9PSBvID8gbyA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUXMgPSAodXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZVN0cm9rZUNvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFlzKFlzKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlQ29sb3I6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJoMyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtaGlkZGVuIjogInRydWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygibGFiZWxzLnN0cm9rZSIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoVnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVsZW1lbnRTdHJva2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLnN0cm9rZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcXModCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0cm9rZUNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuLmN1cnJlbnRJdGVtU3Ryb2tlQ29sb3IpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZUJhY2tncm91bmRDb2xvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFhzKGUsIHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogWXMoWXMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1CYWNrZ3JvdW5kQ29sb3I6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJoMyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtaGlkZGVuIjogInRydWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygibGFiZWxzLmJhY2tncm91bmQiKSksIHUoKS5jcmVhdGVFbGVtZW50KFZzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlbGVtZW50QmFja2dyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuYmFja2dyb3VuZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcXModCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmJhY2tncm91bmRDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbi5jdXJyZW50SXRlbUJhY2tncm91bmRDb2xvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlRmlsbFN0eWxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBZcyhZcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUZpbGxTdHlsZTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCBPKCJsYWJlbHMuZmlsbCIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiaGFjaHVyZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuaGFjaHVyZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoQmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJjcm9zcy1oYXRjaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuY3Jvc3NIYXRjaCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoSGwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJzb2xpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuc29saWQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KE5sLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cDogImZpbGwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcXModCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZpbGxTdHlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbi5jdXJyZW50SXRlbUZpbGxTdHlsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJjaGFuZ2VTdHJva2VXaWR0aCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFhzKGUsIHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBZcyhZcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVN0cm9rZVdpZHRoOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIsIG51bGwsIE8oImxhYmVscy5zdHJva2VXaWR0aCIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJzdHJva2Utd2lkdGgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMudGhpbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoUmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuYm9sZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoUmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuZXh0cmFCb2xkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChSbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBxcyh0LCBuLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3Ryb2tlV2lkdGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4uY3VycmVudEl0ZW1TdHJva2VXaWR0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlU2xvcHBpbmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFhzKGUsIHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQ6IFJyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBZcyhZcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbVJvdWdobmVzczogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCBPKCJsYWJlbHMuc2xvcHBpbmVzcyIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJzbG9wcGluZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmFyY2hpdGVjdCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoR2wsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuYXJ0aXN0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChLbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5jYXJ0b29uaXN0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChVbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHFzKHQsIG4sIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yb3VnaG5lc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4uY3VycmVudEl0ZW1Sb3VnaG5lc3MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZVN0cm9rZVN0eWxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFlzKFlzKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU3R5bGU6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgibGVnZW5kIiwgbnVsbCwgTygibGFiZWxzLnN0cm9rZVN0eWxlIikpLCB1KCkuY3JlYXRlRWxlbWVudChCcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cDogInN0cm9rZVN0eWxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAic29saWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLnN0cm9rZVN0eWxlX3NvbGlkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChGbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImRhc2hlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuc3Ryb2tlU3R5bGVfZGFzaGVkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChXbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImRvdHRlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuc3Ryb2tlU3R5bGVfZG90dGVkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChWbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHFzKHQsIG4sIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdHJva2VTdHlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbi5jdXJyZW50SXRlbVN0cm9rZVN0eWxlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJjaGFuZ2VPcGFjaXR5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogWXMoWXMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1PcGFjaXR5OiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjb250cm9sLWxhYmVsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oImxhYmVscy5vcGFjaXR5IiksIHUoKS5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJhbmdlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogIjEwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6ICIxMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbygrZS50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uV2hlZWw6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICtlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGVsdGFZIDwgMCAmJiB0IDwgMTAwID8gbyh0ICsgMTApIDogZS5kZWx0YVkgPiAwICYmIHQgPiAwICYmIG8odCAtIDEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbCAhPT0gKHQgPSBxcyhuLCByLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUub3BhY2l0eQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgci5jdXJyZW50SXRlbU9wYWNpdHkpKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlRm9udFNpemUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBYcyhlLCB0LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1pKHQpLCB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBZcyhZcyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUZvbnRTaXplOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIsIG51bGwsIE8oImxhYmVscy5mb250U2l6ZSIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJmb250LXNpemUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDE2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLnNtYWxsIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChKbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMubWVkaXVtIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChlcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMjgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMubGFyZ2UiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KHRzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAzNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy52ZXJ5TGFyZ2UiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KG5zLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcXModCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWZShlKSAmJiBlLmZvbnRTaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuLmN1cnJlbnRJdGVtRm9udFNpemUgfHwgZC5uNSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlRm9udEZhbWlseSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFhzKGUsIHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmUoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEtyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNaSh0KSwgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogWXMoWXMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1Gb250RmFtaWx5OiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5oYW5kRHJhd24iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KHJzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLm5vcm1hbCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQob3MsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuY29kZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoYXMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCBPKCJsYWJlbHMuZm9udEZhbWlseSIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJmb250LWZhbWlseSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBxcyh0LCBuLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZlKGUpICYmIGUuZm9udEZhbWlseQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbi5jdXJyZW50SXRlbUZvbnRGYW1pbHkgfHwgZC5yayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlVGV4dEFsaWduIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogWHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWkodCksIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFlzKFlzKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtVGV4dEFsaWduOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIsIG51bGwsIE8oImxhYmVscy50ZXh0QWxpZ24iKSksIHUoKS5jcmVhdGVFbGVtZW50KEJzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiAidGV4dC1hbGlnbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImxlZnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmxlZnQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KGlzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5jZW50ZXIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KGxzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAicmlnaHQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLnJpZ2h0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChzcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHFzKHQsIG4sIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmUoZSkgJiYgZS50ZXh0QWxpZ24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4uY3VycmVudEl0ZW1UZXh0QWxpZ24pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZVNoYXJwbmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBSaShfaShlKSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLmxlbmd0aCA/IHIuZXZlcnkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhVWUoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogIVplKHQuZWxlbWVudFR5cGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gci5sZW5ndGggPyByLmV2ZXJ5KFVlKSA6IFplKHQuZWxlbWVudFR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBYcyhlLCB0LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTaGFycG5lc3M6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFlzKFlzKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtU3Ryb2tlU2hhcnBuZXNzOiBvID8gbiA6IHQuY3VycmVudEl0ZW1TdHJva2VTaGFycG5lc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzczogYSA/IG4gOiB0LmN1cnJlbnRJdGVtTGluZWFyU3Ryb2tlU2hhcnBuZXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIsIG51bGwsIE8oImxhYmVscy5lZGdlcyIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJlZGdlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInNoYXJwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5zaGFycCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoWmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMucm91bmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KFlsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcXModCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0cm9rZVNoYXJwbmVzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgVWkobi5lbGVtZW50VHlwZSkgJiYgKFplKG4uZWxlbWVudFR5cGUpID8gbi5jdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzcyA6IG4uY3VycmVudEl0ZW1TdHJva2VTaGFycG5lc3MpIHx8IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZUFycm93aGVhZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFhzKGUsIHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVWUoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4ucG9zaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLnR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzdGFydCIgPT09IHQpIHJldHVybiBLcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJlbmQiID09PSB0KSByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBcnJvd2hlYWQ6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogWXMoWXMoe30sIHQpLCB7fSwgKHIgPSB7fSwgclsic3RhcnQiID09PSBuLnBvc2l0aW9uID8gImN1cnJlbnRJdGVtU3RhcnRBcnJvd2hlYWQiIDogImN1cnJlbnRJdGVtRW5kQXJyb3doZWFkIl0gPSBuLnR5cGUsIHIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBTKCkucnRsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgibGVnZW5kIiwgbnVsbCwgTygibGFiZWxzLmFycm93aGVhZHMiKSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImljb25TZWxlY3RMaXN0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KFVzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiYXJyb3doZWFkX3N0YXJ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmFycm93aGVhZF9ub25lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChYbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmc6ICJxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImFycm93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5hcnJvd2hlYWRfYXJyb3ciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KHFsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcDogIW8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5QmluZGluZzogInciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiYmFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5hcnJvd2hlYWRfYmFyIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudCgkbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXA6ICFvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmc6ICJlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImRvdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBPKCJsYWJlbHMuYXJyb3doZWFkX2RvdCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoUWwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwOiAhbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlCaW5kaW5nOiAiciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBxcyh0LCBuLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVlKGUpICYmIFlpKGUudHlwZSkgPyBlLnN0YXJ0QXJyb3doZWFkIDogbi5jdXJyZW50SXRlbVN0YXJ0QXJyb3doZWFkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuLmN1cnJlbnRJdGVtU3RhcnRBcnJvd2hlYWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAic3RhcnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoVXMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJhcnJvd2hlYWRfZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6ICJhcnJvd2hlYWRzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmFycm93aGVhZF9ub25lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlCaW5kaW5nOiAicSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChYbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImFycm93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5hcnJvd2hlYWRfYXJyb3ciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmc6ICJ3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KHFsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcDogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJiYXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmFycm93aGVhZF9iYXIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmc6ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KCRsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcDogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJkb3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogTygibGFiZWxzLmFycm93aGVhZF9kb3QiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmc6ICJyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KFFsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcDogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBxcyh0LCBuLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVlKGUpICYmIFlpKGUudHlwZSkgPyBlLmVuZEFycm93aGVhZCA6IG4uY3VycmVudEl0ZW1FbmRBcnJvd2hlYWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4uY3VycmVudEl0ZW1FbmRBcnJvd2hlYWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRpdGxlID8gZS50aXRsZSA6ICJkYXJrIiA9PT0gZS52YWx1ZSA/IE8oImJ1dHRvbnMubGlnaHRNb2RlIikgOiBPKCJidXR0b25zLmRhcmtNb2RlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIlRvb2xJY29uIFRvb2xJY29uX3R5cGVfZmxvYXRpbmcgVG9vbEljb25fc2l6ZV9NIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAidG9nZ2xlLWRhcmstbW9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sSWNvbl90eXBlX2NoZWNrYm94IFRvb2xJY29uX3RvZ2dsZV9vcGFxdWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUub25DaGFuZ2UodC50YXJnZXQuY2hlY2tlZCA/ICJkYXJrIiA6ICJsaWdodCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiAiZGFyayIgPT09IGUudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sSWNvbl9faWNvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJsaWdodCIgPT09IGUudmFsdWUgPyAkcy5NT09OIDogJHMuU1VOKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICRzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU1VOOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiNTEyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICI1MTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInJ0bC1taXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgNTEyIDUxMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJjdXJyZW50Q29sb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjU2IDE2MGMtNTIuOSAwLTk2IDQzLjEtOTYgOTZzNDMuMSA5NiA5NiA5NiA5Ni00My4xIDk2LTk2LTQzLjEtOTYtOTYtOTZ6bTI0Ni40IDgwLjVsLTk0LjctNDcuMyAzMy41LTEwMC40YzQuNS0xMy42LTguNC0yNi41LTIxLjktMjEuOWwtMTAwLjQgMzMuNS00Ny40LTk0LjhjLTYuNC0xMi44LTI0LjYtMTIuOC0zMSAwbC00Ny4zIDk0LjdMOTIuNyA3MC44Yy0xMy42LTQuNS0yNi41IDguNC0yMS45IDIxLjlsMzMuNSAxMDAuNC05NC43IDQ3LjRjLTEyLjggNi40LTEyLjggMjQuNiAwIDMxbDk0LjcgNDcuMy0zMy41IDEwMC41Yy00LjUgMTMuNiA4LjQgMjYuNSAyMS45IDIxLjlsMTAwLjQtMzMuNSA0Ny4zIDk0LjdjNi40IDEyLjggMjQuNiAxMi44IDMxIDBsNDcuMy05NC43IDEwMC40IDMzLjVjMTMuNiA0LjUgMjYuNS04LjQgMjEuOS0yMS45bC0zMy41LTEwMC40IDk0LjctNDcuM2MxMy02LjUgMTMtMjQuNy4yLTMxLjF6bS0xNTUuOSAxMDZjLTQ5LjkgNDkuOS0xMzEuMSA0OS45LTE4MSAwLTQ5LjktNDkuOS00OS45LTEzMS4xIDAtMTgxIDQ5LjktNDkuOSAxMzEuMS00OS45IDE4MSAwIDQ5LjkgNDkuOSA0OS45IDEzMS4xIDAgMTgxeiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1PT046IHUoKS5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICI1MTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjUxMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAicnRsLW1pcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogIjAgMCA1MTIgNTEyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogImN1cnJlbnRDb2xvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0yODMuMjExIDUxMmM3OC45NjIgMCAxNTEuMDc5LTM1LjkyNSAxOTguODU3LTk0Ljc5MiA3LjA2OC04LjcwOC0uNjM5LTIxLjQzLTExLjU2Mi0xOS4zNS0xMjQuMjAzIDIzLjY1NC0yMzguMjYyLTcxLjU3Ni0yMzguMjYyLTE5Ni45NTQgMC03Mi4yMjIgMzguNjYyLTEzOC42MzUgMTAxLjQ5OC0xNzQuMzk0IDkuNjg2LTUuNTEyIDcuMjUtMjAuMTk3LTMuNzU2LTIyLjIzQTI1OC4xNTYgMjU4LjE1NiAwIDAgMCAyODMuMjExIDBjLTE0MS4zMDkgMC0yNTYgMTE0LjUxMS0yNTYgMjU2IDAgMTQxLjMwOSAxMTQuNTExIDI1NiAyNTYgMjU2eiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKcyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZWMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBKcyhPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBKcyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZVZpZXdCYWNrZ3JvdW5kQ29sb3IiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBlYyhlYyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCYWNrZ3JvdW5kQ29sb3I6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAicmVsYXRpdmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoVnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLmNhbnZhc0JhY2tncm91bmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY2FudmFzQmFja2dyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHQudmlld0JhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRhdGEtdGVzdGlkIjogImNhbnZhcy1iYWNrZ3JvdW5kLXBpY2tlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNsZWFyQ2FudmFzIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGVjKGVjKHt9LCBYbigpKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IHQudGhlbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRMb2NrZWQ6IHQuZWxlbWVudExvY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QmFja2dyb3VuZDogdC5leHBvcnRCYWNrZ3JvdW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRFbWJlZFNjZW5lOiB0LmV4cG9ydEVtYmVkU2NlbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRTaXplOiB0LmdyaWRTaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRBZGRXYXRlcm1hcms6IHQuc2hvdWxkQWRkV2F0ZXJtYXJrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U3RhdHM6IHQuc2hvd1N0YXRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXN0ZURpYWxvZzogdC5wYXN0ZURpYWxvZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogc2wsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMuY2xlYXJSZXNldCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy5jbGVhclJlc2V0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FyaWFMYWJlbDogcGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvbmZpcm0oTygiYWxlcnRzLmNsZWFyUmVzZXQiKSkgJiYgdChudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRhdGEtdGVzdGlkIjogImNsZWFyLWNhbnZhcy1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInpvb21JbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gcWkoUWkodC56b29tLnZhbHVlICsgZC5WNCksIHQuem9vbSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHQub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHQub2Zmc2V0VG9wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdC53aWR0aCAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdC5oZWlnaHQgLyAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGVjKGVjKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogZGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChPKCJidXR0b25zLnpvb21JbiIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkN0cmxPckNtZCsrIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy56b29tSW4iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdChudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5jb2RlID09PSBDdCB8fCBlLmNvZGUgPT09IE10KSAmJiAoZVtKdF0gfHwgZS5zaGlmdEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ6b29tT3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBxaShRaSh0Lnpvb20udmFsdWUgLSBkLlY0KSwgdC56b29tLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogdC5vZmZzZXRMZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdC5vZmZzZXRUb3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0LndpZHRoIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB0LmhlaWdodCAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZWMoZWMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBwbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KE8oImJ1dHRvbnMuem9vbU91dCIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkN0cmxPckNtZCstIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy56b29tT3V0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQobnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUuY29kZSA9PT0gT3QgfHwgZS5jb2RlID09PSBQdCkgJiYgKGVbSnRdIHx8IGUuc2hpZnRLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAicmVzZXRab29tIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZWMoZWMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBxaSgxLCB0Lnpvb20sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHQub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdC5vZmZzZXRUb3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdC53aWR0aCAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB0LmhlaWdodCAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJidXR0b25zLnJlc2V0Wm9vbSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy5yZXNldFpvb20iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdChudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5jb2RlID09PSB6dCB8fCBlLmNvZGUgPT09IEl0KSAmJiAoZVtKdF0gfHwgZS5zaGlmdEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB0YyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBfaShlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBOaShyLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuICYmIG8ubGVuZ3RoID4gMCA/IG10KG8pIDogbXQociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLSBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdC53aWR0aCAvIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhIC0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHQuaGVpZ2h0IC8gcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IE1hdGgubWluKGwsIGMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gTWF0aC5mbG9vcih1IC8gZC5WNCkgKiBkLlY0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChwLCBkLlY0KSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oYSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0LndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdC5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHFpKGksIHQuem9vbSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHQub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHQub2Zmc2V0VG9wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gKHMgKyBhWzJdKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gKGMgKyBhWzNdKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZWMoZWMoZWMoe30sIHQpLCBGaSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVQb2ludDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydERpbWVuc2lvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdC5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiem9vbVRvU2VsZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRjKGUsIHQsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jb2RlID09PSBfdCAmJiBlLnNoaWZ0S2V5ICYmICFlLmFsdEtleSAmJiAhZVtKdF0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ6b29tVG9GaXQiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGMoZSwgdCwgITEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmNvZGUgPT09IEF0ICYmIGUuc2hpZnRLZXkgJiYgIWUuYWx0S2V5ICYmICFlW0p0XQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInRvZ2dsZVRoZW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZWMoZWMoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbiB8fCAoImxpZ2h0IiA9PT0gdC50aGVtZSA/ICJkYXJrIiA6ICJsaWdodCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5JbmxpbmVTdGFydDogIjAuMjVyZW0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoUXMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFsdEtleSAmJiBlLnNoaWZ0S2V5ICYmIGUuY29kZSA9PT0gTnQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuYyhlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmMoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBuYyhPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBuYyhPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBvYywgYWMsIGljLCBsYyA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJmaW5hbGl6ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEsIGkgPSByLmNhbnZhcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHIuZm9jdXNDb250YWluZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuZWRpdGluZ0xpbmVhckVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0LmVkaXRpbmdMaW5lYXJFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMuZWxlbWVudElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMuc3RhcnRCaW5kaW5nRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBzLmVuZEJpbmRpbmdFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHphLmdldEVsZW1lbnQoYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwKSByZXR1cm4gWWUocCkgJiYgUmEocCwgdSwgZCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBwLnBvaW50cy5sZW5ndGggPCAyIHx8IFpyKHApID8gZS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pZCAhPT0gcC5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHJjKHJjKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nTGluZWFyRWxlbWVudDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5hY3RpdmVFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gdC5tdWx0aUVsZW1lbnQgPyB0Lm11bHRpRWxlbWVudCA6ICJmcmVlZHJhdyIgPT09IChudWxsID09PSAoYSA9IHQuZWRpdGluZ0VsZW1lbnQpIHx8IHZvaWQgMCA9PT0gYSA/IHZvaWQgMCA6IGEudHlwZSkgPyB0LmVkaXRpbmdFbGVtZW50IDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZyZWVkcmF3IiAhPT0gZi50eXBlICYmICJ0b3VjaCIgIT09IHQubGFzdFBvaW50ZXJEb3duV2l0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBmLnBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZi5sYXN0Q29tbWl0dGVkUG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnICYmIG1bbS5sZW5ndGggLSAxXSA9PT0gZyB8fCBHcihmLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBmLnBvaW50cy5zbGljZSgwLCAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWnIoZikgJiYgKGggPSBoLnNsaWNlKDAsIC0xKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdHQoZi5wb2ludHMsIHQuem9vbS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoImxpbmUiID09PSBmLnR5cGUgfHwgImZyZWVkcmF3IiA9PT0gZi50eXBlKSAmJiB2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGYucG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBiWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3IoZiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogYi5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IGIubGVuZ3RoIC0gMSA/IFt5WzBdLCB5WzFdXSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFllKGYpICYmICF2ICYmIGYucG9pbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gemEuZ2V0UG9pbnRBdEluZGV4R2xvYmFsQ29vcmRpbmF0ZXMoZiwgLTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSB3WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSB3WzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2EoZiwgdCwgSHIuZ2V0U2NlbmUoZiksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbGVtZW50TG9ja2VkIHx8ICJmcmVlZHJhdyIgPT09IHQuZWxlbWVudFR5cGUgfHwgKHQuc2VsZWN0ZWRFbGVtZW50SWRzW2YuaWRdID0gITApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodC5lbGVtZW50TG9ja2VkIHx8ICJmcmVlZHJhdyIgPT09IHQuZWxlbWVudFR5cGUpICYmIGYgfHwgam4oaSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiByYyhyYyh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogKHQuZWxlbWVudExvY2tlZCB8fCAiZnJlZWRyYXciID09PSB0LmVsZW1lbnRUeXBlKSAmJiBmID8gdC5lbGVtZW50VHlwZSA6ICJzZWxlY3Rpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0VsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEJvdW5kRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogZiAmJiAhdC5lbGVtZW50TG9ja2VkICYmICJmcmVlZHJhdyIgIT09IHQuZWxlbWVudFR5cGUgPyByYyhyYyh7fSwgdC5zZWxlY3RlZEVsZW1lbnRJZHMpLCB7fSwgKG8gPSB7fSwgb1tmLmlkXSA9ICEwLCBvKSkgOiB0LnNlbGVjdGVkRWxlbWVudElkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAiZnJlZWRyYXciID09PSB0LmVsZW1lbnRUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5rZXkgPT09IG5uICYmIChudWxsICE9PSB0LmVkaXRpbmdMaW5lYXJFbGVtZW50IHx8ICF0LmRyYWdnaW5nRWxlbWVudCAmJiBudWxsID09PSB0Lm11bHRpRWxlbWVudCkgfHwgKGUua2V5ID09PSBubiB8fCBlLmtleSA9PT0gdG4pICYmIG51bGwgIT09IHQubXVsdGlFbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBobCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMuZG9uZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuZG9uZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBudWxsICE9IHQubXVsdGlFbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNjID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgbnVsbCAhPT0gKG9jID0gcHJvY2Vzcy5lbnYpICYmIHZvaWQgMCAhPT0gb2MgJiYgb2MuUkVBQ1RfQVBQX0dPT0dMRV9BTkFMWVRJQ1NfSUQgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cuZ3RhZyA/IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5ndGFnKCJldmVudCIsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9jYXRlZ29yeTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9sYWJlbDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBudWxsICE9PSAoYWMgPSBwcm9jZXNzLmVudikgJiYgdm9pZCAwICE9PSBhYyAmJiBhYy5KRVNUX1dPUktFUl9JRCwgZnVuY3Rpb24oZSwgdCwgbiwgcikge30pLAogICAgICAgICAgICAgICAgICAgICAgICBjYyA9IChuKDUxOCksIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fcHJvdG9fXzogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuX19wcm90b19fID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHx8IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIChlW25dID0gdFtuXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkodCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBuICYmIG51bGwgIT09IG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIiArIFN0cmluZyhuKSArICIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKHQsIG4pLCB0LnByb3RvdHlwZSA9IG51bGwgPT09IG4gPyBPYmplY3QuY3JlYXRlKG4pIDogKHIucHJvdG90eXBlID0gbi5wcm90b3R5cGUsIG5ldyByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KCkpLAogICAgICAgICAgICAgICAgICAgICAgICB1YyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IFtdLCBuID0gMDsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKykgdFtuXSA9IGFyZ3VtZW50c1tuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgbywgYSA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSBlLmFwcGx5KHRoaXMsIHQpIHx8IHRoaXMsIHIgPSBvID0gYSwgYS5zdGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IGEucHJvcHMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBhLmhhbmRsZUJsdXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFluKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gby5wcm9wcy52YWx1ZSAmJiBvLnByb3BzLm9uQ2hhbmdlKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgYS5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkVudGVyIiA9PT0gZS5rZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KCksIGUubmF0aXZlRXZlbnQuaXNDb21wb3NpbmcgfHwgMjI5ID09PSBlLmtleUNvZGUpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5ibHVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYyh0LCBlKSwgdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcjogImZpbGUtbmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiIi5jb25jYXQodGhpcy5wcm9wcy5sYWJlbCkuY29uY2F0KHRoaXMucHJvcHMuaXNOYW1lRWRpdGFibGUgPyAiIiA6ICI6IikpLCB0aGlzLnByb3BzLmlzTmFtZUVkaXRhYmxlID8gdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUZXh0SW5wdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI6IHRoaXMuaGFuZGxlQmx1ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiZmlsZS1uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IHQudGFyZ2V0LnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiB1KCkuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVGV4dElucHV0IFRleHRJbnB1dC0tcmVhZG9ubHkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImZpbGUtbmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnByb3BzLnZhbHVlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQKICAgICAgICAgICAgICAgICAgICAgICAgfShjLkNvbXBvbmVudCksCiAgICAgICAgICAgICAgICAgICAgICAgIGRjID0gKG4oNjc4MSksIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdm9pZCAwID09PSByID8gImJlbG93IiA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUubG9uZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdm9pZCAwICE9PSBhICYmIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJUb29sdGlwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiYWJvdmUiID09PSBvID8gIlRvb2x0aXBfX2xhYmVsIFRvb2x0aXBfX2xhYmVsLS1hYm92ZSIgOiAiVG9vbHRpcF9fbGFiZWwgVG9vbHRpcF9fbGFiZWwtLWJlbG93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaSA/ICI1MGNoIiA6ICIxMGNoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4pLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcGMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0ICYmIHQuY29sbGFib3JhdG9ycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5jb2xsYWJvcmF0b3JzLmdldChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBuICYmIG4uY29sb3IpIHJldHVybiBuLmNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuc3BsaXQoIiIpLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSArIHQuY2hhckNvZGVBdCgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0geHQuZWxlbWVudEJhY2tncm91bmQuc2xpY2UoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHh0LmVsZW1lbnRTdHJva2Uuc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG9bciAlIG8ubGVuZ3RoXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGFbciAlIGEubGVuZ3RoXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICEgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLkFDVElWRSA9ICJhY3RpdmUiLCBlLkFXQVkgPSAiYXdheSIsIGUuSURMRSA9ICJpZGxlIgogICAgICAgICAgICAgICAgICAgIH0oaWMgfHwgKGljID0ge30pKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaGMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsbFN0eWxlID0gIiNmMDAiLCBlLnRleHRCYXNlbGluZSA9ICJ0b3AiLCBlLmZvbnQgPSAiMzJweCBBcmlhbCIsIGUuZmlsbFRleHQoIvCfmIAiLCAwLCAwKSwgMCAhPT0gZS5nZXRJbWFnZURhdGEoMTIsIDEyLCAxLCAxKS5kYXRhWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmMgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhLCBpLCBsLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHMgJiYgKHMgPSAhMSksIGUudHJhbnNsYXRlKGEsIGkpLCBlLnJvdGF0ZShsKSwgcyAmJiBlLmZpbGxSZWN0KHQgLSBhLCBuIC0gaSwgciwgbyksIGUuc3Ryb2tlUmVjdCh0IC0gYSwgbiAtIGksIHIsIG8pLCBlLnJvdGF0ZSgtbCksIGUudHJhbnNsYXRlKC1hLCAtaSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbWMgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmJlZ2luUGF0aCgpLCBlLmFyYyh0LCBuLCByLCAwLCAyICogTWF0aC5QSSksIGUuZmlsbCgpLCBlLnN0cm9rZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGdjID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSwgaSwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB2b2lkIDAgPT09IGwgPyB7fSA6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMucmVuZGVyU2Nyb2xsYmFycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdm9pZCAwID09PSBjIHx8IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHMucmVuZGVyU2VsZWN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSB2b2lkIDAgPT09IHAgfHwgcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gcy5yZW5kZXJPcHRpbWl6YXRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB2b2lkIDAgIT09IGYgJiYgZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gcy5yZW5kZXJHcmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2b2lkIDAgPT09IGcgfHwgZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBhKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0TGVhc3RPbmVWaXNpYmxlRWxlbWVudDogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuc2NhbGUociwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGEud2lkdGggLyByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBhLmhlaWdodCAvIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaS5leHBvcnRXaXRoRGFya01vZGUgJiYgKGIuZmlsdGVyID0gZC5aRiksICJzdHJpbmciID09IHR5cGVvZiBpLnZpZXdCYWNrZ3JvdW5kQ29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoInRyYW5zcGFyZW50IiA9PT0gaS52aWV3QmFja2dyb3VuZENvbG9yIHx8IDUgPT09IGkudmlld0JhY2tncm91bmRDb2xvci5sZW5ndGggfHwgOSA9PT0gaS52aWV3QmFja2dyb3VuZENvbG9yLmxlbmd0aCB8fCAvKGhzbGF8cmdiYSlcKC8udGVzdChpLnZpZXdCYWNrZ3JvdW5kQ29sb3IpKSAmJiBiLmNsZWFyUmVjdCgwLCAwLCB5LCB3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGIuZmlsbFN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZmlsbFN0eWxlID0gaS52aWV3QmFja2dyb3VuZENvbG9yLCBiLmZpbGxSZWN0KDAsIDAsIHksIHcpLCBiLmZpbGxTdHlsZSA9IHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBiLmNsZWFyUmVjdCgwLCAwLCB5LCB3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFID0gaS56b29tLnRyYW5zbGF0aW9uLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGkuem9vbS50cmFuc2xhdGlvbi55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi50cmFuc2xhdGUoRSwgayksIGIuc2NhbGUoaS56b29tLnZhbHVlLCBpLnpvb20udmFsdWUpLCB2ICYmIHQuZ3JpZFNpemUgJiYgZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5zdHJva2VTdHlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0cm9rZVN0eWxlID0gInJnYmEoMCwwLDAsMC4xKSIsIGUuYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IG47IGwgPCBuICsgbyArIDIgKiB0OyBsICs9IHQpIGUubW92ZVRvKGwsIHIgLSB0KSwgZS5saW5lVG8obCwgciArIGEgKyAyICogdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IHI7IHMgPCByICsgYSArIDIgKiB0OyBzICs9IHQpIGUubW92ZVRvKG4gLSB0LCBzKSwgZS5saW5lVG8obiArIG8gKyAyICogdCwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdHJva2UoKSwgZS5zdHJva2VTdHlsZSA9IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oYiwgdC5ncmlkU2l6ZSwgLU1hdGguY2VpbChFIC8gaS56b29tLnZhbHVlIC8gdC5ncmlkU2l6ZSkgKiB0LmdyaWRTaXplICsgaS5zY3JvbGxYICUgdC5ncmlkU2l6ZSwgLU1hdGguY2VpbChrIC8gaS56b29tLnZhbHVlIC8gdC5ncmlkU2l6ZSkgKiB0LmdyaWRTaXplICsgaS5zY3JvbGxZICUgdC5ncmlkU2l6ZSwgeSAvIGkuem9vbS52YWx1ZSwgdyAvIGkuem9vbS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQywgTyA9IGUuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVjKGUsIHksIHcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogaS56b29tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0OiB0Lm9mZnNldExlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcDogdC5vZmZzZXRUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFg6IGkuc2Nyb2xsWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogaS5zY3JvbGxZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExyKGUsIG8sIGIsIG0sIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdC5lZGl0aW5nTGluZWFyRWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBNID0gemEuZ2V0RWxlbWVudCh0LmVkaXRpbmdMaW5lYXJFbGVtZW50LmVsZW1lbnRJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSAmJiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudHJhbnNsYXRlKG4uc2Nyb2xsWCwgbi5zY3JvbGxZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLnN0cm9rZVN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUubGluZVdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxpbmVXaWR0aCA9IDEgLyBuLnpvb20udmFsdWUsIHphLmdldFBvaW50c0dsb2JhbENvb3JkaW5hdGVzKHIpLmZvckVhY2goKGZ1bmN0aW9uKHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdHJva2VTdHlsZSA9ICJyZWQiLCBlLnNldExpbmVEYXNoKFtdKSwgZS5maWxsU3R5bGUgPSAobnVsbCA9PT0gKGEgPSB0LmVkaXRpbmdMaW5lYXJFbGVtZW50KSB8fCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBhLmFjdGl2ZVBvaW50SW5kZXgpID09PSBvID8gInJnYmEoMjU1LCAxMjcsIDEyNywgMC45KSIgOiAicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gemEuUE9JTlRfSEFORExFX1NJWkU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYyhlLCByWzBdLCByWzFdLCBpIC8gMiAvIG4uem9vbS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLnNldExpbmVEYXNoKFtdKSwgZS5saW5lV2lkdGggPSBhLCBlLnRyYW5zbGF0ZSgtbi5zY3JvbGxYLCAtbi5zY3JvbGxZKSwgZS5zdHJva2VTdHlsZSA9IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGIsIHQsIGksIE0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMcihuLCBvLCBiLCBtLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOYSh0KSAmJiB0LnN1Z2dlc3RlZEJpbmRpbmdzLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWMoYiwgaSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGggJiYgIXQubXVsdGlFbGVtZW50ICYmICF0LmVkaXRpbmdMaW5lYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgUCA9IGUucmVkdWNlKChmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc2VsZWN0ZWRFbGVtZW50SWRzW24uaWRdICYmICF0byh0LCBuKSAmJiByLnB1c2goYnQuU24pLCBpLnJlbW90ZVNlbGVjdGVkRWxlbWVudElkc1tuLmlkXSAmJiByLnB1c2guYXBwbHkociwgaS5yZW1vdGVTZWxlY3RlZEVsZW1lbnRJZHNbbi5pZF0ubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYyhlLCB0KS5iYWNrZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHN0KG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gb1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG9bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBvWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gb1szXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogbi5hbmdsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFgxOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WTE6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRYMjogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFkyOiBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db2xvcnM6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKSwgSSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gaW8oZSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG10KG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSByWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WDE6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFgyOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRZMTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WTI6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ29sb3JzOiBbYnQuU25dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBUID0gMCwgTCA9IHJvKHQpOyBUIDwgTC5sZW5ndGg7IFQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKExbVF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZWRpdGluZ0dyb3VwSWQgJiYgSSh0LmVkaXRpbmdHcm91cElkKSwgUC5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYyhiLCBpLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQSA9IE5pKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLnRyYW5zbGF0ZShpLnNjcm9sbFgsIGkuc2Nyb2xsWSksIDEgPT09IEEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZmlsbFN0eWxlID0gYnQuaXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfID0gT28oQVswXSwgaS56b29tLCAibW91c2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC52aWV3TW9kZUVuYWJsZWQgfHwgdmMoYiwgaSwgXywgQVswXS5hbmdsZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEEubGVuZ3RoID4gMSAmJiAhdC5pc1JvdGF0aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBEID0gNCAvIGkuem9vbS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5maWxsU3R5bGUgPSBidC5peDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGogPSBtdChBKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBqWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQiA9IGpbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIID0galsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE4gPSBqWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUiA9IGIuZ2V0TGluZURhc2goKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5zZXRMaW5lRGFzaChbMiAvIGkuem9vbS52YWx1ZV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRiA9IGIubGluZVdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmxpbmVXaWR0aCA9IDEgLyBpLnpvb20udmFsdWUsIGZjKGIsIHogLSBELCBCIC0gRCwgSCAtIHogKyAyICogRCwgTiAtIEIgKyAyICogRCwgKHogKyBIKSAvIDIsIChCICsgTikgLyAyLCAwKSwgYi5saW5lV2lkdGggPSBGLCBiLnNldExpbmVEYXNoKFIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfID0gQ28oW3osIEIsIEgsIE5dLCAwLCBpLnpvb20sICJtb3VzZSIsIHdvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmMoYiwgaSwgXywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi50cmFuc2xhdGUoLWkuc2Nyb2xsWCwgLWkuc2Nyb2xsWSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIFcgaW4gYi5zY2FsZSgxIC8gaS56b29tLnZhbHVlLCAxIC8gaS56b29tLnZhbHVlKSwgYi50cmFuc2xhdGUoLUUsIC1rKSwgaS5yZW1vdGVQb2ludGVyVmlld3BvcnRDb29yZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgViA9IGkucmVtb3RlUG9pbnRlclZpZXdwb3J0Q29vcmRzW1ddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHID0gVi54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLID0gVi55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEcgLT0gdC5vZmZzZXRMZWZ0LCBLIC09IHQub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBVID0gRyA8IDAgfHwgRyA+IHkgLSA5IHx8IEsgPCAwIHx8IEsgPiB3IC0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRyA9IE1hdGgubWF4KEcsIDApLCBHID0gTWF0aC5taW4oRywgeSAtIDkpLCBLID0gTWF0aC5tYXgoSywgMCksIEsgPSBNYXRoLm1pbihLLCB3IC0gMTQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBaID0gcGMoVywgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkgPSBaLmJhY2tncm91bmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFggPSBaLnN0cm9rZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGIuc3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFEgPSAoeCA9IGIuZmlsbFN0eWxlLCBiLmdsb2JhbEFscGhhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnN0cm9rZVN0eWxlID0gWCwgYi5maWxsU3R5bGUgPSBZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkID0gaS5yZW1vdGVQb2ludGVyVXNlclN0YXRlc1tXXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoVSB8fCAkID09PSBpYy5BV0FZKSAmJiAoYi5nbG9iYWxBbHBoYSA9IC40OCksIGkucmVtb3RlUG9pbnRlckJ1dHRvbiAmJiAiZG93biIgPT09IGkucmVtb3RlUG9pbnRlckJ1dHRvbltXXSAmJiAoYi5iZWdpblBhdGgoKSwgYi5hcmMoRywgSywgMTUsIDAsIDIgKiBNYXRoLlBJLCAhMSksIGIubGluZVdpZHRoID0gMywgYi5zdHJva2VTdHlsZSA9ICIjZmZmZmZmODgiLCBiLnN0cm9rZSgpLCBiLmNsb3NlUGF0aCgpLCBiLmJlZ2luUGF0aCgpLCBiLmFyYyhHLCBLLCAxNSwgMCwgMiAqIE1hdGguUEksICExKSwgYi5saW5lV2lkdGggPSAxLCBiLnN0cm9rZVN0eWxlID0gWCwgYi5zdHJva2UoKSwgYi5jbG9zZVBhdGgoKSksIGIuYmVnaW5QYXRoKCksIGIubW92ZVRvKEcsIEspLCBiLmxpbmVUbyhHICsgMSwgSyArIDE0KSwgYi5saW5lVG8oRyArIDQsIEsgKyA5KSwgYi5saW5lVG8oRyArIDksIEsgKyAxMCksIGIubGluZVRvKEcsIEspLCBiLmZpbGwoKSwgYi5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSiA9IGkucmVtb3RlUG9pbnRlclVzZXJuYW1lc1tXXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkID09PSBpYy5BV0FZID8gZWUgPSBoYyA/ICLimqvvuI8iIDogIiAoIi5jb25jYXQoaWMuQVdBWSwgIikiKSA6ICQgPT09IGljLklETEUgPyBlZSA9IGhjID8gIvCfkqQiIDogIiAoIi5jb25jYXQoaWMuSURMRSwgIikiKSA6ICQgPT09IGljLkFDVElWRSAmJiAoZWUgPSBoYyA/ICLwn5+iIiA6ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGUgPSAiIi5jb25jYXQoSiA/ICIiLmNvbmNhdChKLCAiICIpIDogIiIpLmNvbmNhdChlZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFVICYmIHRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZSA9IEcgKyA5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmUgPSBLICsgMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZSA9IGIubWVhc3VyZVRleHQodGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWUgPSBvZS5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQgKyBvZS5hY3R1YWxCb3VuZGluZ0JveEFzY2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5maWxsU3R5bGUgPSBYLCBiLmZpbGxSZWN0KG5lIC0gMSwgcmUgLSAxLCBvZS53aWR0aCArIDggKyAyLCBhZSArIDggKyAyKSwgYi5maWxsU3R5bGUgPSBZLCBiLmZpbGxSZWN0KG5lLCByZSwgb2Uud2lkdGggKyA4LCBhZSArIDgpLCBiLmZpbGxTdHlsZSA9IGJ0Lml4LCBiLmZpbGxUZXh0KHRlLCBuZSArIDQsIHJlICsgNCArIG9lLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnN0cm9rZVN0eWxlID0gcSwgYi5maWxsU3R5bGUgPSB4LCBiLmdsb2JhbEFscGhhID0gUSwgYi5jbG9zZVBhdGgoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHIuc2Nyb2xsWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByLnNjcm9sbFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gci56b29tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBtdChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBsWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGxbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbFsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBsWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHQgLyBpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG4gLyBpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHQgLSBwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG4gLSBoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KFduKCJzYXQiKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBwYXJzZUludChXbigic2FiIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBhcnNlSW50KFduKCJzYWwiKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHBhcnNlSW50KFduKCJzYXIiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gUygpLnJ0bCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBmIC8gMiAtIG8gKyBnLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbSAvIDIgLSBhICsgZy50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gYiArIHAgLSBnLnJpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHkgKyBoIC0gZy5ib3R0b20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gTWF0aC5taW4ocywgYiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gTWF0aC5taW4oYywgeSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gTWF0aC5tYXgodSwgdyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gTWF0aC5tYXgoZCwgeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsOiBiID09PSBFICYmIHcgPT09IEMgPyBudWxsIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IE1hdGgubWF4KGcubGVmdCwgNCkgKyAoYiAtIEUpIC8gKEMgLSBFKSAqIHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbiAtIDYgLSBNYXRoLm1heCg0LCBnLmJvdHRvbSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICh3IC0gYikgLyAoQyAtIEUpICogdCAtIE1hdGgubWF4KDgsIGcubGVmdCArIGcucmlnaHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB5ID09PSBrICYmIHggPT09IE8gPyBudWxsIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHYgPyBNYXRoLm1heChnLmxlZnQsIDQpIDogdCAtIDYgLSBNYXRoLm1heChnLnJpZ2h0LCA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAoeSAtIGspIC8gKE8gLSBrKSAqIG4gKyBNYXRoLm1heChnLnRvcCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAoeCAtIHkpIC8gKE8gLSBrKSAqIG4gLSBNYXRoLm1heCg4LCBnLnRvcCArIGcuYm90dG9tKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB5LCB3LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gYi5maWxsU3R5bGUsIHEgPSBiLnN0cm9rZVN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZmlsbFN0eWxlID0gInJnYmEoMCwwLDAsMC4zKSIsIGIuc3Ryb2tlU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwwLjgpIiwgW0MuaG9yaXpvbnRhbCwgQy52ZXJ0aWNhbF0uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmIGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYmVnaW5QYXRoKCksIGUubW92ZVRvKHQgKyBhLCBuKSwgZS5saW5lVG8odCArIHIgLSBhLCBuKSwgZS5xdWFkcmF0aWNDdXJ2ZVRvKHQgKyByLCBuLCB0ICsgciwgbiArIGEpLCBlLmxpbmVUbyh0ICsgciwgbiArIG8gLSBhKSwgZS5xdWFkcmF0aWNDdXJ2ZVRvKHQgKyByLCBuICsgbywgdCArIHIgLSBhLCBuICsgbyksIGUubGluZVRvKHQgKyBhLCBuICsgbyksIGUucXVhZHJhdGljQ3VydmVUbyh0LCBuICsgbywgdCwgbiArIG8gLSBhKSwgZS5saW5lVG8odCwgbiArIGEpLCBlLnF1YWRyYXRpY0N1cnZlVG8odCwgbiwgdCArIGEsIG4pLCBlLmNsb3NlUGF0aCgpLCBlLmZpbGwoKSwgZS5zdHJva2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGIsIGUueCwgZS55LCBlLndpZHRoLCBlLmhlaWdodCwgMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGIuZmlsbFN0eWxlID0geCwgYi5zdHJva2VTdHlsZSA9IHEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLnNjYWxlKDEgLyByLCAxIC8gciksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdExlYXN0T25lVmlzaWJsZUVsZW1lbnQ6IE8ubGVuZ3RoID4gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJzOiBDCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHZjID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobikuZm9yRWFjaCgoZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gbltvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5saW5lV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGluZVdpZHRoID0gMSAvIHQuem9vbS52YWx1ZSwgInJvdGF0aW9uIiA9PT0gbyA/IG1jKGUsIGFbMF0gKyBhWzJdIC8gMiwgYVsxXSArIGFbM10gLyAyLCBhWzJdIC8gMikgOiBmYyhlLCBhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzBdICsgYVsyXSAvIDIsIGFbMV0gKyBhWzNdIC8gMiwgciwgITApLCBlLmxpbmVXaWR0aCA9IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYmMgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4uYW5nbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4uZWxlbWVudFgxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuLmVsZW1lbnRZMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbi5lbGVtZW50WDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4uZWxlbWVudFkyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuLnNlbGVjdGlvbkNvbG9ycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gaSAtIG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGwgLSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBlLmdldExpbmVEYXNoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGUubGluZVdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBlLmxpbmVEYXNoT2Zmc2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBlLnN0cm9rZVN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSA0IC8gdC56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSA4IC8gdC56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSA0IC8gdC56b29tLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5saW5lV2lkdGggPSAxIC8gdC56b29tLnZhbHVlLCBlLnRyYW5zbGF0ZSh0LnNjcm9sbFgsIHQuc2Nyb2xsWSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gcy5sZW5ndGgsIHkgPSAwOyB5IDwgYjsgKyt5KSBlLnN0cm9rZVN0eWxlID0gc1t5XSwgZS5zZXRMaW5lRGFzaChbZywgdiArIChnICsgdikgKiAoYiAtIDEpXSksIGUubGluZURhc2hPZmZzZXQgPSAoZyArIHYpICogeSwgZmMoZSwgbyAtIG0sIGEgLSBtLCBjICsgMiAqIG0sIHUgKyAyICogbSwgbyArIGMgLyAyLCBhICsgdSAvIDIsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5saW5lRGFzaE9mZnNldCA9IGgsIGUuc3Ryb2tlU3R5bGUgPSBmLCBlLmxpbmVXaWR0aCA9IHAsIGUuc2V0TGluZURhc2goZCksIGUudHJhbnNsYXRlKC10LnNjcm9sbFgsIC10LnNjcm9sbFkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHljID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLnN0cm9rZVN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmxpbmVXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gQXJyYXkuaXNBcnJheShuKSA/IHhjIDogd2M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRyYW5zbGF0ZSh0LnNjcm9sbFgsIHQuc2Nyb2xsWSksIGEoZSwgbiksIGUuc3Ryb2tlU3R5bGUgPSByLCBlLmxpbmVXaWR0aCA9IG8sIGUudHJhbnNsYXRlKC10LnNjcm9sbFgsIC10LnNjcm9sbFkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdjID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBzdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gblswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblsyXSAtIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5bM10gLSBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0YSh0LCBhLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3Ryb2tlU3R5bGUgPSAicmdiYSgwLDAsMCwuMDUpIiwgZS5saW5lV2lkdGggPSBsIC0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gMiArIGwgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0LnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJyZWN0YW5nbGUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYyhlLCByIC0gcywgbyAtIHMsIGEgKyAyICogcywgaSArIDIgKiBzLCByICsgYSAvIDIsIG8gKyBpIC8gMiwgdC5hbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRpYW1vbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IE1hdGguaHlwb3QoYSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEgZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50cmFuc2xhdGUociwgbyksIGUucm90YXRlKGEpLCBlLmJlZ2luUGF0aCgpLCBlLm1vdmVUbygwLCBuIC8gMiksIGUubGluZVRvKHQgLyAyLCAwKSwgZS5saW5lVG8oMCwgLW4gLyAyKSwgZS5saW5lVG8oLXQgLyAyLCAwKSwgZS5jbG9zZVBhdGgoKSwgZS5zdHJva2UoKSwgZS5yb3RhdGUoLWEpLCBlLnRyYW5zbGF0ZSgtciwgLW8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSwgYSArIDIgKiAocyAqIGMgLyBpKSwgaSArIDIgKiAocyAqIGMgLyBhKSwgciArIGEgLyAyLCBvICsgaSAvIDIsIHQuYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISBmdW5jdGlvbihlLCB0LCBuLCByLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmJlZ2luUGF0aCgpLCBlLmVsbGlwc2UociwgbywgdCAvIDIsIG4gLyAyLCBhLCAwLCAyICogTWF0aC5QSSksIGUuc3Ryb2tlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCBhICsgMiAqIHMsIGkgKyAyICogcywgciArIGEgLyAyLCBvICsgaSAvIDIsIHQuYW5nbGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHhjID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0YShvLCBvLndpZHRoLCBvLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0cm9rZVN0eWxlID0gInJnYmEoMCwwLDAsMCkiLCBlLmZpbGxTdHlsZSA9ICJyZ2JhKDAsMCwwLC4wNSkiLCAoImJvdGgiID09PSByID8gWzAsIC0xXSA6ICJzdGFydCIgPT09IHIgPyBbMF0gOiBbLTFdKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB6YS5nZXRQb2ludEF0SW5kZXhHbG9iYWxDb29yZGluYXRlcyhuLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1jKGUsIG8sIGksIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRWMgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGZ0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBvWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBvWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBSbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFg6IHIub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WTogci5vZmZzZXRUb3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gUm4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRYOiByLm9mZnNldExlZnQgKyB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRZOiByLm9mZnNldFRvcCArIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnggPD0gbCAmJiBjLnkgPD0gcyAmJiB1LnggPj0gYSAmJiB1LnkgPj0gaQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrYyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdm9pZCAwID09PSByID8ge30gOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvLm9mZnNldFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZvaWQgMCA9PT0gYSA/IDAgOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBvLm9mZnNldFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHZvaWQgMCA9PT0gbCA/IDAgOiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuaXNEZWxldGVkKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gc3QoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGFbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IChzIC0gaSkgLyAyIC0gKGUueCAtIGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAoYyAtIGwpIC8gMiAtIChlLnkgLSBsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gMTgwICogZS5hbmdsZSAvIE1hdGguUEksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHQuZ2VuZXJhdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3Rpb24iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlNlbGVjdGlvbiByZW5kZXJpbmcgaXMgbm90IHN1cHBvcnRlZCBmb3IgU1ZHIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVjdGFuZ2xlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJkaWFtb25kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbGxpcHNlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHIoZSwgZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gQXIodCwgQ3IoZSksIGQuekspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxICE9IChiID0gZS5vcGFjaXR5IC8gMTAwKSAmJiAobS5zZXRBdHRyaWJ1dGUoInN0cm9rZS1vcGFjaXR5IiwgIiIuY29uY2F0KGIpKSwgbS5zZXRBdHRyaWJ1dGUoImZpbGwtb3BhY2l0eSIsICIiLmNvbmNhdChiKSkpLCBtLnNldEF0dHJpYnV0ZSgic3Ryb2tlLWxpbmVjYXAiLCAicm91bmQiKSwgbS5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIi5jb25jYXQociB8fCAwLCAiICIpLmNvbmNhdChvIHx8IDAsICIpIHJvdGF0ZSgiKS5jb25jYXQoaCwgIiAiKS5jb25jYXQodSwgIiAiKS5jb25jYXQocCwgIikiKSksIG4uYXBwZW5kQ2hpbGQobSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImxpbmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImFycm93IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHIoZSwgZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gbi5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhDbiwgImciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBlLm9wYWNpdHkgLyAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuc2V0QXR0cmlidXRlKCJzdHJva2UtbGluZWNhcCIsICJyb3VuZCIpLCBDcihlKS5mb3JFYWNoKChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IEFyKHQsIG4sIGQuekspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSAhPT0gdiAmJiAoYS5zZXRBdHRyaWJ1dGUoInN0cm9rZS1vcGFjaXR5IiwgIiIuY29uY2F0KHYpKSwgYS5zZXRBdHRyaWJ1dGUoImZpbGwtb3BhY2l0eSIsICIiLmNvbmNhdCh2KSkpLCBhLnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiLmNvbmNhdChyIHx8IDAsICIgIikuY29uY2F0KG8gfHwgMCwgIikgcm90YXRlKCIpLmNvbmNhdChoLCAiICIpLmNvbmNhdCh1LCAiICIpLmNvbmNhdChwLCAiKSIpKSwgImxpbmUiID09PSBlLnR5cGUgJiYgdHQoZS5wb2ludHMpICYmICJ0cmFuc3BhcmVudCIgIT09IGUuYmFja2dyb3VuZENvbG9yICYmIGEuc2V0QXR0cmlidXRlKCJmaWxsLXJ1bGUiLCAiZXZlbm9kZCIpLCBnLmFwcGVuZENoaWxkKGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbi5hcHBlbmRDaGlsZChnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZnJlZWRyYXciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcihlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBlLm9wYWNpdHkgLyAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBuLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKENuLCAiZyIpLCAxICE9PSBiICYmIChtLnNldEF0dHJpYnV0ZSgic3Ryb2tlLW9wYWNpdHkiLCAiIi5jb25jYXQoYikpLCBtLnNldEF0dHJpYnV0ZSgiZmlsbC1vcGFjaXR5IiwgIiIuY29uY2F0KGIpKSksIG0uc2V0QXR0cmlidXRlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIuY29uY2F0KHIgfHwgMCwgIiAiKS5jb25jYXQobyB8fCAwLCAiKSByb3RhdGUoIikuY29uY2F0KGgsICIgIikuY29uY2F0KHUsICIgIikuY29uY2F0KHAsICIpIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IG4ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoQ24sICJwYXRoIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2V0QXR0cmlidXRlKCJzdHJva2UiLCAibm9uZSIpLCBtLnNldEF0dHJpYnV0ZSgiZmlsbCIsIGUuc3Ryb2tlQ29sb3IpLCB5LnNldEF0dHJpYnV0ZSgiZCIsIGpyKGUpKSwgbS5hcHBlbmRDaGlsZCh5KSwgbi5hcHBlbmRDaGlsZChtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFWZShlKSkgdGhyb3cgbmV3IEVycm9yKCJVbmltcGxlbWVudGVkIHR5cGUgIi5jb25jYXQoZS50eXBlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBlLm9wYWNpdHkgLyAxMDAsIG0gPSBuLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKENuLCAiZyIpLCAxICE9PSBiICYmIChtLnNldEF0dHJpYnV0ZSgic3Ryb2tlLW9wYWNpdHkiLCAiIi5jb25jYXQoYikpLCBtLnNldEF0dHJpYnV0ZSgiZmlsbC1vcGFjaXR5IiwgIiIuY29uY2F0KGIpKSksIG0uc2V0QXR0cmlidXRlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIuY29uY2F0KHIgfHwgMCwgIiAiKS5jb25jYXQobyB8fCAwLCAiKSByb3RhdGUoIikuY29uY2F0KGgsICIgIikuY29uY2F0KHUsICIgIikuY29uY2F0KHAsICIpIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB3ID0gZS50ZXh0LnJlcGxhY2UoL1xyXG4/L2csICJcbiIpLnNwbGl0KCJcbiIpLCB4ID0gZS5oZWlnaHQgLyB3Lmxlbmd0aCwgRSA9IGUuaGVpZ2h0IC0gZS5iYXNlbGluZSwgayA9ICJjZW50ZXIiID09PSBlLnRleHRBbGlnbiA/IGUud2lkdGggLyAyIDogInJpZ2h0IiA9PT0gZS50ZXh0QWxpZ24gPyBlLndpZHRoIDogMCwgUyA9IEduKGUudGV4dCkgPyAicnRsIiA6ICJsdHIiLCBDID0gImNlbnRlciIgPT09IGUudGV4dEFsaWduID8gIm1pZGRsZSIgOiAicmlnaHQiID09PSBlLnRleHRBbGlnbiB8fCAicnRsIiA9PT0gUyA/ICJlbmQiIDogInN0YXJ0IiwgTyA9IDA7IE8gPCB3Lmxlbmd0aDsgTysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTSA9IG4ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoQ24sICJ0ZXh0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNLnRleHRDb250ZW50ID0gd1tPXSwgTS5zZXRBdHRyaWJ1dGUoIngiLCAiIi5jb25jYXQoaykpLCBNLnNldEF0dHJpYnV0ZSgieSIsICIiLmNvbmNhdCgoTyArIDEpICogeCAtIEUpKSwgTS5zZXRBdHRyaWJ1dGUoImZvbnQtZmFtaWx5IiwgVG4oZSkpLCBNLnNldEF0dHJpYnV0ZSgiZm9udC1zaXplIiwgIiIuY29uY2F0KGUuZm9udFNpemUsICJweCIpKSwgTS5zZXRBdHRyaWJ1dGUoImZpbGwiLCBlLnN0cm9rZUNvbG9yKSwgTS5zZXRBdHRyaWJ1dGUoInRleHQtYW5jaG9yIiwgQyksIE0uc2V0QXR0cmlidXRlKCJzdHlsZSIsICJ3aGl0ZS1zcGFjZTogcHJlOyIpLCBNLnNldEF0dHJpYnV0ZSgiZGlyZWN0aW9uIiwgUyksIG0uYXBwZW5kQ2hpbGQoTSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmFwcGVuZENoaWxkKG0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSwgdCwgbiwgZS54ICsgaSwgZS55ICsgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgU2MgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBDYyA9ICJceDNjIS0tIHN2Zy1zb3VyY2U6ZXhjYWxpZHJhdyAtLVx4M2UiLAogICAgICAgICAgICAgICAgICAgICAgICBPYyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbi5leHBvcnRCYWNrZ3JvdW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuLmV4cG9ydFBhZGRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZvaWQgMCA9PT0gYSA/IDEwIDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbi52aWV3QmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuLnNjYWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB2b2lkIDAgPT09IHMgPyAxIDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbi5zaG91bGRBZGRXYXRlcm1hcms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHIgJiYgKHIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi53aWR0aCA9IGUgKiBjLCBuLmhlaWdodCA9IHQgKiBjLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhczogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IGMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gUGMoZSwgdSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IFRjKGQsIGksIHUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBwWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBwWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSByKHBbMl0sIHBbM10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBtLmNhbnZhcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gbS5zY2FsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnYyhkLCB0LCBudWxsLCB2b2lkIDAgPT09IHYgPyBjIDogdiwgRGUuY2FudmFzKGcpLCBnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JhY2tncm91bmRDb2xvcjogbyA/IGwgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFdpdGhEYXJrTW9kZTogdC5leHBvcnRXaXRoRGFya01vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogLWggKyBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFk6IC1mICsgaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBYbigpLnpvb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUG9pbnRlclZpZXdwb3J0Q29vcmRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVTZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZENhY2hlSWdub3JlWm9vbTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUG9pbnRlclVzZXJuYW1lczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUG9pbnRlclVzZXJTdGF0ZXM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2Nyb2xsYmFyczogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2VsZWN0aW9uOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPcHRpbWl6YXRpb25zOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJHcmlkOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGcKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTWMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuZXhwb3J0QmFja2dyb3VuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5leHBvcnRQYWRkaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB2b2lkIDAgPT09IHIgPyAxMCA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQudmlld0JhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5leHBvcnRXaXRoRGFya01vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHQuc2NhbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHZvaWQgMCA9PT0gbCA/IDEgOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0LnNob3VsZEFkZFdhdGVybWFyaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdC5tZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdm9pZCAwID09PSB1ID8gIiIgOiB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBQYyhlLCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gVGMoaCwgbywgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGZbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGZbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGZbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGZbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhDbiwgInN2ZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkuc2V0QXR0cmlidXRlKCJ2ZXJzaW9uIiwgIjEuMSIpLCB5LnNldEF0dHJpYnV0ZSgieG1sbnMiLCBDbiksIHkuc2V0QXR0cmlidXRlKCJ2aWV3Qm94IiwgIjAgMCAiLmNvbmNhdCh2LCAiICIpLmNvbmNhdChiKSksIHkuc2V0QXR0cmlidXRlKCJ3aWR0aCIsICIiLmNvbmNhdCh2ICogcykpLCB5LnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgIiIuY29uY2F0KGIgKiBzKSksIGkgJiYgeS5zZXRBdHRyaWJ1dGUoImZpbHRlciIsIGQuWkYpLCB5LmlubmVySFRNTCA9ICJcbiAgIi5jb25jYXQoQ2MsICJcbiAgIikuY29uY2F0KHAsICdcbiAgPGRlZnM+XG4gICAgPHN0eWxlPlxuICAgICAgQGZvbnQtZmFjZSB7XG4gICAgICAgIGZvbnQtZmFtaWx5OiAiVmlyZ2lsIjtcbiAgICAgICAgc3JjOiB1cmwoImh0dHBzOi8vZXhjYWxpZHJhdy5jb20vVmlyZ2lsLndvZmYyIik7XG4gICAgICB9XG4gICAgICBAZm9udC1mYWNlIHtcbiAgICAgICAgZm9udC1mYW1pbHk6ICJDYXNjYWRpYSI7XG4gICAgICAgIHNyYzogdXJsKCJodHRwczovL2V4Y2FsaWRyYXcuY29tL0Nhc2NhZGlhLndvZmYyIik7XG4gICAgICB9XG4gICAgPC9zdHlsZT5cbiAgPC9kZWZzPlxuICAnKSwgbiAmJiBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSB5Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKENuLCAicmVjdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuc2V0QXR0cmlidXRlKCJ4IiwgIjAiKSwgdy5zZXRBdHRyaWJ1dGUoInkiLCAiMCIpLCB3LnNldEF0dHJpYnV0ZSgid2lkdGgiLCAiIi5jb25jYXQodikpLCB3LnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgIiIuY29uY2F0KGIpKSwgdy5zZXRBdHRyaWJ1dGUoImZpbGwiLCBhKSwgeS5hcHBlbmRDaGlsZCh3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBEZS5zdmcoeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2MoaCwgeCwgeSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFg6IC1tICsgbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRZOiAtZyArIG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB5CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBjID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBTYyhbXSwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbXQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gclszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gU2MoU2MoW10sIG4pLCBbSWMobywgYSldKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgSWMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm8oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IE8oImxhYmVscy5tYWRlV2l0aEV4Y2FsaWRyYXciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogZC5yaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICJyaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogZC5ocywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHQgKyAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogYnQuTUFbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogImhhY2h1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiAic29saWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdWdobmVzczogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU2hhcnBuZXNzOiAic2hhcnAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBUYyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbXQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHJbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHJbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW28sIGEsIERuKG8sIGkpICsgMiAqIHQsIERuKGEsIGwpICsgdCArIChuID8gMCA6IHQpXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBMYyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFjKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfYyhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IEFjKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IEFjKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIERjID0gMzIsCiAgICAgICAgICAgICAgICAgICAgICAgIGpjID0gMTIsCiAgICAgICAgICAgICAgICAgICAgICAgIHpjID0gMjU2LAogICAgICAgICAgICAgICAgICAgICAgICBCYyA9ICJOT1RfU1BSRUFEU0hFRVQiLAogICAgICAgICAgICAgICAgICAgICAgICBIYyA9ICJWQUxJRF9TUFJFQURTSEVFVCIsCiAgICAgICAgICAgICAgICAgICAgICAgIE5jID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAvXlsk4oKswqPCpeKCqV0/KFswLTksXSsoXC5bMC05XSspPykkLy5leGVjKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyBwYXJzZUZsb2F0KHRbMV0ucmVwbGFjZSgvLC9nLCAiIikpIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBSYyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNsaWNlKDEpLmV2ZXJ5KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IE5jKGVbdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRmMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGVbMF0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAyKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogIk1vcmUgdGhhbiAyIGNvbHVtbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVJjKGUsIDApKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBCYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAiVmFsdWUgaXMgbm90IG51bWVyaWMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgPT09IE5jKGVbMF1bMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gKG4gPyBlLnNsaWNlKDEpIDogZSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmMoZVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmxlbmd0aCA8IDIgPyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICJMZXNzIHRoYW4gdHdvIHJvd3MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogSGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbiA/IGVbMF1bMF0gOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFJjKGUsIDApID8gMCA6IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVJjKGUsIG8pKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogIlZhbHVlIGlzIG5vdCBudW1lcmljIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gKG8gKyAxKSAlIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG51bGwgPT09IE5jKGVbMF1bb10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpID8gZS5zbGljZSgxKSA6IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbC5sZW5ndGggPCAyID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogIkxlc3MgdGhhbiAyIHJvd3MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEhjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpID8gZVswXVtvXSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsczogbC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW2FdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBsLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5jKGVbb10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgV2MgPSB4dC5lbGVtZW50QmFja2dyb3VuZC5zbGljZSgyLCB4dC5lbGVtZW50QmFja2dyb3VuZC5sZW5ndGgpLAogICAgICAgICAgICAgICAgICAgICAgICBWYyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogImhhY2h1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogZC5yaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBkLm41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IHh0LmVsZW1lbnRTdHJva2VbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTaGFycG5lc3M6ICJzaGFycCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogInNvbGlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogIm1pZGRsZSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgR2MgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0V2lkdGg6IDQ0ICogZS52YWx1ZXMubGVuZ3RoICsgamMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRIZWlnaHQ6IDI4MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBLYyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gR2MoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGkuY2hhcnRXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaS5jaGFydEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZS50aXRsZSA/IGZvKF9jKF9jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkczogW3JdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgVmMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBlLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0ICsgbCAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG4gLSB6YyAtIDI0IC0gZC5uNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU2hhcnBuZXNzOiAic2hhcnAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogInNvbGlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGEgPyBwbyhfYyhfYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IFtyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFZjKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJlY3RhbmdsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG4gLSBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogeHQuZWxlbWVudFN0cm9rZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiAic29saWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiA2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMYyhMYyhMYyhMYyhMYyhbXSwgdSA/IFt1XSA6IFtdKSwgYyA/IFtjXSA6IFtdKSwgZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobnVsbCA9PT0gKGEgPSBlLmxhYmVscykgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS5tYXAoKGZ1bmN0aW9uKGUsIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvKF9jKF9jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWRzOiBbcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgVmMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZS5sZW5ndGggPiA4ID8gIiIuY29uY2F0KGUuc2xpY2UoMCwgNSksICIuLi4iKSA6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0ICsgNDQgKiBhICsgMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuICsgNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBEYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiA1Ljg3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDE2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICJ0b3AiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkgfHwgW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZSwgdCwgbiwgciwgbykpLCBmdW5jdGlvbihlLCB0LCBuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBmbyhfYyhfYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWRzOiBbcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFZjKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdCAtIGpjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuIC0gamMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAicmlnaHQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYSwgZm8oX2MoX2MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkczogW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBWYyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQgLSBqYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbiAtIHpjIC0gYS5oZWlnaHQgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBNYXRoLm1heC5hcHBseShNYXRoLCBlLnZhbHVlcykudG9Mb2NhbGVTdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAicmlnaHQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB0LCBuLCByLCBvKSksIGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IEdjKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYS5jaGFydFdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYS5jaGFydEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2dvKF9jKF9jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkczogW3JdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgVmMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBcnJvd2hlYWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAwXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpLCAwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBnbyhfYyhfYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IFtyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFZjKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFycm93aGVhZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXJyb3doZWFkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIC1sXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBnbyhfYyhfYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IFtyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFZjKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuIC0gemMgLSBqYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBcnJvd2hlYWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFycm93aGVhZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6ICJkb3R0ZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ksIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIHQsIG4sIHIsIG8pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBVYyA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAibGluZSIgPT09IGUgPyBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGUudmFsdWVzKSwgbyA9IEZyKCksIGEgPSBXY1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBXYy5sZW5ndGgpXSwgaSA9IDAsIGwgPSBbXSwgcyA9IDAsIGMgPSBlLnZhbHVlczsgcyA8IGMubGVuZ3RoOyBzKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSA0NCAqIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gLWNbc10gLyByICogemM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChbdSwgcF0pLCBpKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBNYXRoLm1heC5hcHBseShNYXRoLCBsLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGwubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgbC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBNYXRoLm1pbi5hcHBseShNYXRoLCBsLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGdvKF9jKF9jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWRzOiBbb10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgVmMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdCArIGpjICsgMTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuIC0gamMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFycm93aGVhZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFycm93aGVhZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZiAtIGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaCAtIG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBlLnZhbHVlcy5tYXAoKGZ1bmN0aW9uKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gNDQgKiBpICsgNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gLWUgLyByICogemMgKyA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvKF9jKF9jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IFtvXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgVmMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogInNvbGlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZWxsaXBzZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdCArIGwgKyAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBuICsgcyAtIDI0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBqYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGpjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gZS52YWx1ZXMubWFwKChmdW5jdGlvbihlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IDQ0ICogaSArIDYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUgLyByICogemMgKyA2ICsgamM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ28oX2MoX2MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkczogW29dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBWYyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQgKyBsICsgMTYgKyA2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG4gLSBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFycm93aGVhZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6ICJkb3R0ZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMCwgMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCBzXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExjKExjKExjKExjKFtdLCBLYyhlLCB0LCBuLCBvLCBhLCAicHJvZHVjdGlvbiIgPT09IGQuVmkuREVWRUxPUE1FTlQpKSwgW3ZdKSwgeSksIGIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQsIG4sIHIpIDogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgZS52YWx1ZXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gRnIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFdjW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIFdjLmxlbmd0aCldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS52YWx1ZXMubWFwKChmdW5jdGlvbihlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGUgLyByICogemM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG8oX2MoX2MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkczogW29dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBWYyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJlY3RhbmdsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdCArIDQ0ICogaSArIGpjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG4gLSBsIC0gamMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IERjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGMoTGMoW10sIGkpLCBLYyhlLCB0LCBuLCBvLCBhLCAicHJvZHVjdGlvbiIgPT09IGQuVmkuREVWRUxPUE1FTlQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LCBuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBaYyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIG9bMF0pIHRocm93IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogbCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm46IGwoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoYVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGk7KSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gMSwgciAmJiAobyA9IDIgJiBhWzBdID8gci5yZXR1cm4gOiBhWzBdID8gci50aHJvdyB8fCAoKG8gPSByLnJldHVybikgJiYgby5jYWxsKHIpLCAwKSA6IHIubmV4dCkgJiYgIShvID0gby5jYWxsKHIsIGFbMV0pKS5kb25lKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSAwLCBvICYmIChhID0gWzIgJiBhWzBdLCBvLnZhbHVlXSksIGFbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwrKywgciA9IGFbMV0sIGEgPSBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gPSBpLnRyeXMsIChvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgfHwgNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gYVswXSAmJiAoIW8gfHwgYVsxXSA+IG9bMF0gJiYgYVsxXSA8IG9bM10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBvWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMV0sIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBpLmxhYmVsIDwgb1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzJdLCBpLm9wcy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFs2LCBlXSwgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNSAmIGFbMF0pIHRocm93IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFthLCBsXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFljID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIFhjID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHFjID0gImNsaXBib2FyZCIgaW4gbmF2aWdhdG9yICYmICJyZWFkVGV4dCIgaW4gbmF2aWdhdG9yLmNsaXBib2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgUWMgPSAiY2xpcGJvYXJkIiBpbiBuYXZpZ2F0b3IgJiYgIndyaXRlVGV4dCIgaW4gbmF2aWdhdG9yLmNsaXBib2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgJGMgPSAiY2xpcGJvYXJkIiBpbiBuYXZpZ2F0b3IgJiYgIndyaXRlIiBpbiBuYXZpZ2F0b3IuY2xpcGJvYXJkICYmICJDbGlwYm9hcmRJdGVtIiBpbiB3aW5kb3cgJiYgInRvQmxvYiIgaW4gSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBKYyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaYyh0aGlzLCAoZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGEubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkLnI4LmV4Y2FsaWRyYXdDbGlwYm9hcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBOaShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHIgPSBKU09OLnN0cmluZ2lmeShuKSwgWWMgPSByLCBhLmxhYmVsID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50cnlzLnB1c2goWzEsIDMsICwgNF0pLCBYYyA9ICExLCBbNCwgYXUocildOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNlbnQoKSwgWzMsIDRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvID0gYS5zZW50KCksIFhjID0gITAsIGNvbnNvbGUuZXJyb3IobyksIFszLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KCksCiAgICAgICAgICAgICAgICAgICAgICAgIGV1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVljKSByZXR1cm4ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKFljKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGUpLCB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0dSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50cmltKCkuc3BsaXQoIlxuIikubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRyaW0oKS5zcGxpdCgiXHQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggJiYgMiAhPT0gdFswXS5sZW5ndGggJiYgKHQgPSBlLnRyaW0oKS5zcGxpdCgiXG4iKS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRyaW0oKS5zcGxpdCgiLCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIDAgPT09IHQubGVuZ3RoKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBCYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAiTm8gdmFsdWVzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0WzBdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQuZXZlcnkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA9PT0gbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICJBbGwgcm93cyBkb24ndCBoYXZlIHNhbWUgbnVtYmVyIG9mIGNvbHVtbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEZjKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnR5cGUgIT09IEhjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gRmMoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IFtdLCBuID0gMDsgbiA8IGVbMF0ubGVuZ3RoOyBuKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gW10sIG8gPSAwOyBvIDwgZS5sZW5ndGg7IG8rKykgci5wdXNoKGVbb11bbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnR5cGUgPT09IEhjKSByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IEhjID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0OiB0LnNwcmVhZHNoZWV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBudSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuLCByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaYyh0aGlzLCAoZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8ubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby50cnlzLnB1c2goWzAsIDUsICwgNl0pLCBlID8gKG4gPSBudWxsID09PSAodCA9IGUuY2xpcGJvYXJkRGF0YSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXREYXRhKCJ0ZXh0L3BsYWluIikudHJpbSgpLCBbMywgNF0pIDogWzMsIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAociA9IHFjKSA/IFs0LCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCldIDogWzMsIDNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBvLnNlbnQoKSwgby5sYWJlbCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHIsIG8ubGFiZWwgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgbiB8fCAiIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uc2VudCgpLCBbMiwgIiJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgcnUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiwgciwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWmModGhpcywgKGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBudShlKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IGEuc2VudCgpKSB8fCB0LmluY2x1ZGVzKENjKSkgcmV0dXJuIFsyLCBldSgpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IHR1KHQpKSByZXR1cm4gWzIsIG5dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBldSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvID0gSlNPTi5wYXJzZSh0KSwgaSA9IG8sIFtkLnI4LmV4Y2FsaWRyYXcsIGQucjguZXhjYWxpZHJhd0NsaXBib2FyZF0uaW5jbHVkZXMobnVsbCA9PSBpID8gdm9pZCAwIDogaS50eXBlKSAmJiBBcnJheS5pc0FycmF5KGkuZWxlbWVudHMpID8gWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBvLmVsZW1lbnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dIDogWzIsIHJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIFhjICYmIHIuZWxlbWVudHMgPyByIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KCksCiAgICAgICAgICAgICAgICAgICAgICAgIG91ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpjKHRoaXMsIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodC5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbbmV3IHdpbmRvdy5DbGlwYm9hcmRJdGVtKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImltYWdlL3BuZyI6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV0pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zZW50KCksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBhdSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaYyh0aGlzLCAoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9ICExLCAhUWMpIHJldHVybiBbMywgNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5sYWJlbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKSwgWzQsIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGUgfHwgIiIpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5zZW50KCksIHQgPSAhMCwgWzMsIDRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gci5zZW50KCksIGNvbnNvbGUuZXJyb3IobiksIFszLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQgJiYgIWl1KGUgfHwgIiAiKSkgdGhyb3cgbmV3IEVycm9yKCJjb3VsZG4ndCBjb3B5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBpdSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gInJ0bCIgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoImRpciIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zdHlsZS5ib3JkZXIgPSAiMCIsIG4uc3R5bGUucGFkZGluZyA9ICIwIiwgbi5zdHlsZS5tYXJnaW4gPSAiMCIsIG4uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiLCBuLnN0eWxlW3QgPyAicmlnaHQiIDogImxlZnQiXSA9ICItOTk5OXB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnN0eWxlLnRvcCA9ICIiLmNvbmNhdChyLCAicHgiKSwgbi5zdHlsZS5mb250U2l6ZSA9ICIxMnB0Iiwgbi5zZXRBdHRyaWJ1dGUoInJlYWRvbmx5IiwgIiIpLCBuLnZhbHVlID0gZSwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2VsZWN0KCksIG4uc2V0U2VsZWN0aW9uUmFuZ2UoMCwgbi52YWx1ZS5sZW5ndGgpLCBvID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnJlbW92ZSgpLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGx1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19wcm90b19fOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5fX3Byb3RvX18gPSB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfHwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgKGVbbl0gPSB0W25dKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIG4gJiYgbnVsbCAhPT0gbikgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiICsgU3RyaW5nKG4pICsgIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUodCwgbiksIHQucHJvdG90eXBlID0gbnVsbCA9PT0gbiA/IE9iamVjdC5jcmVhdGUobikgOiAoci5wcm90b3R5cGUgPSBuLnByb3RvdHlwZSwgbmV3IHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgc3UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAiQ291bGRuJ3QgZXhwb3J0IGNhbnZhcy4iKSwgdm9pZCAwID09PSBuICYmIChuID0gIkNBTlZBU19FUlJPUiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIubmFtZSA9IG4sIHIubWVzc2FnZSA9IHQsIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsdSh0LCBlKSwgdAogICAgICAgICAgICAgICAgICAgICAgICB9KEVycm9yKSwKICAgICAgICAgICAgICAgICAgICAgICAgY3UgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgJiBvWzBdKSB0aHJvdyBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5czogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGwoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IGwoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOiBsKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgKGFbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpOykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDEsIHIgJiYgKG8gPSAyICYgYVswXSA/IHIucmV0dXJuIDogYVswXSA/IHIudGhyb3cgfHwgKChvID0gci5yZXR1cm4pICYmIG8uY2FsbChyKSwgMCkgOiByLm5leHQpICYmICEobyA9IG8uY2FsbChyLCBhWzFdKSkuZG9uZSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyID0gMCwgbyAmJiAoYSA9IFsyICYgYVswXSwgby52YWx1ZV0pLCBhWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIHIgPSBhWzFdLCBhID0gWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvID0gaS50cnlzLCAobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pIHx8IDYgIT09IGFbMF0gJiYgMiAhPT0gYVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFvIHx8IGFbMV0gPiBvWzBdICYmIGFbMV0gPCBvWzNdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gYVswXSAmJiBpLmxhYmVsIDwgb1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdLCBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgaS5sYWJlbCA8IG9bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1syXSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQuY2FsbChlLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbNiwgZV0sIHIgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVswXSA/IGFbMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShbYSwgbF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB1dSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGQucjguZXhjYWxpZHJhdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogZC5wYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogemkoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6ICRuKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG4sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGR1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1KHRoaXMsIChmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoci5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgcmV0dXJuIG4gPSB1dShlLCB0KSwgWzQsIEZlKG5ldyBCbG9iKFtuXSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIHR5cGU6IGQuTE8uZXhjYWxpZHJhdwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBmaWxlTmFtZTogIiIuY29uY2F0KHQubmFtZSwgIi5leGNhbGlkcmF3IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgZGVzY3JpcHRpb246ICJFeGNhbGlkcmF3IGZpbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIGV4dGVuc2lvbnM6IFsiLmV4Y2FsaWRyYXciXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSwgdC5maWxlSGFuZGxlKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVIYW5kbGU6IHIuc2VudCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgcHUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3UodGhpcywgKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBOZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRXhjYWxpZHJhdyBmaWxlcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBuLnNlbnQoKSwgWzIsIE11KHQsIGUpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBodSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuLCByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdSh0aGlzLCAoZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8ubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIGUubG9hZExpYnJhcnkoKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBvLnNlbnQoKSwgbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZC5yOC5leGNhbGlkcmF3TGlicmFyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBkLnBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5OiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgciA9IEpTT04uc3RyaW5naWZ5KG4sIG51bGwsIDIpLCAibGlicmFyeS5leGNhbGlkcmF3bGliIiwgWzQsIEZlKG5ldyBCbG9iKFtyXSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkLkxPLmV4Y2FsaWRyYXdsaWIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogImxpYnJhcnkuZXhjYWxpZHJhd2xpYiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRXhjYWxpZHJhdyBsaWJyYXJ5IGZpbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBbIi5leGNhbGlkcmF3bGliIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uc2VudCgpLCBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgZnUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3UodGhpcywgKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBOZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRXhjYWxpZHJhdyBsaWJyYXJ5IGZpbGVzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IG4uc2VudCgpLCBbNCwgZS5pbXBvcnRMaWJyYXJ5KHQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zZW50KCksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtdShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ3UoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBtdShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBtdShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciB2dSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFtb25kOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsbGlwc2U6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJvdzogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVlZHJhdzogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYnUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSwgbCwgcywgYywgdSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0LnR5cGUgfHwgZS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvbiB8fCAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25Ob25jZTogbnVsbCAhPT0gKG4gPSBlLnZlcnNpb25Ob25jZSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBudWxsICE9PSAociA9IGUuaXNEZWxldGVkKSAmJiB2b2lkIDAgIT09IHIgJiYgciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZS5pZCB8fCBGcigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogZS5maWxsU3R5bGUgfHwgImhhY2h1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBlLnN0cm9rZVdpZHRoIHx8IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IG51bGwgIT09IChvID0gZS5zdHJva2VTdHlsZSkgJiYgdm9pZCAwICE9PSBvID8gbyA6ICJzb2xpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91Z2huZXNzOiBudWxsICE9PSAoYSA9IGUucm91Z2huZXNzKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBudWxsID09IGUub3BhY2l0eSA/IDEwMCA6IGUub3BhY2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogZS5hbmdsZSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUueCB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUueSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBlLnN0cm9rZUNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5iYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGUud2lkdGggfHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGUuaGVpZ2h0IHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZDogbnVsbCAhPT0gKGkgPSBlLnNlZWQpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWRzOiBudWxsICE9PSAobCA9IGUuZ3JvdXBJZHMpICYmIHZvaWQgMCAhPT0gbCA/IGwgOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTaGFycG5lc3M6IG51bGwgIT09IChzID0gZS5zdHJva2VTaGFycG5lc3MpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBaZShlLnR5cGUpID8gInJvdW5kIiA6ICJzaGFycCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50SWRzOiBudWxsICE9PSAoYyA9IGUuYm91bmRFbGVtZW50SWRzKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3UoZ3UoZ3Uoe30sIHUpLCBYcih1KSksIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHl1ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZm9udFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5mb250RmFtaWx5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZvbnQiIGluIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5mb250LnNwbGl0KCIgIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG9bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gcGFyc2VJbnQoYSwgMTApLCByID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBuID0gT2JqZWN0LmVudHJpZXMoZC51dCk7IHQgPCBuLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gblt0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoclsxXS5pbmNsdWRlcyhlKSkgcmV0dXJuIHBhcnNlSW50KG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnJrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1KGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG51bGwgIT09ICh0ID0gZS50ZXh0KSAmJiB2b2lkIDAgIT09IHQgPyB0IDogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlbGluZTogZS5iYXNlbGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogZS50ZXh0QWxpZ24gfHwgZC5IZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IGUudmVydGljYWxBbGlnbiB8fCBkLmhzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZyZWVkcmF3IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1KGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogZS5wb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q29tbWl0dGVkUG9pbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZVByZXNzdXJlOiBlLnNpbXVsYXRlUHJlc3N1cmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzc3VyZXM6IGUucHJlc3N1cmVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImxpbmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRyYXciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImFycm93IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBlLnN0YXJ0QXJyb3doZWFkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHZvaWQgMCA9PT0gbCA/IG51bGwgOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUuZW5kQXJyb3doZWFkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHZvaWQgMCA9PT0gYyA/ICJhcnJvdyIgPT09IGUudHlwZSA/ICJhcnJvdyIgOiBudWxsIDogYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1KGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJkcmF3IiA9PT0gZS50eXBlID8gImxpbmUiIDogZS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRCaW5kaW5nOiBlLnN0YXJ0QmluZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEJpbmRpbmc6IGUuZW5kQmluZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogIUFycmF5LmlzQXJyYXkoZS5wb2ludHMpIHx8IGUucG9pbnRzLmxlbmd0aCA8IDIgPyBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlLndpZHRoLCBlLmhlaWdodF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gOiBlLnBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDb21taXR0ZWRQb2ludDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXJyb3doZWFkOiB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVsbGlwc2UiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInJlY3RhbmdsZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGlhbW9uZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidShlLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgd3UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgfHwgW10pLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic2VsZWN0aW9uIiAhPT0gdC50eXBlICYmICFacih0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHl1KHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIGUucHVzaChuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB4dSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFhuKCksIHIgPSB7fSwgbyA9IDAsIGEgPSBPYmplY3QuZW50cmllcyhuKTsgbyA8IGEubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGFbb10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGVbbF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0ID8gdFtsXSA6IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2xdID0gdm9pZCAwICE9PSBjID8gYyA6IHZvaWQgMCAhPT0gdSA/IHUgOiBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3UoZ3Uoe30sIHIpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiB2dVtyLmVsZW1lbnRUeXBlXSA/IHIuZWxlbWVudFR5cGUgOiAic2VsZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAibnVtYmVyIiA9PSB0eXBlb2YgZS56b29tID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS56b29tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbjogbi56b29tLnRyYW5zbGF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGUuem9vbSB8fCBuLnpvb20KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEV1ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogd3UobnVsbCA9PSBlID8gdm9pZCAwIDogZS5lbGVtZW50cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHh1KG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuYXBwU3RhdGUsIHQgfHwgbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga3UgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgJiBvWzBdKSB0aHJvdyBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5czogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGwoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IGwoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOiBsKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgKGFbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpOykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDEsIHIgJiYgKG8gPSAyICYgYVswXSA/IHIucmV0dXJuIDogYVswXSA/IHIudGhyb3cgfHwgKChvID0gci5yZXR1cm4pICYmIG8uY2FsbChyKSwgMCkgOiByLm5leHQpICYmICEobyA9IG8uY2FsbChyLCBhWzFdKSkuZG9uZSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyID0gMCwgbyAmJiAoYSA9IFsyICYgYVswXSwgby52YWx1ZV0pLCBhWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIHIgPSBhWzFdLCBhID0gWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvID0gaS50cnlzLCAobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pIHx8IDYgIT09IGFbMF0gJiYgMiAhPT0gYVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFvIHx8IGFbMV0gPiBvWzBdICYmIGFbMV0gPCBvWzNdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gYVswXSAmJiBpLmxhYmVsIDwgb1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdLCBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgaS5sYWJlbCA8IG9bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1syXSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQuY2FsbChlLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbNiwgZV0sIHIgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVswXSA/IGFbMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShbYSwgbF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBTdShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3UoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBTdShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBTdShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBPdSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrdSh0aGlzLCAoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImltYWdlL3BuZyIgIT09IGUudHlwZSkgcmV0dXJuIFszLCA2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmxhYmVsID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci50cnlzLnB1c2goWzEsIDQsICwgNV0pLCBbNCwgUHJvbWlzZS5hbGwoW24uZSg3MzYpLCBuLmUoOSldKS50aGVuKG4uYmluZChuLCA4NTI3KSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgci5zZW50KCkuZGVjb2RlUG5nTWV0YWRhdGEoZSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgci5zZW50KCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJJTlZBTElEIiA9PT0gci5zZW50KCkubWVzc2FnZSA/IG5ldyBFcnJvcihPKCJhbGVydHMuaW1hZ2VEb2VzTm90Q29udGFpblNjZW5lIikpIDogbmV3IEVycm9yKE8oImFsZXJ0cy5jYW5ub3RSZXN0b3JlRnJvbUltYWdlIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMTVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAidGV4dCIgaW4gQmxvYiA/IFs0LCBlLnRleHQoKV0gOiBbMywgOF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSByLnNlbnQoKSwgWzMsIDEwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IEZpbGVSZWFkZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucmVhZEFzVGV4dChlLCAidXRmOCIpLCBuLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5yZWFkeVN0YXRlID09PSBGaWxlUmVhZGVyLkRPTkUgJiYgdChuLnJlc3VsdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHIuc2VudCgpLCByLmxhYmVsID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiaW1hZ2Uvc3ZnK3htbCIgIT09IGUudHlwZSkgcmV0dXJuIFszLCAxNV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5sYWJlbCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci50cnlzLnB1c2goWzExLCAxNCwgLCAxNV0pLCBbNCwgUHJvbWlzZS5hbGwoW24uZSg3MzYpLCBuLmUoOSldKS50aGVuKG4uYmluZChuLCA4NTI3KSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIHIuc2VudCgpLmRlY29kZVN2Z01ldGFkYXRhKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHIuc2VudCgpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIklOVkFMSUQiID09PSByLnNlbnQoKS5tZXNzYWdlID8gbmV3IEVycm9yKE8oImFsZXJ0cy5pbWFnZURvZXNOb3RDb250YWluU2NlbmUiKSkgOiBuZXcgRXJyb3IoTygiYWxlcnRzLmNhbm5vdFJlc3RvcmVGcm9tSW1hZ2UiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgdF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgTXUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga3UodGhpcywgKGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBPdShlKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8uc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUudHlwZSkgPT09IGQucjguZXhjYWxpZHJhdyAmJiAoIWUuZWxlbWVudHMgfHwgQXJyYXkuaXNBcnJheShlLmVsZW1lbnRzKSAmJiAoIWUuYXBwU3RhdGUgfHwgIm9iamVjdCIgPT0gdHlwZW9mIGUuYXBwU3RhdGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShyID0gSlNPTi5wYXJzZShuKSkpIHRocm93IG5ldyBFcnJvcihPKCJhbGVydHMuY291bGROb3RMb2FkSW52YWxpZEZpbGUiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgRXUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHppKHIuZWxlbWVudHMgfHwgW10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IEN1KEN1KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbnVsbCA9PSB0ID8gdm9pZCAwIDogdC50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSGFuZGxlOiAhZS50eXBlLnN0YXJ0c1dpdGgoImltYWdlLyIpICYmIGUuaGFuZGxlIHx8IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICRuKHIuYXBwU3RhdGUgfHwge30pKSwgdCA/IFdpKHIuZWxlbWVudHMgfHwgW10sIHQpIDoge30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgY29uc29sZS5lcnJvcihlLm1lc3NhZ2UpLCBuZXcgRXJyb3IoTygiYWxlcnRzLmNvdWxkTm90TG9hZEludmFsaWRGaWxlIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgUHUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga3UodGhpcywgKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBPdShlKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSByLnNlbnQoKSwgKG4gPSBKU09OLnBhcnNlKHQpKS50eXBlICE9PSBkLnI4LmV4Y2FsaWRyYXdMaWJyYXJ5KSB0aHJvdyBuZXcgRXJyb3IoTygiYWxlcnRzLmNvdWxkTm90TG9hZEludmFsaWRGaWxlIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgSXUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga3UodGhpcywgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvQmxvYigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIHJldHVybiBuKG5ldyBzdShPKCJjYW52YXNFcnJvci5jYW52YXNUb29CaWciKSwgIkNBTlZBU19QT1NTSUJMWV9UT09fQklHIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBUdSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIG9bMF0pIHRocm93IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogbCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm46IGwoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoYVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGk7KSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gMSwgciAmJiAobyA9IDIgJiBhWzBdID8gci5yZXR1cm4gOiBhWzBdID8gci50aHJvdyB8fCAoKG8gPSByLnJldHVybikgJiYgby5jYWxsKHIpLCAwKSA6IHIubmV4dCkgJiYgIShvID0gby5jYWxsKHIsIGFbMV0pKS5kb25lKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSAwLCBvICYmIChhID0gWzIgJiBhWzBdLCBvLnZhbHVlXSksIGFbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwrKywgciA9IGFbMV0sIGEgPSBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gPSBpLnRyeXMsIChvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgfHwgNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gYVswXSAmJiAoIW8gfHwgYVsxXSA+IG9bMF0gJiYgYVsxXSA8IG9bM10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBvWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMV0sIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBpLmxhYmVsIDwgb1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzJdLCBpLm9wcy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFs2LCBlXSwgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNSAmIGFbMF0pIHRocm93IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFthLCBsXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEx1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlLCB0LCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEsIGksIGwsIHMsIGMsIHUsIGQsIHAsIGgsIGYgPSBvLmV4cG9ydEJhY2tncm91bmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBvLmV4cG9ydFBhZGRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSB2b2lkIDAgPT09IG0gPyAxMCA6IG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBvLnZpZXdCYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBvLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBvLnNjYWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gdm9pZCAwID09PSB5ID8gMSA6IHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBvLnNob3VsZEFkZFdhdGVybWFyazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHUodGhpcywgKGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoTygiYWxlcnRzLmNhbm5vdEV4cG9ydEVtcHR5Q2FudmFzIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAic3ZnIiAhPT0gZSAmJiAiY2xpcGJvYXJkLXN2ZyIgIT09IGUgPyBbMywgN10gOiAoaSA9IE1jLCBsID0gW3RdLCBzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRXaXRoRGFya01vZGU6IHIuZXhwb3J0V2l0aERhcmtNb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRQYWRkaW5nOiBnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQWRkV2F0ZXJtYXJrOiB4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgci5leHBvcnRFbWJlZFNjZW5lICYmICJzdmciID09PSBlID8gWzQsIFByb21pc2UuYWxsKFtuLmUoNzM2KSwgbi5lKDkpXSkudGhlbihuLmJpbmQobiwgODUyNykpXSA6IFszLCAzXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBvLnNlbnQoKS5lbmNvZGVTdmdNZXRhZGF0YSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHV1KHQsIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjID0gby5zZW50KCksIFszLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdm9pZCAwLCBvLmxhYmVsID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9IGkuYXBwbHkodm9pZCAwLCBsLmNvbmNhdChbKHMubWV0YWRhdGEgPSBjLCBzKV0pKSwgInN2ZyIgIT09IGUgPyBbMywgNl0gOiBbNCwgRmUobmV3IEJsb2IoW2Eub3V0ZXJIVE1MXSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW1hZ2Uvc3ZnK3htbCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogIiIuY29uY2F0KGIsICIuc3ZnIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiLnN2ZyJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnNlbnQoKSwgWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiY2xpcGJvYXJkLXN2ZyIgPT09IGUpIHJldHVybiBhdShhLm91dGVySFRNTCksIFsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmxhYmVsID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHUgPSBPYyh0LCByLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydEJhY2tncm91bmQ6IGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCYWNrZ3JvdW5kQ29sb3I6IHYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFBhZGRpbmc6IGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiB3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRBZGRXYXRlcm1hcms6IHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuc3R5bGUuZGlzcGxheSA9ICJub25lIiwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh1KSwgWzQsIEl1KHUpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZCA9IG8uc2VudCgpLCB1LnJlbW92ZSgpLCAicG5nIiAhPT0gZSA/IFszLCAxM10gOiAocCA9ICIiLmNvbmNhdChiLCAiLnBuZyIpLCByLmV4cG9ydEVtYmVkU2NlbmUgPyBbNCwgUHJvbWlzZS5hbGwoW24uZSg3MzYpLCBuLmUoOSldKS50aGVuKG4uYmluZChuLCA4NTI3KSldIDogWzMsIDExXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBvLnNlbnQoKS5lbmNvZGVQbmdNZXRhZGF0YSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2I6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB1dSh0LCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IG8uc2VudCgpLCBvLmxhYmVsID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgRmUoZCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogWyIucG5nIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnNlbnQoKSwgWzMsIDE3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJjbGlwYm9hcmQiICE9PSBlKSByZXR1cm4gWzMsIDE3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmxhYmVsID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnRyeXMucHVzaChbMTQsIDE2LCAsIDE3XSksIFs0LCBvdShkKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnNlbnQoKSwgWzMsIDE3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJDQU5WQVNfUE9TU0lCTFlfVE9PX0JJRyIgPT09IChoID0gby5zZW50KCkpLm5hbWUpIHRocm93IGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE8oImFsZXJ0cy5jb3VsZE5vdENvcHlUb0NsaXBib2FyZCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBBdSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIG9bMF0pIHRocm93IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogbCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm46IGwoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoYVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGk7KSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gMSwgciAmJiAobyA9IDIgJiBhWzBdID8gci5yZXR1cm4gOiBhWzBdID8gci50aHJvdyB8fCAoKG8gPSByLnJldHVybikgJiYgby5jYWxsKHIpLCAwKSA6IHIubmV4dCkgJiYgIShvID0gby5jYWxsKHIsIGFbMV0pKS5kb25lKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSAwLCBvICYmIChhID0gWzIgJiBhWzBdLCBvLnZhbHVlXSksIGFbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwrKywgciA9IGFbMV0sIGEgPSBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gPSBpLnRyeXMsIChvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgfHwgNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gYVswXSAmJiAoIW8gfHwgYVsxXSA+IG9bMF0gJiYgYVsxXSA8IG9bM10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBvWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMV0sIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBpLmxhYmVsIDwgb1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzJdLCBpLm9wcy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFs2LCBlXSwgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNSAmIGFbMF0pIHRocm93IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFthLCBsXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF91KGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEdShlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IF91KE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IF91KE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGp1LCB6dSwgQnU7CiAgICAgICAgICAgICAgICAgICAgdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlUHJvamVjdE5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2MoImNoYW5nZSIsICJ0aXRsZSIpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IER1KER1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS51cGRhdGVEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmFwcFByb3BzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHVjLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5maWxlVGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5uYW1lIHx8ICJVbm5hbWVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOYW1lRWRpdGFibGU6IHZvaWQgMCA9PT0gci5uYW1lICYmICF0LnZpZXdNb2RlRW5hYmxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJjaGFuZ2VFeHBvcnRCYWNrZ3JvdW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogRHUoRHUoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdC5leHBvcnRCYWNrZ3JvdW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKGUudGFyZ2V0LmNoZWNrZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksICIgIiwgTygibGFiZWxzLndpdGhCYWNrZ3JvdW5kIikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY2hhbmdlRXhwb3J0RW1iZWRTY2VuZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IER1KER1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0RW1iZWRTY2VuZTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0LmV4cG9ydEVtYmVkU2NlbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oZS50YXJnZXQuY2hlY2tlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgIiAiLCBPKCJsYWJlbHMuZXhwb3J0RW1iZWRTY2VuZSIpLCB1KCkuY3JlYXRlRWxlbWVudChkYywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuZXhwb3J0RW1iZWRTY2VuZV9kZXRhaWxzIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJhYm92ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZzogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVG9vbHRpcEljb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB2bCkpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNoYW5nZVNob3VsZEFkZFdhdGVybWFyayIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IER1KER1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQWRkV2F0ZXJtYXJrOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdC5zaG91bGRBZGRXYXRlcm1hcmssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oZS50YXJnZXQuY2hlY2tlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgIiAiLCBPKCJsYWJlbHMuYWRkV2F0ZXJtYXJrIikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAic2F2ZVNjZW5lIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogKGp1ID0gKDAsIGguWikoKGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBvLCBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEF1KHRoaXMsIChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAhIXQuZmlsZUhhbmRsZSwgbi5sYWJlbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRyeXMucHVzaChbMSwgMywgLCA0XSksIFs0LCBkdShlLCB0KV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvID0gbi5zZW50KCkuZmlsZUhhbmRsZSwgWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBEdShEdSh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVIYW5kbGU6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZTogciA/IG8ubmFtZSA/IE8oInRvYXN0LmZpbGVTYXZlZFRvRmlsZW5hbWUiKS5yZXBsYWNlKCJ7ZmlsZW5hbWV9IiwgJyInLmNvbmNhdChvLm5hbWUsICciJykpIDogTygidG9hc3QuZmlsZVNhdmVkIikgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkFib3J0RXJyb3IiICE9PSAobnVsbCA9PSAoYSA9IG4uc2VudCgpKSA/IHZvaWQgMCA6IGEubmFtZSkgJiYgY29uc29sZS5lcnJvcihhKSwgWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqdS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5rZXkgPT09IG1uICYmIGVbSnRdICYmICFlLnNoaWZ0S2V5CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG9sLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJidXR0b25zLnNhdmUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuc2F2ZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBcmlhTGFiZWw6IHBoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0KG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAic2F2ZS1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInNhdmVBc1NjZW5lIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogKHp1ID0gKDAsIGguWikoKGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEF1KHRoaXMsIChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRyeXMucHVzaChbMCwgMiwgLCAzXSksIFs0LCBkdShlLCBEdShEdSh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUhhbmRsZTogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSBuLnNlbnQoKS5maWxlSGFuZGxlLCBbMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IER1KER1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUhhbmRsZTogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJBYm9ydEVycm9yIiAhPT0gKG51bGwgPT0gKG8gPSBuLnNlbnQoKSkgPyB2b2lkIDAgOiBvLm5hbWUpICYmIGNvbnNvbGUuZXJyb3IobyksIFsyLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4genUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUua2V5ID09PSBtbiAmJiBlLnNoaWZ0S2V5ICYmIGVbSnRdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJidXR0b25zLnNhdmVBcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy5zYXZlQXMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QXJpYUxhYmVsOiBwaCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIUJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdChudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRhdGEtdGVzdGlkIjogInNhdmUtYXMtYnV0dG9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJsb2FkU2NlbmUiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiAoQnUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIG8sIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXUodGhpcywgKGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkudHJ5cy5wdXNoKFswLCAyLCAsIDNdKSwgWzQsIHB1KHQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBpLnNlbnQoKSwgciA9IG4uZWxlbWVudHMsIG8gPSBuLmFwcFN0YXRlLCBbMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkFib3J0RXJyb3IiID09PSAobnVsbCA9PSAoYSA9IGkuc2VudCgpKSA/IHZvaWQgMCA6IGEubmFtZSkgPyBbMiwgITFdIDogWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogRHUoRHUoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJ1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW0p0XSAmJiBlLmtleSA9PT0gZG4KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGlsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJidXR0b25zLmxvYWQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMubG9hZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBcmlhTGFiZWw6IHBoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAibG9hZC1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImV4cG9ydFdpdGhEYXJrTW9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IER1KER1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0V2l0aERhcmtNb2RlOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAiZmxleC1lbmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICItNDVweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogIjEwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoUXMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5leHBvcnRXaXRoRGFya01vZGUgPyAiZGFyayIgOiAibGlnaHQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oImRhcmsiID09PSBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImxhYmVscy50b2dnbGVFeHBvcnRDb2xvclNjaGVtZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIdShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTnUoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBIdShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBIdShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBSdSA9ICJ7fSIsCiAgICAgICAgICAgICAgICAgICAgICAgIEZ1ID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImNvcHlTdHlsZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5maW5kKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnNlbGVjdGVkRWxlbWVudElkc1tlLmlkXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiAoUnUgPSBKU09OLnN0cmluZ2lmeShuKSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IE51KE51KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZTogTygidG9hc3QuY29weVN0eWxlcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuY29weVN0eWxlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbSnRdICYmIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gSHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFd1ID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInBhc3RlU3R5bGVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9IEpTT04ucGFyc2UoUnUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAidGV4dCIgIT09IChudWxsID09IChuID0gcikgPyB2b2lkIDAgOiBuLnR5cGUpICYmICJkaWFtb25kIiAhPT0gKG51bGwgPT0gbiA/IHZvaWQgMCA6IG4udHlwZSkgJiYgInJlY3RhbmdsZSIgIT09IChudWxsID09IG4gPyB2b2lkIDAgOiBuLnR5cGUpICYmICJlbGxpcHNlIiAhPT0gKG51bGwgPT0gbiA/IHZvaWQgMCA6IG4udHlwZSkgJiYgImFycm93IiAhPT0gKG51bGwgPT0gbiA/IHZvaWQgMCA6IG4udHlwZSkgJiYgImZyZWVkcmF3IiAhPT0gKG51bGwgPT0gbiA/IHZvaWQgMCA6IG4udHlwZSkgJiYgImxpbmUiICE9PSAobnVsbCA9PSBuID8gdm9pZCAwIDogbi50eXBlKSA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnNlbGVjdGVkRWxlbWVudElkc1tlLmlkXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG51bGwgPT0gciA/IHZvaWQgMCA6IHIuYmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogbnVsbCA9PSByID8gdm9pZCAwIDogci5zdHJva2VXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IG51bGwgPT0gciA/IHZvaWQgMCA6IHIuc3Ryb2tlQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBudWxsID09IHIgPyB2b2lkIDAgOiByLnN0cm9rZVN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IG51bGwgPT0gciA/IHZvaWQgMCA6IHIuZmlsbFN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBudWxsID09IHIgPyB2b2lkIDAgOiByLm9wYWNpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdWdobmVzczogbnVsbCA9PSByID8gdm9pZCAwIDogci5yb3VnaG5lc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmUobikgJiYgKEdyKG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IChudWxsID09IHIgPyB2b2lkIDAgOiByLmZvbnRTaXplKSB8fCBkLm41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAobnVsbCA9PSByID8gdm9pZCAwIDogci5mb250RmFtaWx5KSB8fCBkLnJrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IChudWxsID09IHIgPyB2b2lkIDAgOiByLnRleHRBbGlnbikgfHwgZC5IZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBNaShuKSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbUxhYmVsOiAibGFiZWxzLnBhc3RlU3R5bGVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5hbHRLZXkgJiYgZS5jb2RlID09PSBWdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgVnUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJoZWxwLWljb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGUub25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KGUudGl0bGUsICIg4oCUID8iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IGUudGl0bGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZsKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBHdShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gS3UoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBHdShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBHdShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInRvZ2dsZUNhbnZhc01lbnUiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBLdShLdSh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5NZW51OiAiY2FudmFzIiA9PT0gdC5vcGVuTWVudSA/IG51bGwgOiAiY2FudmFzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogZmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLm1lbnUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiAiY2FudmFzIiA9PT0gdC5vcGVuTWVudQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ0b2dnbGVFZGl0TWVudSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IEt1KEt1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk1lbnU6ICJzaGFwZSIgPT09IHQub3Blbk1lbnUgPyBudWxsIDogInNoYXBlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogUGkobiwgX2kodCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGNsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygiYnV0dG9ucy5lZGl0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogInNoYXBlIiA9PT0gbi5vcGVuTWVudQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ0b2dnbGVGdWxsU2NyZWVuIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSG4oKSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKSwgSG4oKSAmJiBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jb2RlID09PSBGdCAmJiAhZVtKdF0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ0b2dnbGVTaG9ydGN1dHMiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHIuZm9jdXNDb250YWluZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zaG93SGVscERpYWxvZyAmJiBvKCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogS3UoS3Uoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93SGVscERpYWxvZzogIXQuc2hvd0hlbHBEaWFsb2cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudChWdSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJoZWxwRGlhbG9nLnRpdGxlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUua2V5ID09PSBybgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIFV1ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWnUoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFl1KGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gWnUoT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogWnUoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgWHUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE5pKF9pKGUpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmxlbmd0aCA+PSAyICYmICEgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmxlbmd0aCA+PSAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnJlZHVjZSgoZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgYW8obiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksICEwKSkgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbiA9IDAsIHIgPSBlWzBdLmdyb3VwSWRzOyBuIDwgci5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0KHJbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiBvKSByZXR1cm4gby52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHF1ID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImdyb3VwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE5pKF9pKGUpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5sZW5ndGggPCAyKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcm8odCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gclswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuZXcgU2V0KGlvKGUsIG8pLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5ldyBTZXQobi5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBTZXQoVXUoVXUoW10sIEFycmF5LmZyb20oYSkpLCBBcnJheS5mcm9tKGkpKSkuc2l6ZSA9PT0gYS5zaXplKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IEZyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2VsZWN0ZWRFbGVtZW50SWRzW2UuaWRdID8gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWRzOiBsbyhlLmdyb3VwSWRzLCBsLCB0LmVkaXRpbmdHcm91cElkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlvKHMsIGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gY1tjLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gcy5sYXN0SW5kZXhPZih1KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHMuc2xpY2UoZCArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gcy5zbGljZSgwLCBkKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYW8oZSwgbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gVXUoVXUoVXUoW10sIGgpLCBjKSwgcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGVvKGwsIFl1KFl1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfaShmKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuZ3JvdXAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1QcmVkaWNhdGU6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWHUoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlLnNoaWZ0S2V5ICYmIGVbSnRdICYmIGUuY29kZSA9PT0gUnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIVh1KHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoamwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLmdyb3VwIiksICIg4oCUICIpLmNvbmNhdChObigiQ3RybE9yQ21kK0ciKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogTygibGFiZWxzLmdyb3VwIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IEhpKF9pKHQpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBRdSA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ1bmdyb3VwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gcm8odCkubGVuZ3RoKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUuZ3JvdXBJZHMsIHQuc2VsZWN0ZWRHcm91cElkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmxlbmd0aCA9PT0gZS5ncm91cElkcy5sZW5ndGggPyBlIDogS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZHM6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IG9vKFl1KFl1KHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfaShuKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zaGlmdEtleSAmJiBlW0p0XSAmJiBlLmNvZGUgPT09IFJ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy51bmdyb3VwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtUHJlZGljYXRlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvKHQpLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46IDAgPT09IHJvKG4pLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoemwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLnVuZ3JvdXAiKSwgIiDigJQgIikuY29uY2F0KE5uKCJDdHJsT3JDbWQrU2hpZnQrRyIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJsYWJlbHMudW5ncm91cCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgJHUgPSAobigyNzg5KSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmJvcmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vbkNsaWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQXZhdGFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICIxcHggc29saWQgIi5jb25jYXQocikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKdShlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZWQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBKdShPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBKdShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImdvVG9Db2xsYWJvcmF0b3IiLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZWQoZWQoZWQoe30sIHQpLCBGaSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lUG9pbnQ6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0RGltZW5zaW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHQuaGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHQuem9vbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk1lbnU6ICJjYW52YXMiID09PSB0Lm9wZW5NZW51ID8gbnVsbCA6IHQub3Blbk1lbnUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS51cGRhdGVEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdC5jb2xsYWJvcmF0b3JzLmdldChyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHBjKHIsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhLmJhY2tncm91bmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGEuc3Ryb2tlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgcmV0dXJuICI/IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRyaW0oKS5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPCAyKSByZXR1cm4gdFswXS5zdWJzdHJpbmcoMCwgMikudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbdC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuWzBdICsgclswXSkudG9VcHBlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oby51c2VybmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoJHUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKG8ucG9pbnRlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSB0Lmxlbmd0aCwgbyA9IGUubGVuZ3RoOyBuIDwgcjsgbisrLCBvKyspIGVbb10gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbmQgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYWRkVG9MaWJyYXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IE5pKF9pKGUpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5saWJyYXJ5LmxvYWRMaWJyYXJ5KCkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmxpYnJhcnkuc2F2ZUxpYnJhcnkodGQodGQoW10sIGUpLCBbby5tYXAodm8pXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuYWRkVG9MaWJyYXJ5IgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcmQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7IG4gPCByOyBuKyssIG8rKykgZVtvXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBvZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBvZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IE1hcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDAgPT09IGUuZ3JvdXBJZHMubGVuZ3RoID8gZS5pZCA6IGUuZ3JvdXBJZHNbZS5ncm91cElkcy5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuZ2V0KG4pIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2V0KG4sIHJkKHJkKFtdLCByKSwgW2VdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgQXJyYXkuZnJvbSh0LnZhbHVlcygpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBsZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBvLCBhLCBpID0gbi5heGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBuLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzZChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gIngiID09PSBpID8gWyJtaW5YIiwgIm1heFgiXSA6IFsibWluWSIsICJtYXhZIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWQoYWQoe30sIHApLCB7fSwgInN0YXJ0IiA9PT0gbCA/ICgociA9IHt9KVtpXSA9IHRbdV0gLSBzW3VdLCByKSA6ICJlbmQiID09PSBsID8gKChvID0ge30pW2ldID0gdFtkXSAtIHNbZF0sIG8pIDogKChhID0ge30pW2ldID0gKHRbdV0gKyB0W2RdKSAvIDIgLSAoc1t1XSArIHNbZF0pIC8gMiwgYSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBtdChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5ZOiB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFg6IHRbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WTogdFszXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjZCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOaShfaShlKSwgdCkubGVuZ3RoID4gMQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB1ZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGlkKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHNkKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5mbGF0TWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGxkKGUsIHIsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgbi54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnkgKyBuLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oTmkoX2koZSksIHQpLCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gTGkocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1tlLmlkXSB8fCBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGQgPSAodXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImFsaWduVG9wIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHVkKGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAic3RhcnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpczogInkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5zaGlmdEtleSAmJiBlLmtleSA9PT0gcXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIWNkKHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoa2wsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLmFsaWduVG9wIiksICIg4oCUICIpLmNvbmNhdChObigiQ3RybE9yQ21kK1NoaWZ0K1VwIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5hbGlnblRvcCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImFsaWduQm90dG9tIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHVkKGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXM6ICJ5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbSnRdICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09IFp0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46ICFjZCh0LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KFNsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KE8oImxhYmVscy5hbGlnbkJvdHRvbSIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkN0cmxPckNtZCtTaGlmdCtEb3duIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5hbGlnbkJvdHRvbSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImFsaWduTGVmdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB1ZChlLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogInN0YXJ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXM6ICJ4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbSnRdICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09IFl0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46ICFjZCh0LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KENsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KE8oImxhYmVscy5hbGlnbkxlZnQiKSwgIiDigJQgIikuY29uY2F0KE5uKCJDdHJsT3JDbWQrU2hpZnQrTGVmdCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJsYWJlbHMuYWxpZ25MZWZ0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IEhpKF9pKHQpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYWxpZ25SaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB1ZChlLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImVuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzOiAieCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW0p0XSAmJiBlLnNoaWZ0S2V5ICYmIGUua2V5ID09PSBYdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsQ29tcG9uZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiAhY2QodCwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudChPbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IG4udGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIobnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChPKCJsYWJlbHMuYWxpZ25SaWdodCIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkN0cmxPckNtZCtTaGlmdCtSaWdodCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJsYWJlbHMuYWxpZ25SaWdodCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImFsaWduVmVydGljYWxseUNlbnRlcmVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHVkKGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXM6ICJ5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIWNkKHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoSWwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJsYWJlbHMuY2VudGVyVmVydGljYWxseSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5jZW50ZXJWZXJ0aWNhbGx5IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IEhpKF9pKHQpLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYWxpZ25Ib3Jpem9udGFsbHlDZW50ZXJlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB1ZChlLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzOiAieCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46ICFjZCh0LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KFRsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygibGFiZWxzLmNlbnRlckhvcml6b250YWxseSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5jZW50ZXJIb3Jpem9udGFsbHkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogSGkoX2kodCksIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBwZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IE1hcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDAgPT09IGUuZ3JvdXBJZHMubGVuZ3RoID8gZS5pZCA6IGUuZ3JvdXBJZHNbZS5ncm91cElkcy5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuZ2V0KG4pIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2V0KG4sIGRkKGRkKFtdLCByKSwgW2VdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgQXJyYXkuZnJvbSh0LnZhbHVlcygpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBoZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbXQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblg6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFk6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8gLSBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYSAtIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkWDogKG4gKyBvKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkWTogKHIgKyBhKSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmkoX2koZSksIHQpLmxlbmd0aCA+IDEKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbWQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9ICJ4IiA9PT0gdC5heGlzID8gWyJtaW5YIiwgIm1pZFgiLCAibWF4WCIsICJ3aWR0aCJdIDogWyJtaW5ZIiwgIm1pZFkiLCAibWF4WSIsICJoZWlnaHQiXSwgciA9IG5bMF0sIG8gPSBuWzFdLCBhID0gblsyXSwgaSA9IG5bM10sIGwgPSBoZChlKSwgcyA9IHBkKGUpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZSwgaGQoZSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuc29ydCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdW29dIC0gdFsxXVtvXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBjID0gMCwgdSA9IDAsIGQgPSBzOyB1IDwgZC5sZW5ndGg7IHUrKykgYyArPSBkW3VdWzFdW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IChsW2ldIC0gYykgLyAocy5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHMuZmluZEluZGV4KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzFdW3JdID09PSBsW3JdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBzLmZpbmRJbmRleCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsxXVthXSA9PT0gbFthXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gKHNbZl1bMV1bb10gLSBzW2hdWzFdW29dKSAvIChzLmxlbmd0aCAtIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBzW2hdWzFdW29dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuZmxhdE1hcCgoZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICE9PSBoICYmIG4gIT09IGYgJiYgKGcgKz0gbSwgaVt0LmF4aXNdID0gZyAtIGFbb10pLCByLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgaS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS55ICsgaS55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGxbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmZsYXRNYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhW3QuYXhpc10gPSB2IC0gb1tyXSwgdiArPSBwLCB2ICs9IG9baV0sIG4ubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgYS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnkgKyBhLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oTmkoX2koZSksIHQpLCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gTGkocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1tlLmlkXSB8fCBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2QgPSAodXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRpc3RyaWJ1dGVIb3Jpem9udGFsbHkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogbWQoZSwgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2U6ICJiZXR3ZWVuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXM6ICJ4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gV3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW5lbENvbXBvbmVudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnVwZGF0ZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogIWZkKHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoTWwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBuLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoTygibGFiZWxzLmRpc3RyaWJ1dGVIb3Jpem9udGFsbHkiKSwgIiDigJQgIikuY29uY2F0KE5uKCJBbHQrSCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJsYWJlbHMuZGlzdHJpYnV0ZUhvcml6b250YWxseSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRpc3RyaWJ1dGVWZXJ0aWNhbGx5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IG1kKGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlOiAiYmV0d2VlbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzOiAieSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFsdEtleSAmJiBlLmNvZGUgPT09IFZ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46ICFmZCh0LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KFBsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbi50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KE8oImxhYmVscy5kaXN0cmlidXRlVmVydGljYWxseSIpLCAiIOKAlCAiKS5jb25jYXQoTm4oIkFsdCtWIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5kaXN0cmlidXRlVmVydGljYWxseSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBIaShfaSh0KSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImZsaXBIb3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogYmQoZSwgdCwgImhvcml6b250YWwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNoaWZ0S2V5ICYmICJLZXlIIiA9PT0gZS5jb2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5mbGlwSG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbVByZWRpY2F0ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gTmkoX2koZSksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gbi5sZW5ndGggJiYgInRleHQiICE9PSBuWzBdLnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgdmQgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiZmxpcFZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogYmQoZSwgdCwgInZlcnRpY2FsIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zaGlmdEtleSAmJiAiS2V5ViIgPT09IGUuY29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuZmxpcFZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtUHJlZGljYXRlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IE5pKF9pKGUpLCB0KS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBiZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTmkoX2koZSksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIubGVuZ3RoID4gMSkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHlkKHIsIHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBMaShvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhW2UuaWRdIHx8IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB5ZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKykgd2QoZVtyXSwgdCksICJ2ZXJ0aWNhbCIgPT09IG4gJiYgeGQoZVtyXSwgTWF0aC5QSSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB3ZCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBtaShlLmFuZ2xlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChVZShlKSB8fCBHZShlKSkgJiYgKGwgPSAyICogZS5wb2ludHMucmVkdWNlKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGUsIHRbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgMCkgLSBlLndpZHRoKSwgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBtaSgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IE9vKGUsIHQuem9vbSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBzLm53OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgfHwgKGMgPSAhMSwgZCA9IHMubmUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFVlKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSAxOyBwIDwgZS5wb2ludHMubGVuZ3RoOyBwKyspIHphLm1vdmVQb2ludChlLCBwLCBbLWUucG9pbnRzW3BdWzBdLCBlLnBvaW50c1twXVsxXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6YS5ub3JtYWxpemVQb2ludHMoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdSA9IGMgPyBlLnggKyAyICogbyA6IGUueCAtIDIgKiBvLCB4aShlLCAhMCwgZSwgYyA/ICJudyIgOiAibmUiLCAhMSwgdSwgZFsxXSksIEdyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gbWkoMiAqIE1hdGguUEkgLSBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoIDwgMCAmJiAoaCA9IG1pKGggKyAyICogTWF0aC5QSSkpLCBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIEdyKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbiArIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJGEoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHhkID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUueSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbWkoZS5hbmdsZSArIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA8IDAgJiYgKG8gPSBtaSgyICogTWF0aC5QSSArIG8pKSwgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgR3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgRWQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgJiBvWzBdKSB0aHJvdyBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5czogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGwoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IGwoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOiBsKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgKGFbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpOykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDEsIHIgJiYgKG8gPSAyICYgYVswXSA/IHIucmV0dXJuIDogYVswXSA/IHIudGhyb3cgfHwgKChvID0gci5yZXR1cm4pICYmIG8uY2FsbChyKSwgMCkgOiByLm5leHQpICYmICEobyA9IG8uY2FsbChyLCBhWzFdKSkuZG9uZSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyID0gMCwgbyAmJiAoYSA9IFsyICYgYVswXSwgby52YWx1ZV0pLCBhWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIHIgPSBhWzFdLCBhID0gWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvID0gaS50cnlzLCAobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pIHx8IDYgIT09IGFbMF0gJiYgMiAhPT0gYVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFvIHx8IGFbMV0gPiBvWzBdICYmIGFbMV0gPCBvWzNdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gYVswXSAmJiBpLmxhYmVsIDwgb1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdLCBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgaS5sYWJlbCA8IG9bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1syXSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQuY2FsbChlLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbNiwgZV0sIHIgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVswXSA/IGFbMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShbYSwgbF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBrZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gU2QoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBrZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBrZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBDZCA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJjb3B5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSmMoX2koZSksIHQpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEl0ZW1MYWJlbDogImxhYmVscy5jb3B5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgT2QgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ2QucGVyZm9ybShlLCB0LCBuLCByKSwgZnMucGVyZm9ybShlLCB0LCBuLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuY3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5jb2RlID09PSBHdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgTWQgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY29weUFzU3ZnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFZCh0aGlzLCAoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIuY2FudmFzKSByZXR1cm4gWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBOaShfaShlKSwgdCksIG4ubGFiZWwgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udHJ5cy5wdXNoKFsxLCAzLCAsIDRdKSwgWzQsIEx1KCJjbGlwYm9hcmQtc3ZnIiwgby5sZW5ndGggPyBvIDogX2koZSksIHQsIHQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNlbnQoKSwgWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9IG4uc2VudCgpLCBjb25zb2xlLmVycm9yKGEpLCBbMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFNkKFNkKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuY29weUFzU3ZnIgogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUGQgPSB1cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiY29weUFzUG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFZCh0aGlzLCAoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIuY2FudmFzKSByZXR1cm4gWzIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBOaShfaShlKSwgdCksIG4ubGFiZWwgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udHJ5cy5wdXNoKFsxLCAzLCAsIDRdKSwgWzQsIEx1KCJjbGlwYm9hcmQiLCBvLmxlbmd0aCA/IG8gOiBfaShlKSwgdCwgdCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2VudCgpLCBbMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFNkKFNkKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2U6IE8oInRvYXN0LmNvcHlUb0NsaXBib2FyZEFzUG5nIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRTZWxlY3Rpb246IG8ubGVuZ3RoID8gTygidG9hc3Quc2VsZWN0aW9uIikgOiBPKCJ0b2FzdC5jYW52YXMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0Q29sb3JTY2hlbWU6IHQuZXhwb3J0V2l0aERhcmtNb2RlID8gTygiYnV0dG9ucy5kYXJrTW9kZSIpIDogTygiYnV0dG9ucy5saWdodE1vZGUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9IG4uc2VudCgpLCBjb25zb2xlLmVycm9yKGEpLCBbMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFNkKFNkKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuY29weUFzUG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jb2RlID09PSBIdCAmJiBlLmFsdEtleSAmJiBlLnNoaWZ0S2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVGQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBJZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBJZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBMZCA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImdyaWRNb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjKCJ2aWV3IiwgIm1vZGUiLCAiZ3JpZCIpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IFRkKFRkKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFNpemU6IHRoaXMuY2hlY2tlZCh0KSA/IG51bGwgOiBkLmsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBlLmdyaWRTaXplCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMuc2hvd0dyaWQiLAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5jb2RlID09PSBqdAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFkKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfZChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IEFkKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IEFkKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIERkID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiemVuTW9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzYygidmlldyIsICJtb2RlIiwgInplbiIpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IF9kKF9kKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemVuTW9kZUVuYWJsZWQ6ICF0aGlzLmNoZWNrZWQodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnplbk1vZGVFbmFibGVkCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJidXR0b25zLnplbk1vZGUiLAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVbSnRdICYmIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gS3QKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gemQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBqZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBqZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBCZCA9IHVzKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInN0YXRzIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogemQoemQoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U3RhdHM6ICF0aGlzLmNoZWNrZWQodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNob3dTdGF0cwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbUxhYmVsOiAic3RhdHMudGl0bGUiLAogICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVbSnRdICYmIGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gQnQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTmQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBIZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBIZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBSZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0Lm11bHRpRWxlbWVudCB8fCB0LnJlc2l6aW5nRWxlbWVudCB8fCB0LmVkaXRpbmdFbGVtZW50IHx8IHQuZHJhZ2dpbmdFbGVtZW50KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBvKSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gTGkoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gTGkoaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFsLmhhc093blByb3BlcnR5KGUuaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoYVtlLmlkXSB8fCBlLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuY29uY2F0KHMubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS3IoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVpKGMsIHMpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogTmQoTmQoe30sIHQpLCBvLmFwcFN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW5jSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBGZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9ucyA9IHt9LCB0aGlzLnJlbmRlckFjdGlvbiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBvLmFwcC5wcm9wcy5VSU9wdGlvbnMuY2FudmFzQWN0aW9uczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uYWN0aW9uc1tlXSAmJiAiUGFuZWxDb21wb25lbnQiIGluIG8uYWN0aW9uc1tlXSAmJiAoIShlIGluIG4pIHx8IG5bZV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG8uYWN0aW9uc1tlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gci5QYW5lbENvbXBvbmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudChhLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IG8uZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IG8uZ2V0QXBwU3RhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8udXBkYXRlcihyLnBlcmZvcm0oby5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSwgby5nZXRBcHBTdGF0ZSgpLCBlLCBvLmFwcCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBQcm9wczogby5hcHAucHJvcHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnVwZGF0ZXIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdCB8fCAhKCJ0aGVuIiBpbiB0KSkgcmV0dXJuIGUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudGhlbigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5nZXRBcHBTdGF0ZSA9IHQsIHRoaXMuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkID0gbiwgdGhpcy5hcHAgPSByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXJBY3Rpb24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW2UubmFtZV0gPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5yZWdpc3RlckFsbCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnJlZ2lzdGVyQWN0aW9uKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuYXBwLnByb3BzLlVJT3B0aW9ucy5jYW52YXNBY3Rpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gT2JqZWN0LnZhbHVlcyh0aGlzLmFjdGlvbnMpLnNvcnQoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodC5rZXlQcmlvcml0eSB8fCAwKSAtIChlLmtleVByaW9yaXR5IHx8IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5maWx0ZXIoKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoIShyLm5hbWUgaW4gbikgfHwgbltyLm5hbWVdKSAmJiByLmtleVRlc3QgJiYgci5rZXlUZXN0KGUsIHQuZ2V0QXBwU3RhdGUoKSwgdC5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwICE9PSByLmxlbmd0aCAmJiAoISh0aGlzLmdldEFwcFN0YXRlKCkudmlld01vZGVFbmFibGVkICYmICFPYmplY3QudmFsdWVzKGQuRUgpLmluY2x1ZGVzKHJbMF0ubmFtZSkpICYmIChlLnByZXZlbnREZWZhdWx0KCksIHRoaXMudXBkYXRlcihyWzBdLnBlcmZvcm0odGhpcy5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSwgdGhpcy5nZXRBcHBTdGF0ZSgpLCBudWxsLCB0aGlzLmFwcCkpLCAhMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5leGVjdXRlQWN0aW9uID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlcihlLnBlcmZvcm0odGhpcy5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSwgdGhpcy5nZXRBcHBTdGF0ZSgpLCBudWxsLCB0aGlzLmFwcCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgV2QgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgJiBvWzBdKSB0aHJvdyBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5czogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGwoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IGwoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOiBsKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgKGFbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpOykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDEsIHIgJiYgKG8gPSAyICYgYVswXSA/IHIucmV0dXJuIDogYVswXSA/IHIudGhyb3cgfHwgKChvID0gci5yZXR1cm4pICYmIG8uY2FsbChyKSwgMCkgOiByLm5leHQpICYmICEobyA9IG8uY2FsbChyLCBhWzFdKSkuZG9uZSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyID0gMCwgbyAmJiAoYSA9IFsyICYgYVswXSwgby52YWx1ZV0pLCBhWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIHIgPSBhWzFdLCBhID0gWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvID0gaS50cnlzLCAobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pIHx8IDYgIT09IGFbMF0gJiYgMiAhPT0gYVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFvIHx8IGFbMV0gPiBvWzBdICYmIGFbMV0gPCBvWzNdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gYVswXSAmJiBpLmxhYmVsIDwgb1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdLCBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgaS5sYWJlbCA8IG9bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1syXSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQuY2FsbChlLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbNiwgZV0sIHIgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVswXSA/IGFbMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShbYSwgbF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBWZCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgR2QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpYnJhcnlDYWNoZSA9IG51bGwsIHRoaXMucmVzZXRMaWJyYXJ5ID0gKDAsIGguWikoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLCBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXZCh0aGlzLCAoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIG51bGwgPT09IChlID0gKG4gPSB0LmFwcC5wcm9wcykub25MaWJyYXJ5Q2hhbmdlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbGwobiwgW10pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5zZW50KCksIHQubGlicmFyeUNhY2hlID0gW10sIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMucmVzdG9yZUxpYnJhcnlJdGVtID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gX2kod3UoZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lmxlbmd0aCA/IHQgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXZCh0aGlzLCAoZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LmxpYnJhcnlDYWNoZSkgcmV0dXJuIFsyLCBlKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodC5saWJyYXJ5Q2FjaGUpKSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG4gPSB0LmFwcC5saWJyYXJ5SXRlbXNGcm9tU3RvcmFnZSkpIHJldHVybiBbMiwgZShbXSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbi5yZWR1Y2UoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnJlc3RvcmVMaWJyYXJ5SXRlbShuKSAmJiBlLnB1c2gobiksIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKSwgdC5saWJyYXJ5Q2FjaGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHIpKSwgZShyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcih0KSwgZShbXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuc2F2ZUxpYnJhcnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLCBoLlopKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2QodGhpcywgKGZ1bmN0aW9uKGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobC5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHQubGlicmFyeUNhY2hlLCBsLmxhYmVsID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLnRyeXMucHVzaChbMSwgMywgLCA0XSksIGEgPSBKU09OLnN0cmluZ2lmeShlKSwgdC5saWJyYXJ5Q2FjaGUgPSBKU09OLnBhcnNlKGEpLCBbNCwgbnVsbCA9PT0gKHIgPSAobyA9IHQuYXBwLnByb3BzKS5vbkxpYnJhcnlDaGFuZ2UpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuY2FsbChvLCBlKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbC5zZW50KCksIFszLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGkgPSBsLnNlbnQoKSwgdC5saWJyYXJ5Q2FjaGUgPSBuLCBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwgdGhpcy5hcHAgPSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvdG90eXBlLmltcG9ydExpYnJhcnkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGguWikoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXZCh0aGlzLCAoZnVuY3Rpb24oaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIFB1KGUpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG4gPSBpLnNlbnQoKSkgJiYgbi5saWJyYXJ5ID8gKHIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZS5maW5kKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5sZW5ndGggPT09IHQubGVuZ3RoICYmIGUuZXZlcnkoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pZCA9PT0gdFtuXS5pZCAmJiBlLnZlcnNpb25Ob25jZSA9PT0gdFtuXS52ZXJzaW9uTm9uY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBbNCwgdC5sb2FkTGlicmFyeSgpXSkgOiBbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gPSBpLnNlbnQoKSwgYSA9IG4ubGlicmFyeS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0LnJlc3RvcmVMaWJyYXJ5SXRlbShuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgJiYgcihvLCBhKSAmJiBlLnB1c2goYSksIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW10pLCBbNCwgdC5zYXZlTGlicmFyeShWZChWZChbXSwgbyksIGEpKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuc2VudCgpLCBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZQogICAgICAgICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgS2QgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEFycmF5LmZyb20oZS52YWx1ZXMoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IFpkKHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLngKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgLyB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBaZCh0LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIC8gdC5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGVbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGVbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5oeXBvdCh0LnggLSBuLngsIHQueSAtIG4ueSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWmQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSArIHQobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAwKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZZChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWGQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBZZChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTChlLCB0LCBuW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkgOiBZZChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBxZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogZS5zZWxlY3RlZEVsZW1lbnRJZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiBlLnZpZXdCYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nTGluZWFyRWxlbWVudDogZS5lZGl0aW5nTGluZWFyRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiBlLmVkaXRpbmdHcm91cElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IFFkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRDYWNoZSA9IG5ldyBNYXAsIHRoaXMucmVjb3JkaW5nID0gITAsIHRoaXMuc3RhdGVIaXN0b3J5ID0gW10sIHRoaXMucmVkb1N0YWNrID0gW10sIHRoaXMubGFzdEVudHJ5ID0gbnVsbCwgdGhpcy5nZW5lcmF0ZUVudHJ5ID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRlaHlkcmF0ZUhpc3RvcnlFbnRyeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBxZCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IG4ucmVkdWNlKChmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVWUobikgJiYgdC5tdWx0aUVsZW1lbnQgJiYgdC5tdWx0aUVsZW1lbnQuaWQgPT09IG4uaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5tdWx0aUVsZW1lbnQgJiYgdC5tdWx0aUVsZW1lbnQuaWQgPT09IG4uaWQgJiYgbi5wb2ludHMubGVuZ3RoIDwgMikgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKFhkKFhkKHt9LCBuKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBuLmxhc3RDb21taXR0ZWRQb2ludCAhPT0gbi5wb2ludHNbbi5wb2ludHMubGVuZ3RoIC0gMV0gPyBuLnBvaW50cy5zbGljZSgwLCAtMSkgOiBuLnBvaW50cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGUucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByb3RvdHlwZS5oeWRyYXRlSGlzdG9yeUVudHJ5ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogSlNPTi5wYXJzZSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogbi5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBudWxsID09PSAodCA9IHIuZWxlbWVudENhY2hlLmdldChlLmlkKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXQoZS52ZXJzaW9uTm9uY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHRocm93IG5ldyBFcnJvcigiRWxlbWVudCBub3QgZm91bmQ6ICIuY29uY2F0KGUuaWQsICI6IikuY29uY2F0KGUudmVyc2lvbk5vbmNlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUucHJvdG90eXBlLmRlaHlkcmF0ZUhpc3RvcnlFbnRyeSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IEpTT04uc3RyaW5naWZ5KHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBuLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmVsZW1lbnRDYWNoZS5oYXMoZS5pZCkgfHwgci5lbGVtZW50Q2FjaGUuc2V0KGUuaWQsIG5ldyBNYXApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIuZWxlbWVudENhY2hlLmdldChlLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaGFzKGUudmVyc2lvbk5vbmNlKSB8fCB0LnNldChlLnZlcnNpb25Ob25jZSwgdm8oZSkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25Ob25jZTogZS52ZXJzaW9uTm9uY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5nZXRTbmFwc2hvdEZvclRlc3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkaW5nOiB0aGlzLnJlY29yZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUhpc3Rvcnk6IHRoaXMuc3RhdGVIaXN0b3J5Lm1hcCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5oeWRyYXRlSGlzdG9yeUVudHJ5KHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZG9TdGFjazogdGhpcy5yZWRvU3RhY2subWFwKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmh5ZHJhdGVIaXN0b3J5RW50cnkodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIaXN0b3J5Lmxlbmd0aCA9IDAsIHRoaXMucmVkb1N0YWNrLmxlbmd0aCA9IDAsIHRoaXMubGFzdEVudHJ5ID0gbnVsbCwgdGhpcy5lbGVtZW50Q2FjaGUuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5zaG91bGRDcmVhdGVFbnRyeSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuID0gdGhpcy5sYXN0RW50cnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmVsZW1lbnRzLmxlbmd0aCAhPT0gbi5lbGVtZW50cy5sZW5ndGgpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBlLmVsZW1lbnRzLmxlbmd0aCAtIDE7IHIgPiAtMTsgci0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLmVsZW1lbnRzW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbi5lbGVtZW50c1tyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW8gfHwgIWEgfHwgby5pZCAhPT0gYS5pZCB8fCBvLnZlcnNpb25Ob25jZSAhPT0gYS52ZXJzaW9uTm9uY2UpIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0IGluIGUuYXBwU3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImVkaXRpbmdMaW5lYXJFbGVtZW50IiA9PT0gdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChudWxsID09PSAoaSA9IGUuYXBwU3RhdGVbdF0pIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZWxlbWVudElkKSA9PT0gKG51bGwgPT09IChsID0gbi5hcHBTdGF0ZVt0XSkgfHwgdm9pZCAwID09PSBsID8gdm9pZCAwIDogbC5lbGVtZW50SWQpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInNlbGVjdGVkRWxlbWVudElkcyIgIT09IHQgJiYgZS5hcHBTdGF0ZVt0XSAhPT0gbi5hcHBTdGF0ZVt0XSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUucHVzaEVudHJ5ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmdlbmVyYXRlRW50cnkoZSwgdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMuaHlkcmF0ZUhpc3RvcnlFbnRyeShuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3VsZENyZWF0ZUVudHJ5KHIpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUhpc3RvcnkucHVzaChuKSwgdGhpcy5sYXN0RW50cnkgPSByLCB0aGlzLmNsZWFyUmVkb1N0YWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm90b3R5cGUuY2xlYXJSZWRvU3RhY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVkb1N0YWNrLnNwbGljZSgwLCB0aGlzLnJlZG9TdGFjay5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUucHJvdG90eXBlLnJlZG9PbmNlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5yZWRvU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5yZWRvU3RhY2sucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKHRoaXMuc3RhdGVIaXN0b3J5LnB1c2goZSksIHRoaXMuaHlkcmF0ZUhpc3RvcnlFbnRyeShlKSkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUucHJvdG90eXBlLnVuZG9PbmNlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5zdGF0ZUhpc3RvcnkubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5zdGF0ZUhpc3RvcnkucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuc3RhdGVIaXN0b3J5W3RoaXMuc3RhdGVIaXN0b3J5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/ICh0aGlzLnJlZG9TdGFjay5wdXNoKGUpLCB0aGlzLmh5ZHJhdGVIaXN0b3J5RW50cnkodCkpIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5zZXRDdXJyZW50U3RhdGUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RFbnRyeSA9IHRoaXMuaHlkcmF0ZUhpc3RvcnlFbnRyeSh0aGlzLmdlbmVyYXRlRW50cnkoZSwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUucHJvdG90eXBlLnJlc3VtZVJlY29yZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRpbmcgPSAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnByb3RvdHlwZS5yZWNvcmQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZGluZyAmJiAodGhpcy5wdXNoRW50cnkoZSwgdCksIHRoaXMucmVjb3JkaW5nID0gITEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUKICAgICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyICRkID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogIjAgMCAzMjAgNTEyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTMwMi4xODkgMzI5LjEyNkgxOTYuMTA1bDU1LjgzMSAxMzUuOTkzYzMuODg5IDkuNDI4LS41NTUgMTkuOTk5LTkuNDQ0IDIzLjk5OWwtNDkuMTY1IDIxLjQyN2MtOS4xNjUgNC0xOS40NDMtLjU3MS0yMy4zMzItOS43MTRsLTUzLjA1My0xMjkuMTM2LTg2LjY2NCA4OS4xMzhDMTguNzI5IDQ3Mi43MSAwIDQ2My41NTQgMCA0NDcuOTc3VjE4LjI5OUMwIDEuODk5IDE5LjkyMS02LjA5NiAzMC4yNzcgNS40NDNsMjg0LjQxMiAyOTIuNTQyYzExLjQ3MiAxMS4xNzkgMy4wMDcgMzEuMTQxLTEyLjUgMzEuMTQxeiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAic2VsZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogW3ZuLCBtbl0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDQ0OCA1MTIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTQwMCAzMkg0OEMyMS41IDMyIDAgNTMuNSAwIDgwdjM1MmMwIDI2LjUgMjEuNSA0OCA0OCA0OGgzNTJjMjYuNSAwIDQ4LTIxLjUgNDgtNDhWODBjMC0yNi41LTIxLjUtNDgtNDgtNDh6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJyZWN0YW5nbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBmbgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgMjIzLjY0NiAyMjMuNjQ2IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk0xMTEuODIzIDBMMTYuNjIyIDExMS44MjMgMTExLjgyMyAyMjMuNjQ2IDIwNy4wMjUgMTExLjgyM3oiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImRpYW1vbmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBzbgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgNTEyIDUxMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogImVsbGlwc2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBjbgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgNDQ4IDUxMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAicnRsLW1pcnJvciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMzEzLjk0MSAyMTZIMTJjLTYuNjI3IDAtMTIgNS4zNzMtMTIgMTJ2NTZjMCA2LjYyNyA1LjM3MyAxMiAxMiAxMmgzMDEuOTQxdjQ2LjA1OWMwIDIxLjM4MiAyNS44NTEgMzIuMDkgNDAuOTcxIDE2Ljk3MWw4Ni4wNTktODYuMDU5YzkuMzczLTkuMzczIDkuMzczLTI0LjU2OSAwLTMzLjk0MWwtODYuMDU5LTg2LjA1OWMtMTUuMTE5LTE1LjExOS00MC45NzEtNC40MTEtNDAuOTcxIDE2Ljk3MVYyMTZ6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJhcnJvdyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGxuCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHUoKS5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogIjAgMCA2IDYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgibGluZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MTogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkxOiAiMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDI6ICI2IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MjogIjMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogImN1cnJlbnRDb2xvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogInJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJsaW5lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogW3BuLCB1bl0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdSgpLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDUxMiA1MTIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkOiAiTTI5MC43NCA5My4yNGwxMjguMDIgMTI4LjAyLTI3Ny45OSAyNzcuOTktMTE0LjE0IDEyLjZDMTEuMzUgNTEzLjU0LTEuNTYgNTAwLjYyLjE0IDQ4NS4zNGwxMi43LTExNC4yMiAyNzcuOS0yNzcuODh6bTIwNy4yLTE5LjA2bC02MC4xMS02MC4xMWMtMTguNzUtMTguNzUtNDkuMTYtMTguNzUtNjcuOTEgMGwtNTYuNTUgNTYuNTUgMTI4LjAyIDEyOC4wMiA1Ni41NS01Ni41NWMxOC43NS0xOC43NiAxOC43NS00OS4xNiAwLTY3LjkxeiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZnJlZWRyYXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBibgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgNDQ4IDUxMiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNNDMyIDQxNmgtMjMuNDFMMjc3Ljg4IDUzLjY5QTMyIDMyIDAgMCAwIDI0Ny41OCAzMmgtNDcuMTZhMzIgMzIgMCAwIDAtMzAuMyAyMS42OUwzOS40MSA0MTZIMTZhMTYgMTYgMCAwIDAtMTYgMTZ2MzJhMTYgMTYgMCAwIDAgMTYgMTZoMTI4YTE2IDE2IDAgMCAwIDE2LTE2di0zMmExNiAxNiAwIDAgMC0xNi0xNmgtMTkuNThsMjMuMy02NGgxNTIuNTZsMjMuMyA2NEgzMDRhMTYgMTYgMCAwIDAtMTYgMTZ2MzJhMTYgMTYgMCAwIDAgMTYgMTZoMTI4YTE2IDE2IDAgMCAwIDE2LTE2di0zMmExNiAxNiAwIDAgMC0xNi0xNnpNMTc2Ljg1IDI3MkwyMjQgMTQyLjUxIDI3MS4xNSAyNzJ6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ24KICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIEpkID0gKG4oMTI5MiksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1dDogW05uKCJDdHJsT3JDbWQrWCIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHk6IFtObigiQ3RybE9yQ21kK0MiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXN0ZTogW05uKCJDdHJsT3JDbWQrViIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlTdHlsZXM6IFtObigiQ3RybE9yQ21kK0FsdCtDIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzdGVTdHlsZXM6IFtObigiQ3RybE9yQ21kK0FsdCtWIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0QWxsOiBbTm4oIkN0cmxPckNtZCtBIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2VsZWN0ZWRFbGVtZW50czogW05uKCJEZWwiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVTZWxlY3Rpb246IFtObigiQ3RybE9yQ21kK0QiKSwgTm4oIkFsdCsiLmNvbmNhdChPKCJoZWxwRGlhbG9nLmRyYWciKSkpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRCYWNrd2FyZDogW05uKCJDdHJsT3JDbWQrWyIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nRm9yd2FyZDogW05uKCJDdHJsT3JDbWQrXSIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUb0JhY2s6IFtObihrdCA/ICJDdHJsT3JDbWQrQWx0K1siIDogIkN0cmxPckNtZCtTaGlmdCtbIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdUb0Zyb250OiBbTm4oa3QgPyAiQ3RybE9yQ21kK0FsdCtdIiA6ICJDdHJsT3JDbWQrU2hpZnQrXSIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlBc1BuZzogW05uKCJTaGlmdCtBbHQrQyIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlBc1N2ZzogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cDogW05uKCJDdHJsT3JDbWQrRyIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZ3JvdXA6IFtObigiQ3RybE9yQ21kK1NoaWZ0K0ciKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkTW9kZTogW05uKCJDdHJsT3JDbWQrJyIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHplbk1vZGU6IFtObigiQWx0K1oiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0czogW05uKCJBbHQrLyIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRvTGlicmFyeTogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwSG9yaXpvbnRhbDogW05uKCJTaGlmdCtIIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcFZlcnRpY2FsOiBbTm4oIlNoaWZ0K1YiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZTogW05uKCJBbHQrUiIpXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZXAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUub3B0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5vbkNsb3NlUmVxdWVzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5hY3Rpb25NYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLmFwcFN0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KEhzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZml0SW5WaWV3cG9ydDogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJ1bCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjb250ZXh0LW1lbnUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29udGV4dE1lbnU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQubWFwKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzZXBhcmF0b3IiID09PSBlKSByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImhyIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbnRleHQtbWVudS1vcHRpb24tc2VwYXJhdG9yIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLCBsID0gZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5jb250ZXh0SXRlbUxhYmVsID8gTyhlLmNvbnRleHRJdGVtTGFiZWwpIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsaSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiY29udGV4dC1tZW51LW9wdGlvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbmdlcm91czogImRlbGV0ZVNlbGVjdGVkRWxlbWVudHMiID09PSBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2ttYXJrOiBudWxsID09PSAociA9IGUuY2hlY2tlZCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmV4ZWN1dGVBY3Rpb24oZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbnRleHQtbWVudS1vcHRpb25fX2xhYmVsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHMpLCB1KCkuY3JlYXRlRWxlbWVudCgia2JkIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjb250ZXh0LW1lbnUtb3B0aW9uX19zaG9ydGN1dCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBsID8gKG8gPSBKZFtsXSkgJiYgby5sZW5ndGggPiAwID8gb1swXSA6ICIiIDogIiIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRwID0gbmV3IFdlYWtNYXA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuLCByID0gQXJyYXkub2YoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZS5vcHRpb25zLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgci5wdXNoKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgci5sZW5ndGggJiYgKDAsIEV0LnJlbmRlcikodSgpLmNyZWF0ZUVsZW1lbnQoZXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogZS50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBlLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gZS5jb250YWluZXIsIHZvaWQoKG4gPSB0cC5nZXQodCkpICYmICgoMCwgRXQudW5tb3VudENvbXBvbmVudEF0Tm9kZSkobiksIG4ucmVtb3ZlKCksIHRwLmRlbGV0ZSh0KSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uTWFuYWdlcjogZS5hY3Rpb25NYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGUuYXBwU3RhdGUKICAgICAgICAgICAgICAgICAgICAgICAgfSksICh0ID0gZS5jb250YWluZXIsIChuID0gdHAuZ2V0KHQpKSB8fCAobiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLCB0LnF1ZXJ5U2VsZWN0b3IoIi5leGNhbGlkcmF3LWNvbnRleHRNZW51Q29udGFpbmVyIikuYXBwZW5kQ2hpbGQobiksIHRwLnNldCh0LCBuKSwgbikpKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbig0NjIzKTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcnAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9wKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gcnAoT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogcnAoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5nYXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuYWxpZ24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuanVzdGlmeUNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUuY2xhc3NOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLnN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiU3RhY2sgU3RhY2tfaG9yaXpvbnRhbCIsIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBvcCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICItLWdhcCI6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGlwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmdhcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5hbGlnbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5qdXN0aWZ5Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5jbGFzc05hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJTdGFjayBTdGFja192ZXJ0aWNhbCIsIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICItLWdhcCI6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlJdGVtczogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciBscCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5yZW5kZXJBY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuZWxlbWVudFR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFJpKF9pKG4pLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gQm9vbGVhbih0LmVkaXRpbmdFbGVtZW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gcGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gInJ0bCIgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoImRpciIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBWaShvKSB8fCBhLnNvbWUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZpKGUudHlwZSkgJiYgKHQgPSBlLmJhY2tncm91bmRDb2xvciwgbiA9IDUgPT09IHQubGVuZ3RoICYmICIwIiA9PT0gdC5zdWJzdHIoNCwgMSksIHIgPSA5ID09PSB0Lmxlbmd0aCAmJiAiMDAiID09PSB0LnN1YnN0cig3LCAyKSwgIShuIHx8IHIgfHwgdCA9PT0geHQuZWxlbWVudEJhY2tncm91bmRbMF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4sIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFZpKG8pIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmkoZS50eXBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInBhbmVsQ29sdW1uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcigiY2hhbmdlU3Ryb2tlQ29sb3IiKSwgZCAmJiByKCJjaGFuZ2VCYWNrZ3JvdW5kQ29sb3IiKSwgYyAmJiByKCJjaGFuZ2VGaWxsU3R5bGUiKSwgKEdpKG8pIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBHaShlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpICYmIHIoImNoYW5nZVN0cm9rZVdpZHRoIiksICgiZnJlZWRyYXciID09PSBvIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnJlZWRyYXciID09PSBlLnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkgJiYgcigiY2hhbmdlU3Ryb2tlU2hhcGUiKSwgKEtpKG8pIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLaShlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpICYmIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgcigiY2hhbmdlU3Ryb2tlU3R5bGUiKSwgcigiY2hhbmdlU2xvcHBpbmVzcyIpKSwgKFVpKG8pIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVaShlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpICYmIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgcigiY2hhbmdlU2hhcnBuZXNzIikpLCAoWmkobykgfHwgYS5zb21lKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFppKGUudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkgJiYgdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCByKCJjaGFuZ2VGb250U2l6ZSIpLCByKCJjaGFuZ2VGb250RmFtaWx5IiksIHIoImNoYW5nZVRleHRBbGlnbiIpKSwgKFlpKG8pIHx8IGEuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZaShlLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpICYmIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgcigiY2hhbmdlQXJyb3doZWFkIikpLCByKCJjaGFuZ2VPcGFjaXR5IiksIHUoKS5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCBPKCJsYWJlbHMubGF5ZXJzIikpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImJ1dHRvbkxpc3QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByKCJzZW5kVG9CYWNrIiksIHIoInNlbmRCYWNrd2FyZCIpLCByKCJicmluZ1RvRnJvbnQiKSwgcigiYnJpbmdGb3J3YXJkIikpKSwgYS5sZW5ndGggPiAxICYmIHUoKS5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCBPKCJsYWJlbHMuYWxpZ24iKSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiYnV0dG9uTGlzdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHMgPyB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHIoImFsaWduUmlnaHQiKSwgcigiYWxpZ25Ib3Jpem9udGFsbHlDZW50ZXJlZCIpLCByKCJhbGlnbkxlZnQiKSkgOiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHIoImFsaWduTGVmdCIpLCByKCJhbGlnbkhvcml6b250YWxseUNlbnRlcmVkIiksIHIoImFsaWduUmlnaHQiKSksIGEubGVuZ3RoID4gMiAmJiByKCJkaXN0cmlidXRlSG9yaXpvbnRhbGx5IiksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiaWNvblJvdyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHIoImFsaWduVG9wIiksIHIoImFsaWduVmVydGljYWxseUNlbnRlcmVkIiksIHIoImFsaWduQm90dG9tIiksIGEubGVuZ3RoID4gMiAmJiByKCJkaXN0cmlidXRlVmVydGljYWxseSIpKSkpLCAhbCAmJiAhaSAmJiBhLmxlbmd0aCA+IDAgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIsIG51bGwsIE8oImxhYmVscy5hY3Rpb25zIikpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImJ1dHRvbkxpc3QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByKCJkdXBsaWNhdGVTZWxlY3Rpb24iKSwgcigiZGVsZXRlU2VsZWN0ZWRFbGVtZW50cyIpLCByKCJncm91cCIpLCByKCJ1bmdyb3VwIikpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc3AgPSB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogIjAgMCA1MTIgNTEyIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMjk2IDMyaDE5MmMxMy4yNTUgMCAyNCAxMC43NDUgMjQgMjR2MTYwYzAgMTMuMjU1LTEwLjc0NSAyNC0yNCAyNEgyOTZjLTEzLjI1NSAwLTI0LTEwLjc0NS0yNC0yNFY1NmMwLTEzLjI1NSAxMC43NDUtMjQgMjQtMjR6bS04MCAwSDI0QzEwLjc0NSAzMiAwIDQyLjc0NSAwIDU2djE2MGMwIDEzLjI1NSAxMC43NDUgMjQgMjQgMjRoMTkyYzEzLjI1NSAwIDI0LTEwLjc0NSAyNC0yNFY1NmMwLTEzLjI1NS0xMC43NDUtMjQtMjQtMjR6TTAgMjk2djE2MGMwIDEzLjI1NSAxMC43NDUgMjQgMjQgMjRoMTkyYzEzLjI1NSAwIDI0LTEwLjc0NSAyNC0yNFYyOTZjMC0xMy4yNTUtMTAuNzQ1LTI0LTI0LTI0SDI0Yy0xMy4yNTUgMC0yNCAxMC43NDUtMjQgMjR6bTI5NiAxODRoMTkyYzEzLjI1NSAwIDI0LTEwLjc0NSAyNC0yNFYyOTZjMC0xMy4yNTUtMTAuNzQ1LTI0LTI0LTI0SDI5NmMtMTMuMjU1IDAtMjQgMTAuNzQ1LTI0IDI0djE2MGMwIDEzLjI1NSAxMC43NDUgMjQgMjQgMjR6IgogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNhbnZhcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5lbGVtZW50VHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5pc0xpYnJhcnlPcGVuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgJGQubWFwKChmdW5jdGlvbihlLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5pY29uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5rZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBPKCJ0b29sQmFyLiIuY29uY2F0KGEpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICJzdHJpbmciID09IHR5cGVvZiBsID8gbCA6IGxbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAiIi5jb25jYXQoUG4oYyksICIgIikuY29uY2F0KE8oImhlbHBEaWFsb2cub3IiKSwgIiAiKS5jb25jYXQobyArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJTaGFwZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJhZGlvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogbiA9PT0gYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImVkaXRvci1jdXJyZW50LXNoYXBlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChQbihzKSwgIiDigJQgIikuY29uY2F0KGQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlCaW5kaW5nTGFiZWw6ICIiLmNvbmNhdChvICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogUG4ocyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWtleXNob3J0Y3V0cyI6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkYXRhLXRlc3RpZCI6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgQm4odCwgYSksIHIoe30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIlNoYXBlIFRvb2xJY29uX3R5cGVfYnV0dG9uX19saWJyYXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBzcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiZWRpdG9yLWxpYnJhcnkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleUJpbmRpbmdMYWJlbDogIjkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWtleXNob3J0Y3V0cyI6ICI5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIiIuY29uY2F0KFBuKE8oInRvb2xCYXIubGlicmFyeSIpKSwgIiDigJQgOSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogUG4oTygidG9vbEJhci5saWJyYXJ5IikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlicmFyeU9wZW46ICFvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHVwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnJlbmRlckFjdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS56b29tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KGlwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQoInpvb21JbiIpLCB0KCJ6b29tT3V0IiksIHQoInJlc2V0Wm9vbSIpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbklubGluZVN0YXJ0OiA0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKDEwMCAqIG4udmFsdWUpLnRvRml4ZWQoMCksICIlIikpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYXBwU3RhdGUsIGUuc2V0QXBwU3RhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuYWN0aW9uTWFuYWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5zaG93VGhlbWVCdG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnJlbmRlckFjdGlvbigiY2hhbmdlVmlld0JhY2tncm91bmRDb2xvciIpLCBuICYmIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdC5yZW5kZXJBY3Rpb24oInRvZ2dsZVRoZW1lIikpKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIG4oNzc4KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmlzQ29sbGFib3JhdGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNvbGxhYm9yYXRvckNvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUub25DbGljazsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoIkNvbGxhYkJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaXMtY29sbGFib3JhdGluZyI6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IExsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygibGFiZWxzLmxpdmVDb2xsYWJvcmF0aW9uIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImxhYmVscy5saXZlQ29sbGFib3JhdGlvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FyaWFMYWJlbDogcGgoKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBuID4gMCAmJiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQ29sbGFiQnV0dG9uLWNvbGxhYm9yYXRvcnMiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4pKSkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIG4oMTk2KSwgbigxMTA2KTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaHAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZwKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gaHAoT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogaHAoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgbXAgPSB1KCkuZm9yd2FyZFJlZigoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnBhZGRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuY2xhc3NOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLnN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiSXNsYW5kIiwgbyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGZwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi0tcGFkZGluZyI6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgZ3AgPSAobig4MzI4KSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRoZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB2cCh2b2lkIDAgPT09IHQgPyAibGlnaHQiIDogdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBFdC5jcmVhdGVQb3J0YWwpKHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiTW9kYWwiLCBlLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogImRpYWxvZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbW9kYWwiOiAidHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQua2V5ID09PSBubiAmJiAodC5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwgdC5zdG9wUHJvcGFnYXRpb24oKSwgZS5vbkNsb3NlUmVxdWVzdCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWxsZWRieSI6IGUubGFiZWxsZWRCeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJNb2RhbF9fYmFja2dyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZS5vbkNsb3NlUmVxdWVzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiTW9kYWxfX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICItLW1heC13aWR0aCI6ICIiLmNvbmNhdChlLm1heFdpZHRoLCAicHgiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuY2hpbGRyZW4pKSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHZwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAoMCwgYy51c2VTdGF0ZSkobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHBoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9ICgwLCBjLnVzZVJlZikobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmN1cnJlbnQgPSBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBmaCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLnVzZUxheW91dEVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgbi5jbGFzc0xpc3QudG9nZ2xlKCJleGNhbGlkcmF3LS1tb2JpbGUiLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtuLCBvXSksICgwLCBjLnVzZUxheW91dEVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gIShudWxsID09IGkgfHwgIWkuY2xhc3NMaXN0LmNvbnRhaW5zKCJ0aGVtZS0tZGFyayIpKSB8fCAiZGFyayIgPT09IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5jbGFzc0xpc3QuYWRkKCJleGNhbGlkcmF3IiwgImV4Y2FsaWRyYXctbW9kYWwtY29udGFpbmVyIiksIG4uY2xhc3NMaXN0LnRvZ2dsZSgiZXhjYWxpZHJhdy0tbW9iaWxlIiwgYS5jdXJyZW50KSwgdCAmJiAobi5jbGFzc0xpc3QuYWRkKCJ0aGVtZS0tZGFyayIpLCBuLmNsYXNzTGlzdC5hZGQoInRoZW1lLS1kYXJrLWJhY2tncm91bmQtbm9uZSIpKSwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSwgcihuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbaSwgZV0pLCBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGJwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgYy51c2VTdGF0ZSkobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QsICgwLCBjLnVzZUNhbGxiYWNrKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtdKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICgwLCBjLnVzZVN0YXRlKShkb2N1bWVudC5hY3RpdmVFbGVtZW50KVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBjLnVzZUVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYShuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5sZW5ndGggPiAwICYmICExICE9PSBlLmF1dG9mb2N1cyAmJiAodFsxXSB8fCB0WzBdKS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gYW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGEobiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5maW5kSW5kZXgoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBvICYmIGUuc2hpZnRLZXkgPyAodFt0Lmxlbmd0aCAtIDFdLmZvY3VzKCksIGUucHJldmVudERlZmF1bHQoKSkgOiBvICE9PSB0Lmxlbmd0aCAtIDEgfHwgZS5zaGlmdEtleSB8fCAodFswXS5mb2N1cygpLCBlLnByZXZlbnREZWZhdWx0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbiwgZS5hdXRvZm9jdXNdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiYnV0dG9uLCBhLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgZGl2W3RhYmluZGV4XSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IEFycmF5LmZyb20odCkgOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmZvY3VzKCksIGUub25DbG9zZVJlcXVlc3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoZ3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJEaWFsb2ciLCBlLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxsZWRCeTogImRpYWxvZy10aXRsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IGUuc21hbGwgPyA1NTAgOiA4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IGUudGhlbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiaDIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJkaWFsb2ctdGl0bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkRpYWxvZ19fdGl0bGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJEaWFsb2dfX3RpdGxlQ29udGVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUudGl0bGUpLCB1KCkuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIk1vZGFsX19jbG9zZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuY2xvc2UiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcGgoKSA/IF9sIDogQWwpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJEaWFsb2dfX2NvbnRlbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmNoaWxkcmVuKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHlwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUub25DbG9zZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gKDAsIGMudXNlU3RhdGUpKCEhdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHUoKS51c2VDYWxsYmFjaygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEoITEpLCBuICYmIG4oKSwgbnVsbCA9PSBpIHx8IGkuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbiwgaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgbyAmJiB1KCkuY3JlYXRlRWxlbWVudChicCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlUmVxdWVzdDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiZXJyb3JEaWFsb2cudGl0bGUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiAicHJlLXdyYXAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdCkpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB3cCA9IChuKDIyMDUpLCBbMSwgMiwgM10pLAogICAgICAgICAgICAgICAgICAgICAgICB4cCA9IHdwLmluY2x1ZGVzKGRldmljZVBpeGVsUmF0aW8pID8gZGV2aWNlUGl4ZWxSYXRpbyA6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIEVwID0gImZpbHRlciIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAga3AgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgTygiY2FudmFzRXJyb3IuY2Fubm90U2hvd1ByZXZpZXciKSksIHUoKS5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBPKCJjYW52YXNFcnJvci5jYW52YXNUb29CaWciKSkpLCB1KCkuY3JlYXRlRWxlbWVudCgiZW0iLCBudWxsLCAiKCIsIE8oImNhbnZhc0Vycm9yLmNhbnZhc1Rvb0JpZ1RpcCIpLCAiKSIpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBTcCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBFdC51bm1vdW50Q29tcG9uZW50QXROb2RlKSh0KSwgdC5pbm5lckhUTUwgPSAiIiwgZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ID8gdC5hcHBlbmRDaGlsZChlKSA6ICgwLCBFdC5yZW5kZXIpKHUoKS5jcmVhdGVFbGVtZW50KGtwLCBudWxsKSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQ3AgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuZXhwb3J0UGFkZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdm9pZCAwID09PSByID8gMTAgOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmFjdGlvbk1hbmFnZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUub25FeHBvcnRUb1BuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5vbkV4cG9ydFRvU3ZnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLm9uRXhwb3J0VG9DbGlwYm9hcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGUub25FeHBvcnRUb0JhY2tlbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IEhpKHQsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoMCwgYy51c2VTdGF0ZSkoeHApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBoWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSAoMCwgYy51c2VTdGF0ZSkocCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGdbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGdbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9ICgwLCBjLnVzZVJlZikobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IG4uZXhwb3J0QmFja2dyb3VuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gbi52aWV3QmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBuLnNob3VsZEFkZFdhdGVybWFyaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gdiA/IE5pKHQsIG4pIDogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYy51c2VFZmZlY3QpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW3BdKSwgKDAsIGMudXNlRWZmZWN0KSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB5LmN1cnJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gT2MoaywgbiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QmFja2dyb3VuZDogdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCYWNrZ3JvdW5kQ29sb3I6IHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRQYWRkaW5nOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRBZGRXYXRlcm1hcms6IEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl1KHQpLnRoZW4oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3AodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHQpLCBTcChuZXcgc3UsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcih0KSwgU3AobmV3IHN1LCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbiwgaywgdywgbywgeCwgZiwgRV0pLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkV4cG9ydERpYWxvZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiRXhwb3J0RGlhbG9nX19wcmV2aWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBFcCAmJiBhLnJlbmRlckFjdGlvbigiZXhwb3J0V2l0aERhcmtNb2RlIiksIHUoKS5jcmVhdGVFbGVtZW50KGlwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJFeHBvcnREaWFsb2dfX2FjdGlvbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlBORyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMuZXhwb3J0VG9QbmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuZXhwb3J0VG9QbmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkoaywgZikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlNWRyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMuZXhwb3J0VG9TdmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuZXhwb3J0VG9TdmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwoaywgZikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJGMgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiYnV0dG9ucy5jb3B5UG5nVG9DbGlwYm9hcmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuY29weVBuZ1RvQ2xpcGJvYXJkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzKGssIGYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGQgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiYnV0dG9ucy5nZXRTaGFyZWFibGVMaW5rIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLmdldFNoYXJlYWJsZUxpbmsiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQoaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiRXhwb3J0RGlhbG9nX19uYW1lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgYS5yZW5kZXJBY3Rpb24oImNoYW5nZVByb2plY3ROYW1lIikpLCB1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgd3AubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFBjKGUsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBUYyhvLCB0LCBuKS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmMoZSAqIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFthWzJdLCBhWzNdXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGssIG8sIEUsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAiIi5jb25jYXQoTygiYnV0dG9ucy5zY2FsZSIpLCAiICIpLmNvbmNhdChlLCAieCAoIikuY29uY2F0KG4sICJ4IikuY29uY2F0KHIsICIpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogInMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAicmFkaW8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAiIi5jb25jYXQoZSwgIngiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImV4cG9ydC1jYW52YXMtc2NhbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImV4cG9ydC1jYW52YXMtc2NhbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBlID09PSBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbShlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpLCBhLnJlbmRlckFjdGlvbigiY2hhbmdlRXhwb3J0QmFja2dyb3VuZCIpLCBwICYmIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgibGFiZWwiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiKGUuY3VycmVudFRhcmdldC5jaGVja2VkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAiICIsIE8oImxhYmVscy5vbmx5U2VsZWN0ZWQiKSkpLCBhLnJlbmRlckFjdGlvbigiY2hhbmdlRXhwb3J0RW1iZWRTY2VuZSIpLCBhLnJlbmRlckFjdGlvbigiY2hhbmdlU2hvdWxkQWRkV2F0ZXJtYXJrIikpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBPcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5leHBvcnRQYWRkaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB2b2lkIDAgPT09IHIgPyAxMCA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUuYWN0aW9uTWFuYWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5vbkV4cG9ydFRvUG5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLm9uRXhwb3J0VG9TdmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUub25FeHBvcnRUb0NsaXBib2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZS5vbkV4cG9ydFRvQmFja2VuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gKDAsIGMudXNlU3RhdGUpKCExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gcFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gcFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gdSgpLnVzZUNhbGxiYWNrKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZighMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZighMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkYXRhLXRlc3RpZCI6ICJleHBvcnQtYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB1bCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMuZXhwb3J0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FyaWFMYWJlbDogcGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiYnV0dG9ucy5leHBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGggJiYgdSgpLmNyZWF0ZUVsZW1lbnQoYnAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlUmVxdWVzdDogbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiYnV0dG9ucy5leHBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoQ3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRQYWRkaW5nOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbk1hbmFnZXI6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FeHBvcnRUb1BuZzogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4cG9ydFRvU3ZnOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwb3J0VG9DbGlwYm9hcmQ6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FeHBvcnRUb0JhY2tlbmQ6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVJlcXVlc3Q6IG0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTXAgPSAobigxMzEwKSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnNpZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuY2xhc3NOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiRml4ZWRTaWRlQ29udGFpbmVyIiwgIkZpeGVkU2lkZUNvbnRhaW5lcl9zaWRlXyIuY29uY2F0KG4pLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFBwID0gKG4oNzA5NiksIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmVsZW1lbnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5pc1Jlc2l6aW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5pc1JvdGF0aW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5sYXN0UG9pbnRlckRvd25XaXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbnVsbCAhPT0gdC5tdWx0aUVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJhcnJvdyIgPT09IHIgfHwgImxpbmUiID09PSByKSByZXR1cm4gTyhsID8gImhpbnRzLmxpbmVhckVsZW1lbnRNdWx0aSIgOiAiaGludHMubGluZWFyRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnJlZWRyYXciID09PSByKSByZXR1cm4gTygiaGludHMuZnJlZURyYXciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInRleHQiID09PSByKSByZXR1cm4gTygiaGludHMudGV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gTmkobiwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgIm1vdXNlIiA9PT0gaSAmJiAxID09PSBzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVZShjKSAmJiAyID09PSBjLnBvaW50cy5sZW5ndGggPyBPKCJoaW50cy5sb2NrQW5nbGUiKSA6IE8oImhpbnRzLnJlc2l6ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICYmICJtb3VzZSIgPT09IGkgPyBPKCJoaW50cy5yb3RhdGUiKSA6IDEgPT09IHMubGVuZ3RoICYmIFVlKHNbMF0pID8gdC5lZGl0aW5nTGluZWFyRWxlbWVudCA/IHQuZWRpdGluZ0xpbmVhckVsZW1lbnQuYWN0aXZlUG9pbnRJbmRleCA/IE8oImhpbnRzLmxpbmVFZGl0b3JfcG9pbnRTZWxlY3RlZCIpIDogTygiaGludHMubGluZUVkaXRvcl9ub3RoaW5nU2VsZWN0ZWQiKSA6IE8oImhpbnRzLmxpbmVFZGl0b3JfaW5mbyIpIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGUuZWxlbWVudHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyAodCA9IE5uKHQpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkhpbnRWaWV3ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIHQpKSkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBJcCA9IChuKDMzMzYpLCBuKDY5NCksIHUoKS5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDE3OTIgMTc5MiIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAiY3VycmVudENvbG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTYwMCA3MzZ2MTkycTAgNDAtMjggNjh0LTY4IDI4aC00MTZ2NDE2cTAgNDAtMjggNjh0LTY4IDI4aC0xOTJxLTQwIDAtNjgtMjh0LTI4LTY4di00MTZoLTQxNnEtNDAgMC02OC0yOHQtMjgtNjh2LTE5MnEwLTQwIDI4LTY4dDY4LTI4aDQxNnYtNDE2cTAtNDAgMjgtNjh0NjgtMjhoMTkycTQwIDAgNjggMjh0MjggNjh2NDE2aDQxNnE0MCAwIDY4IDI4dDI4IDY4eiIKICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgVHAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUucGVuZGluZ0VsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLm9uUmVtb3ZlRnJvbUxpYnJhcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUub25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gKDAsIGMudXNlUmVmKShudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBjLnVzZUVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCB8fCBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBNYyhlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QmFja2dyb3VuZDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JhY2tncm91bmRDb2xvcjogYnQuaXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQWRkV2F0ZXJtYXJrOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG8gPSAwLCBpID0gYS5jdXJyZW50LmNoaWxkcmVuOyBvIDwgaS5sZW5ndGg7IG8rKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBpW29dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN2ZyIgPT09IGwudGFnTmFtZSAmJiBhLmN1cnJlbnQucmVtb3ZlQ2hpbGQobCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmN1cnJlbnQuYXBwZW5kQ2hpbGQocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gYS5jdXJyZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnJlbW92ZUNoaWxkKHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW3QsIG5dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gKDAsIGMudXNlU3RhdGUpKCExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gcGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gKGwgfHwgcCkgJiYgbiAmJiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJsaWJyYXJ5LXVuaXRfX2FkZGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIElwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoImxpYnJhcnktdW5pdCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxpYnJhcnktdW5pdF9fYWN0aXZlIjogdCB8fCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMoITApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyghMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoImxpYnJhcnktdW5pdF9fZHJhZ2dlciIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxpYnJhcnktdW5pdF9fcHVsc2UiOiAhIW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiAhIXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdCB8fCBuID8gbyA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKCExKSwgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShkLkxPLmV4Y2FsaWRyYXdsaWIsIEpTT04uc3RyaW5naWZ5KHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBoLCB0ICYmIChsIHx8IHApICYmIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAibGlicmFyeS11bml0X19yZW1vdmVGcm9tTGlicmFyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJsYWJlbHMucmVtb3ZlRnJvbUxpYnJhcnkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBBbCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIExwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0hFQ0tFRDogdSgpLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjE3OTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjE3OTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgMTc5MiAxNzkyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDogIk02NDAgNzY4aDUxMnYtMTkycTAtMTA2LTc1LTE4MXQtMTgxLTc1LTE4MSA3NS03NSAxODF2MTkyem04MzIgOTZ2NTc2cTAgNDAtMjggNjh0LTY4IDI4aC05NjBxLTQwIDAtNjgtMjh0LTI4LTY4di01NzZxMC00MCAyOC02OHQ2OC0yOGgzMnYtMTkycTAtMTg0IDEzMi0zMTZ0MzE2LTEzMiAzMTYgMTMyIDEzMiAzMTZ2MTkyaDMycTQwIDAgNjggMjh0MjggNjh6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVU5DSEVDS0VEOiB1KCkuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMTc5MiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiMTc5MiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogIjAgMCAxNzkyIDE3OTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInVubG9ja2VkLWljb24gcnRsLW1pcnJvciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJNMTcyOCA1NzZ2MjU2cTAgMjYtMTkgNDV0LTQ1IDE5aC02NHEtMjYgMC00NS0xOXQtMTktNDV2LTI1NnEwLTEwNi03NS0xODF0LTE4MS03NS0xODEgNzUtNzUgMTgxdjE5Mmg5NnE0MCAwIDY4IDI4dDI4IDY4djU3NnEwIDQwLTI4IDY4dC02OCAyOGgtOTYwcS00MCAwLTY4LTI4dC0yOC02OHYtNTc2cTAtNDAgMjgtNjh0NjgtMjhoNjcydi0xOTJxMC0xODUgMTMxLjUtMzE2LjV0MzE2LjUtMTMxLjUgMzE2LjUgMTMxLjUgMTMxLjUgMzE2LjV6IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEFwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJsYWJlbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJUb29sSWNvbiBUb29sSWNvbl9fbG9jayBUb29sSWNvbl90eXBlX2Zsb2F0aW5nIHplbi1tb2RlLXZpc2liaWxpdHkiLCAiVG9vbEljb25fc2l6ZV8iLmNvbmNhdChlLnNpemUgfHwgIm0iKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiemVuLW1vZGUtdmlzaWJpbGl0eS0taGlkZGVuIjogZS56ZW5Nb2RlRW5hYmxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIi5jb25jYXQoZS50aXRsZSwgIiDigJQgUSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVG9vbEljb25fdHlwZV9jaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGUuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGUub25DaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZS5jaGVja2VkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogZS50aXRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVG9vbEljb25fX2ljb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLmNoZWNrZWQgPyBMcC5DSEVDS0VEIDogTHAuVU5DSEVDS0VEKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX3AgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuaGVhZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gcXIoZSwgWyJoZWFkaW5nIiwgImNoaWxkcmVuIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB1KCkuY3JlYXRlRWxlbWVudCgiaDIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInZpc3VhbGx5LWhpZGRlbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiIi5jb25jYXQodCwgIi10aXRsZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygiaGVhZGluZ3MuIi5jb25jYXQodCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgic2VjdGlvbiIsIEdzKHt9LCByLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWxsZWRieSI6ICIiLmNvbmNhdCh0LCAiLXRpdGxlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gbihvKSA6IHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgbywgbikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIERwID0gKG4oNTgwKSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNsYXNzTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5tb2JpbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJVc2VyTGlzdCIsIG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlckxpc3RfbW9iaWxlOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqcChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgenAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUubGlicmFyeU1lbnUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuYWN0aW9uTWFuYWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5leHBvcnRCdXR0b24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuc2V0QXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUub25Db2xsYWJCdXR0b25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5vbkxvY2tUb2dnbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUuY2FudmFzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBlLmlzQ29sbGFib3JhdGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gZS5yZW5kZXJDdXN0b21Gb290ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGUudmlld01vZGVFbmFibGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBlLnNob3dUaGVtZUJ0bjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsICFoICYmIHUoKS5jcmVhdGVFbGVtZW50KE1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lkZTogInRvcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQXBwLXRvcC1iYXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChfcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6ICJzaGFwZXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudChpcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGFwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLCB1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChjcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXM6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiB0LmVsZW1lbnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3BlbjogdC5pc0xpYnJhcnlPcGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdC5lbGVtZW50TG9ja2VkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oInRvb2xCYXIubG9jayIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1KCkuY3JlYXRlRWxlbWVudChQcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQXBwLWJvdHRvbS1iYXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDE0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogMTQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChtcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJjYW52YXMiID09PSB0Lm9wZW5NZW51ID8gdSgpLmNyZWF0ZUVsZW1lbnQoX3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJBcHAtbW9iaWxlLW1lbnUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6ICJjYW52YXNBY3Rpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJwYW5lbENvbHVtbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGlwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiA0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBoID8gdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCBvLnJlbmRlckFjdGlvbigic2F2ZVNjZW5lIiksIG8ucmVuZGVyQWN0aW9uKCJzYXZlQXNTY2VuZSIpLCBhKSA6IHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgby5yZW5kZXJBY3Rpb24oImxvYWRTY2VuZSIpLCBvLnJlbmRlckFjdGlvbigic2F2ZVNjZW5lIiksIG8ucmVuZGVyQWN0aW9uKCJzYXZlQXNTY2VuZSIpLCBhLCBvLnJlbmRlckFjdGlvbigiY2xlYXJDYW52YXMiKSwgbCAmJiB1KCkuY3JlYXRlRWxlbWVudChwcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGFib3JhdGluZzogZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYWJvcmF0b3JDb3VudDogdC5jb2xsYWJvcmF0b3JzLnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KGRwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uTWFuYWdlcjogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VGhlbWVCdG46IGYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbnVsbCA9PSBwID8gdm9pZCAwIDogcCghMCwgdCksIHQuY29sbGFib3JhdG9ycy5zaXplID4gMCAmJiB1KCkuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgibGVnZW5kIiwgbnVsbCwgTygibGFiZWxzLmNvbGxhYm9yYXRvcnMiKSksIHUoKS5jcmVhdGVFbGVtZW50KERwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgQXJyYXkuZnJvbSh0LmNvbGxhYm9yYXRvcnMpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwICE9PSBPYmplY3Qua2V5cyh0KS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGVbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8ucmVuZGVyQWN0aW9uKCJnb1RvQ29sbGFib3JhdG9yIiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpKSkpKSA6ICJzaGFwZSIgPT09IHQub3Blbk1lbnUgJiYgIWggJiYgUGkodCwgbikgPyB1KCkuY3JlYXRlRWxlbWVudChfcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkFwcC1tb2JpbGUtbWVudSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogInNlbGVjdGVkU2hhcGVBY3Rpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQobHAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBY3Rpb246IG8ucmVuZGVyQWN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiB0LmVsZW1lbnRUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgiZm9vdGVyIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkFwcC10b29sYmFyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaCA/IHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQXBwLXRvb2xiYXItY29udGVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8ucmVuZGVyQWN0aW9uKCJ0b2dnbGVDYW52YXNNZW51IikpIDogdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJBcHAtdG9vbGJhci1jb250ZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgby5yZW5kZXJBY3Rpb24oInRvZ2dsZUNhbnZhc01lbnUiKSwgby5yZW5kZXJBY3Rpb24oInRvZ2dsZUVkaXRNZW51IiksIG8ucmVuZGVyQWN0aW9uKCJ1bmRvIiksIG8ucmVuZGVyQWN0aW9uKCJyZWRvIiksIG8ucmVuZGVyQWN0aW9uKHQubXVsdGlFbGVtZW50ID8gImZpbmFsaXplIiA6ICJkdXBsaWNhdGVTZWxlY3Rpb24iKSwgby5yZW5kZXJBY3Rpb24oImRlbGV0ZVNlbGVjdGVkRWxlbWVudHMiKSksIHQuc2Nyb2xsZWRPdXRzaWRlICYmICF0Lm9wZW5NZW51ICYmIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAic2Nyb2xsLWJhY2stdG8tY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBqcChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IGpwKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oe30sIFdpKG4sIHQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPKCJidXR0b25zLnNjcm9sbEJhY2tUb0NvbnRlbnQiKSkpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEJwID0gKG4oODA1MSksIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gKDAsIGMudXNlUmVmKShudWxsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gKDAsIGMudXNlU3RhdGUpKG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLnVzZUxheW91dEVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNwcmVhZHNoZWV0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gVWMoZS5jaGFydFR5cGUsIGUuc3ByZWFkc2hlZXQsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1jKG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiBidC5peCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRBZGRXYXRlcm1hcms6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmN1cnJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmFwcGVuZENoaWxkKHIpLCBlLnNlbGVjdGVkICYmIGEucGFyZW50Tm9kZS5mb2N1cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yZW1vdmVDaGlsZChyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbZS5zcHJlYWRzaGVldCwgZS5jaGFydFR5cGUsIGUuc2VsZWN0ZWRdKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJDaGFydFByZXZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmIGUub25DbGljayhlLmNoYXJ0VHlwZSwgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBIcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5vbkNsb3NlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLm9uSW5zZXJ0Q2hhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHUoKS51c2VDYWxsYmFjaygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFtyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuKSwgc2MoIm1hZ2ljIiwgImNoYXJ0IiwgZSksIHQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJ0VHlwZTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3RlRGlhbG9nOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KGJwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hbGw6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2VSZXF1ZXN0OiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJsYWJlbHMucGFzdGVDaGFydHMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJQYXN0ZUNoYXJ0RGlhbG9nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImNvbnRhaW5lciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KEJwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRUeXBlOiAiYmFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldDogbi5wYXN0ZURpYWxvZy5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiAiYmFyIiA9PT0gbi5jdXJyZW50Q2hhcnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChCcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0OiBuLnBhc3RlRGlhbG9nLmRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6ICJsaW5lIiA9PT0gbi5jdXJyZW50Q2hhcnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgTnAgPSAobigzOTIyKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJIZWxwRGlhbG9nLS1oZWFkZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJIZWxwRGlhbG9nLS1idG4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6ICJodHRwczovL2dpdGh1Yi5jb20vZXhjYWxpZHJhdy9leGNhbGlkcmF3I2RvY3VtZW50YXRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsOiAibm9vcGVuZXIgbm9yZWZlcnJlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oImhlbHBEaWFsb2cuZG9jdW1lbnRhdGlvbiIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiSGVscERpYWxvZy0tYnRuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAiaHR0cHM6Ly9ibG9nLmV4Y2FsaWRyYXcuY29tIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbDogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPKCJoZWxwRGlhbG9nLmJsb2ciKSksIHUoKS5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkhlbHBEaWFsb2ctLWJ0biIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogImh0dHBzOi8vZ2l0aHViLmNvbS9leGNhbGlkcmF3L2V4Y2FsaWRyYXcvaXNzdWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbDogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPKCJoZWxwRGlhbG9nLmdpdGh1YiIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgZS50aXRsZSksIGUuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEZwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImZsZXgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAicm93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleFdyYXA6ICJ3cmFwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFdwID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICI0OSUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5jaGlsZHJlbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgVnAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJIZWxwRGlhbG9nLS1pc2xhbmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudCgiaDMiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiSGVscERpYWxvZy0taXNsYW5kLXRpdGxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5jYXB0aW9uKSwgZS5jaGlsZHJlbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgR3AgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJIZWxwRGlhbG9nLS1zaG9ydGN1dCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImZsZXgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogIjRweCA4cHgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogMS40CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5sYWJlbCksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImZsZXgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAiMCAwIGF1dG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogImZsZXgtZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luSW5saW5lU3RhcnQ6ICJhdXRvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6ICIzMCUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5zaG9ydGN1dHMubWFwKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChLcCwgbnVsbCwgdCksIGUuaXNPciAmJiBuICE9PSBlLnNob3J0Y3V0cy5sZW5ndGggLSAxICYmIE8oImhlbHBEaWFsb2cub3IiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIEdwLmRlZmF1bHRQcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNPcjogITAKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciBLcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudCgia2JkIiwgR3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkhlbHBEaWFsb2ctLWtleSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBVcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5vbkNsb3NlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB1KCkudXNlQ2FsbGJhY2soKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbdF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoYnAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlUmVxdWVzdDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiaGVscERpYWxvZy50aXRsZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIkhlbHBEaWFsb2ciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChOcCwgbnVsbCksIHUoKS5jcmVhdGVFbGVtZW50KFJwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImhlbHBEaWFsb2cuc2hvcnRjdXRzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KEZwLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudChXcCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoVnAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uOiBPKCJoZWxwRGlhbG9nLnNoYXBlcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJ0b29sQmFyLnNlbGVjdGlvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogWyJWIiwgIjEiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oInRvb2xCYXIucmVjdGFuZ2xlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbIlIiLCAiMiJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygidG9vbEJhci5kaWFtb25kIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbIkQiLCAiMyJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygidG9vbEJhci5lbGxpcHNlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbIkUiLCAiNCJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygidG9vbEJhci5hcnJvdyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogWyJBIiwgIjUiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oInRvb2xCYXIubGluZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogWyJQIiwgIjYiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oInRvb2xCYXIuZnJlZWRyYXciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsiU2hpZnQrUCIsICI3Il0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJ0b29sQmFyLnRleHQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsiVCIsICI4Il0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJoZWxwRGlhbG9nLnRleHROZXdMaW5lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkVudGVyIiksIE5uKCJTaGlmdCtFbnRlciIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImhlbHBEaWFsb2cudGV4dEZpbmlzaCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJFc2MiKSwgTm4oIkN0cmxPckNtZCtFbnRlciIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImhlbHBEaWFsb2cuY3VydmVkQXJyb3ciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsiQSIsIE8oImhlbHBEaWFsb2cuY2xpY2siKSwgTygiaGVscERpYWxvZy5jbGljayIpLCBPKCJoZWxwRGlhbG9nLmNsaWNrIildLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3I6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygiaGVscERpYWxvZy5jdXJ2ZWRMaW5lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbIkwiLCBPKCJoZWxwRGlhbG9nLmNsaWNrIiksIE8oImhlbHBEaWFsb2cuY2xpY2siKSwgTygiaGVscERpYWxvZy5jbGljayIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09yOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oInRvb2xCYXIubG9jayIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogWyJRIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJoZWxwRGlhbG9nLnByZXZlbnRCaW5kaW5nIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1KCkuY3JlYXRlRWxlbWVudChWcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb246IE8oImhlbHBEaWFsb2cudmlldyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJidXR0b25zLnpvb21JbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrKyIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImJ1dHRvbnMuem9vbU91dCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrLSIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImJ1dHRvbnMucmVzZXRab29tIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCswIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygiaGVscERpYWxvZy56b29tVG9GaXQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsiU2hpZnQrMSJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygiaGVscERpYWxvZy56b29tVG9TZWxlY3Rpb24iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsiU2hpZnQrMiJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygiYnV0dG9ucy5mdWxsU2NyZWVuIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbIkYiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImJ1dHRvbnMuemVuTW9kZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJBbHQrWiIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5zaG93R3JpZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrJyIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy52aWV3TW9kZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJBbHQrUiIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy50b2dnbGVUaGVtZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJBbHQrU2hpZnQrRCIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oInN0YXRzLnRpdGxlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkFsdCsvIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCB1KCkuY3JlYXRlRWxlbWVudChXcCwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoVnAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uOiBPKCJoZWxwRGlhbG9nLmVkaXRvciIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuc2VsZWN0QWxsIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCtBIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLm11bHRpU2VsZWN0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIlNoaWZ0KyIuY29uY2F0KE8oImhlbHBEaWFsb2cuY2xpY2siKSkpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5tb3ZlQ2FudmFzIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIlNwYWNlKyIuY29uY2F0KE8oImhlbHBEaWFsb2cuZHJhZyIpKSksIE5uKCJXaGVlbCsiLmNvbmNhdChPKCJoZWxwRGlhbG9nLmRyYWciKSkpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09yOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5jdXQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK1giKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuY29weSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrQyIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5wYXN0ZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrViIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5jb3B5QXNQbmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiU2hpZnQrQWx0K0MiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuY29weVN0eWxlcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrQWx0K0MiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMucGFzdGVTdHlsZXMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK0FsdCtWIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLmRlbGV0ZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJEZWwiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuc2VuZFRvQmFjayIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKGt0ID8gIkN0cmxPckNtZCtBbHQrWyIgOiAiQ3RybE9yQ21kK1NoaWZ0K1siKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuYnJpbmdUb0Zyb250IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oa3QgPyAiQ3RybE9yQ21kK0FsdCtdIiA6ICJDdHJsT3JDbWQrU2hpZnQrXSIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5zZW5kQmFja3dhcmQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK1siKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuYnJpbmdGb3J3YXJkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCtdIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLmFsaWduVG9wIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCtTaGlmdCtVcCIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5hbGlnbkJvdHRvbSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrU2hpZnQrRG93biIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5hbGlnbkxlZnQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK1NoaWZ0K0xlZnQiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuYWxpZ25SaWdodCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW05uKCJDdHJsT3JDbWQrU2hpZnQrUmlnaHQiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuZHVwbGljYXRlU2VsZWN0aW9uIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCtEIiksIE5uKCJBbHQrIi5jb25jYXQoTygiaGVscERpYWxvZy5kcmFnIikpKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJidXR0b25zLnVuZG8iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK1oiKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJidXR0b25zLnJlZG8iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFN0ID8gW05uKCJDdHJsT3JDbWQrWSIpLCBObigiQ3RybE9yQ21kK1NoaWZ0K1oiKV0gOiBbTm4oIkN0cmxPckNtZCtTaGlmdCtaIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLmdyb3VwIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzOiBbTm4oIkN0cmxPckNtZCtHIildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoR3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogTygibGFiZWxzLnVuZ3JvdXAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiQ3RybE9yQ21kK1NoaWZ0K0ciKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudChHcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBPKCJsYWJlbHMuZmxpcEhvcml6b250YWwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiU2hpZnQrSCIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KEdwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IE8oImxhYmVscy5mbGlwVmVydGljYWwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFtObigiU2hpZnQrViIpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSkpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWnAgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYSwgaSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgJiBvWzBdKSB0aHJvdyBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5czogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGwoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IGwoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOiBsKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgKGFbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpOykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IDEsIHIgJiYgKG8gPSAyICYgYVswXSA/IHIucmV0dXJuIDogYVswXSA/IHIudGhyb3cgfHwgKChvID0gci5yZXR1cm4pICYmIG8uY2FsbChyKSwgMCkgOiByLm5leHQpICYmICEobyA9IG8uY2FsbChyLCBhWzFdKSkuZG9uZSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyID0gMCwgbyAmJiAoYSA9IFsyICYgYVswXSwgby52YWx1ZV0pLCBhWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIHIgPSBhWzFdLCBhID0gWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvID0gaS50cnlzLCAobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pIHx8IDYgIT09IGFbMF0gJiYgMiAhPT0gYVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFvIHx8IGFbMV0gPiBvWzBdICYmIGFbMV0gPCBvWzNdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gYVswXSAmJiBpLmxhYmVsIDwgb1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdLCBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgaS5sYWJlbCA8IG9bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gb1syXSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQuY2FsbChlLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbNiwgZV0sIHIgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYVswXSA/IGFbMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShbYSwgbF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBZcCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgbysrKSBlW29dID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFhwKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBxcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5saWJyYXJ5SXRlbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUub25SZW1vdmVGcm9tTGlicmFyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5vbkFkZFRvTGlicmFyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vbkluc2VydFNoYXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLnBlbmRpbmdFbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5zZXRMaWJyYXJ5SXRlbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUubGlicmFyeVJldHVyblVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZS5mb2N1c0NvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZS5saWJyYXJ5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBwaCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSB0Lmxlbmd0aCArIChhLmxlbmd0aCA+IDAgPyAxIDogMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGggPyA0IDogNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKGYgLyBtKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gcyB8fCB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5wdXNoKHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAibGF5ZXItdWlfX2xpYnJhcnktaGVhZGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJsaWJyYXJ5LWhlYWRlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiaW1wb3J0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogTygiYnV0dG9ucy5sb2FkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLmxvYWQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnUoZCkudGhlbigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpYnJhcnlPcGVuOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlicmFyeU9wZW46ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuY2F0Y2goVW4pLmNhdGNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGUubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksICEhdC5sZW5ndGggJiYgdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgkaSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogImV4cG9ydCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMuZXhwb3J0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLmV4cG9ydCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodShkKS5jYXRjaChVbikuY2F0Y2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJyZXNldCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IE8oImJ1dHRvbnMucmVzZXRMaWJyYXJ5IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLnJlc2V0TGlicmFyeSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHNsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uZmlybShPKCJhbGVydHMucmVzZXRMaWJyYXJ5IikpICYmIChkLnJlc2V0TGlicmFyeSgpLCBsKFtdKSwgYygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogImh0dHBzOi8vbGlicmFyaWVzLmV4Y2FsaWRyYXcuY29tP3RhcmdldD0iLmNvbmNhdCh3aW5kb3cubmFtZSB8fCAiX2JsYW5rIiwgIiZyZWZlcnJlcj0iKS5jb25jYXQoeSwgIiZ1c2VIYXNoPXRydWUmdG9rZW49IikuY29uY2F0KHApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogIl9leGNhbGlkcmF3X2xpYnJhcmllcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oImxhYmVscy5saWJyYXJpZXMiKSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHcgPSAwOyB3IDwgZzsgdysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IG0gKiB3LCBFID0gW10sIGsgPSAwOyBrIDwgbTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTID0gYS5sZW5ndGggPiAwICYmICFiICYmIHggKyBrID49IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gYiB8fCBTLCBFLnB1c2godSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChUcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHRbeCArIGtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0VsZW1lbnRzOiBTID8gYSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlRnJvbUxpYnJhcnk6IG4uYmluZChudWxsLCB4ICsgayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBTID8gci5iaW5kKG51bGwsIGEpIDogby5iaW5kKG51bGwsIHRbeCArIGtdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYucHVzaCh1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgRSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogInN0YXJ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAibGF5ZXItdWlfX2xpYnJhcnktaXRlbXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB2KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBRcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5vbkNsaWNrT3V0c2lkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5vbkluc2VydFNoYXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLnBlbmRpbmdFbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vbkFkZFRvTGlicmFyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5saWJyYXJ5UmV0dXJuVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLmZvY3VzQ29udGFpbmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmxpYnJhcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGUuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9ICgwLCBjLnVzZVJlZikobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgYy51c2VFZmZlY3QpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmN1cnJlbnQgJiYgKG4udGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCAmJiAoZS5jdXJyZW50LmNvbnRhaW5zKG4udGFyZ2V0KSB8fCAhZG9jdW1lbnQuYm9keS5jb250YWlucyhuLnRhcmdldCkpIHx8IHQobikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIG4sICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJkb3duIiwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgW2UsIHRdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShwLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoIi5Ub29sSWNvbl90eXBlX2J1dHRvbl9fbGlicmFyeSIpIHx8IHQoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gKDAsIGMudXNlU3RhdGUpKFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZlsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gKDAsIGMudXNlU3RhdGUpKCJwcmVsb2FkaW5nIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHZbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHZbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9ICgwLCBjLnVzZVJlZikobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgYy51c2VFZmZlY3QpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5jdXJyZW50ID0gc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSgibG9hZGluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgMTAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHMubG9hZExpYnJhcnkoKS50aGVuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKGUpLCB5KCJyZWFkeSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKV0pLnRoZW4oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsb2FkaW5nIiA9PT0gZSAmJiB5KCJsb2FkaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh3LmN1cnJlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbc10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAoMCwgYy51c2VDYWxsYmFjaykoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKDAsIGguWikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpwKHRoaXMsIChmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgcy5sb2FkTGlicmFyeSgpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSByLnNlbnQoKSwgbiA9IHQuZmlsdGVyKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gIT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgcy5zYXZlTGlicmFyeShuKS5jYXRjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcodCksIGEoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IE8oImFsZXJ0cy5lcnJvclJlbW92aW5nRnJvbUxpYnJhcnkiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGcobiksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCksIFtzLCBhXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9ICgwLCBjLnVzZUNhbGxiYWNrKShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWnAodGhpcywgKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBzLmxvYWRMaWJyYXJ5KCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHIuc2VudCgpLCBuID0gWXAoWXAoW10sIHQpLCBbZV0pLCBvKCksIHMuc2F2ZUxpYnJhcnkobikuY2F0Y2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKHQpLCBhKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBPKCJhbGVydHMuZXJyb3JBZGRpbmdUb0xpYnJhcnkiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGcobiksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCksIFtvLCBzLCBhXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInByZWxvYWRpbmciID09PSBiID8gbnVsbCA6IHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAibGF5ZXItdWlfX2xpYnJhcnkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAibG9hZGluZyIgPT09IGIgPyB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImxheWVyLXVpX19saWJyYXJ5LW1lc3NhZ2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPKCJsYWJlbHMubGlicmFyeUxvYWRpbmdNZXNzYWdlIikpIDogdSgpLmNyZWF0ZUVsZW1lbnQocXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5SXRlbXM6IG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVGcm9tTGlicmFyeTogeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkZFRvTGlicmFyeTogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkluc2VydFNoYXBlOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdFbGVtZW50czogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMaWJyYXJ5SXRlbXM6IGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeVJldHVyblVybDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbnRhaW5lcjogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5OiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgJHAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiA9IGUuYWN0aW9uTWFuYWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5jYW52YXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUub25Db2xsYWJCdXR0b25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5vbkxvY2tUb2dnbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGUub25JbnNlcnRFbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZS56ZW5Nb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZS5zaG93RXhpdFplbk1vZGVCdG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGUuc2hvd1RoZW1lQnRuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBlLnRvZ2dsZVplbk1vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGUuaXNDb2xsYWJvcmF0aW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBlLm9uRXhwb3J0VG9CYWNrZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBlLnJlbmRlclRvcFJpZ2h0VUksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGUucmVuZGVyQ3VzdG9tRm9vdGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBlLnZpZXdNb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gZS5saWJyYXJ5UmV0dXJuVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSBlLlVJT3B0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gZS5mb2N1c0NvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQID0gZS5saWJyYXJ5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgPSBlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBwaCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFTLmNhbnZhc0FjdGlvbnMuZXhwb3J0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAoMCwgaC5aKSgoZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWnAodGhpcywgKGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBMdShlLCB0LCByLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiByLmV4cG9ydEJhY2tncm91bmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiByLnZpZXdCYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEFkZFdhdGVybWFyazogci5zaG91bGRBZGRXYXRlcm1hcmsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goVW4pLmNhdGNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpLCBvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGUubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNlbnQoKSwgWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudChPcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbk1hbmFnZXI6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4cG9ydFRvUG5nOiBlKCJwbmciKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhwb3J0VG9Tdmc6IGUoInN2ZyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FeHBvcnRUb0NsaXBib2FyZDogZSgiY2xpcGJvYXJkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4cG9ydFRvQmFja2VuZDogeSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICYmIHkoZSwgciwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gPSAoMCwgYy51c2VDYWxsYmFjaykoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpYnJhcnlPcGVuOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbb10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSAoMCwgYy51c2VDYWxsYmFjaykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbb10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSByLmlzTGlicmFyeU9wZW4gPyB1KCkuY3JlYXRlRWxlbWVudChRcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRWxlbWVudHM6IE5pKGksIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrT3V0c2lkZTogXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JbnNlcnRTaGFwZTogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRUb0xpYnJhcnk6IEQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFwcFN0YXRlOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5UmV0dXJuVXJsOiBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbnRhaW5lcjogQywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeTogUCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IEkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiA9IHUoKS5jcmVhdGVFbGVtZW50KHUoKS5GcmFnbWVudCwgbnVsbCwgci5pc0xvYWRpbmcgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoTSwgbnVsbCksIHIuZXJyb3JNZXNzYWdlICYmIHUoKS5jcmVhdGVFbGVtZW50KHlwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHIuZXJyb3JNZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgci5zaG93SGVscERpYWxvZyAmJiB1KCkuY3JlYXRlRWxlbWVudChVcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIZWxwRGlhbG9nOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByLnBhc3RlRGlhbG9nLnNob3duICYmIHUoKS5jcmVhdGVFbGVtZW50KEhwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFwcFN0YXRlOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JbnNlcnRDaGFydDogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzdGVEaWFsb2c6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUID8gdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB6LCB1KCkuY3JlYXRlRWxlbWVudCh6cCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbk1hbmFnZXI6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeU1lbnU6IGosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QnV0dG9uOiBBKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QXBwU3RhdGU6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db2xsYWJCdXR0b25DbGljazogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkxvY2tUb2dnbGU6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGFib3JhdGluZzogYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDdXN0b21Gb290ZXI6IHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVFbmFibGVkOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaGVtZUJ0bjogZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJsYXllci11aV9fd3JhcHBlciIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpc2FibGUtcG9pbnRlckV2ZW50cyI6IHIuZHJhZ2dpbmdFbGVtZW50IHx8IHIucmVzaXppbmdFbGVtZW50IHx8IHIuZWRpdGluZ0VsZW1lbnQgJiYgIVZlKHIuZWRpdGluZ0VsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHosICh0ID0gUGkociwgaSksIHUoKS5jcmVhdGVFbGVtZW50KE1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lkZTogInRvcCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiQXBwLW1lbnUgQXBwLW1lbnVfdG9wIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXNhYmxlLXBvaW50ZXJFdmVudHMiOiBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIEUgPyB1KCkuY3JlYXRlRWxlbWVudChfcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6ICJjYW52YXNBY3Rpb25zIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJ6ZW4tbW9kZS10cmFuc2l0aW9uIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNpdGlvbi1sZWZ0IjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChtcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGFwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4ucmVuZGVyQWN0aW9uKCJzYXZlU2NlbmUiKSwgbi5yZW5kZXJBY3Rpb24oInNhdmVBc1NjZW5lIiksIEEoKSkpKSkgOiB1KCkuY3JlYXRlRWxlbWVudChfcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6ICJjYW52YXNBY3Rpb25zIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJ6ZW4tbW9kZS10cmFuc2l0aW9uIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNpdGlvbi1sZWZ0IjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChtcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGFwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4ucmVuZGVyQWN0aW9uKCJsb2FkU2NlbmUiKSwgbi5yZW5kZXJBY3Rpb24oInNhdmVTY2VuZSIpLCBuLnJlbmRlckFjdGlvbigic2F2ZUFzU2NlbmUiKSwgQSgpLCBuLnJlbmRlckFjdGlvbigiY2xlYXJDYW52YXMiKSwgbCAmJiB1KCkuY3JlYXRlRWxlbWVudChwcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGFib3JhdGluZzogYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYWJvcmF0b3JDb3VudDogci5jb2xsYWJvcmF0b3JzLnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1KCkuY3JlYXRlRWxlbWVudChkcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbk1hbmFnZXI6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QXBwU3RhdGU6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1RoZW1lQnRuOiBnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpKSwgdCAmJiB1KCkuY3JlYXRlRWxlbWVudChfcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6ICJzZWxlY3RlZFNoYXBlQWN0aW9ucyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiemVuLW1vZGUtdHJhbnNpdGlvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRyYW5zaXRpb24tbGVmdCI6IGYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQobXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGQuJEMuU0hBUEVfQUNUSU9OU19NRU5VLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAiIi5jb25jYXQoci5oZWlnaHQgLSAyMDAsICJweCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQobHAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBY3Rpb246IG4ucmVuZGVyQWN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiByLmVsZW1lbnRUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpKSwgIUUgJiYgdSgpLmNyZWF0ZUVsZW1lbnQoX3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiAic2hhcGVzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoaXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiA0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogInN0YXJ0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGFwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInplbi1tb2RlIjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KFBwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLCB1KCkuY3JlYXRlRWxlbWVudChhcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChjcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXM6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiByLmVsZW1lbnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3Blbjogci5pc0xpYnJhcnlPcGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoQXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemVuTW9kZUVuYWJsZWQ6IGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHIuZWxlbWVudExvY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBPKCJ0b29sQmFyLmxvY2siKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgaikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJsYXllci11aV9fd3JhcHBlcl9fdG9wLXJpZ2h0IHplbi1tb2RlLXRyYW5zaXRpb24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFuc2l0aW9uLXJpZ2h0IjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChEcCwgbnVsbCwgci5jb2xsYWJvcmF0b3JzLnNpemUgPiAwICYmIEFycmF5LmZyb20oci5jb2xsYWJvcmF0b3JzKS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAhPT0gT2JqZWN0LmtleXModCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoZGMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHIudXNlcm5hbWUgfHwgIlVua25vd24gdXNlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4ucmVuZGVyQWN0aW9uKCJnb1RvQ29sbGFib3JhdG9yIiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBudWxsID09IHcgPyB2b2lkIDAgOiB3KFQsIHIpKSkpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoImZvb3RlciIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAiY29udGVudGluZm8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImxheWVyLXVpX193cmFwcGVyX19mb290ZXIgQXBwLW1lbnUgQXBwLW1lbnVfYm90dG9tIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHplKCJsYXllci11aV9fd3JhcHBlcl9fZm9vdGVyLWxlZnQgemVuLW1vZGUtdHJhbnNpdGlvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxheWVyLXVpX193cmFwcGVyX19mb290ZXItbGVmdC0tdHJhbnNpdGlvbi1sZWZ0IjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChpcCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoX3AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiAiY2FudmFzQWN0aW9ucyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQodXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBY3Rpb246IG4ucmVuZGVyQWN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHIuem9vbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSkpLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoImxheWVyLXVpX193cmFwcGVyX19mb290ZXItY2VudGVyIHplbi1tb2RlLXRyYW5zaXRpb24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsYXllci11aV9fd3JhcHBlcl9fZm9vdGVyLWxlZnQtLXRyYW5zaXRpb24tYm90dG9tIjogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsID09IHggPyB2b2lkIDAgOiB4KCExLCByKSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgibGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlci1yaWdodCB6ZW4tbW9kZS10cmFuc2l0aW9uIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNpdGlvbi1yaWdodCBkaXNhYmxlLXBvaW50ZXJFdmVudHMiOiBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4ucmVuZGVyQWN0aW9uKCJ0b2dnbGVTaG9ydGN1dHMiKSksIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB6ZSgiZGlzYWJsZS16ZW4tbW9kZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpc2FibGUtemVuLW1vZGUtLXZpc2libGUiOiBtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygiYnV0dG9ucy5leGl0WmVuTW9kZSIpKSksIHIuc2Nyb2xsZWRPdXRzaWRlICYmIHUoKS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAic2Nyb2xsLWJhY2stdG8tY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8oZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBYcChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IFhwKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oe30sIFdpKGksIHIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPKCJidXR0b25zLnNjcm9sbEJhY2tUb0NvbnRlbnQiKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEpwID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3VnZ2VzdGVkQmluZGluZ3MsIGUuc3RhcnRCb3VuZEVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxcihlLCBbInN1Z2dlc3RlZEJpbmRpbmdzIiwgInN0YXJ0Qm91bmRFbGVtZW50Il0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbihlLmFwcFN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbih0LmFwcFN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gT2JqZWN0LmtleXMocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yZW5kZXJDdXN0b21Gb290ZXIgPT09IHQucmVuZGVyQ3VzdG9tRm9vdGVyICYmIGUubGFuZ0NvZGUgPT09IHQubGFuZ0NvZGUgJiYgZS5lbGVtZW50cyA9PT0gdC5lbGVtZW50cyAmJiBhLmV2ZXJ5KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJbZV0gPT09IG9bZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVoID0gdSgpLm1lbW8oJHAsIEpwKTsKICAgICAgICAgICAgICAgICAgICBuKDE1MjgpOwogICAgICAgICAgICAgICAgICAgIHZhciB0aCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuID0gcGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbXQoZS5lbGVtZW50cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFJpKGUuZWxlbWVudHMsIGUuYXBwU3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBtdChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIGUuYXBwU3RhdGUub3Blbk1lbnUgPyBudWxsIDogdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJTdGF0cyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KG1wLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJjbG9zZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZS5vbkNsb3NlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBBbCksIHUoKS5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIE8oInN0YXRzLnRpdGxlIikpLCB1KCkuY3JlYXRlRWxlbWVudCgidGFibGUiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygic3RhdHMuc2NlbmUiKSkpLCB1KCkuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBPKCJzdGF0cy5lbGVtZW50cyIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgZS5lbGVtZW50cy5sZW5ndGgpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTygic3RhdHMud2lkdGgiKSksIHUoKS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIE1hdGgucm91bmQoclsyXSkgLSBNYXRoLnJvdW5kKHJbMF0pKSksIHUoKS5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIE8oInN0YXRzLmhlaWdodCIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTWF0aC5yb3VuZChyWzNdKSAtIE1hdGgucm91bmQoclsxXSkpKSwgMSA9PT0gby5sZW5ndGggJiYgdSgpLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW46IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oInN0YXRzLmVsZW1lbnQiKSkpLCBvLmxlbmd0aCA+IDEgJiYgdSgpLmNyZWF0ZUVsZW1lbnQodSgpLkZyYWdtZW50LCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgTygic3RhdHMuc2VsZWN0ZWQiKSkpLCB1KCkuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBPKCJzdGF0cy5lbGVtZW50cyIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5sZW5ndGgpKSksIG8ubGVuZ3RoID4gMCAmJiB1KCkuY3JlYXRlRWxlbWVudCh1KCkuRnJhZ21lbnQsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIHUoKS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsICJ4IiksIHUoKS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIE1hdGgucm91bmQoYVswXSkpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgInkiKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTWF0aC5yb3VuZChhWzFdKSkpLCB1KCkuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCB1KCkuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBPKCJzdGF0cy53aWR0aCIpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTWF0aC5yb3VuZChhWzJdIC0gYVswXSkpKSwgdSgpLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTygic3RhdHMuaGVpZ2h0IikpLCB1KCkuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBNYXRoLnJvdW5kKGFbM10gLSBhWzFdKSkpKSwgMSA9PT0gby5sZW5ndGggJiYgdSgpLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgdSgpLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTygic3RhdHMuYW5nbGUiKSksIHUoKS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsICIiLmNvbmNhdChNYXRoLnJvdW5kKDE4MCAqIG9bMF0uYW5nbGUgLyBNYXRoLlBJKSwgIsKwIikpKSwgbnVsbCA9PT0gKHQgPSBlLnJlbmRlckN1c3RvbVN0YXRzKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNhbGwoZSwgZS5lbGVtZW50cywgZS5hcHBTdGF0ZSkpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG5oID0gKG4oOTc1NyksIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNsZWFyVG9hc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9ICgwLCBjLnVzZVJlZikoMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICgwLCBjLnVzZUNhbGxiYWNrKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmN1cnJlbnQgPSB3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBkLkxnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLnVzZUVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChyLmN1cnJlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbbywgdF0pLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIlRvYXN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG51bGwgPT0gciA/IHZvaWQgMCA6IHIuY3VycmVudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZTogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiVG9hc3RfX21lc3NhZ2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJoKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpLmVudW1lcmFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSksIG4ucHVzaC5hcHBseShuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW3RdID8gYXJndW1lbnRzW3RdIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICUgMiA/IHJoKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IHJoKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGFoID0gdXMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInZpZXdNb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2MoInZpZXciLCAibW9kZSIsICJ2aWV3IiksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IG9oKG9oKHt9LCB0KSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlRW5hYmxlZDogIXRoaXMuY2hlY2tlZCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnZpZXdNb2RlRW5hYmxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMudmlld01vZGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5VGVzdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZVtKdF0gJiYgZS5hbHRLZXkgJiYgZS5jb2RlID09PSBVdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgaWggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3Byb3RvX186IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLl9fcHJvdG9fXyA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB8fCBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiAoZVtuXSA9IHRbbl0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKHQsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgbiAmJiBudWxsICE9PSBuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIgKyBTdHJpbmcobikgKyAiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSh0LCBuKSwgdC5wcm90b3R5cGUgPSBudWxsID09PSBuID8gT2JqZWN0LmNyZWF0ZShuKSA6IChyLnByb3RvdHlwZSA9IG4ucHJvdG90eXBlLCBuZXcgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBsaCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIG9bMF0pIHRocm93IG9bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogbCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm46IGwoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoYVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGk7KSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gMSwgciAmJiAobyA9IDIgJiBhWzBdID8gci5yZXR1cm4gOiBhWzBdID8gci50aHJvdyB8fCAoKG8gPSByLnJldHVybikgJiYgby5jYWxsKHIpLCAwKSA6IHIubmV4dCkgJiYgIShvID0gby5jYWxsKHIsIGFbMV0pKS5kb25lKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSAwLCBvICYmIChhID0gWzIgJiBhWzBdLCBvLnZhbHVlXSksIGFbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwrKywgciA9IGFbMV0sIGEgPSBbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG8gPSBpLnRyeXMsIChvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgfHwgNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA9PT0gYVswXSAmJiAoIW8gfHwgYVsxXSA+IG9bMF0gJiYgYVsxXSA8IG9bM10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBvWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IG9bMV0sIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBpLmxhYmVsIDwgb1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzJdLCBpLm9wcy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFs2LCBlXSwgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNSAmIGFbMF0pIHRocm93IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KFthLCBsXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNoID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSB0Lmxlbmd0aCwgbyA9IGUubGVuZ3RoOyBuIDwgcjsgbisrLCBvKyspIGVbb10gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2goZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gY2goT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogY2goT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZGggPSB1KCkuY3JlYXRlQ29udGV4dCghMSksCiAgICAgICAgICAgICAgICAgICAgICAgIHBoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGMudXNlQ29udGV4dCkoZGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGhoID0gdSgpLmNyZWF0ZUNvbnRleHQobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgIGZoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGMudXNlQ29udGV4dCkoaGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1oID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIGdoID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgdmggPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBiaCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHloID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHdoID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHhoID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIEVoID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtoID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgU2ggPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgQ2ggPSBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBPaCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJzOiBuZXcgTWFwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENlbnRlcjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxEaXN0YW5jZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxTY2FsZTogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBNaCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZS5jYWxsKHRoaXMsIHQpIHx8IHRoaXMsIG4gPSByLCBQaC5jYWxsKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLCBhLCBpLCBsLCBzID0gWG4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHQuZXhjYWxpZHJhd1JlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHQudmlld01vZGVFbmFibGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gdm9pZCAwICE9PSBwICYmIHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSB0Lnplbk1vZGVFbmFibGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gdm9pZCAwICE9PSBmICYmIGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSB0LmdyaWRNb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHZvaWQgMCAhPT0gZyAmJiBnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdC50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHZvaWQgMCA9PT0gYiA/IHMudGhlbWUgOiBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gdC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gdm9pZCAwID09PSB3ID8gcy5uYW1lIDogdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5zdGF0ZSA9IHVoKHVoKHVoKHt9LCBzKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByLmdldENhbnZhc09mZnNldHMoKSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZUVuYWJsZWQ6IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ZW5Nb2RlRW5hYmxlZDogbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRTaXplOiB2ID8gZC5rIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgci5pZCA9IFdlKCksIGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEUsIGsgPSAiY3VycmVudCIgaW4gYyAmJiAobnVsbCA9PT0gKEUgPSBjLmN1cnJlbnQpIHx8IHZvaWQgMCA9PT0gRSA/IHZvaWQgMCA6IEUucmVhZHlQcm9taXNlKSB8fCAoKGkgPSBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLCBhID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKS5yZXNvbHZlID0gbywgaS5yZWplY3QgPSBhLCBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5UHJvbWlzZTogaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTY2VuZTogci51cGRhdGVTY2VuZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFNjZW5lOiByLnJlc2V0U2NlbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NlbmVFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQ6IHIuZ2V0U2NlbmVFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcjogci5yZXNldEhpc3RvcnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvQ29udGVudDogci5zY3JvbGxUb0NvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NlbmVFbGVtZW50czogci5nZXRTY2VuZUVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEFwcFN0YXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc3RhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2g6IHIucmVmcmVzaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRMaWJyYXJ5OiByLmltcG9ydExpYnJhcnlGcm9tVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TWVzc2FnZTogci5zZXRUb2FzdE1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHIuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGMgPyBjKFMpIDogYy5jdXJyZW50ID0gUywgay5yZXNvbHZlKFMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnNjZW5lID0gbmV3IEhyLCByLmxpYnJhcnkgPSBuZXcgR2QociksIHIuaGlzdG9yeSA9IG5ldyBRZCwgci5hY3Rpb25NYW5hZ2VyID0gbmV3IEZkKHIuc3luY0FjdGlvblJlc3VsdCwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zdGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHIpLCByLmFjdGlvbk1hbmFnZXIucmVnaXN0ZXJBbGwoY3MpLCByLmFjdGlvbk1hbmFnZXIucmVnaXN0ZXJBY3Rpb24oKGwgPSByLmhpc3RvcnksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogInVuZG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmQoZSwgdCwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLnVuZG9PbmNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlUZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gd24gJiYgIWUuc2hpZnRLZXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCRpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBPKCJidXR0b25zLnVuZG8iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHIuYWN0aW9uTWFuYWdlci5yZWdpc3RlckFjdGlvbihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAicmVkbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJkKHQsIG4sIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucmVkb09uY2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRlc3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVtKdF0gJiYgZS5zaGlmdEtleSAmJiBlLmtleS50b0xvd2VyQ2FzZSgpID09PSB3biB8fCBTdCAmJiBlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkgJiYgZS5rZXkgPT09IHluCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWxDb21wb25lbnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXBkYXRlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSgpLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGdsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IE8oImJ1dHRvbnMucmVkbyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShyLmhpc3RvcnkpKSwgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGloKHQsIGUpLCB0LnByb3RvdHlwZS5yZW5kZXJDYW52YXMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHQud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4gKiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gciAqIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudmlld01vZGVFbmFibGVkID8gdSgpLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJjYW52YXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICJncmFiYmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiB0aGlzLmhhbmRsZUNhbnZhc1JlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db250ZXh0TWVudTogdGhpcy5oYW5kbGVDYW52YXNDb250ZXh0TWVudSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyTW92ZTogdGhpcy5oYW5kbGVDYW52YXNQb2ludGVyTW92ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyVXA6IHRoaXMucmVtb3ZlUG9pbnRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyQ2FuY2VsOiB0aGlzLnJlbW92ZVBvaW50ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG91Y2hNb3ZlOiB0aGlzLmhhbmRsZVRvdWNoTW92ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bjogdGhpcy5oYW5kbGVDYW52YXNQb2ludGVyRG93bgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oImxhYmVscy5kcmF3aW5nQ2FudmFzIikpIDogdSgpLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJjYW52YXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiB0aGlzLmhhbmRsZUNhbnZhc1JlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db250ZXh0TWVudTogdGhpcy5oYW5kbGVDYW52YXNDb250ZXh0TWVudSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bjogdGhpcy5oYW5kbGVDYW52YXNQb2ludGVyRG93biwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Eb3VibGVDbGljazogdGhpcy5oYW5kbGVDYW52YXNEb3VibGVDbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyTW92ZTogdGhpcy5oYW5kbGVDYW52YXNQb2ludGVyTW92ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyVXA6IHRoaXMucmVtb3ZlUG9pbnRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyQ2FuY2VsOiB0aGlzLnJlbW92ZVBvaW50ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVG91Y2hNb3ZlOiB0aGlzLmhhbmRsZVRvdWNoTW92ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIE8oImxhYmVscy5kcmF3aW5nQ2FudmFzIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgdCwgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gci56ZW5Nb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIudmlld01vZGVFbmFibGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5wcm9wcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGkub25Db2xsYWJCdXR0b25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGkub25FeHBvcnRUb0JhY2tlbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBpLnJlbmRlclRvcFJpZ2h0VUksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBpLnJlbmRlckZvb3RlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGkucmVuZGVyQ3VzdG9tU3RhdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogemUoImV4Y2FsaWRyYXcgZXhjYWxpZHJhdy1jb250YWluZXIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZXhjYWxpZHJhdy0tdmlldy1tb2RlIjogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJleGNhbGlkcmF3LS1tb2JpbGUiOiB0aGlzLmlzTW9iaWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ecm9wOiB0aGlzLmhhbmRsZUFwcE9uRHJvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5wcm9wcy5oYW5kbGVLZXlib2FyZEdsb2JhbGx5ID8gdm9pZCAwIDogdGhpcy5vbktleURvd24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChoaC5Qcm92aWRlciwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB1KCkuY3JlYXRlRWxlbWVudChkaC5Qcm92aWRlciwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5pc01vYmlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHUoKS5jcmVhdGVFbGVtZW50KGVoLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhczogdGhpcy5jYW52YXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogdGhpcy5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uTWFuYWdlcjogdGhpcy5hY3Rpb25NYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogdGhpcy5zY2VuZS5nZXRFbGVtZW50cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbGxhYkJ1dHRvbkNsaWNrOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkxvY2tUb2dnbGU6IHRoaXMudG9nZ2xlTG9jaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JbnNlcnRFbGVtZW50czogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkRWxlbWVudHNGcm9tUGFzdGVPckxpYnJhcnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemVuTW9kZUVuYWJsZWQ6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVplbk1vZGU6IHRoaXMudG9nZ2xlWmVuTW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ0NvZGU6IFMoKS5jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NvbGxhYm9yYXRpbmc6IHRoaXMucHJvcHMuaXNDb2xsYWJvcmF0aW5nIHx8ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4cG9ydFRvQmFja2VuZDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVG9wUmlnaHRVSTogYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ3VzdG9tRm9vdGVyOiBkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZUVuYWJsZWQ6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFeGl0WmVuTW9kZUJ0bjogdm9pZCAwID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnByb3BzKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnplbk1vZGVFbmFibGVkKSAmJiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VGhlbWVCdG46IHZvaWQgMCA9PT0gKG51bGwgPT09ICh0ID0gdGhpcy5wcm9wcykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC50aGVtZSkgJiYgdGhpcy5wcm9wcy5VSU9wdGlvbnMuY2FudmFzQWN0aW9ucy50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeVJldHVyblVybDogdGhpcy5wcm9wcy5saWJyYXJ5UmV0dXJuVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSU9wdGlvbnM6IHRoaXMucHJvcHMuVUlPcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbnRhaW5lcjogdGhpcy5mb2N1c0NvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeTogdGhpcy5saWJyYXJ5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJleGNhbGlkcmF3LXRleHRFZGl0b3JDb250YWluZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUoKS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogImV4Y2FsaWRyYXctY29udGV4dE1lbnVDb250YWluZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMuc3RhdGUuc2hvd1N0YXRzICYmIHUoKS5jcmVhdGVFbGVtZW50KHRoLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBcHBTdGF0ZTogdGhpcy5zZXRBcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHRoaXMuc2NlbmUuZ2V0RWxlbWVudHMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy50b2dnbGVTdGF0cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ3VzdG9tU3RhdHM6IHAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbnVsbCAhPT0gdGhpcy5zdGF0ZS50b2FzdE1lc3NhZ2UgJiYgdSgpLmNyZWF0ZUVsZW1lbnQobmgsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5zdGF0ZS50b2FzdE1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVG9hc3Q6IHRoaXMuY2xlYXJUb2FzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB1KCkuY3JlYXRlRWxlbWVudCgibWFpbiIsIG51bGwsIHRoaXMucmVuZGVyQ2FudmFzKCkpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGguWikoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiwgciwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxoKHRoaXMsIChmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInByb2R1Y3Rpb24iICE9PSBkLlZpLlRFU1QgJiYgInByb2R1Y3Rpb24iICE9PSBkLlZpLkRFVkVMT1BNRU5UIHx8IChlLnNldFN0YXRlLmJpbmQoZSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdpbmRvdy5oLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0YXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDA7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspIHRbbl0gPSBhcmd1bWVudHNbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZXRTdGF0ZS5hcHBseShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUuaGlzdG9yeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZS5zY2VuZS5hZGRDYWxsYmFjayhlLm9uU2NlbmVVcGRhdGVkKSwgZS5hZGRFdmVudExpc3RlbmVycygpLCBlLmV4Y2FsaWRyYXdDb250YWluZXJSZWYuY3VycmVudCAmJiBlLmZvY3VzQ29udGFpbmVyKCksICJSZXNpemVPYnNlcnZlciIgaW4gd2luZG93ICYmIG51bGwgIT09ICh0ID0gZS5leGNhbGlkcmF3Q29udGFpbmVyUmVmKSAmJiB2b2lkIDAgIT09IHQgJiYgdC5jdXJyZW50ID8gKGUucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0LndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pc01vYmlsZSA9IG4gPCBkLmtWIHx8IHIgPCBkLll4ICYmIG4gPCBkLnNTLCBlLnVwZGF0ZURPTVJlY3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBudWxsID09PSAobiA9IGUucmVzaXplT2JzZXJ2ZXIpIHx8IHZvaWQgMCA9PT0gbiB8fCBuLm9ic2VydmUoZS5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQpKSA6IHdpbmRvdy5tYXRjaE1lZGlhICYmIChyID0gd2luZG93Lm1hdGNoTWVkaWEoIihtYXgtd2lkdGg6ICIuY29uY2F0KGQua1YsICJweCksIChtYXgtaGVpZ2h0OiAiKS5jb25jYXQoZC5ZeCwgInB4KSBhbmQgKG1heC13aWR0aDogIikuY29uY2F0KGQuc1MsICJweCkiKSksIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pc01vYmlsZSA9IHIubWF0Y2hlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgci5hZGRMaXN0ZW5lcihvKSwgZS5kZXRhY2hJc01vYmlsZU1xSGFuZGxlciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnJlbW92ZUxpc3RlbmVyKG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpKS5oYXMoIndlYi1zaGFyZS10YXJnZXQiKSA/IGUucmVzdG9yZUZpbGVGcm9tU2hhcmUoKSA6IGUudXBkYXRlRE9NUmVjdChlLmluaXRpYWxpemVTY2VuZSksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSAoZSA9IHRoaXMucmVzaXplT2JzZXJ2ZXIpIHx8IHZvaWQgMCA9PT0gZSB8fCBlLmRpc2Nvbm5lY3QoKSwgdGhpcy51bm1vdW50ZWQgPSAhMCwgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpLCB0aGlzLnNjZW5lLmRlc3Ryb3koKSwgY2xlYXJUaW1lb3V0KGtoKSwga2ggPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLCB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5DT1BZLCB0aGlzLm9uQ29weSksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5QQVNURSwgdGhpcy5wYXN0ZUZyb21DbGlwYm9hcmQpLCBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuQ1VULCB0aGlzLm9uQ3V0KSwgbnVsbCA9PT0gKGUgPSB0aGlzLm5lYXJlc3RTY3JvbGxhYmxlQ29udGFpbmVyKSB8fCB2b2lkIDAgPT09IGUgfHwgZS5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuU0NST0xMLCB0aGlzLm9uU2Nyb2xsKSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLktFWURPV04sIHRoaXMub25LZXlEb3duLCAhMSksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5NT1VTRV9NT1ZFLCB0aGlzLnVwZGF0ZUN1cnJlbnRDdXJzb3JQb3NpdGlvbiwgITEpLCBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuS0VZVVAsIHRoaXMub25LZXlVcCksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuUkVTSVpFLCB0aGlzLm9uUmVzaXplLCAhMSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuVU5MT0FELCB0aGlzLm9uVW5sb2FkLCAhMSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuQkxVUiwgdGhpcy5vbkJsdXIsICExKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5EUkFHX09WRVIsIHRoaXMuZGlzYWJsZUV2ZW50LCAhMSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuRFJPUCwgdGhpcy5kaXNhYmxlRXZlbnQsICExKSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLkdFU1RVUkVfU1RBUlQsIHRoaXMub25HZXN0dXJlU3RhcnQsICExKSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLkdFU1RVUkVfQ0hBTkdFLCB0aGlzLm9uR2VzdHVyZUNoYW5nZSwgITEpLCBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuR0VTVFVSRV9FTkQsIHRoaXMub25HZXN0dXJlRW5kLCAhMSksIG51bGwgPT09ICh0ID0gdGhpcy5kZXRhY2hJc01vYmlsZU1xSGFuZGxlcikgfHwgdm9pZCAwID09PSB0IHx8IHQuY2FsbCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5DT1BZLCB0aGlzLm9uQ29weSksIHRoaXMucHJvcHMuaGFuZGxlS2V5Ym9hcmRHbG9iYWxseSAmJiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGQuS3MuS0VZRE9XTiwgdGhpcy5vbktleURvd24sICExKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLktzLktFWVVQLCB0aGlzLm9uS2V5VXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLktzLk1PVVNFX01PVkUsIHRoaXMudXBkYXRlQ3VycmVudEN1cnNvclBvc2l0aW9uKSwgbnVsbCA9PT0gKGUgPSBkb2N1bWVudC5mb250cykgfHwgdm9pZCAwID09PSBlIHx8IG51bGwgPT09ICh0ID0gZS5hZGRFdmVudExpc3RlbmVyKSB8fCB2b2lkIDAgPT09IHQgfHwgdC5jYWxsKGUsICJsb2FkaW5nZG9uZSIsIHRoaXMub25Gb250TG9hZGVkKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLktzLkdFU1RVUkVfU1RBUlQsIHRoaXMub25HZXN0dXJlU3RhcnQsICExKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLktzLkdFU1RVUkVfQ0hBTkdFLCB0aGlzLm9uR2VzdHVyZUNoYW5nZSwgITEpLCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGQuS3MuR0VTVFVSRV9FTkQsIHRoaXMub25HZXN0dXJlRW5kLCAhMSksIHRoaXMuc3RhdGUudmlld01vZGVFbmFibGVkIHx8IChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGQuS3MuUEFTVEUsIHRoaXMucGFzdGVGcm9tQ2xpcGJvYXJkKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLktzLkNVVCwgdGhpcy5vbkN1dCksIHRoaXMucHJvcHMuZGV0ZWN0U2Nyb2xsICYmICh0aGlzLm5lYXJlc3RTY3JvbGxhYmxlQ29udGFpbmVyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5wYXJlbnRFbGVtZW50OyB0OykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IGRvY3VtZW50LmJvZHkpIHJldHVybiBkb2N1bWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkub3ZlcmZsb3dZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc2Nyb2xsSGVpZ2h0ID4gdC5jbGllbnRIZWlnaHQgJiYgKCJhdXRvIiA9PT0gbiB8fCAic2Nyb2xsIiA9PT0gbikpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQucGFyZW50RWxlbWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odGhpcy5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQpLCB0aGlzLm5lYXJlc3RTY3JvbGxhYmxlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5TQ1JPTEwsIHRoaXMub25TY3JvbGwpKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5SRVNJWkUsIHRoaXMub25SZXNpemUsICExKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5VTkxPQUQsIHRoaXMub25VbmxvYWQsICExKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5CTFVSLCB0aGlzLm9uQmx1ciwgITEpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihkLktzLkRSQUdfT1ZFUiwgdGhpcy5kaXNhYmxlRXZlbnQsICExKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5EUk9QLCB0aGlzLmRpc2FibGVFdmVudCwgITEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxhbmdDb2RlICE9PSB0aGlzLnByb3BzLmxhbmdDb2RlICYmIHRoaXMudXBkYXRlTGFuZ3VhZ2UoKSwgZS52aWV3TW9kZUVuYWJsZWQgIT09IHRoaXMucHJvcHMudmlld01vZGVFbmFibGVkICYmIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZUVuYWJsZWQ6ICEhdGhpcy5wcm9wcy52aWV3TW9kZUVuYWJsZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKSwgdC52aWV3TW9kZUVuYWJsZWQgIT09IHRoaXMuc3RhdGUudmlld01vZGVFbmFibGVkICYmIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKSwgZS56ZW5Nb2RlRW5hYmxlZCAhPT0gdGhpcy5wcm9wcy56ZW5Nb2RlRW5hYmxlZCAmJiB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemVuTW9kZUVuYWJsZWQ6ICEhdGhpcy5wcm9wcy56ZW5Nb2RlRW5hYmxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLnRoZW1lICE9PSB0aGlzLnByb3BzLnRoZW1lICYmIHRoaXMucHJvcHMudGhlbWUgJiYgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiB0aGlzLnByb3BzLnRoZW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuZ3JpZE1vZGVFbmFibGVkICE9PSB0aGlzLnByb3BzLmdyaWRNb2RlRW5hYmxlZCAmJiB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFNpemU6IHRoaXMucHJvcHMuZ3JpZE1vZGVFbmFibGVkID8gZC5rIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0aGlzLnByb3BzLm5hbWUgJiYgZS5uYW1lICE9PSB0aGlzLnByb3BzLm5hbWUgJiYgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBudWxsID09PSAobiA9IHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50KSB8fCB2b2lkIDAgPT09IG4gfHwgbi5jbGFzc0xpc3QudG9nZ2xlKCJ0aGVtZS0tZGFyayIsICJkYXJrIiA9PT0gdGhpcy5zdGF0ZS50aGVtZSksIHRoaXMuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQgJiYgIXRoaXMuc3RhdGUuc2VsZWN0ZWRFbGVtZW50SWRzW3RoaXMuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQuZWxlbWVudElkXSAmJiBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5hY3Rpb25NYW5hZ2VyLmV4ZWN1dGVBY3Rpb24obGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdC5tdWx0aUVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbGVtZW50VHlwZSAhPT0gdGhpcy5zdGF0ZS5lbGVtZW50VHlwZSAmJiBudWxsICE9IGEgJiYgTmEodGhpcy5zdGF0ZSkgJiYgWWUoYSkgJiYgR2EoYSwgdGhpcy5zdGF0ZSwgdGhpcy5zY2VuZSwgS24oemEuZ2V0UG9pbnRBdEluZGV4R2xvYmFsQ29vcmRpbmF0ZXMoYSwgLTEpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFib3JhdG9ycy5mb3JFYWNoKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNlbGVjdGVkRWxlbWVudElkcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gT2JqZWN0LmtleXMoZS5zZWxlY3RlZEVsZW1lbnRJZHMpOyBuIDwgci5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gcltuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIGluIHMgfHwgKHNbYV0gPSBbXSksIHNbYV0ucHVzaCh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnBvaW50ZXIgJiYgKGUudXNlcm5hbWUgJiYgKGNbdF0gPSBlLnVzZXJuYW1lKSwgZS51c2VyU3RhdGUgJiYgKHVbdF0gPSBlLnVzZXJTdGF0ZSksIGxbdF0gPSBGbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVg6IGUucG9pbnRlci54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVZOiBlLnBvaW50ZXIueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvLnN0YXRlKSwgaVt0XSA9IGUuYnV0dG9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMuc2NlbmUuZ2V0RWxlbWVudHMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGdjKHAuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIW8uc3RhdGUuZWRpdGluZ0VsZW1lbnQgfHwgInRleHQiICE9PSBvLnN0YXRlLmVkaXRpbmdFbGVtZW50LnR5cGUgfHwgZS5pZCAhPT0gby5zdGF0ZS5lZGl0aW5nRWxlbWVudC5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMuc3RhdGUsIHRoaXMuc3RhdGUuc2VsZWN0aW9uRWxlbWVudCwgd2luZG93LmRldmljZVBpeGVsUmF0aW8sIHRoaXMucmMsIHRoaXMuY2FudmFzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxYOiB0aGlzLnN0YXRlLnNjcm9sbFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiB0aGlzLnN0YXRlLnNjcm9sbFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3QmFja2dyb3VuZENvbG9yOiB0aGlzLnN0YXRlLnZpZXdCYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB0aGlzLnN0YXRlLnpvb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVQb2ludGVyVmlld3BvcnRDb29yZHM6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVQb2ludGVyQnV0dG9uOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlU2VsZWN0ZWRFbGVtZW50SWRzOiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUG9pbnRlclVzZXJuYW1lczogYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVBvaW50ZXJVc2VyU3RhdGVzOiB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQ2FjaGVJZ25vcmVab29tOiB0aGlzLnN0YXRlLnNob3VsZENhY2hlSWdub3JlWm9vbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPcHRpbWl6YXRpb25zOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclNjcm9sbGJhcnM6ICF0aGlzLmlzTW9iaWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gaC5hdExlYXN0T25lVmlzaWJsZUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoLnNjcm9sbEJhcnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSAmJiAoRWggPSBtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZywgdiwgYiA9ICJ0ZXh0IiAhPT0gKG51bGwgPT09IChyID0gdGhpcy5zdGF0ZS5lZGl0aW5nRWxlbWVudCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci50eXBlKSAmJiAoIWYgJiYgcC5sZW5ndGggPiAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zdGF0ZS5zY3JvbGxlZE91dHNpZGUgIT09IGIgJiYgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGVkT3V0c2lkZTogYgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0aGlzLmhpc3RvcnkucmVjb3JkKHRoaXMuc3RhdGUsIHRoaXMuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkpLCB0aGlzLnN0YXRlLmlzTG9hZGluZykgfHwgKG51bGwgPT09IChnID0gKHYgPSB0aGlzLnByb3BzKS5vbkNoYW5nZSkgfHwgdm9pZCAwID09PSBnIHx8IGcuY2FsbCh2LCB0aGlzLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLCB0aGlzLnN0YXRlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucmVzZXRUYXBUd2ljZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1oID0gITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLmFkZFRleHRGcm9tUGFzdGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBSbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRYOiB2aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFk6IGJoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuc3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbi54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbi55LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZm8oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogdGhpcy5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZUNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnN0YXRlLmN1cnJlbnRJdGVtQmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRJdGVtRmlsbFN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMuc3RhdGUuY3VycmVudEl0ZW1TdHJva2VXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VnaG5lc3M6IHRoaXMuc3RhdGUuY3VycmVudEl0ZW1Sb3VnaG5lc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiB0aGlzLnN0YXRlLmN1cnJlbnRJdGVtT3BhY2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVNoYXJwbmVzczogdGhpcy5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZVNoYXJwbmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogdGhpcy5zdGF0ZS5jdXJyZW50SXRlbUZvbnRTaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogdGhpcy5zdGF0ZS5jdXJyZW50SXRlbUZvbnRGYW1pbHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRoaXMuc3RhdGUuY3VycmVudEl0ZW1UZXh0QWxpZ24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBkLmhzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVwbGFjZUFsbEVsZW1lbnRzKHNoKHNoKFtdLCB0aGlzLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpKSwgW2FdKSksIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6ICh0ID0ge30sIHRbYS5pZF0gPSAhMCwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdGhpcy5oaXN0b3J5LnJlc3VtZVJlY29yZGluZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5zZWxlY3RTaGFwZVRvb2wgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWggfHwgQm4odGhpcy5jYW52YXMsIGUpLCAodCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgdC5jbGFzc05hbWUuaW5jbHVkZXMoIlRvb2xJY29uIikgJiYgdGhpcy5mb2N1c0NvbnRhaW5lcigpLCBaZShlKSB8fCB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQmluZGluZ3M6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksICJzZWxlY3Rpb24iICE9PSBlID8gdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5oYW5kbGVUZXh0V3lzaXd5ZyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuaXNFeGlzdGluZ0VsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB2b2lkIDAgIT09IG4gJiYgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSAhMSksIG8uc2NlbmUucmVwbGFjZUFsbEVsZW1lbnRzKHNoKFtdLCBvLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLm1hcCgoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmlkID09PSBlLmlkICYmIFZlKHIpID8gbW8ociwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUub25DaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vblN1Ym1pdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmdldFZpZXdwb3J0Q29vcmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLmNhbnZhcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmV4Y2FsaWRyYXdDb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHIgPSBudWxsID09PSAoZSA9IEhyLmdldFNjZW5lKGkpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEVsZW1lbnQodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgJiYgVmUocikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhKHIueCwgci55KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBvWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG9bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gci50ZXh0QWxpZ24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gci5hbmdsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS52YWx1ZSA9IHIudGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSByLnRleHQucmVwbGFjZSgvXHJcbj8vZywgIlxuIikuc3BsaXQoIlxuIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gci5oZWlnaHQgLyBoLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAobi5vZmZzZXRMZWZ0ICsgbi53aWR0aCAtIGwgLSA4KSAvIG4uem9vbS52YWx1ZSAtIE51bWJlcihnZXRDb21wdXRlZFN0eWxlKG51bGwgPT0gcyA/IHZvaWQgMCA6IHMucGFyZW50Tm9kZSkubWFyZ2luUmlnaHQuc2xpY2UoMCwgLTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih1LnN0eWxlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiBMbihyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICIiLmNvbmNhdChmLCAicHgiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiIi5jb25jYXQoci53aWR0aCwgInB4IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIiLmNvbmNhdChyLmhlaWdodCwgInB4IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAiIi5jb25jYXQobCwgInB4IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICIiLmNvbmNhdChjLCAicHgiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogT2koci53aWR0aCwgci5oZWlnaHQsIHAsIG4sIG0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHIuc3Ryb2tlQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiByLm9wYWNpdHkgLyAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6ICJ2YXIoLS10aGVtZS1maWx0ZXIpIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAiIi5jb25jYXQobSwgInB4IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuZGlyID0gImF1dG8iLCB1LnRhYkluZGV4ID0gMCwgdS5kYXRhc2V0LnR5cGUgPSAid3lzaXd5ZyIsIHUud3JhcCA9ICJvZmYiLCBPYmplY3QuYXNzaWduKHUuc3R5bGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImlubGluZS1ibG9jayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICIxZW0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2ZhY2VWaXNpYmlsaXR5OiAiaGlkZGVuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplOiAibm9uZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICJoaWRkZW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogInByZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6SW5kZXg6ICJ2YXIoLS16SW5kZXgtd3lzaXd5ZykiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBjKCksIHIgJiYgKHUub25pbnB1dCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihDaSh1LnZhbHVlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUub25rZXlkb3duID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKCksIGUua2V5ID09PSBubikgZS5wcmV2ZW50RGVmYXVsdCgpLCBiID0gITAsIHkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSB0biAmJiBlW0p0XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KCksIGUuaXNDb21wb3NpbmcgfHwgMjI5ID09PSBlLmtleUNvZGUpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gITAsIHkoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlKGUua2V5ID09PSBhbiB8fCBlW0p0XSAmJiAoZS5jb2RlID09PSBMdCB8fCBlLmNvZGUgPT09IFR0KSkgJiYgKGUucHJldmVudERlZmF1bHQoKSwgZS5zaGlmdEtleSB8fCBlLmNvZGUgPT09IEx0ID8gbSgpIDogZigpLCB1LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJpbnB1dCIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAiICIucmVwZWF0KDQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG5ldyBSZWdFeHAoIl4gezEsIi5jb25jYXQoNCwgIn0iKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB1LnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdS5zZWxlY3Rpb25FbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBnKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB1LnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIuc2xpY2UoMCwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gci5zbGljZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9ICIiLmNvbmNhdCh0KS5jb25jYXQocCkuY29uY2F0KG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1LnZhbHVlID0gciwgdS5zZWxlY3Rpb25TdGFydCA9IGUgKyA0LCB1LnNlbGVjdGlvbkVuZCA9IHQgKyA0ICogbi5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB1LnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdS5zZWxlY3Rpb25FbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBnKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHUudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gby5zbGljZShlLCBlICsgNCkubWF0Y2goaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG8uc2xpY2UoMCwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8uc2xpY2UoZSArIHRbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAiIi5jb25jYXQobikuY29uY2F0KGEpLCByLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdS52YWx1ZSA9IG8sIHIubGVuZ3RoICYmIChlID4gcltyLmxlbmd0aCAtIDFdID8gdS5zZWxlY3Rpb25TdGFydCA9IE1hdGgubWF4KGUgLSA0LCByW3IubGVuZ3RoIC0gMV0pIDogdS5zZWxlY3Rpb25TdGFydCA9IGUsIHUuc2VsZWN0aW9uRW5kID0gTWF0aC5tYXgodS5zZWxlY3Rpb25TdGFydCwgdCAtIDQgKiByLmxlbmd0aCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdS5zZWxlY3Rpb25TdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHUuc2VsZWN0aW9uRW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4uc2xpY2UoMCwgZSkubWF0Y2goL1teXG5dKiQvKVswXS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgLT0gciwgbi5zbGljZShlLCB0KS5zcGxpdCgiXG4iKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY29uY2F0KHIgPyB0W3IgLSAxXSArIG9bciAtIDFdLmxlbmd0aCArIDEgOiBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbXSkucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdygpLCBvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogQ2kodS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpYUtleWJvYXJkOiBiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyB8fCAoUyA9ICEwLCB1Lm9uYmx1ciA9IG51bGwsIHUub25pbnB1dCA9IG51bGwsIHUub25rZXlkb3duID0gbnVsbCwgQyAmJiBDLmRpc2Nvbm5lY3QoKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGMpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLCB2LCAhMCksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIEUpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgeCksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIiwgeSksIGsoKSwgdS5yZW1vdmUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsIHgpLCBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5vbmJsdXIgPSB5LCB1LmZvY3VzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IGUudGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCkgJiYgZS50YXJnZXQuY2xvc2VzdCgiLiIuY29uY2F0KGQuJEMuU0hBUEVfQUNUSU9OU19NRU5VKSkgJiYgIUluKGUudGFyZ2V0KSAmJiAodS5vbmJsdXIgPSBudWxsLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgeCksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwgeSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IEhyLmdldFNjZW5lKGkpLmFkZENhbGxiYWNrKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKCksIHUuZm9jdXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnNlbGVjdCgpLCB4KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCAmJiAiUmVzaXplT2JzZXJ2ZXIiIGluIHdpbmRvdyA/IChDID0gbmV3IHdpbmRvdy5SZXNpemVPYnNlcnZlcigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKS5vYnNlcnZlKGwpIDogd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGMpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCBFKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwgdiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbnVsbCA9PSBzIHx8IHMucXVlcnlTZWxlY3RvcigiLmV4Y2FsaWRyYXctdGV4dEVkaXRvckNvbnRhaW5lciIpLmFwcGVuZENoaWxkKHUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzOiB0aGlzLmNhbnZhcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Vmlld3BvcnRDb29yZHM6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gRm4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVg6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lWTogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8uc3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG4ueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbciAtIG8uc3RhdGUub2Zmc2V0TGVmdCwgYSAtIG8uc3RhdGUub2Zmc2V0VG9wXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogWm4oKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEodCksIERpKGUpICYmICRhKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ6IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC52aWFLZXlib2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gIW4udHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYShuLCBsKSwgIWwgJiYgaSA/IG8uc2V0U3RhdGUoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCB0LnNlbGVjdGVkRWxlbWVudElkcyksIHt9LCAobiA9IHt9LCBuW2UuaWRdID0gITAsIG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IHVpKG8uc2NlbmUuZ2V0RWxlbWVudHMoKSwgW2VdKSwgbCAmJiAhciB8fCBvLmhpc3RvcnkucmVzdW1lUmVjb3JkaW5nKCksIG8uc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nRWxlbWVudDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG8uc3RhdGUuZWxlbWVudExvY2tlZCAmJiBCbihvLmNhbnZhcywgby5zdGF0ZS5lbGVtZW50VHlwZSksIG8uZm9jdXNDb250YWluZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2FsaWRyYXdDb250YWluZXI6IHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYShlLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5nZXRUZXh0RWxlbWVudEF0UG9zaXRpb24gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmdldEVsZW1lbnRBdFBvc2l0aW9uKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIFZlKG4pICYmICFuLmlzRGVsZXRlZCA/IG4gOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5nZXRFbGVtZW50QXRQb3NpdGlvbiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0RWxlbWVudHNBdFBvc2l0aW9uKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuW24ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxbyhyLCB0aGlzLnN0YXRlLCBlLCB0KSA/IG5bbi5sZW5ndGggLSAyXSA6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gblswXSA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLmdldEVsZW1lbnRzQXRQb3NpdGlvbiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSB0aGlzLnNjZW5lLmdldEVsZW1lbnRzKCksIHIgPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IDEwIC8gdC56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBbbiwgcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG8odCwgZSkgPyBKbyhlLCBhLCBvKSA6IFFvKGUsIHQsIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0obiwgby5zdGF0ZSwgZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBuLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWUuaXNEZWxldGVkICYmIHIoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLm1heWJlQ2xlYW51cEFmdGVyTWlzc2luZ1BvaW50ZXJVcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBDaCAmJiBDaChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUudXBkYXRlR2VzdHVyZU9uUG9pbnRlckRvd24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2gucG9pbnRlcnMuc2V0KGUucG9pbnRlcklkLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUuY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS5jbGllbnRZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIDIgPT09IE9oLnBvaW50ZXJzLnNpemUgJiYgKE9oLmxhc3RDZW50ZXIgPSBLZChPaC5wb2ludGVycyksIE9oLmluaXRpYWxTY2FsZSA9IHRoaXMuc3RhdGUuem9vbS52YWx1ZSwgT2guaW5pdGlhbERpc3RhbmNlID0gVWQoQXJyYXkuZnJvbShPaC5wb2ludGVycy52YWx1ZXMoKSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuaW5pdGlhbFBvaW50ZXJEb3duU3RhdGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBSbihlLCB0aGlzLnN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE5pKHRoaXMuc2NlbmUuZ2V0RWxlbWVudHMoKSwgdGhpcy5zdGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBtdChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gclsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHJbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5JbkdyaWQ6IEtuKGl0KHQueCwgdC55LCB0aGlzLnN0YXRlLmdyaWRTaXplKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGJhcnM6IEJpKEVoLCBlLmNsaWVudFggLSB0aGlzLnN0YXRlLm9mZnNldExlZnQsIGUuY2xpZW50WSAtIHRoaXMuc3RhdGUub2Zmc2V0VG9wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENvb3JkczogdWgoe30sIHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEVsZW1lbnRzOiB0aGlzLnNjZW5lLmdldEVsZW1lbnRzKCkucmVkdWNlKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZXQodC5pZCwgdm8odCkpLCBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuZXcgTWFwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUeXBlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzaXppbmc6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3dEaXJlY3Rpb246ICJvcmlnaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogKGkgKyBvKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogKGwgKyBhKSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsSGl0RWxlbWVudHM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FzQWRkZWRUb1NlbGVjdGlvbjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNCZWVuRHVwbGljYXRlZDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNIaXRDb21tb25Cb3VuZGluZ0JveE9mU2VsZWN0ZWRFbGVtZW50czogdGhpcy5pc0hpdHRpbmdDb21tb25Cb3VuZGluZ0JveE9mU2VsZWN0ZWRFbGVtZW50cyh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPY2N1cnJlZDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0ZW5lcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW92ZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleVVwOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5oYW5kbGVEcmFnZ2luZ1Njcm9sbEJhciA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0LnNjcm9sbGJhcnMuaXNPdmVyRWl0aGVyIHx8IHRoaXMuc3RhdGUubXVsdGlFbGVtZW50KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGggPSAhMCwgdC5sYXN0Q29vcmRzLnggPSBlLmNsaWVudFgsIHQubGFzdENvb3Jkcy55ID0gZS5jbGllbnRZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gWm4oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgbi5oYW5kbGVQb2ludGVyTW92ZU92ZXJTY3JvbGxiYXJzKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFpuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoID0gITEsIEJuKG4uY2FudmFzLCBuLnN0YXRlLmVsZW1lbnRUeXBlKSwgQ2ggPSBudWxsLCBuLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JCdXR0b246ICJ1cCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuLnNhdmVQb2ludGVyKGUuY2xpZW50WCwgZS5jbGllbnRZLCAidXAiKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5QT0lOVEVSX01PVkUsIHIpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfVVAsIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ2ggPSBvLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfTU9WRSwgciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGQuS3MuUE9JTlRFUl9VUCwgbyksICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5pc0FTZWxlY3RlZEVsZW1lbnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSAmJiB0aGlzLnN0YXRlLnNlbGVjdGVkRWxlbWVudElkc1tlLmlkXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuaXNIaXR0aW5nQ29tbW9uQm91bmRpbmdCb3hPZlNlbGVjdGVkRWxlbWVudHMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoIDwgMikgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMTAgLyB0aGlzLnN0YXRlLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBtdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gclsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHJbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUueCA+IG8gLSBuICYmIGUueCA8IGkgKyBuICYmIGUueSA+IGEgLSBuICYmIGUueSA8IGwgKyBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5vbktleURvd25Gcm9tUG9pbnRlckRvd25IYW5kbGVyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWm4oKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5tYXliZUhhbmRsZVJlc2l6ZShlLCBuKSB8fCB0Lm1heWJlRHJhZ05ld0dlbmVyaWNFbGVtZW50KGUsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnByb3RvdHlwZS5vbktleVVwRnJvbVBvaW50ZXJEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpuKChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ua2V5ID09PSAkdCAmJiBuLnByZXZlbnREZWZhdWx0KCksIHQubWF5YmVIYW5kbGVSZXNpemUoZSwgbikgfHwgdC5tYXliZURyYWdOZXdHZW5lcmljRWxlbWVudChlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUub25Qb2ludGVyTW92ZUZyb21Qb2ludGVyRG93bkhhbmRsZXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBabigoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUuZHJhZy5vZmZzZXQgJiYgKGUuZHJhZy5vZmZzZXQgPSBLbihmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBtdChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3QgLSByWzBdLCBuIC0gclsxXV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oTmkodC5zY2VuZS5nZXRFbGVtZW50cygpLCB0LnN0YXRlKSwgZS5vcmlnaW4ueCwgZS5vcmlnaW4ueSkpKSwgbi50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiAhdC5oYW5kbGVQb2ludGVyTW92ZU92ZXJTY3JvbGxiYXJzKG4sIGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFJuKG4sIHQuc3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBpdChvLngsIG8ueSwgdC5zdGF0ZS5ncmlkU2l6ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGFbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5kcmFnLmhhc09jY3VycmVkIHx8ICJhcnJvdyIgIT09IHQuc3RhdGUuZWxlbWVudFR5cGUgJiYgImxpbmUiICE9PSB0LnN0YXRlLmVsZW1lbnRUeXBlIHx8ICEoZXQoby54LCBvLnksIGUub3JpZ2luLngsIGUub3JpZ2luLnkpIDwgZC5mKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnJlc2l6ZS5pc1Jlc2l6aW5nICYmIChlLmxhc3RDb29yZHMueCA9IG8ueCwgZS5sYXN0Q29vcmRzLnkgPSBvLnksIHQubWF5YmVIYW5kbGVSZXNpemUoZSwgbikpKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6YS5oYW5kbGVQb2ludERyYWdnaW5nKHQuc3RhdGUsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2V0U3RhdGUoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvLngsIG8ueSwgKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JMaW5lYXJFbGVtZW50QXRDdXJzb3IoZSwgbiwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkgcmV0dXJuIGUubGFzdENvb3Jkcy54ID0gby54LCB2b2lkKGUubGFzdENvb3Jkcy55ID0gby55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5oaXQuYWxsSGl0RWxlbWVudHMuc29tZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaXNBU2VsZWN0ZWRFbGVtZW50KGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB8fCBlLmhpdC5oYXNIaXRDb21tb25Cb3VuZGluZ0JveE9mU2VsZWN0ZWRFbGVtZW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRyYWcuaGFzT2NjdXJyZWQgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBOaSh0LnNjZW5lLmdldEVsZW1lbnRzKCksIHQuc3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGl0KG8ueCAtIGUuZHJhZy5vZmZzZXQueCwgby55IC0gZS5kcmFnLm9mZnNldC55LCB0LnN0YXRlLmdyaWRTaXplKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gY1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gW01hdGguYWJzKG8ueCAtIGUub3JpZ2luLngpLCBNYXRoLmFicyhvLnkgLSBlLm9yaWdpbi55KV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGhbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGhbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IG4uc2hpZnRLZXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnVuY3Rpb24oZSwgdCwgbiwgciwgbywgYSwgaSwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGEgJiYgKGEgPSAhMSksIHZvaWQgMCA9PT0gaSAmJiAoaSA9IDApLCB2b2lkIDAgPT09IGwgJiYgKGwgPSAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBtdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gbiAtIGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gciAtIHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gYSAmJiBpIDwgbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGEgJiYgaSA+IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBlLm9yaWdpbmFsRWxlbWVudHMuZ2V0KG4uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBzICYmIHUgPyB1LnggOiBuLnggKyBkLCBvID0gYyAmJiB1ID8gdS55IDogbi55ICsgcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHIgPSBuLnggKyBkLCBvID0gbi55ICsgcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyKG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAkYShuLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWx0YW5lb3VzbHlVcGRhdGVkOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUsIHMsIHUsIHAsIHQuc2NlbmUsIGcsIGYsIG0pLCB0Lm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JBbGwocyksIG4uYWx0S2V5ICYmICFlLmhpdC5oYXNCZWVuRHVwbGljYXRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaGl0Lmhhc0JlZW5EdXBsaWNhdGVkID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdiA9IFtdLCBiID0gW10sIHkgPSBuZXcgTWFwLCB3ID0gbmV3IE1hcCwgeCA9IGUuaGl0LmVsZW1lbnQsIEUgPSAwLCBrID0gdC5zY2VuZS5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKTsgRSA8IGsubGVuZ3RoOyBFKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFMgPSBrW0VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zdGF0ZS5zZWxlY3RlZEVsZW1lbnRJZHNbUy5pZF0gfHwgUy5pZCA9PT0gKG51bGwgPT0geCA/IHZvaWQgMCA6IHguaWQpICYmIGUuaGl0Lndhc0FkZGVkVG9TZWxlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDID0gYm8odC5zdGF0ZS5lZGl0aW5nR3JvdXBJZCwgeSwgUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IGl0KGUub3JpZ2luLnggLSBlLmRyYWcub2Zmc2V0LngsIGUub3JpZ2luLnkgLSBlLmRyYWcub2Zmc2V0LnksIHQuc3RhdGUuZ3JpZFNpemUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBPWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAgPSBPWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3IoQywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IEMueCArIChNIC0gdSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogQy55ICsgKFAgLSBwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHYucHVzaChDKSwgYi5wdXNoKFMpLCB3LnNldChTLmlkLCBDLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugdi5wdXNoKFMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJID0gc2goc2goW10sIHYpLCBiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaShJLCBiLCB3LCAiZHVwbGljYXRlc1NlcnZlQXNPbGQiKSwgdC5zY2VuZS5yZXBsYWNlQWxsRWxlbWVudHMoSSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBUID0gdC5zdGF0ZS5kcmFnZ2luZ0VsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmcmVlZHJhdyIgPT09IFQudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEwgPSBULnBvaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBID0gby54IC0gVC54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gPSBvLnkgLSBULnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IFQuc2ltdWxhdGVQcmVzc3VyZSA/IFQucHJlc3N1cmVzIDogc2goc2goW10sIFQucHJlc3N1cmVzKSwgW24ucHJlc3N1cmVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyKFQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHNoKHNoKFtdLCBMKSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQSwgX10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzc3VyZXM6IEQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVWUoVCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZHJhZy5oYXNPY2N1cnJlZCA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTCA9IFQucG9pbnRzLCBBID0gaSAtIFQueCwgXyA9IGwgLSBULnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbihuKSAmJiAyID09PSBMLmxlbmd0aCAmJiAoQSA9IChyID0gWXIodC5zdGF0ZS5lbGVtZW50VHlwZSwgQSwgXykpLndpZHRoLCBfID0gci5oZWlnaHQpLCAxID09PSBMLmxlbmd0aCA/IEdyKFQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHNoKHNoKFtdLCBMKSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQSwgX10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBMLmxlbmd0aCA+IDEgJiYgR3IoVCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogc2goc2goW10sIEwuc2xpY2UoMCwgLTEpKSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQSwgX10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFllKFQpICYmIHQubWF5YmVTdWdnZXN0QmluZGluZ0ZvckxpbmVhckVsZW1lbnRBdEN1cnNvcihULCAiZW5kIiwgbywgdC5zdGF0ZS5zdGFydEJvdW5kRWxlbWVudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGUubGFzdENvb3Jkcy54ID0gby54LCBlLmxhc3RDb29yZHMueSA9IG8ueSwgdC5tYXliZURyYWdOZXdHZW5lcmljRWxlbWVudChlLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzZWxlY3Rpb24iID09PSB0LnN0YXRlLmVsZW1lbnRUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IHQuc2NlbmUuZ2V0RWxlbWVudHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFuLnNoaWZ0S2V5ICYmIEhpKGosIHQuc3RhdGUpICYmIHQuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBzdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG5bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5bM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZnQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdFszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzZWxlY3Rpb24iICE9PSBlLnR5cGUgJiYgciA8PSBuICYmIG8gPD0gbCAmJiBhID49IHMgJiYgaSA+PSBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGosIFQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbyh1aCh1aCh7fSwgZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogdWgodWgoe30sIGUuc2VsZWN0ZWRFbGVtZW50SWRzKSwgei5yZWR1Y2UoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3QuaWRdID0gITAsIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5zY2VuZS5nZXRFbGVtZW50cygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJNb3ZlT3ZlclNjcm9sbGJhcnMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc2Nyb2xsYmFycy5pc092ZXJIb3Jpem9udGFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4gLSB0Lmxhc3RDb29yZHMueDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogdGhpcy5zdGF0ZS5zY3JvbGxYIC0gciAvIHRoaXMuc3RhdGUuem9vbS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5sYXN0Q29vcmRzLnggPSBuLCAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zY3JvbGxiYXJzLmlzT3ZlclZlcnRpY2FsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8gLSB0Lmxhc3RDb29yZHMueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogdGhpcy5zdGF0ZS5zY3JvbGxZIC0gYSAvIHRoaXMuc3RhdGUuem9vbS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5sYXN0Q29vcmRzLnkgPSBvLCAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLm9uUG9pbnRlclVwRnJvbVBvaW50ZXJEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpuKChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLmRyYWdnaW5nRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByLnJlc2l6aW5nRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLm11bHRpRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSByLmVsZW1lbnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHIuZWxlbWVudExvY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSByLmlzUmVzaXppbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gci5pc1JvdGF0aW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXNpemluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSb3RhdGluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmdFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yQnV0dG9uOiAidXAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50OiBpIHx8IFZlKHQuc3RhdGUuZWRpdGluZ0VsZW1lbnQpID8gdC5zdGF0ZS5lZGl0aW5nRWxlbWVudCA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0LnNhdmVQb2ludGVyKG4uY2xpZW50WCwgbi5jbGllbnRZLCAidXAiKSwgdC5zdGF0ZS5lZGl0aW5nTGluZWFyRWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB6YS5oYW5kbGVQb2ludGVyVXAobiwgdC5zdGF0ZS5lZGl0aW5nTGluZWFyRWxlbWVudCwgdC5zdGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwICE9PSB0LnN0YXRlLmVkaXRpbmdMaW5lYXJFbGVtZW50ICYmIHQuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiBwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ2ggPSBudWxsLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfTU9WRSwgZS5ldmVudExpc3RlbmVycy5vbk1vdmUpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfVVAsIGUuZXZlbnRMaXN0ZW5lcnMub25VcCksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuS0VZRE9XTiwgZS5ldmVudExpc3RlbmVycy5vbktleURvd24pLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLktFWVVQLCBlLmV2ZW50TGlzdGVuZXJzLm9uS2V5VXApLCAiZnJlZWRyYXciID09PSAobnVsbCA9PSBvID8gdm9pZCAwIDogby50eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBSbihuLCB0LnN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gby5wb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGgueCAtIG8ueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gaC55IC0gby55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9PT0gZlswXVswXSAmJiBnID09PSBmWzBdWzFdICYmIChnICs9IDFlLTQsIG0gKz0gMWUtNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG8uc2ltdWxhdGVQcmVzc3VyZSA/IFtdIDogc2goc2goW10sIG8ucHJlc3N1cmVzKSwgW24ucHJlc3N1cmVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBHcihvLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBzaChzaChbXSwgZiksIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW20sIGddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc3N1cmVzOiB2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdm9pZCB0LmFjdGlvbk1hbmFnZXIuZXhlY3V0ZUFjdGlvbihsYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVWUobykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucG9pbnRzLmxlbmd0aCA+IDEgJiYgdC5oaXN0b3J5LnJlc3VtZVJlY29yZGluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFJuKG4sIHQuc3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kcmFnLmhhc09jY3VycmVkIHx8ICFvIHx8IGkgPyBlLmRyYWcuaGFzT2NjdXJyZWQgJiYgIWkgJiYgKE5hKHQuc3RhdGUpICYmIFllKG8pICYmIEdhKG8sIHQuc3RhdGUsIHQuc2NlbmUsIGgpLCB0LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRCaW5kaW5nczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRCb3VuZEVsZW1lbnQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBzID8gdC5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB1aCh1aCh7fSwgZS5zZWxlY3RlZEVsZW1lbnRJZHMpLCB7fSwgKG4gPSB7fSwgblt0LnN0YXRlLmRyYWdnaW5nRWxlbWVudC5pZF0gPSAhMCwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogKGpuKHQuY2FudmFzKSwgdC5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6ICJzZWxlY3Rpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIHt9LCAobiA9IHt9LCBuW3Quc3RhdGUuZHJhZ2dpbmdFbGVtZW50LmlkXSA9ICEwLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpKSA6IChHcihvLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBzaChzaChbXSwgby5wb2ludHMpLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtoLnggLSBvLngsIGgueSAtIG8ueV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRWxlbWVudDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nRWxlbWVudDogdC5zdGF0ZS5kcmFnZ2luZ0VsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzZWxlY3Rpb24iICE9PSBsICYmIG8gJiYgWnIobykpIHJldHVybiB0LnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyh0LnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLnNsaWNlKDAsIC0xKSksIHZvaWQgdC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgR3IobywgWHIobykpLCBhICYmIHQuaGlzdG9yeS5yZXN1bWVSZWNvcmRpbmcoKSwgYSAmJiBacihhKSAmJiB0LnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyh0LnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkICE9PSBhLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBlLmhpdC5lbGVtZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIgJiYgIWUuZHJhZy5oYXNPY2N1cnJlZCAmJiAhZS5oaXQud2FzQWRkZWRUb1NlbGVjdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5zaGlmdEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc3RhdGUuc2VsZWN0ZWRFbGVtZW50SWRzW2IuaWRdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvKHQuc3RhdGUsIGIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBiLmdyb3VwSWRzLmZsYXRNYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlvKHQuc2NlbmUuZ2V0RWxlbWVudHMoKSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSB7fSlbZS5pZF0gPSAhMSwgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVoKHVoKHt9LCBlKSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIGIuZ3JvdXBJZHMubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0ge30pW2VdID0gITEsIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdWgodWgoe30sIGUpLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIHkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0LnNldFN0YXRlKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB1aCh1aCh7fSwgZS5zZWxlY3RlZEVsZW1lbnRJZHMpLCB7fSwgKHQgPSB7fSwgdFtiLmlkXSA9ICExLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHQuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIHt9LCAodCA9IHt9LCB0W2IuaWRdID0gITAsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdC5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1aCh7fSwgb28odWgodWgoe30sIGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IChuID0ge30sIG5bYi5pZF0gPSAhMCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5zY2VuZS5nZXRFbGVtZW50cygpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQgfHwgZS5kcmFnLmhhc09jY3VycmVkIHx8IHQuc3RhdGUuaXNSZXNpemluZyB8fCAhKGIgJiYgcW8oYiwgdC5zdGF0ZSwgZS5vcmlnaW4ueCwgZS5vcmlnaW4ueSkgfHwgIWIgJiYgZS5oaXQuaGFzSGl0Q29tbW9uQm91bmRpbmdCb3hPZlNlbGVjdGVkRWxlbWVudHMpID8gKCFzICYmICJmcmVlZHJhdyIgIT09IGwgJiYgbyAmJiB0LnNldFN0YXRlKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB1aCh1aCh7fSwgZS5zZWxlY3RlZEVsZW1lbnRJZHMpLCB7fSwgKHQgPSB7fSwgdFtvLmlkXSA9ICEwLCB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksICgic2VsZWN0aW9uIiAhPT0gbCB8fCBIaSh0LnNjZW5lLmdldEVsZW1lbnRzKCksIHQuc3RhdGUpKSAmJiB0Lmhpc3RvcnkucmVzdW1lUmVjb3JkaW5nKCksIChlLmRyYWcuaGFzT2NjdXJyZWQgfHwgYyB8fCB1KSAmJiAoTmEodC5zdGF0ZSkgPyBXYSA6IFlhKShOaSh0LnNjZW5lLmdldEVsZW1lbnRzKCksIHQuc3RhdGUpKSwgcyB8fCAiZnJlZWRyYXciID09PSBsID8gdC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiAoam4odC5jYW52YXMpLCB0LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ0VsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQmluZGluZ3M6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiAic2VsZWN0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSA6IHQuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JBbGwgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4sIHIgPSAodCA9IGUsIG4gPSBuZXcgU2V0KHQubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgdC5mbGF0TWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZZShlKSA/IHJpKGUpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuLmhhcyhlLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBxZShlKSA/IGlpKGUpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuLmhhcyhlWzBdLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiB0LmVkaXRpbmdHcm91cElkICYmIG51bGwgIT0gZSAmJiBhbyhlLCB0LmVkaXRpbmdHcm91cElkKSA/IHQuZWRpdGluZ0dyb3VwSWQgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudElkczogdGhpcy5zdGF0ZS5zZWxlY3RlZEVsZW1lbnRJZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuZ2V0VGV4dFd5c2l3eWdTbmFwcGVkVG9DZW50ZXJQb3NpdGlvbiA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IG51bGwsIG8gPSBlLmxlbmd0aCAtIDE7IG8gPj0gMDsgLS1vKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlW29dLmlzRGVsZXRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gc3QoZVtvXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGFbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBhWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgdCAmJiB0IDwgcyAmJiBsIDwgbiAmJiBuIDwgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVtvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0aGlzLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIVZlKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGEueCArIGEud2lkdGggLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGEueSArIGEuaGVpZ2h0IC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguaHlwb3QoZSAtIGksIHQgLSBsKSA8IGQud1opIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gRm4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lWDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVk6IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydFg6IHMueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydFk6IHMueSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Q2VudGVyWDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Q2VudGVyWTogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5wcm90b3R5cGUuZ2V0Q2FudmFzT2Zmc2V0cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAoZSA9IHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZikgJiYgdm9pZCAwICE9PSBlICYmIGUuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdDogdC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wOiB0LnRvcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcDogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQucHJvdG90eXBlLnVwZGF0ZUxhbmd1YWdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgaC5aKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGgodGhpcywgKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobi5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBiLmZpbmQoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNvZGUgPT09IGUucHJvcHMubGFuZ0NvZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHx8IHYsIFs0LCBrKHQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNlbnQoKSwgZS5zZXRBcHBTdGF0ZSh7fSksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdAogICAgICAgICAgICAgICAgICAgICAgICB9KHUoKS5Db21wb25lbnQpOwogICAgICAgICAgICAgICAgICAgIE1oLmRlZmF1bHRQcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgVUlPcHRpb25zOiBkLmNXCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB2YXIgUGggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGwsIHRoaXMucmMgPSBudWxsLCB0aGlzLnVubW91bnRlZCA9ICExLCB0aGlzLmlzTW9iaWxlID0gITEsIHRoaXMuZXhjYWxpZHJhd0NvbnRhaW5lclJlZiA9IHUoKS5jcmVhdGVSZWYoKSwgdGhpcy5mb2N1c0NvbnRhaW5lciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSAodCA9IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50KSB8fCB2b2lkIDAgPT09IHQgfHwgdC5mb2N1cygpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZ2V0U2NlbmVFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZ2V0U2NlbmVFbGVtZW50cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2NlbmUuZ2V0RWxlbWVudHMoKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnN5bmNBY3Rpb25SZXN1bHQgPSBabigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLnVubW91bnRlZCAmJiAhMSAhPT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5lbGVtZW50cyAmJiAodC5lbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChudWxsID09PSAociA9IGUuc3RhdGUuZWRpdGluZ0VsZW1lbnQpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuaWQpID09PSB0LmlkICYmIGUuc3RhdGUuZWRpdGluZ0VsZW1lbnQgIT09IHQgJiYgRGkodCkgJiYgKG4gPSB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGUuc2NlbmUucmVwbGFjZUFsbEVsZW1lbnRzKHQuZWxlbWVudHMpLCB0LmNvbW1pdFRvSGlzdG9yeSAmJiBlLmhpc3RvcnkucmVzdW1lUmVjb3JkaW5nKCkpLCB0LmFwcFN0YXRlIHx8IG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8sIGEsIGksIGwsIHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY29tbWl0VG9IaXN0b3J5ICYmIGUuaGlzdG9yeS5yZXN1bWVSZWNvcmRpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAobnVsbCA9PSB0IHx8IG51bGwgPT09IChyID0gdC5hcHBTdGF0ZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci52aWV3TW9kZUVuYWJsZWQpIHx8ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IChudWxsID09IHQgfHwgbnVsbCA9PT0gKG8gPSB0LmFwcFN0YXRlKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLnplbk1vZGVFbmFibGVkKSB8fCAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAobnVsbCA9PSB0IHx8IG51bGwgPT09IChhID0gdC5hcHBTdGF0ZSkgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS5ncmlkU2l6ZSkgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSAobnVsbCA9PSB0IHx8IG51bGwgPT09IChpID0gdC5hcHBTdGF0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS50aGVtZSkgfHwgImxpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBudWxsICE9PSAobCA9IG51bGwgPT0gdCB8fCBudWxsID09PSAocyA9IHQuYXBwU3RhdGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMubmFtZSkgJiYgdm9pZCAwICE9PSBsID8gbCA6IGUuc3RhdGUubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBlLnByb3BzLnZpZXdNb2RlRW5hYmxlZCAmJiAoYyA9IGUucHJvcHMudmlld01vZGVFbmFibGVkKSwgdm9pZCAwICE9PSBlLnByb3BzLnplbk1vZGVFbmFibGVkICYmICh1ID0gZS5wcm9wcy56ZW5Nb2RlRW5hYmxlZCksIHZvaWQgMCAhPT0gZS5wcm9wcy5ncmlkTW9kZUVuYWJsZWQgJiYgKHAgPSBlLnByb3BzLmdyaWRNb2RlRW5hYmxlZCA/IGQuayA6IG51bGwpLCB2b2lkIDAgIT09IGUucHJvcHMudGhlbWUgJiYgKGggPSBlLnByb3BzLnRoZW1lKSwgdm9pZCAwICE9PSBlLnByb3BzLm5hbWUgJiYgKGYgPSBlLnByb3BzLm5hbWUpLCBlLnNldFN0YXRlKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHQuYXBwU3RhdGUgfHwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nRWxlbWVudDogbiB8fCAobnVsbCA9PT0gKHIgPSB0LmFwcFN0YXRlKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmVkaXRpbmdFbGVtZW50KSB8fCBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlRW5hYmxlZDogYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ZW5Nb2RlRW5hYmxlZDogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkU2l6ZTogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zeW5jSGlzdG9yeSAmJiBlLmhpc3Rvcnkuc2V0Q3VycmVudFN0YXRlKGUuc3RhdGUsIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uQmx1ciA9IFpuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHloID0gITEsIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmluZGluZ0VuYWJsZWQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMub25VbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUub25CbHVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5kaXNhYmxlRXZlbnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5vbkZvbnRMb2FkZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlKGUpICYmIE9yKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGUub25TY2VuZVVwZGF0ZWQoKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmltcG9ydExpYnJhcnlGcm9tVXJsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICgwLCBoLlopKChmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG8sIGEsIGksIGwsIHMsIGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxoKHRoaXMsIChmdW5jdGlvbih1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluY2x1ZGVzKGQuYWguYWRkTGlicmFyeSkgPyAoKHIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpKSkuZGVsZXRlKGQuYWguYWRkTGlicmFyeSksIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZC5pQywgIiMiLmNvbmNhdChyLnRvU3RyaW5nKCkpKSkgOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKGQuVU8uYWRkTGlicmFyeSkgJiYgKChvID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSkuZGVsZXRlKGQuVU8uYWRkTGlicmFyeSksIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZC5pQywgIj8iLmNvbmNhdChvLnRvU3RyaW5nKCkpKSksIHUubGFiZWwgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1LnRyeXMucHVzaChbMSwgNywgOCwgOV0pLCBbNCwgZmV0Y2goZGVjb2RlVVJJQ29tcG9uZW50KHQpKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB1LnNlbnQoKS5ibG9iKCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gdS5zZW50KCksIHMgPSAobCA9IEpTT04pLnBhcnNlLCBbNCwgYS50ZXh0KCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBlICYmIGUudHlwZSA9PT0gZC5yOC5leGNhbGlkcmF3TGlicmFyeSAmJiAxID09PSBlLnZlcnNpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShpID0gcy5hcHBseShsLCBbdS5zZW50KCldKSkpIHRocm93IG5ldyBFcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gZS5pZCB8fCB3aW5kb3cuY29uZmlybShPKCJhbGVydHMuY29uZmlybUFkZExpYnJhcnkiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVNoYXBlczogaS5saWJyYXJ5Lmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA/IFs0LCBlLmxpYnJhcnkuaW1wb3J0TGlicmFyeShhKV0gOiBbMywgNl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5zZW50KCksIGUuc3RhdGUuaXNMaWJyYXJ5T3BlbiAmJiBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3BlbjogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlicmFyeU9wZW46ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHUubGFiZWwgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgOV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMgPSB1LnNlbnQoKSwgd2luZG93LmFsZXJ0KE8oImFsZXJ0cy5lcnJvckxvYWRpbmdMaWJyYXJ5IikpLCBjb25zb2xlLmVycm9yKGMpLCBbMywgOV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZm9jdXNDb250YWluZXIoKSwgWzddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwgdGhpcy5yZXNldEhpc3RvcnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaGlzdG9yeS5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucmVzZXRTY2VuZSA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyhbXSksIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdWgodWgoe30sIFhuKCkpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IChudWxsID09IHQgfHwgIXQucmVzZXRMb2FkaW5nU3RhdGUpICYmIG4uaXNMb2FkaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogZS5zdGF0ZS50aGVtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGUucmVzZXRIaXN0b3J5KCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLmluaXRpYWxpemVTY2VuZSA9ICgwLCBoLlopKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuLCByLCBvLCBhLCBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxoKHRoaXMsIChmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChsLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsYXVuY2hRdWV1ZSIgaW4gd2luZG93ICYmICJMYXVuY2hQYXJhbXMiIGluIHdpbmRvdyAmJiB3aW5kb3cubGF1bmNoUXVldWUuc2V0Q29uc3VtZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAoMCwgaC5aKSgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxoKHRoaXMsIChmdW5jdGlvbihvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8ubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZpbGVzLmxlbmd0aCA/IFs0LCAobiA9IHQuZmlsZXNbMF0pLmdldEZpbGUoKV0gOiBbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHIgPSBvLnNlbnQoKSkuaGFuZGxlID0gbiwgTXUociwgZS5zdGF0ZSkudGhlbigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmFwcFN0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3luY0FjdGlvblJlc3VsdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHVoKHVoKHt9LCByIHx8IGUuc3RhdGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0VG9IaXN0b3J5OiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdC5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSksIGUuc3RhdGUuaXNMb2FkaW5nIHx8IGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuID0gbnVsbCwgbC5sYWJlbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLnRyeXMucHVzaChbMSwgMywgLCA0XSksIFs0LCBlLnByb3BzLmluaXRpYWxEYXRhXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBsLnNlbnQoKSB8fCBudWxsLCBudWxsICE9PSAociA9IG4pICYmIHZvaWQgMCAhPT0gciAmJiByLmxpYnJhcnlJdGVtcyAmJiAoZS5saWJyYXJ5SXRlbXNGcm9tU3RvcmFnZSA9IG4ubGlicmFyeUl0ZW1zKSwgWzMsIDRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyA9IGwuc2VudCgpLCBjb25zb2xlLmVycm9yKG8pLCBuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogby5tZXNzYWdlIHx8ICJFbmNvdW50ZXJlZCBhbiBlcnJvciBkdXJpbmcgaW1wb3J0aW5nIG9yIHJlc3RvcmluZyBzY2VuZSBkYXRhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFszLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhID0gRXUobiwgbnVsbCkpLmFwcFN0YXRlID0gdWgodWgoe30sIGEuYXBwU3RhdGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBudWxsICE9PSAodCA9IG4pICYmIHZvaWQgMCAhPT0gdCAmJiB0LnNjcm9sbFRvQ29udGVudCAmJiAoYS5hcHBTdGF0ZSA9IHVoKHVoKHt9LCBhLmFwcFN0YXRlKSwgV2koYS5lbGVtZW50cywgdWgodWgoe30sIGEuYXBwU3RhdGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlLnN0YXRlLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZS5zdGF0ZS5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wOiBlLnN0YXRlLm9mZnNldFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0OiBlLnN0YXRlLm9mZnNldExlZnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpLCBlLnJlc2V0SGlzdG9yeSgpLCBlLnN5bmNBY3Rpb25SZXN1bHQodWgodWgoe30sIGEpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgKGkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpKS5nZXQoZC5haC5hZGRMaWJyYXJ5KSB8fCBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldChkLlVPLmFkZExpYnJhcnkpKSA/IFs0LCBlLmltcG9ydExpYnJhcnlGcm9tVXJsKGkpXSA6IFszLCA2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5zZW50KCksIGwubGFiZWwgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdGhpcy5vblJlc2l6ZSA9IFpuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPcihlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLnNldFN0YXRlKHt9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMub25TY3JvbGwgPSBfbigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZ2V0Q2FudmFzT2Zmc2V0cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0Lm9mZnNldFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5vZmZzZXRMZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm9mZnNldExlZnQgPT09IHIgJiYgZS5vZmZzZXRUb3AgPT09IG4gPyBudWxsIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRUb3A6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQ6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGQuSE0pLCB0aGlzLm9uQ3V0ID0gWm4oKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG51bGwgPT09IChuID0gZS5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpICYmICFJbih0LnRhcmdldCkgJiYgKGUuY3V0QWxsKCksIHQucHJldmVudERlZmF1bHQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uQ29weSA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChudWxsID09PSAobiA9IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSAmJiAhSW4odC50YXJnZXQpICYmIChlLmNvcHlBbGwoKSwgdC5wcmV2ZW50RGVmYXVsdCgpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMuY3V0QWxsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNvcHlBbGwoKSwgZS5hY3Rpb25NYW5hZ2VyLmV4ZWN1dGVBY3Rpb24oZnMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuY29weUFsbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSmMoZS5zY2VuZS5nZXRFbGVtZW50cygpLCBlLnN0YXRlKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9uVGFwU3RhcnQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1oKSByZXR1cm4gbWggPSAhMCwgY2xlYXJUaW1lb3V0KGdoKSwgdm9pZChnaCA9IHdpbmRvdy5zZXRUaW1lb3V0KE1oLnJlc2V0VGFwVHdpY2UsIGQuR2opKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaCAmJiAxID09PSB0LnRvdWNoZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LnRvdWNoZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYW5kbGVDYW52YXNEb3VibGVDbGljayh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFg6IG4uY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WTogbi5jbGllbnRZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG1oID0gITEsIGNsZWFyVGltZW91dChnaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgMiA9PT0gdC50b3VjaGVzLmxlbmd0aCAmJiBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9uVGFwRW5kID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50b3VjaGVzLmxlbmd0aCA+IDAgJiYgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogZS5zdGF0ZS5wcmV2aW91c1NlbGVjdGVkRWxlbWVudElkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5wYXN0ZUZyb21DbGlwYm9hcmQgPSBabihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gKDAsIGguWikoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbywgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGgodGhpcywgKGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChpLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAobnVsbCA9PT0gKG4gPSBlLmV4Y2FsaWRyYXdDb250YWluZXJSZWYuY3VycmVudCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jb250YWlucyhyKSkgPyAobyA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodmgsIGJoKSwgIXQgfHwgbyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ICYmICFJbihyKSA/IFs0LCBydSh0KV0gOiBbMl0pIDogWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gaS5zZW50KCksIGUucHJvcHMub25QYXN0ZSA/IFs0LCBlLnByb3BzLm9uUGFzdGUoYSwgdCldIDogWzMsIDNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpLnNlbnQoKSkgcmV0dXJuIFsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5lcnJvck1lc3NhZ2UgPyBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBhLmVycm9yTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogYS5zcHJlYWRzaGVldCA/IGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXN0ZURpYWxvZzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYS5zcHJlYWRzaGVldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3duOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBhLmVsZW1lbnRzID8gZS5hZGRFbGVtZW50c0Zyb21QYXN0ZU9yTGlicmFyeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB3dShhLmVsZW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJjdXJzb3IiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBhLnRleHQgJiYgZS5hZGRUZXh0RnJvbVBhc3RlKGEudGV4dCksIGUuc2VsZWN0U2hhcGVUb29sKCJzZWxlY3Rpb24iKSwgbnVsbCA9PSB0IHx8IHQucHJldmVudERlZmF1bHQoKSwgWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KCkpLCB0aGlzLmFkZEVsZW1lbnRzRnJvbVBhc3RlT3JMaWJyYXJ5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB3dSh0LmVsZW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbXQobiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHJbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHJbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IERuKG8sIGkpIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gRG4oYSwgbCkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAib2JqZWN0IiA9PSB0eXBlb2YgdC5wb3NpdGlvbiA/IHQucG9zaXRpb24uY2xpZW50WCA6ICJjdXJzb3IiID09PSB0LnBvc2l0aW9uID8gdmggOiBlLnN0YXRlLndpZHRoIC8gMiArIGUuc3RhdGUub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gIm9iamVjdCIgPT0gdHlwZW9mIHQucG9zaXRpb24gPyB0LnBvc2l0aW9uLmNsaWVudFkgOiAiY3Vyc29yIiA9PT0gdC5wb3NpdGlvbiA/IGJoIDogZS5zdGF0ZS5oZWlnaHQgLyAyICsgZS5zdGF0ZS5vZmZzZXRUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IFJuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WDogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WTogZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuc3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBwLnggLSBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBwLnkgLSBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBuZXcgTWFwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBpdChoLCBmLCBlLnN0YXRlLmdyaWRTaXplKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gZ1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gZ1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3IE1hcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gbi5tYXAoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBibyhlLnN0YXRlLmVkaXRpbmdHcm91cElkLCBtLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0LnggKyB2IC0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHQueSArIGIgLSBhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geS5zZXQodC5pZCwgbi5pZCksIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHNoKHNoKFtdLCBlLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpKSwgdyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaSh4LCBuLCB5KSwgZS5zY2VuZS5yZXBsYWNlQWxsRWxlbWVudHMoeCksIGUuaGlzdG9yeS5yZXN1bWVSZWNvcmRpbmcoKSwgZS5zZXRTdGF0ZShvbyh1aCh1aCh7fSwgZS5zdGF0ZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3BlbjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB3LnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVt0LmlkXSA9ICEwLCBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHt9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuc2NlbmUuZ2V0RWxlbWVudHMoKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuc2V0QXBwU3RhdGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucmVtb3ZlUG9pbnRlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0b3VjaCIgPT09IGUucG9pbnRlclR5cGUgJiYga2ggJiYgKGNsZWFyVGltZW91dChraCksIGtoID0gMCwgU2ggPSAhMSksIE9oLnBvaW50ZXJzLmRlbGV0ZShlLnBvaW50ZXJJZCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy50b2dnbGVMb2NrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudExvY2tlZDogIWUuZWxlbWVudExvY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6IGUuZWxlbWVudExvY2tlZCA/ICJzZWxlY3Rpb24iIDogZS5lbGVtZW50VHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnRvZ2dsZVplbk1vZGUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYWN0aW9uTWFuYWdlci5leGVjdXRlQWN0aW9uKERkKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnRvZ2dsZVN0YXRzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0YXRlLnNob3dTdGF0cyB8fCBzYygiZGlhbG9nIiwgInN0YXRzIiksIGUuYWN0aW9uTWFuYWdlci5leGVjdXRlQWN0aW9uKEJkKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnNjcm9sbFRvQ29udGVudCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IGUuc2NlbmUuZ2V0RWxlbWVudHMoKSksIGUuc2V0U3RhdGUodWgoe30sIFdpKEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdLCBlLnN0YXRlLCBlLmNhbnZhcykpKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmNsZWFyVG9hc3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZTogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5zZXRUb2FzdE1lc3NhZ2UgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2U6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucmVzdG9yZUZpbGVGcm9tU2hhcmUgPSAoMCwgaC5aKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiwgciwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaCh0aGlzLCAoZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50cnlzLnB1c2goWzAsIDYsICwgN10pLCBbNCwgY2FjaGVzLm9wZW4oIndlYi1zaGFyZS10YXJnZXQiKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgKHQgPSBhLnNlbnQoKSkubWF0Y2goInNoYXJlZC1maWxlIildOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG4gPSBhLnNlbnQoKSkgPyBbNCwgbi5ibG9iKCldIDogWzMsIDVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9IGEuc2VudCgpLCBlLmxvYWRGaWxlVG9DYW52YXMociksIFs0LCB0LmRlbGV0ZSgic2hhcmVkLWZpbGUiKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuc2VudCgpLCB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgZC5pQywgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSwgYS5sYWJlbCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgN107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvID0gYS5zZW50KCksIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogby5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgWzMsIDddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgdGhpcy51cGRhdGVTY2VuZSA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNvbW1pdFRvSGlzdG9yeSAmJiBlLmhpc3RvcnkucmVzdW1lUmVjb3JkaW5nKCksIHQuYXBwU3RhdGUgJiYgZS5zZXRTdGF0ZSh0LmFwcFN0YXRlKSwgdC5lbGVtZW50cyAmJiBlLnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyh0LmVsZW1lbnRzKSwgdC5jb2xsYWJvcmF0b3JzICYmIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhYm9yYXRvcnM6IHQuY29sbGFib3JhdG9ycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uU2NlbmVVcGRhdGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHt9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnVwZGF0ZUN1cnJlbnRDdXJzb3JQb3NpdGlvbiA9IFpuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aCA9IGUuY2xpZW50WCwgYmggPSBlLmNsaWVudFkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uS2V5RG93biA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIlByb3h5IiBpbiB3aW5kb3cgJiYgKCF0LnNoaWZ0S2V5ICYmIC9eW0EtWl0kLy50ZXN0KHQua2V5KSB8fCB0LnNoaWZ0S2V5ICYmIC9eW2Etel0kLy50ZXN0KHQua2V5KSkgJiYgKHQgPSBuZXcgUHJveHkodCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiByID8gci5iaW5kKGUpIDogImtleSIgPT09IG4gPyB0LnNoaWZ0S2V5ID8gZS5rZXkudG9VcHBlckNhc2UoKSA6IGUua2V5LnRvTG93ZXJDYXNlKCkgOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksICEoSW4odC50YXJnZXQpICYmIHQua2V5ICE9PSBubiB8fCB4bih0LmtleSkgJiYgKG4gPSB0LnRhcmdldCwgbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmICJ3eXNpd3lnIiA9PT0gbi5kYXRhc2V0LnR5cGUgfHwgbiBpbnN0YW5jZW9mIEhUTUxCUkVsZW1lbnQgfHwgbiBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgbiBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgbiBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSkpICYmICh0LmtleSA9PT0gcm4gJiYgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIZWxwRGlhbG9nOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAhZS5hY3Rpb25NYW5hZ2VyLmhhbmRsZUtleURvd24odCkgJiYgIWUuc3RhdGUudmlld01vZGVFbmFibGVkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0W0p0XSAmJiBlLnN0YXRlLmlzQmluZGluZ0VuYWJsZWQgJiYgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpbmRpbmdFbmFibGVkOiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5jb2RlID09PSBEdCAmJiBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlicmFyeU9wZW46ICFlLnN0YXRlLmlzTGlicmFyeU9wZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHhuKHQua2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuc3RhdGUuZ3JpZFNpemUgJiYgKHQuc2hpZnRLZXkgPyBkLiRlIDogZS5zdGF0ZS5ncmlkU2l6ZSkgfHwgKHQuc2hpZnRLZXkgPyBkLkl3IDogZC4kZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5zY2VuZS5nZXRFbGVtZW50cygpLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0YXRlLnNlbGVjdGVkRWxlbWVudElkc1t0LmlkXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5rZXkgPT09IFl0ID8gYSA9IC1yIDogdC5rZXkgPT09IFh0ID8gYSA9IHIgOiB0LmtleSA9PT0gcXQgPyBpID0gLXIgOiB0LmtleSA9PT0gWnQgJiYgKGkgPSByKSwgby5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS54ICsgYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnkgKyBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJGEoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXVsdGFuZW91c2x5VXBkYXRlZDogbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBlLm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JBbGwobyksIHQucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gTmkoZS5zY2VuZS5nZXRFbGVtZW50cygpLCBlLnN0YXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGwubGVuZ3RoICYmIFVlKGxbMF0pKSBlLnN0YXRlLmVkaXRpbmdMaW5lYXJFbGVtZW50ICYmIGUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQuZWxlbWVudElkID09PSBsWzBdLmlkIHx8IChlLmhpc3RvcnkucmVzdW1lUmVjb3JkaW5nKCksIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0xpbmVhckVsZW1lbnQ6IG5ldyB6YShsWzBdLCBlLnNjZW5lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDEgPT09IGwubGVuZ3RoICYmICFVZShsWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBsWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RhcnRUZXh0RWRpdGluZyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVYOiBzLnggKyBzLndpZHRoIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVk6IHMueSArIHMuaGVpZ2h0IC8gMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHZvaWQgdC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0LmN0cmxLZXkgJiYgIXQuYWx0S2V5ICYmICF0Lm1ldGFLZXkgJiYgbnVsbCA9PT0gZS5zdGF0ZS5kcmFnZ2luZ0VsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICRkLmZpbmQoKGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PT0gKG4gKyAxKS50b1N0cmluZygpIHx8ICgic3RyaW5nIiA9PSB0eXBlb2YgdC5rZXkgPyB0LmtleSA9PT0gZSA6IHQua2V5LmluY2x1ZGVzKGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChudWxsID09IHQgPyB2b2lkIDAgOiB0LnZhbHVlKSB8fCBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5rZXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID8gZS5zZWxlY3RTaGFwZVRvb2woYykgOiB0LmtleSA9PT0gaG4gJiYgZS50b2dnbGVMb2NrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5rZXkgPT09IG9uICYmIDAgPT09IE9oLnBvaW50ZXJzLnNpemUgJiYgKHloID0gITAsIHpuKGUuY2FudmFzLCBkLm9jLkdSQUJCSU5HKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uS2V5VXAgPSBabigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQua2V5ID09PSBvbiAmJiAoInNlbGVjdGlvbiIgPT09IGUuc3RhdGUuZWxlbWVudFR5cGUgPyBqbihlLmNhbnZhcykgOiAoQm4oZS5jYW52YXMsIGUuc3RhdGUuZWxlbWVudFR5cGUpLCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB5aCA9ICExKSwgdFtKdF0gfHwgZS5zdGF0ZS5pc0JpbmRpbmdFbmFibGVkIHx8IGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JpbmRpbmdFbmFibGVkOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB4bih0LmtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE5pKGUuc2NlbmUuZ2V0RWxlbWVudHMoKSwgZS5zdGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmEoZS5zdGF0ZSkgPyBXYShuKSA6IFlhKG4pLCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQmluZGluZ3M6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLm9uR2VzdHVyZVN0YXJ0ID0gWm4oKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIE9oLmluaXRpYWxTY2FsZSA9IGUuc3RhdGUuem9vbS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMub25HZXN0dXJlQ2hhbmdlID0gWm4oKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnByZXZlbnREZWZhdWx0KCksIDIgIT09IE9oLnBvaW50ZXJzLnNpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9oLmluaXRpYWxTY2FsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLnpvb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vZmZzZXRMZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogcWkoUWkobiAqIHQuc2NhbGUpLCByLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB2aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBiaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMub25HZXN0dXJlRW5kID0gWm4oKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogZS5zdGF0ZS5wcmV2aW91c1NlbGVjdGVkRWxlbWVudElkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIE9oLmluaXRpYWxTY2FsZSA9IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLnN0YXJ0VGV4dEVkaXRpbmcgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuc2NlbmVYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LnNjZW5lWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5pbnNlcnRBdFBhcmVudENlbnRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdm9pZCAwID09PSBvIHx8IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuZ2V0VGV4dEVsZW1lbnRBdFBvc2l0aW9uKG4sIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhICYmIGUuZ2V0VGV4dFd5c2l3eWdTbmFwcGVkVG9DZW50ZXJQb3NpdGlvbihuLCByLCBlLnN0YXRlLCBlLmNhbnZhcywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBpIHx8IGZvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbCA/IGwuZWxlbWVudENlbnRlclggOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBsID8gbC5lbGVtZW50Q2VudGVyWSA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZS5zdGF0ZS5jdXJyZW50SXRlbUJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBlLnN0YXRlLmN1cnJlbnRJdGVtRmlsbFN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogZS5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZVdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogZS5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZVN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VnaG5lc3M6IGUuc3RhdGUuY3VycmVudEl0ZW1Sb3VnaG5lc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IGUuc3RhdGUuY3VycmVudEl0ZW1PcGFjaXR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VTaGFycG5lc3M6IGUuc3RhdGUuY3VycmVudEl0ZW1TdHJva2VTaGFycG5lc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogZS5zdGF0ZS5jdXJyZW50SXRlbUZvbnRTaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBlLnN0YXRlLmN1cnJlbnRJdGVtRm9udEZhbWlseSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBsID8gImNlbnRlciIgOiBlLnN0YXRlLmN1cnJlbnRJdGVtVGV4dEFsaWduLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBsID8gIm1pZGRsZSIgOiBkLmhzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nRWxlbWVudDogcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkgPyBsICYmICJjZW50ZXIiID09PSBzLnRleHRBbGlnbiB8fCBHcihzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogZC5ocwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiAoZS5zY2VuZS5yZXBsYWNlQWxsRWxlbWVudHMoc2goc2goW10sIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkpLCBbc10pKSwgbCB8fCBHcihzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogcy55IC0gcy5iYXNlbGluZSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0VsZW1lbnQ6IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLmhhbmRsZVRleHRXeXNpd3lnKHMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0aW5nRWxlbWVudDogISFpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZUNhbnZhc0RvdWJsZUNsaWNrID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLnN0YXRlLm11bHRpRWxlbWVudCAmJiAic2VsZWN0aW9uIiA9PT0gZS5zdGF0ZS5lbGVtZW50VHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gTmkoZS5zY2VuZS5nZXRFbGVtZW50cygpLCBlLnN0YXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gbi5sZW5ndGggJiYgVWUoblswXSkpIGUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQgJiYgZS5zdGF0ZS5lZGl0aW5nTGluZWFyRWxlbWVudC5lbGVtZW50SWQgPT09IG5bMF0uaWQgfHwgKGUuaGlzdG9yeS5yZXN1bWVSZWNvcmRpbmcoKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdMaW5lYXJFbGVtZW50OiBuZXcgemEoblswXSwgZS5zY2VuZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpuKGUuY2FudmFzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBSbih0LCBlLnN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gci55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm8oZS5zdGF0ZSkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmdldEVsZW1lbnRBdFBvc2l0aW9uKG8sIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpICYmIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ3JvdXBJZHMuZmluZCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShpLCBlLnN0YXRlLnNlbGVjdGVkR3JvdXBJZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwpIHJldHVybiB2b2lkIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb28odWgodWgoe30sIHQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nR3JvdXBJZDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiAobiA9IHt9LCBuW2kuaWRdID0gITAsIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLnNjZW5lLmdldEVsZW1lbnRzKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqbihlLmNhbnZhcyksIHRbSnRdIHx8IGUuc3RhdGUudmlld01vZGVFbmFibGVkIHx8IGUuc3RhcnRUZXh0RWRpdGluZyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVk6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRBdFBhcmVudENlbnRlcjogIXQuYWx0S2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZUNhbnZhc1BvaW50ZXJNb3ZlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zYXZlUG9pbnRlcih0LmNsaWVudFgsIHQuY2xpZW50WSwgZS5zdGF0ZS5jdXJzb3JCdXR0b24pLCBPaC5wb2ludGVycy5oYXModC5wb2ludGVySWQpICYmIE9oLnBvaW50ZXJzLnNldCh0LnBvaW50ZXJJZCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHQuY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB0LmNsaWVudFkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBPaC5pbml0aWFsU2NhbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA9PT0gT2gucG9pbnRlcnMuc2l6ZSAmJiBPaC5sYXN0Q2VudGVyICYmIG4gJiYgT2guaW5pdGlhbERpc3RhbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBLZChPaC5wb2ludGVycyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLnggLSBPaC5sYXN0Q2VudGVyLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByLnkgLSBPaC5sYXN0Q2VudGVyLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2gubGFzdENlbnRlciA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBVZChBcnJheS5mcm9tKE9oLnBvaW50ZXJzLnZhbHVlcygpKSkgLyBPaC5pbml0aWFsRGlzdGFuY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLnNjcm9sbFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5zY3JvbGxZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBlLm9mZnNldFRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFg6IGwgKyBvIC8gdC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFk6IHMgKyBhIC8gdC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHFpKFFpKG4gKiBpKSwgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZENhY2hlSWdub3JlWm9vbTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZS5yZXNldFNob3VsZENhY2hlSWdub3JlWm9vbURlYm91bmNlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgT2gubGFzdENlbnRlciA9IE9oLmluaXRpYWxEaXN0YW5jZSA9IE9oLmluaXRpYWxTY2FsZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh5aCB8fCB3aCB8fCB4aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IEJpKEVoLCB0LmNsaWVudFggLSBlLnN0YXRlLm9mZnNldExlZnQsIHQuY2xpZW50WSAtIGUuc3RhdGUub2Zmc2V0VG9wKS5pc092ZXJFaXRoZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdGF0ZS5kcmFnZ2luZ0VsZW1lbnQgfHwgZS5zdGF0ZS5tdWx0aUVsZW1lbnQgfHwgKGwgPyBqbihlLmNhbnZhcykgOiBCbihlLmNhbnZhcywgZS5zdGF0ZS5lbGVtZW50VHlwZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gUm4odCwgZS5zdGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBzLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQgJiYgIWUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQuaXNEcmFnZ2luZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHphLmhhbmRsZVBvaW50ZXJNb3ZlKHQsIGMsIHUsIGUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQsIGUuc3RhdGUuZ3JpZFNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwICE9PSBlLnN0YXRlLmVkaXRpbmdMaW5lYXJFbGVtZW50ICYmIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0xpbmVhckVsZW1lbnQ6IHAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIG51bGwgIT0gcC5sYXN0VW5jb21taXR0ZWRQb2ludCA/IGUubWF5YmVTdWdnZXN0QmluZGluZ0F0Q3Vyc29yKHMpIDogZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRCaW5kaW5nczogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFhlKGUuc3RhdGUuZWxlbWVudFR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gZS5zdGF0ZS5kcmFnZ2luZ0VsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFllKGgpID8gZS5tYXliZVN1Z2dlc3RCaW5kaW5nRm9yTGluZWFyRWxlbWVudEF0Q3Vyc29yKGgsICJlbmQiLCBzLCBlLnN0YXRlLnN0YXJ0Qm91bmRFbGVtZW50KSA6IGUubWF5YmVTdWdnZXN0QmluZGluZ0F0Q3Vyc29yKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnN0YXRlLm11bHRpRWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGUuc3RhdGUubXVsdGlFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGYueCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBmLnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gZi5wb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gZi5sYXN0Q29tbWl0dGVkUG9pbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gdlt2Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm4oZS5jYW52YXMsIGUuc3RhdGUuZWxlbWVudFR5cGUpLCB2b2lkKHkgPT09IGIgPyBldChjIC0gbSwgdSAtIGcsIHlbMF0sIHlbMV0pID49IGQucXggPyBHcihmLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHNoKHNoKFtdLCB2KSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjIC0gbSwgdSAtIGddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHpuKGUuY2FudmFzLCBkLm9jLlBPSU5URVIpIDogdi5sZW5ndGggPiAyICYmIGIgJiYgZXQoYyAtIG0sIHUgLSBnLCBiWzBdLCBiWzFdKSA8IGQucXggPyAoem4oZS5jYW52YXMsIGQub2MuUE9JTlRFUiksIEdyKGYsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogdi5zbGljZSgwLCAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogKHR0KHYsIGUuc3RhdGUuem9vbS52YWx1ZSkgJiYgem4oZS5jYW52YXMsIGQub2MuUE9JTlRFUiksIEdyKGYsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogc2goc2goW10sIHYuc2xpY2UoMCwgLTEpKSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjIC0gbSwgdSAtIGddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKEJvb2xlYW4odC5idXR0b25zKSB8fCAic2VsZWN0aW9uIiAhPT0gZS5zdGF0ZS5lbGVtZW50VHlwZSAmJiAidGV4dCIgIT09IGUuc3RhdGUuZWxlbWVudFR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gZS5zY2VuZS5nZXRFbGVtZW50cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IE5pKHcsIGUuc3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSAhPT0geC5sZW5ndGggfHwgbCB8fCBlLnN0YXRlLmVkaXRpbmdMaW5lYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5sZW5ndGggPiAxICYmICFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEUgPSBUYShtdCh4KSwgYywgdSwgZS5zdGF0ZS56b29tLCB0LnBvaW50ZXJUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRSkgcmV0dXJuIHZvaWQgem4oZS5jYW52YXMsIEFhKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtSGFuZGxlVHlwZTogRQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBJYSh3LCBlLnN0YXRlLCBjLCB1LCBlLnN0YXRlLnpvb20sIHQucG9pbnRlclR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgJiYgay50cmFuc2Zvcm1IYW5kbGVUeXBlKSByZXR1cm4gdm9pZCB6bihlLmNhbnZhcywgQWEoaykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFMgPSBlLmdldEVsZW1lbnRBdFBvc2l0aW9uKHMueCwgcy55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRleHQiID09PSBlLnN0YXRlLmVsZW1lbnRUeXBlID8gem4oZS5jYW52YXMsIFZlKFMpID8gZC5vYy5URVhUIDogZC5vYy5DUk9TU0hBSVIpIDogbCA/IHpuKGUuY2FudmFzLCBkLm9jLkFVVE8pIDogUyB8fCBlLmlzSGl0dGluZ0NvbW1vbkJvdW5kaW5nQm94T2ZTZWxlY3RlZEVsZW1lbnRzKHMsIHgpID8gem4oZS5jYW52YXMsIGQub2MuTU9WRSkgOiB6bihlLmNhbnZhcywgZC5vYy5BVVRPKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVUb3VjaE1vdmUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaCA9ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuaGFuZGxlQ2FudmFzUG9pbnRlckRvd24gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnBlcnNpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBuICYmIG4uYW5jaG9yTm9kZSAmJiBuLnJlbW92ZUFsbFJhbmdlcygpLCBlLm1heWJlT3BlbkNvbnRleHRNZW51QWZ0ZXJQb2ludGVyRG93bk9uVG91Y2hEZXZpY2VzKHQpLCBlLm1heWJlQ2xlYW51cEFmdGVyTWlzc2luZ1BvaW50ZXJVcCh0KSwgIXdoICYmIChlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXJEb3duV2l0aDogdC5wb2ludGVyVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yQnV0dG9uOiAiZG93biIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZS5zYXZlUG9pbnRlcih0LmNsaWVudFgsIHQuY2xpZW50WSwgImRvd24iKSwgIWUuaGFuZGxlQ2FudmFzUGFuVXNpbmdXaGVlbE9yU3BhY2VEcmFnKHQpICYmICEodC5idXR0b24gIT09IGQuT2guTUFJTiAmJiB0LmJ1dHRvbiAhPT0gZC5PaC5UT1VDSCB8fCAoZS51cGRhdGVHZXN0dXJlT25Qb2ludGVyRG93bih0KSwgT2gucG9pbnRlcnMuc2l6ZSA+IDEpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuaW5pdGlhbFBvaW50ZXJEb3duU3RhdGUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmhhbmRsZURyYWdnaW5nU2Nyb2xsQmFyKHQsIHIpICYmIChlLmNsZWFyU2VsZWN0aW9uSWZOb3RVc2luZ1NlbGVjdGlvbigpLCBlLnVwZGF0ZUJpbmRpbmdFbmFibGVkT25Qb2ludGVyTW92ZSh0KSwgIWUuaGFuZGxlU2VsZWN0aW9uT25Qb2ludGVyRG93bih0LCByKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgidGV4dCIgIT09IGUuc3RhdGUuZWxlbWVudFR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcnJvdyIgPT09IGUuc3RhdGUuZWxlbWVudFR5cGUgfHwgImxpbmUiID09PSBlLnN0YXRlLmVsZW1lbnRUeXBlID8gZS5oYW5kbGVMaW5lYXJFbGVtZW50T25Qb2ludGVyRG93bih0LCBlLnN0YXRlLmVsZW1lbnRUeXBlLCByKSA6ICJmcmVlZHJhdyIgPT09IGUuc3RhdGUuZWxlbWVudFR5cGUgPyBlLmhhbmRsZUZyZWVEcmF3RWxlbWVudE9uUG9pbnRlckRvd24odCwgZS5zdGF0ZS5lbGVtZW50VHlwZSwgcikgOiBlLmNyZWF0ZUdlbmVyaWNFbGVtZW50T25Qb2ludGVyRG93bihlLnN0YXRlLmVsZW1lbnRUeXBlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5vblBvaW50ZXJNb3ZlRnJvbVBvaW50ZXJEb3duSGFuZGxlcihyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5vblBvaW50ZXJVcEZyb21Qb2ludGVyRG93bkhhbmRsZXIociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUub25LZXlEb3duRnJvbVBvaW50ZXJEb3duSGFuZGxlcihyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5vbktleVVwRnJvbVBvaW50ZXJEb3duSGFuZGxlcihyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoID0gYSwgZS5zdGF0ZS52aWV3TW9kZUVuYWJsZWQgfHwgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGQuS3MuUE9JTlRFUl9NT1ZFLCBvKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5QT0lOVEVSX1VQLCBhKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5LRVlET1dOLCBpKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5LRVlVUCwgbCksIHIuZXZlbnRMaXN0ZW5lcnMub25Nb3ZlID0gbywgci5ldmVudExpc3RlbmVycy5vblVwID0gYSwgci5ldmVudExpc3RlbmVycy5vbktleVVwID0gbCwgci5ldmVudExpc3RlbmVycy5vbktleURvd24gPSBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZS5oYW5kbGVUZXh0T25Qb2ludGVyRG93bih0LCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm1heWJlT3BlbkNvbnRleHRNZW51QWZ0ZXJQb2ludGVyRG93bk9uVG91Y2hEZXZpY2VzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRvdWNoIiA9PT0gdC5wb2ludGVyVHlwZSAmJiAoU2ggPSAhMSwga2ggPyBTaCA9ICEwIDoga2ggPSB3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2ggPSAwLCBTaCB8fCBlLmhhbmRsZUNhbnZhc0NvbnRleHRNZW51KHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZC5uTSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuaGFuZGxlQ2FudmFzUGFuVXNpbmdXaGVlbE9yU3BhY2VEcmFnID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IE9oLnBvaW50ZXJzLnNpemUgfHwgISh0LmJ1dHRvbiA9PT0gZC5PaC5XSEVFTCB8fCB0LmJ1dHRvbiA9PT0gZC5PaC5NQUlOICYmIHloIHx8IGUuc3RhdGUudmlld01vZGVFbmFibGVkKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ggPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IC9MaW51eC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpuKGUuY2FudmFzLCBkLm9jLkdSQUJCSU5HKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdC5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmNsaWVudFksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbyAtIHQuY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhIC0gdC5jbGllbnRZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9IHQuY2xpZW50WCwgYSA9IHQuY2xpZW50WSwgciAmJiAhbiAmJiAoTWF0aC5hYnMoaSkgPiAxIHx8IE1hdGguYWJzKGwpID4gMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5QQVNURSwgcyksIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5QQVNURSwgcyksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuUE9JTlRFUl9VUCwgYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIDEwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKGQuS3MuUEFTVEUsIHMpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfVVAsIGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxYOiBlLnN0YXRlLnNjcm9sbFggLSBpIC8gZS5zdGF0ZS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogZS5zdGF0ZS5zY3JvbGxZIC0gbCAvIGUuc3RhdGUuem9vbS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gWm4oQ2ggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2ggPSBudWxsLCB3aCA9ICExLCB5aCB8fCBCbihlLmNhbnZhcywgZS5zdGF0ZS5lbGVtZW50VHlwZSksIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yQnV0dG9uOiAidXAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLnNhdmVQb2ludGVyKHQuY2xpZW50WCwgdC5jbGllbnRZLCAidXAiKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5QT0lOVEVSX01PVkUsIGkpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLlBPSU5URVJfVVAsIGwpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLktzLkJMVVIsIGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5CTFVSLCBsKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5QT0lOVEVSX01PVkUsIGksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaXZlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGQuS3MuUE9JTlRFUl9VUCwgbCksICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuY2xlYXJTZWxlY3Rpb25JZk5vdFVzaW5nU2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2VsZWN0aW9uIiAhPT0gZS5zdGF0ZS5lbGVtZW50VHlwZSAmJiBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZVNlbGVjdGlvbk9uUG9pbnRlckRvd24gPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInNlbGVjdGlvbiIgPT09IGUuc3RhdGUuZWxlbWVudFR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuc2NlbmUuZ2V0RWxlbWVudHMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IE5pKHIsIGUuc3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxICE9PSBvLmxlbmd0aCB8fCBlLnN0YXRlLmVkaXRpbmdMaW5lYXJFbGVtZW50KSBvLmxlbmd0aCA+IDEgJiYgKG4ucmVzaXplLmhhbmRsZVR5cGUgPSBUYShtdChvKSwgbi5vcmlnaW4ueCwgbi5vcmlnaW4ueSwgZS5zdGF0ZS56b29tLCB0LnBvaW50ZXJUeXBlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gSWEociwgZS5zdGF0ZSwgbi5vcmlnaW4ueCwgbi5vcmlnaW4ueSwgZS5zdGF0ZS56b29tLCB0LnBvaW50ZXJUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBhICYmIChlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nRWxlbWVudDogYS5lbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuLnJlc2l6ZS5oYW5kbGVUeXBlID0gYS50cmFuc2Zvcm1IYW5kbGVUeXBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5yZXNpemUuaGFuZGxlVHlwZSkgem4oZS5jYW52YXMsIEFhKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtSGFuZGxlVHlwZTogbi5yZXNpemUuaGFuZGxlVHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbi5yZXNpemUuaXNSZXNpemluZyA9ICEwLCBuLnJlc2l6ZS5vZmZzZXQgPSBLbihmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLCBhID0gMSA9PT0gdC5sZW5ndGggPyBzdCh0WzBdKSA6IG10KHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gKGkgKyBzKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gKGwgKyBjKSAvIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gMSA9PT0gdC5sZW5ndGggPyB0WzBdLmFuZ2xlIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuID0gKG8gPSBRZShuLCByLCB1LCBkLCAtcCkpWzBdLCByID0gb1sxXSwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKG4gLSAoaSArIHMpIC8gMiwgciAtIGwsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKG4gLSAoaSArIHMpIC8gMiwgciAtIGMsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKG4gLSBpLCByIC0gKGwgKyBjKSAvIDIsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFlKG4gLSBzLCByIC0gKGwgKyBjKSAvIDIsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibnciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShuIC0gaSwgciAtIGwsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShuIC0gcywgciAtIGwsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic3ciOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShuIC0gaSwgciAtIGMsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic2UiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRZShuIC0gcywgciAtIGMsIDAsIDAsIHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzAsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KG4ucmVzaXplLmhhbmRsZVR5cGUsIG8sIG4ub3JpZ2luLngsIG4ub3JpZ2luLnkpKSwgMSA9PT0gby5sZW5ndGggJiYgVWUob1swXSkgJiYgMiA9PT0gb1swXS5wb2ludHMubGVuZ3RoICYmIChuLnJlc2l6ZS5hcnJvd0RpcmVjdGlvbiA9ICh1ID0gbi5yZXNpemUuaGFuZGxlVHlwZSwgZCA9IG9bMF0sIHAgPSBkLnBvaW50c1sxXSwgaCA9IHBbMF0sIGYgPSBwWzFdLCAibnciID09PSB1ICYmIChoIDwgMCB8fCBmIDwgMCkgfHwgIm5lIiA9PT0gdSAmJiBoID49IDAgfHwgInN3IiA9PT0gdSAmJiBoIDw9IDAgfHwgInNlIiA9PT0gdSAmJiAoaCA+IDAgfHwgZiA+IDApID8gImVuZCIgOiAib3JpZ2luIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc3RhdGUuZWRpdGluZ0xpbmVhckVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gemEuaGFuZGxlUG9pbnRlckRvd24odCwgZS5zdGF0ZSwgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZXRTdGF0ZSh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuaGlzdG9yeSwgbi5vcmlnaW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwuaGl0RWxlbWVudCAmJiAobi5oaXQuZWxlbWVudCA9IGwuaGl0RWxlbWVudCksIGwuZGlkQWRkUG9pbnQpIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaGl0LmVsZW1lbnQgPSBudWxsICE9PSAoaSA9IG4uaGl0LmVsZW1lbnQpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBlLmdldEVsZW1lbnRBdFBvc2l0aW9uKG4ub3JpZ2luLngsIG4ub3JpZ2luLnkpLCBuLmhpdC5hbGxIaXRFbGVtZW50cyA9IGUuZ2V0RWxlbWVudHNBdFBvc2l0aW9uKG4ub3JpZ2luLngsIG4ub3JpZ2luLnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG4uaGl0LmVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbi5oaXQuYWxsSGl0RWxlbWVudHMuc29tZSgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmlzQVNlbGVjdGVkRWxlbWVudCh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gcyAmJiBjIHx8IHQuc2hpZnRLZXkgfHwgbi5oaXQuaGFzSGl0Q29tbW9uQm91bmRpbmdCb3hPZlNlbGVjdGVkRWxlbWVudHMgfHwgZS5jbGVhclNlbGVjdGlvbihzKSwgbnVsbCAhPSBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodFtKdF0pIHJldHVybiBlLnNldFN0YXRlKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVoKHVoKHt9LCBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSnIoSnIoe30sIGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0dyb3VwSWQ6IHQuZ3JvdXBJZHMubGVuZ3RoID8gdC5ncm91cElkc1swXSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWRzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogKG4gPSB7fSwgblt0LmlkXSA9ICEwLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odCwgcykpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudElkczogZS5zdGF0ZS5zZWxlY3RlZEVsZW1lbnRJZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RhdGUuc2VsZWN0ZWRFbGVtZW50SWRzW3MuaWRdIHx8IChlLnN0YXRlLmVkaXRpbmdHcm91cElkICYmICFhbyhzLCBlLnN0YXRlLmVkaXRpbmdHcm91cElkKSAmJiBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdHcm91cElkOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYyB8fCBuLmhpdC5oYXNIaXRDb21tb25Cb3VuZGluZ0JveE9mU2VsZWN0ZWRFbGVtZW50cyB8fCAoZS5zZXRTdGF0ZSgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbyh1aCh1aCh7fSwgdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogdWgodWgoe30sIHQuc2VsZWN0ZWRFbGVtZW50SWRzKSwge30sIChuID0ge30sIG5bcy5pZF0gPSAhMCwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuc2NlbmUuZ2V0RWxlbWVudHMoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbi5oaXQud2FzQWRkZWRUb1NlbGVjdGlvbiA9ICEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50SWRzOiBlLnN0YXRlLnNlbGVjdGVkRWxlbWVudElkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1LCBkLCBwLCBoLCBmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuaGFuZGxlVGV4dE9uUG9pbnRlckRvd24gPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IiAhPT0gKG51bGwgPT09IChyID0gZS5zdGF0ZS5lZGl0aW5nRWxlbWVudCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci50eXBlKSAmJiAoZS5zdGFydFRleHRFZGl0aW5nKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVg6IG4ub3JpZ2luLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVZOiBuLm9yaWdpbi55LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydEF0UGFyZW50Q2VudGVyOiAhdC5hbHRLZXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBqbihlLmNhbnZhcyksIGUuc3RhdGUuZWxlbWVudExvY2tlZCB8fCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogInNlbGVjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZUZyZWVEcmF3RWxlbWVudE9uUG9pbnRlckRvd24gPSBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSA9IGl0KHIub3JpZ2luLngsIHIub3JpZ2luLnksIG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAobyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IGUuc3RhdGUuY3VycmVudEl0ZW1TdHJva2VDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLnN0YXRlLmN1cnJlbnRJdGVtQmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IGUuc3RhdGUuY3VycmVudEl0ZW1GaWxsU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdWdobmVzczogZS5zdGF0ZS5jdXJyZW50SXRlbVJvdWdobmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogZS5zdGF0ZS5jdXJyZW50SXRlbU9wYWNpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVNoYXJwbmVzczogZS5zdGF0ZS5jdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVQcmVzc3VyZTogLjUgPT09IHQucHJlc3N1cmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjbyhjbyh7fSwgdW8oby50eXBlLCBvKSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogby5wb2ludHMgfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNzdXJlczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXVsYXRlUHJlc3N1cmU6IG8uc2ltdWxhdGVQcmVzc3VyZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENvbW1pdHRlZFBvaW50OiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogdWgodWgoe30sIGUuc2VsZWN0ZWRFbGVtZW50SWRzKSwge30sICh0ID0ge30sIHRbcy5pZF0gPSAhMSwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzLnNpbXVsYXRlUHJlc3N1cmUgPyBzLnByZXNzdXJlcyA6IHNoKHNoKFtdLCBzLnByZXNzdXJlcyksIFt0LnByZXNzdXJlXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcihzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAwXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc3N1cmVzOiBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gcWEoci5vcmlnaW4sIGUuc2NlbmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zY2VuZS5yZXBsYWNlQWxsRWxlbWVudHMoc2goc2goW10sIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkpLCBbc10pKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50OiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Qm91bmRFbGVtZW50OiB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVMaW5lYXJFbGVtZW50T25Qb2ludGVyRG93biA9IGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnN0YXRlLm11bHRpRWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5zdGF0ZS5tdWx0aUVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJsaW5lIiA9PT0gby50eXBlICYmIHR0KG8ucG9pbnRzLCBlLnN0YXRlLnpvb20udmFsdWUpKSByZXR1cm4gR3IobywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q29tbWl0dGVkUG9pbnQ6IG8ucG9pbnRzW28ucG9pbnRzLmxlbmd0aCAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHZvaWQgZS5hY3Rpb25NYW5hZ2VyLmV4ZWN1dGVBY3Rpb24obGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gby54LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gby55LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gby5sYXN0Q29tbWl0dGVkUG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ucG9pbnRzLmxlbmd0aCA+IDEgJiYgbCAmJiBldChyLm9yaWdpbi54IC0gYSwgci5vcmlnaW4ueSAtIGksIGxbMF0sIGxbMV0pIDwgZC5xeCkgcmV0dXJuIHZvaWQgZS5hY3Rpb25NYW5hZ2VyLmV4ZWN1dGVBY3Rpb24obGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIHt9LCAodCA9IHt9LCB0W28uaWRdID0gITAsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBHcihvLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDb21taXR0ZWRQb2ludDogby5wb2ludHNbby5wb2ludHMubGVuZ3RoIC0gMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgem4oZS5jYW52YXMsIGQub2MuUE9JTlRFUikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpdChyLm9yaWdpbi54LCByLm9yaWdpbi55LCBlLnN0YXRlLmdyaWRTaXplKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gZS5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHAuY3VycmVudEl0ZW1TdGFydEFycm93aGVhZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHAuY3VycmVudEl0ZW1FbmRBcnJvd2hlYWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiYXJyb3ciID09PSBuID8gW2gsIGZdIDogW251bGwsIG51bGxdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gbVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IG1bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBnbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogZS5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZUNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLnN0YXRlLmN1cnJlbnRJdGVtQmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBlLnN0YXRlLmN1cnJlbnRJdGVtRmlsbFN0eWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IGUuc3RhdGUuY3VycmVudEl0ZW1TdHJva2VXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VnaG5lc3M6IGUuc3RhdGUuY3VycmVudEl0ZW1Sb3VnaG5lc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBlLnN0YXRlLmN1cnJlbnRJdGVtT3BhY2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVNoYXJwbmVzczogZS5zdGF0ZS5jdXJyZW50SXRlbUxpbmVhclN0cm9rZVNoYXJwbmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXJyb3doZWFkOiBnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXJyb3doZWFkOiB2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHM6IHVoKHVoKHt9LCBlLnNlbGVjdGVkRWxlbWVudElkcyksIHt9LCAodCA9IHt9LCB0W2IuaWRdID0gITEsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBHcihiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogc2goc2goW10sIGIucG9pbnRzKSwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBxYShyLm9yaWdpbiwgZS5zY2VuZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zY2VuZS5yZXBsYWNlQWxsRWxlbWVudHMoc2goc2goW10sIGUuc2NlbmUuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCkpLCBbYl0pKSwgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nRWxlbWVudDogYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGluZ0VsZW1lbnQ6IGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Qm91bmRFbGVtZW50OiB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRCaW5kaW5nczogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmNyZWF0ZUdlbmVyaWNFbGVtZW50T25Qb2ludGVyRG93biA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gaXQobi5vcmlnaW4ueCwgbi5vcmlnaW4ueSwgZS5zdGF0ZS5ncmlkU2l6ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHBvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IGUuc3RhdGUuY3VycmVudEl0ZW1TdHJva2VDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlLnN0YXRlLmN1cnJlbnRJdGVtQmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IGUuc3RhdGUuY3VycmVudEl0ZW1GaWxsU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBlLnN0YXRlLmN1cnJlbnRJdGVtU3Ryb2tlU3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdWdobmVzczogZS5zdGF0ZS5jdXJyZW50SXRlbVJvdWdobmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogZS5zdGF0ZS5jdXJyZW50SXRlbU9wYWNpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVNoYXJwbmVzczogZS5zdGF0ZS5jdXJyZW50SXRlbVN0cm9rZVNoYXJwbmVzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbGVjdGlvbiIgPT09IGkudHlwZSA/IGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVsZW1lbnQ6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IChlLnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyhzaChzaChbXSwgZS5zY2VuZS5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSksIFtpXSkpLCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUVsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50OiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy51cGRhdGVCaW5kaW5nRW5hYmxlZE9uUG9pbnRlck1vdmUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVbSnRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdGF0ZS5pc0JpbmRpbmdFbmFibGVkICE9PSBuICYmIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmluZGluZ0VuYWJsZWQ6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMubWF5YmVTdWdnZXN0QmluZGluZ0F0Q3Vyc29yID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBxYSh0LCBlLnNjZW5lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBudWxsICE9IG4gPyBbbl0gOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5tYXliZVN1Z2dlc3RCaW5kaW5nRm9yTGluZWFyRWxlbWVudEF0Q3Vyc29yID0gZnVuY3Rpb24odCwgbiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBxYShyLCBlLnNjZW5lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEJpbmRpbmdzOiBudWxsID09IGEgfHwgWmEodCwgbnVsbCA9PSBvID8gdm9pZCAwIDogby5pZCwgYSkgPyBbXSA6IFthXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVDYW52YXNSZWYgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHQgPyAoZS5jYW52YXMgPSB0LCBlLnJjID0gRGUuY2FudmFzKGUuY2FudmFzKSwgZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihkLktzLldIRUVMLCBlLmhhbmRsZVdoZWVsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKGQuS3MuVE9VQ0hfU1RBUlQsIGUub25UYXBTdGFydCksIGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoZC5Lcy5UT1VDSF9FTkQsIGUub25UYXBFbmQpKSA6IChudWxsID09PSAobiA9IGUuY2FudmFzKSB8fCB2b2lkIDAgPT09IG4gfHwgbi5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuV0hFRUwsIGUuaGFuZGxlV2hlZWwpLCBudWxsID09PSAociA9IGUuY2FudmFzKSB8fCB2b2lkIDAgPT09IHIgfHwgci5yZW1vdmVFdmVudExpc3RlbmVyKGQuS3MuVE9VQ0hfU1RBUlQsIGUub25UYXBTdGFydCksIG51bGwgPT09IChvID0gZS5jYW52YXMpIHx8IHZvaWQgMCA9PT0gbyB8fCBvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZC5Lcy5UT1VDSF9FTkQsIGUub25UYXBFbmQpKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZUFwcE9uRHJvcCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAoMCwgaC5aKSgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvLCBhLCBpLCBsLCBzLCBjLCB1LCBwLCBoLCBmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaCh0aGlzLCAoZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG0ubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS50cnlzLnB1c2goWzAsIDMsICwgNF0pLCAiaW1hZ2UvcG5nIiAhPT0gKG51bGwgPT0gKG8gPSB0LmRhdGFUcmFuc2Zlci5maWxlc1swXSkgPyB2b2lkIDAgOiBvLnR5cGUpICYmICJpbWFnZS9zdmcreG1sIiAhPT0gKG51bGwgPT0gbyA/IHZvaWQgMCA6IG8udHlwZSkgPyBbMywgMl0gOiBbNCwgTXUobywgZS5zdGF0ZSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gbS5zZW50KCksIGkgPSBhLmVsZW1lbnRzLCBsID0gYS5hcHBTdGF0ZSwgZS5zeW5jQWN0aW9uUmVzdWx0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB1aCh1aCh7fSwgbCB8fCBlLnN0YXRlKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgPSBtLnNlbnQoKSwgWzIsIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHMubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiIgIT09IChjID0gdC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShkLkxPLmV4Y2FsaWRyYXdsaWIpKSA/IChlLmFkZEVsZW1lbnRzRnJvbVBhc3RlT3JMaWJyYXJ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IEpTT04ucGFyc2UoYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFsyXSkgOiAobnVsbCA9PSAodSA9IG51bGwgPT09IChuID0gdC5kYXRhVHJhbnNmZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uZmlsZXNbMF0pID8gdm9pZCAwIDogdS50eXBlKSA9PT0gZC5MTy5leGNhbGlkcmF3bGliIHx8IG51bGwgIT0gdSAmJiBudWxsICE9PSAociA9IHUubmFtZSkgJiYgdm9pZCAwICE9PSByICYmIHIuZW5kc1dpdGgoIi5leGNhbGlkcmF3bGliIikgPyAoZS5saWJyYXJ5LmltcG9ydExpYnJhcnkodSkudGhlbigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3BlbjogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaWJyYXJ5T3BlbjogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdC5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBbMywgMTFdKSA6IFszLCA1XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAhQmUpIHJldHVybiBbMywgOV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5sYWJlbCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0udHJ5cy5wdXNoKFs2LCA4LCAsIDldKSwgcCA9IHQuZGF0YVRyYW5zZmVyLml0ZW1zWzBdLCBoID0gdSwgWzQsIHAuZ2V0QXNGaWxlU3lzdGVtSGFuZGxlKCldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoLmhhbmRsZSA9IG0uc2VudCgpLCBbMywgOV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYgPSBtLnNlbnQoKSwgY29uc29sZS53YXJuKGYubmFtZSwgZi5tZXNzYWdlKSwgWzMsIDldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgZS5sb2FkRmlsZVRvQ2FudmFzKHUpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5zZW50KCksIG0ubGFiZWwgPSAxMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLCB0aGlzLmxvYWRGaWxlVG9DYW52YXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdSh0LCBlLnN0YXRlKS50aGVuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmVsZW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zeW5jQWN0aW9uUmVzdWx0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiB1aCh1aCh7fSwgciB8fCBlLnN0YXRlKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdFRvSGlzdG9yeTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdC5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZUNhbnZhc0NvbnRleHRNZW51ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFJuKHQsIGUuc3RhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIueSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5nZXRFbGVtZW50QXRQb3NpdGlvbihvLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaSA/ICJlbGVtZW50IiA6ICJjYW52YXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmV4Y2FsaWRyYXdDb250YWluZXJSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gdC5jbGllbnRYIC0gdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdC5jbGllbnRZIC0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgIWUuc3RhdGUuc2VsZWN0ZWRFbGVtZW50SWRzW2kuaWRdID8gZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiAobiA9IHt9LCBuW2kuaWRdID0gITAsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5fb3BlbkNvbnRleHRNZW51KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IGUuX29wZW5Db250ZXh0TWVudSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGwpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMubWF5YmVEcmFnTmV3R2VuZXJpY0VsZW1lbnQgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuc3RhdGUuZHJhZ2dpbmdFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0Lmxhc3RDb29yZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInNlbGVjdGlvbiIgPT09IHIudHlwZSkgU2kociwgZS5zdGF0ZS5lbGVtZW50VHlwZSwgdC5vcmlnaW4ueCwgdC5vcmlnaW4ueSwgby54LCBvLnksIERuKHQub3JpZ2luLngsIG8ueCksIERuKHQub3JpZ2luLnksIG8ueSksIGtuKG4pLCBFbihuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaXQoby54LCBvLnksIGUuc3RhdGUuZ3JpZFNpemUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGFbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2kociwgZS5zdGF0ZS5lbGVtZW50VHlwZSwgdC5vcmlnaW5JbkdyaWQueCwgdC5vcmlnaW5JbkdyaWQueSwgaSwgbCwgRG4odC5vcmlnaW5JbkdyaWQueCwgaSksIERuKHQub3JpZ2luSW5HcmlkLnksIGwpLCBrbihuKSwgRW4obikpLCBlLm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JBbGwoW3JdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5tYXliZUhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTmkoZS5zY2VuZS5nZXRFbGVtZW50cygpLCBlLnN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5yZXNpemUuaGFuZGxlVHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzaXppbmc6IG8gJiYgInJvdGF0aW9uIiAhPT0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JvdGF0aW5nOiAicm90YXRpb24iID09PSBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdC5sYXN0Q29vcmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpdChhLnggLSB0LnJlc2l6ZS5vZmZzZXQueCwgYS55IC0gdC5yZXNpemUub2Zmc2V0LnksIGUuc3RhdGUuZ3JpZFNpemUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBpWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhIGZ1bmN0aW9uKGUsIHQsIG4sIHIsIG8sIGEsIGksIGwsIHMsIGMsIHUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gbi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBuWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInJvdGF0aW9uIiA9PT0gdCA/IChnaShkLCBsLCBzLCBvKSwgJGEoZCkpIDogIVVlKGQpIHx8IDIgIT09IGQucG9pbnRzLmxlbmd0aCB8fCAibnciICE9PSB0ICYmICJuZSIgIT09IHQgJiYgInN3IiAhPT0gdCAmJiAic2UiICE9PSB0ID8gIVZlKGQpIHx8ICJudyIgIT09IHQgJiYgIm5lIiAhPT0gdCAmJiAic3ciICE9PSB0ICYmICJzZSIgIT09IHQgPyB0ICYmIHhpKGUub3JpZ2luYWxFbGVtZW50cy5nZXQoZC5pZCksIGksIGQsIHQsIGEsIGwsIHMpIDogKHdpKGQsIHQsIGEsIGwsIHMpLCAkYShkKSkgOiB2aShkLCByLCBvLCBsLCBzKSwgITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInJvdGF0aW9uIiA9PT0gdCkgcmV0dXJuIGtpKGUsIG4sIGwsIHMsIG8sIGMsIHUpLCAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJudyIgPT09IHQgfHwgIm5lIiA9PT0gdCB8fCAic3ciID09PSB0IHx8ICJzZSIgPT09IHQpIHJldHVybiBFaShuLCB0LCBsLCBzKSwgITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQsIG8sIHIsIHQucmVzaXplLmFycm93RGlyZWN0aW9uLCBTbihuKSwgRW4obiksIGtuKG4pLCBsLCBzLCB0LnJlc2l6ZS5jZW50ZXIueCwgdC5yZXNpemUuY2VudGVyLnkpICYmIChlLm1heWJlU3VnZ2VzdEJpbmRpbmdGb3JBbGwociksICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLl9vcGVuQ29udGV4dE1lbnUgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHF1LmNvbnRleHRJdGVtUHJlZGljYXRlKGUuYWN0aW9uTWFuYWdlci5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSwgZS5hY3Rpb25NYW5hZ2VyLmdldEFwcFN0YXRlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBRdS5jb250ZXh0SXRlbVByZWRpY2F0ZShlLmFjdGlvbk1hbmFnZXIuZ2V0RWxlbWVudHNJbmNsdWRpbmdEZWxldGVkKCksIGUuYWN0aW9uTWFuYWdlci5nZXRBcHBTdGF0ZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZ2QuY29udGV4dEl0ZW1QcmVkaWNhdGUoZS5hY3Rpb25NYW5hZ2VyLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpLCBlLmFjdGlvbk1hbmFnZXIuZ2V0QXBwU3RhdGUoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHZkLmNvbnRleHRJdGVtUHJlZGljYXRlKGUuYWN0aW9uTWFuYWdlci5nZXRFbGVtZW50c0luY2x1ZGluZ0RlbGV0ZWQoKSwgZS5hY3Rpb25NYW5hZ2VyLmdldEFwcFN0YXRlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAic2VwYXJhdG9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gZS5zY2VuZS5nZXRFbGVtZW50cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkYyAmJiB1Lmxlbmd0aCA+IDAgJiYgZC5wdXNoKFBkKSwgUWMgJiYgdS5sZW5ndGggPiAwICYmIGQucHVzaChNZCksICJjYW52YXMiICE9PSBuKSBlLnN0YXRlLnZpZXdNb2RlRW5hYmxlZCA/IG5wKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBzaChbbmF2aWdhdG9yLmNsaXBib2FyZCAmJiBDZF0sIGQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbk1hbmFnZXI6IGUuYWN0aW9uTWFuYWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZTogZS5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IG5wKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBzaChzaChbZS5pc01vYmlsZSAmJiBPZCwgZS5pc01vYmlsZSAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIENkLCBlLmlzTW9iaWxlICYmIG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAicGFzdGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wYXN0ZUZyb21DbGlwYm9hcmQobnVsbCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMucGFzdGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZS5pc01vYmlsZSAmJiBjXSwgZCksIFtjLCBGdSwgV3UsIGMsIGEgJiYgcXUsIGkgJiYgUXUsIChhIHx8IGkpICYmIGMsIG5kLCBjLCBDcywgT3MsIE1zLCBQcywgYywgbCAmJiBnZCwgcyAmJiB2ZCwgKGwgfHwgcykgJiYgYywganMsIGZzXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uTWFuYWdlcjogZS5hY3Rpb25NYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBlLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZS5leGNhbGlkcmF3Q29udGFpbmVyUmVmLmN1cnJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBzaChzaChbXSwgZCksIFt2b2lkIDAgPT09IGUucHJvcHMuZ3JpZE1vZGVFbmFibGVkICYmIExkLCB2b2lkIDAgPT09IGUucHJvcHMuemVuTW9kZUVuYWJsZWQgJiYgRGQsIHZvaWQgMCA9PT0gZS5wcm9wcy52aWV3TW9kZUVuYWJsZWQgJiYgYWgsIEJkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5wKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uTWFuYWdlcjogZS5hY3Rpb25NYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IGUuc3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLnN0YXRlLnZpZXdNb2RlRW5hYmxlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5wKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW2UuaXNNb2JpbGUgJiYgbmF2aWdhdG9yLmNsaXBib2FyZCAmJiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAicGFzdGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybTogZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnBhc3RlRnJvbUNsaXBib2FyZChudWxsKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXRUb0hpc3Rvcnk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtTGFiZWw6ICJsYWJlbHMucGFzdGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUuaXNNb2JpbGUgJiYgbmF2aWdhdG9yLmNsaXBib2FyZCAmJiBjLCAkYyAmJiB1Lmxlbmd0aCA+IDAgJiYgUGQsIFFjICYmIHUubGVuZ3RoID4gMCAmJiBNZCwgKCRjICYmIHUubGVuZ3RoID4gMCB8fCBRYyAmJiB1Lmxlbmd0aCA+IDApICYmIGMsIExzLCBjLCB2b2lkIDAgPT09IGUucHJvcHMuZ3JpZE1vZGVFbmFibGVkICYmIExkLCB2b2lkIDAgPT09IGUucHJvcHMuemVuTW9kZUVuYWJsZWQgJiYgRGQsIHZvaWQgMCA9PT0gZS5wcm9wcy52aWV3TW9kZUVuYWJsZWQgJiYgYWgsIEJkXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25NYW5hZ2VyOiBlLmFjdGlvbk1hbmFnZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBlLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVXaGVlbCA9IFpuKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5wcmV2ZW50RGVmYXVsdCgpLCAhd2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuZGVsdGFYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5kZWx0YVksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gby5zZWxlY3RlZEVsZW1lbnRJZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvLnByZXZpb3VzU2VsZWN0ZWRFbGVtZW50SWRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Lm1ldGFLZXkgfHwgdC5jdHJsS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gTWF0aC5zaWduKHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IE1hdGguYWJzKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID4gMTAgJiYgKHMgPSAxMCksIHMgKj0gbCwgMCAhPT0gT2JqZWN0LmtleXMoaSkubGVuZ3RoICYmIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50SWRzOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIDFlMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZS5zdGF0ZS56b29tLnZhbHVlIC0gcyAvIDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMgKz0gTWF0aC5sb2cxMChNYXRoLm1heCgxLCBlLnN0YXRlLnpvb20udmFsdWUpKSAqIC1sLCBjID0gTWF0aC5yb3VuZChjICogZC5WNCAqIDEwMCkgLyAoMTAwICogZC5WNCksIGUuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS56b29tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLm9mZnNldExlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBxaShRaShjKSwgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHZoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBiaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRJZHM6IDAgIT09IE9iamVjdC5rZXlzKGEpLmxlbmd0aCA/IGEgOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZENhY2hlSWdub3JlWm9vbTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB2b2lkIGUucmVzZXRTaG91bGRDYWNoZUlnbm9yZVpvb21EZWJvdW5jZWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnNoaWZ0S2V5ID8gZS5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuem9vbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFg6IGUuc2Nyb2xsWCAtIChyIHx8IG4pIC8gdC52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogZS5zZXRTdGF0ZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuem9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLnNjcm9sbFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5zY3JvbGxZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogbyAtIG4gLyB0LnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogYSAtIHIgLyB0LnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB0aGlzLnNhdmVQb2ludGVyID0gZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBSbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFk6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBlLnN0YXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05hTihpLngpIHx8IGlzTmFOKGkueSksIG51bGwgPT09IChvID0gKGEgPSBlLnByb3BzKS5vblBvaW50ZXJVcGRhdGUpIHx8IHZvaWQgMCA9PT0gbyB8fCBvLmNhbGwoYSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b246IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJzTWFwOiBPaC5wb2ludGVycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucmVzZXRTaG91bGRDYWNoZUlnbm9yZVpvb21EZWJvdW5jZWQgPSBfbigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnVubW91bnRlZCB8fCBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRDYWNoZUlnbm9yZVpvb206ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgMzAwKSwgdGhpcy51cGRhdGVET01SZWN0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKG4gPSBlLmV4Y2FsaWRyYXdDb250YWluZXJSZWYpICYmIHZvaWQgMCAhPT0gbiAmJiBuLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuZXhjYWxpZHJhd0NvbnRhaW5lclJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gci53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gci5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gci50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gcy5vZmZzZXRUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzLm9mZnNldExlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IGMgJiYgYSA9PT0gdSAmJiBpID09PSBwICYmIGwgPT09IGQpIHJldHVybiB2b2lkKHQgJiYgdCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wOiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0U3RhdGUodWgoe30sIGUuZ2V0Q2FudmFzT2Zmc2V0cygpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgInByb2R1Y3Rpb24iICE9PSBkLlZpLlRFU1QgJiYgInByb2R1Y3Rpb24iICE9PSBkLlZpLkRFVkVMT1BNRU5UIHx8ICh3aW5kb3cuaCA9IHdpbmRvdy5oIHx8IHt9LCBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3cuaCwgewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwLnNjZW5lLmdldEVsZW1lbnRzSW5jbHVkaW5nRGVsZXRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwLnNjZW5lLnJlcGxhY2VBbGxFbGVtZW50cyhlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IEloID0gTWg7CiAgICAgICAgICAgICAgICAgICAgbig0Mjg1KSwgbigzMzEzKTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVGgoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAociA9IHIuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIExoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJSAyID8gVGgoT2JqZWN0KG4pLCAhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwoZSwgdCwgblt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogVGgoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobiwgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgQWggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUuZ2V0RGltZW5zaW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdm9pZCAwID09PSByID8gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IEV1KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGEuZWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGEuYXBwU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGwuZXhwb3J0QmFja2dyb3VuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbC52aWV3QmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBsLnNob3VsZEFkZFdhdGVybWFyazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYyhfaShpKSwgTGgoTGgoe30sIGwpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCYWNrZ3JvdW5kQ29sb3I6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQWRkV2F0ZXJtYXJrOiB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBvKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLndpZHRoID0gci53aWR0aCwgbi5oZWlnaHQgPSByLmhlaWdodCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXM6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiByLnNjYWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9oID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBBaChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5taW1lVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdm9pZCAwID09PSBuID8gImltYWdlL3BuZyIgOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLnF1YWxpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImltYWdlL3BuZyIgPT09IHIgJiYgIm51bWJlciIgPT0gdHlwZW9mIG8gJiYgY29uc29sZS53YXJuKCcicXVhbGl0eSIgd2lsbCBiZSBpZ25vcmVkIGZvciAiaW1hZ2UvcG5nIiBtaW1lVHlwZScpLCAiaW1hZ2UvanBnIiA9PT0gciAmJiAociA9ICJpbWFnZS9qcGVnIiksIG8gPSBvIHx8ICgvaW1hZ2VcL2pwZT9nLy50ZXN0KHIpID8gLjkyIDogLjgpLCBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudG9CbG9iKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgciwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBEaCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdm9pZCAwID09PSBuID8gWG4oKSA6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuZXhwb3J0UGFkZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5tZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gRXUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaS5lbGVtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaS5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYyhfaShsKSwgTGgoTGgoe30sIHMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFBhZGRpbmc6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqaChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChyID0gci5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KS5lbnVtZXJhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpLCBuLnB1c2guYXBwbHkobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gemgoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAlIDIgPyBqaChPYmplY3QobiksICEwKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcygpKGUsIHQsIG5bdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKSA6IGpoKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIEJoID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4gPSBlLm9uQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmluaXRpYWxEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmV4Y2FsaWRyYXdSZWYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUub25Db2xsYWJCdXR0b25DbGljaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5pc0NvbGxhYm9yYXRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUub25Qb2ludGVyVXBkYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLm9uRXhwb3J0VG9CYWNrZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBlLnJlbmRlclRvcFJpZ2h0VUksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGUucmVuZGVyRm9vdGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBlLmxhbmdDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB2b2lkIDAgPT09IGYgPyB2LmNvZGUgOiBmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBlLnZpZXdNb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gZS56ZW5Nb2RlRW5hYmxlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gZS5ncmlkTW9kZUVuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IGUubGlicmFyeVJldHVyblVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gZS50aGVtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBlLnJlbmRlckN1c3RvbVN0YXRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSBlLm9uUGFzdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGUuZGV0ZWN0U2Nyb2xsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8gPSB2b2lkIDAgPT09IEMgfHwgQywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNID0gZS5oYW5kbGVLZXlib2FyZEdsb2JhbGx5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAgPSB2b2lkIDAgIT09IE0gJiYgTSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJID0gZS5vbkxpYnJhcnlDaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTCA9IG51bGwgPT09ICh0ID0gZS5VSU9wdGlvbnMpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuY2FudmFzQWN0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNBY3Rpb25zOiB6aCh6aCh7fSwgZC5jVy5jYW52YXNBY3Rpb25zKSwgTCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLnVzZUVmZmVjdCkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgZS5zY2FsZSAmJiAxICE9PSBlLnNjYWxlICYmIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpdmU6ICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBbXSksIHUoKS5jcmVhdGVFbGVtZW50KFQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nQ29kZTogbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdSgpLmNyZWF0ZUVsZW1lbnQoSWgsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsRGF0YTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNhbGlkcmF3UmVmOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29sbGFiQnV0dG9uQ2xpY2s6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsYWJvcmF0aW5nOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUG9pbnRlclVwZGF0ZTogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkV4cG9ydFRvQmFja2VuZDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJUb3BSaWdodFVJOiBwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZvb3RlcjogaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nQ29kZTogbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZUVuYWJsZWQ6IGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemVuTW9kZUVuYWJsZWQ6IGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZE1vZGVFbmFibGVkOiB5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnJhcnlSZXR1cm5Vcmw6IHcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6IHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDdXN0b21TdGF0czogaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSU9wdGlvbnM6IEEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXN0ZTogUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRlY3RTY3JvbGw6IE8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlS2V5Ym9hcmRHbG9iYWxseTogUCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkxpYnJhcnlDaGFuZ2U6IEkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBIaCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5pdGlhbERhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGkoKShlLCBbImluaXRpYWxEYXRhIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAodC5pbml0aWFsRGF0YSwgaSgpKHQsIFsiaW5pdGlhbERhdGEiXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBPYmplY3Qua2V5cyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gT2JqZWN0LmtleXModCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5sZW5ndGggPT09IGEubGVuZ3RoICYmIG8uZXZlcnkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltlXSA9PT0gcltlXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE5oID0gKDAsIGMuZm9yd2FyZFJlZikoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1KCkuY3JlYXRlRWxlbWVudChCaCwgbygpKHt9LCBlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjYWxpZHJhd1JlZjogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBSaCA9IHUoKS5tZW1vKE5oLCBIaCk7CiAgICAgICAgICAgICAgICAgICAgbig4MzM2KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBGaCA9IFJoCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgNDY5ODogdCA9PiB7CiAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgICAgICAgICAgICAgIHQuZXhwb3J0cyA9IGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICA2MjA3OiBlID0+IHsKICAgICAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICAgICAgZS5leHBvcnRzID0gdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBsID0ge307CgogICAgICAgIGZ1bmN0aW9uIHMoZSkgewogICAgICAgICAgICB2YXIgdCA9IGxbZV07CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQpIHJldHVybiB0LmV4cG9ydHM7CiAgICAgICAgICAgIHZhciBuID0gbFtlXSA9IHsKICAgICAgICAgICAgICAgIGlkOiBlLAogICAgICAgICAgICAgICAgZXhwb3J0czoge30KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIGlbZV0obiwgbi5leHBvcnRzLCBzKSwgbi5leHBvcnRzCiAgICAgICAgfQogICAgICAgIHJldHVybiBzLm0gPSBpLCBzLm4gPSBlID0+IHsKICAgICAgICAgICAgdmFyIHQgPSBlICYmIGUuX19lc01vZHVsZSA/ICgpID0+IGUuZGVmYXVsdCA6ICgpID0+IGU7CiAgICAgICAgICAgIHJldHVybiBzLmQodCwgewogICAgICAgICAgICAgICAgYTogdAogICAgICAgICAgICB9KSwgdAogICAgICAgIH0sIHIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyBlID0+IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA6IGUgPT4gZS5fX3Byb3RvX18sIHMudCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKDEgJiB0ICYmIChlID0gdGhpcyhlKSksIDggJiB0KSByZXR1cm4gZTsKICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiBlICYmIGUpIHsKICAgICAgICAgICAgICAgIGlmICg0ICYgdCAmJiBlLl9fZXNNb2R1bGUpIHJldHVybiBlOwogICAgICAgICAgICAgICAgaWYgKDE2ICYgdCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBlLnRoZW4pIHJldHVybiBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgICAgICBzLnIobyk7CiAgICAgICAgICAgIHZhciBhID0ge307CiAgICAgICAgICAgIG4gPSBuIHx8IFtudWxsLCByKHt9KSwgcihbXSksIHIocildOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMiAmIHQgJiYgZTsKICAgICAgICAgICAgICAgICJvYmplY3QiID09IHR5cGVvZiBpICYmICF+bi5pbmRleE9mKGkpOyBpID0gcihpKSkgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaSkuZm9yRWFjaCgodCA9PiBhW3RdID0gKCkgPT4gZVt0XSkpOwogICAgICAgICAgICByZXR1cm4gYS5kZWZhdWx0ID0gKCkgPT4gZSwgcy5kKG8sIGEpLCBvCiAgICAgICAgfSwgcy5kID0gKGUsIHQpID0+IHsKICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSBzLm8odCwgbikgJiYgIXMubyhlLCBuKSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbiwgewogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICBnZXQ6IHRbbl0KICAgICAgICAgICAgfSkKICAgICAgICB9LCBzLmYgPSB7fSwgcy5lID0gZSA9PiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhzLmYpLnJlZHVjZSgoKHQsIG4pID0+IChzLmZbbl0oZSwgdCksIHQpKSwgW10pKSwgcy51ID0gZSA9PiAiZXhjYWxpZHJhdy1hc3NldHMvIiArIHsKICAgICAgICAgICAgOTogImltYWdlIiwKICAgICAgICAgICAgNDM6ICJpMThuLWRlLURFLWpzb24iLAogICAgICAgICAgICA2MDogImkxOG4ta28tS1ItanNvbiIsCiAgICAgICAgICAgIDYyOiAiaTE4bi16aC1UVy1qc29uIiwKICAgICAgICAgICAgMTM3OiAiaTE4bi1qYS1KUC1qc29uIiwKICAgICAgICAgICAgMTQ5OiAiaTE4bi1wdC1QVC1qc29uIiwKICAgICAgICAgICAgMTY0OiAiaTE4bi1rYWItS0FCLWpzb24iLAogICAgICAgICAgICAxOTY6ICJpMThuLW5sLU5MLWpzb24iLAogICAgICAgICAgICAyMTM6ICJpMThuLXRyLVRSLWpzb24iLAogICAgICAgICAgICAyNDI6ICJpMThuLW15LU1NLWpzb24iLAogICAgICAgICAgICAyNDY6ICJpMThuLW5iLU5PLWpzb24iLAogICAgICAgICAgICAyNjI6ICJpMThuLWhlLUlMLWpzb24iLAogICAgICAgICAgICAyODA6ICJpMThuLXBhLUlOLWpzb24iLAogICAgICAgICAgICAzMDQ6ICJpMThuLXpoLUNOLWpzb24iLAogICAgICAgICAgICAzMTc6ICJpMThuLWVzLUVTLWpzb24iLAogICAgICAgICAgICAzNTE6ICJpMThuLWNhLUVTLWpzb24iLAogICAgICAgICAgICAzNjQ6ICJpMThuLWZyLUZSLWpzb24iLAogICAgICAgICAgICAzODE6ICJpMThuLXB0LUJSLWpzb24iLAogICAgICAgICAgICAzODQ6ICJpMThuLWJnLUJHLWpzb24iLAogICAgICAgICAgICA0MDE6ICJpMThuLXNrLVNLLWpzb24iLAogICAgICAgICAgICA0NjU6ICJpMThuLWl0LUlULWpzb24iLAogICAgICAgICAgICA0NzI6ICJpMThuLWZpLUZJLWpzb24iLAogICAgICAgICAgICA0OTE6ICJpMThuLWlkLUlELWpzb24iLAogICAgICAgICAgICA1MjY6ICJpMThuLWVsLUdSLWpzb24iLAogICAgICAgICAgICA1NTg6ICJpMThuLWFyLVNBLWpzb24iLAogICAgICAgICAgICA1NjU6ICJpMThuLW9jLUZSLWpzb24iLAogICAgICAgICAgICA1ODM6ICJpMThuLXVrLVVBLWpzb24iLAogICAgICAgICAgICA2NjE6ICJpMThuLWh1LUhVLWpzb24iLAogICAgICAgICAgICA2OTg6ICJpMThuLXN2LVNFLWpzb24iLAogICAgICAgICAgICA3MTA6ICJpMThuLWZhLUlSLWpzb24iLAogICAgICAgICAgICA3MzY6ICJ2ZW5kb3IiLAogICAgICAgICAgICA3NTI6ICJpMThuLXJvLVJPLWpzb24iLAogICAgICAgICAgICA4NTI6ICJpMThuLXBsLVBMLWpzb24iLAogICAgICAgICAgICA4Njk6ICJpMThuLXJ1LVJVLWpzb24iLAogICAgICAgICAgICA4OTk6ICJpMThuLWx2LUxWLWpzb24iLAogICAgICAgICAgICA5MjA6ICJpMThuLW5uLU5PLWpzb24iLAogICAgICAgICAgICA5MzM6ICJpMThuLWhpLUlOLWpzb24iCiAgICAgICAgfSBbZV0gKyAiLSIgKyB7CiAgICAgICAgICAgIDk6ICI1ZmU0ZTI3NjcwZDUxNDdmYjFmMiIsCiAgICAgICAgICAgIDQzOiAiZjg1YThhNTI1MzRjMDRjM2YzYjgiLAogICAgICAgICAgICA2MDogImU0MmVkZWRhYTM1MDMyYTIwMWI5IiwKICAgICAgICAgICAgNjI6ICIwZTc3Yzg5NjAxOGJjZDIyMWJmNiIsCiAgICAgICAgICAgIDEzNzogImNjYjVmZmQwZjhhMDk4MGMyZWMwIiwKICAgICAgICAgICAgMTQ5OiAiYmMwY2Q1ODliZDg3YTMwNzk0MDciLAogICAgICAgICAgICAxNjQ6ICJkOWFjYzdiOGVlOTUyZTM1NmQwNiIsCiAgICAgICAgICAgIDE5NjogIjIzZmRmZDlmMTFiYzhlZmJhZjU2IiwKICAgICAgICAgICAgMjEzOiAiY2JhN2U2MmQ5NjEwNzk1YTVhYzMiLAogICAgICAgICAgICAyNDI6ICIyNmQxZTI3YmFiM2I4YWM0YTNlNiIsCiAgICAgICAgICAgIDI0NjogIjhjZTA3NDlkNDZmMGI0YThkZWZiIiwKICAgICAgICAgICAgMjYyOiAiMTU3YWUwMzZmY2Y0NzA1Mjg2ODciLAogICAgICAgICAgICAyODA6ICIyNzA2M2U0ODY1MTQyYWMxMWIxYSIsCiAgICAgICAgICAgIDMwNDogIjk0ZjU2Mjg0NWE5NDVhNDVlMzg1IiwKICAgICAgICAgICAgMzE3OiAiMzJkYzNiZjBmNzg5ZWYxOGU2NWQiLAogICAgICAgICAgICAzNTE6ICI5OTI0ZmJkNTM2NTJkNWYxNTEzNCIsCiAgICAgICAgICAgIDM2NDogIjc5ZmE1NTViZmVhMGEzNTZmMzkzIiwKICAgICAgICAgICAgMzgxOiAiZGI4NjgyOGQ2ZTNjZWQ5Zjk4NTQiLAogICAgICAgICAgICAzODQ6ICIzNWMwZThiOTJiMGRiYThhNGU2ZCIsCiAgICAgICAgICAgIDQwMTogIjQ3NTc1NTFjZWIxNWZhMGEyOWE5IiwKICAgICAgICAgICAgNDY1OiAiNTlmMmU5ZDNkYWMwN2YzMjY0Y2IiLAogICAgICAgICAgICA0NzI6ICI0NmFiZWRhOGQ4MDlkNDA5MTkyNCIsCiAgICAgICAgICAgIDQ5MTogIjg3MjEyZGFhYzYxMTNiNWJmODA4IiwKICAgICAgICAgICAgNTI2OiAiM2IyMDllYzg2Y2EyY2U2OWJkZmEiLAogICAgICAgICAgICA1NTg6ICJlZmQ2MzM3NWY5NjA1YjcyYzRhZiIsCiAgICAgICAgICAgIDU2NTogImM2NDE0MTA3YWQ2MzRiMTEzYWJhIiwKICAgICAgICAgICAgNTgzOiAiZjBjYWIyOTZiZGM0MDg5ZmZhNzciLAogICAgICAgICAgICA2NjE6ICI1MGExM2UzMjJhNjBiYjcwMTYxNSIsCiAgICAgICAgICAgIDY5ODogImRjNzcxOGQ3OWI5YmY5M2E0YmE0IiwKICAgICAgICAgICAgNzEwOiAiN2VlMjMyZDRlZjA4ZGEwOTAzZjYiLAogICAgICAgICAgICA3MzY6ICI1Njc4YTQ2ZTljNDlhZTg0NmE5ZSIsCiAgICAgICAgICAgIDc1MjogImYxM2EyZTdiN2E2M2ZiZmI2YWU3IiwKICAgICAgICAgICAgODUyOiAiMTZhZjFiODNhYzE2YWY1N2FkMDciLAogICAgICAgICAgICA4Njk6ICI2OWIxYTkxOWI3ZjQyYWRmZDZlYyIsCiAgICAgICAgICAgIDg5OTogIjA3ZjZiZmZjYjQ0ZmRkOWFhZDRmIiwKICAgICAgICAgICAgOTIwOiAiYjU5MzFkZTZlMWVkMzM2YmYwODciLAogICAgICAgICAgICA5MzM6ICIzMDM1YzNiM2FiM2NlOTgxZGJjNyIKICAgICAgICB9IFtlXSArICIuanMiLCBzLm8gPSAoZSwgdCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpLCBvID0ge30sIGEgPSAiRXhjYWxpZHJhdzoiLCBzLmwgPSAoZSwgdCwgbiwgcikgPT4gewogICAgICAgICAgICBpZiAob1tlXSkgb1tlXS5wdXNoKHQpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBpLCBsOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpLCB1ID0gMDsgdSA8IGMubGVuZ3RoOyB1KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBjW3VdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5nZXRBdHRyaWJ1dGUoInNyYyIpID09IGUgfHwgZC5nZXRBdHRyaWJ1dGUoImRhdGEtd2VicGFjayIpID09IGEgKyBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpIHx8IChsID0gITAsIChpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IikpLmNoYXJzZXQgPSAidXRmLTgiLCBpLnRpbWVvdXQgPSAxMjAsIHMubmMgJiYgaS5zZXRBdHRyaWJ1dGUoIm5vbmNlIiwgcy5uYyksIGkuc2V0QXR0cmlidXRlKCJkYXRhLXdlYnBhY2siLCBhICsgbiksIGkuc3JjID0gZSksIG9bZV0gPSBbdF07CiAgICAgICAgICAgICAgICB2YXIgcCA9ICh0LCBuKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkub25lcnJvciA9IGkub25sb2FkID0gbnVsbCwgY2xlYXJUaW1lb3V0KGgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG9bZV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGUgb1tlXSwgaS5wYXJlbnROb2RlICYmIGkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpKSwgciAmJiByLmZvckVhY2goKGUgPT4gZShuKSkpLCB0KSByZXR1cm4gdChuKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaCA9IHNldFRpbWVvdXQocC5iaW5kKG51bGwsIHZvaWQgMCwgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidGltZW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaQogICAgICAgICAgICAgICAgICAgIH0pLCAxMmU0KTsKICAgICAgICAgICAgICAgIGkub25lcnJvciA9IHAuYmluZChudWxsLCBpLm9uZXJyb3IpLCBpLm9ubG9hZCA9IHAuYmluZChudWxsLCBpLm9ubG9hZCksIGwgJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChpKQogICAgICAgICAgICB9CiAgICAgICAgfSwgcy5yID0gZSA9PiB7CiAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiAiTW9kdWxlIgogICAgICAgICAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJfX2VzTW9kdWxlIiwgewogICAgICAgICAgICAgICAgdmFsdWU6ICEwCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwgcy5wID0gIiIsICgoKSA9PiB7CiAgICAgICAgICAgIHZhciBlID0gewogICAgICAgICAgICAgICAgMzg4OiAwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHMuZi5qID0gKHQsIG4pID0+IHsKICAgICAgICAgICAgICAgIHZhciByID0gcy5vKGUsIHQpID8gZVt0XSA6IHZvaWQgMDsKICAgICAgICAgICAgICAgIGlmICgwICE9PSByKQogICAgICAgICAgICAgICAgICAgIGlmIChyKSBuLnB1c2goclsyXSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbmV3IFByb21pc2UoKChuLCBvKSA9PiByID0gZVt0XSA9IFtuLCBvXSkpOwogICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goclsyXSA9IG8pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHMucCArIHMudSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuZXcgRXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIHMubChhLCAobiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5vKGUsIHQpICYmICgwICE9PSAociA9IGVbdF0pICYmIChlW3RdID0gdm9pZCAwKSwgcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG4gJiYgKCJsb2FkIiA9PT0gbi50eXBlID8gIm1pc3NpbmciIDogbi50eXBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG4gJiYgbi50YXJnZXQgJiYgbi50YXJnZXQuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubWVzc2FnZSA9ICJMb2FkaW5nIGNodW5rICIgKyB0ICsgIiBmYWlsZWQuXG4oIiArIG8gKyAiOiAiICsgYSArICIpIiwgaS5uYW1lID0gIkNodW5rTG9hZEVycm9yIiwgaS50eXBlID0gbywgaS5yZXF1ZXN0ID0gYSwgclsxXShpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgImNodW5rLSIgKyB0LCB0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHQgPSAodCwgbikgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciByLCBvLCBbYSwgaSwgbF0gPSBuLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gMDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHIgaW4gaSkgcy5vKGksIHIpICYmIChzLm1bcl0gPSBpW3JdKTsKICAgICAgICAgICAgICAgICAgICBpZiAobCkgbChzKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHQgJiYgdChuKTsgYyA8IGEubGVuZ3RoOyBjKyspIG8gPSBhW2NdLCBzLm8oZSwgbykgJiYgZVtvXSAmJiBlW29dWzBdKCksIGVbYVtjXV0gPSAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbiA9IHNlbGYud2VicGFja0NodW5rRXhjYWxpZHJhdyA9IHNlbGYud2VicGFja0NodW5rRXhjYWxpZHJhdyB8fCBbXTsKICAgICAgICAgICAgbi5mb3JFYWNoKHQuYmluZChudWxsLCAwKSksIG4ucHVzaCA9IHQuYmluZChudWxsLCBuLnB1c2guYmluZChuKSkKICAgICAgICB9KSgpLCBzKDEwMTApCiAgICB9KSgpCn0pKTs=';
const SOURCE_DRAW = 'PCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPkRyYXc8L3RpdGxlPjxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPjxzY3JpcHQgc3JjPSJkcmF3LmpzIj48L3NjcmlwdD4KPHN0eWxlPiBib2R5eyBtYXJnaW46IDA7IH0gLmNvbnRhaW5lciB7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLmV4Y2FsaWRyYXctd3JhcHBlciB7IGhlaWdodDogMTAwdmg7ICB3aWR0aDogMTAwdnc7IG1hcmdpbjogMDsgIHBvc2l0aW9uOiByZWxhdGl2ZTsgfQo8L3N0eWxlPjwvaGVhZD4KPGJvZHk+PGRpdiBjbGFzcz0iY29udGFpbmVyIj48ZGl2IGlkPSJhcHAiPjwvZGl2PjwvZGl2PjxzY3JpcHQ+CgpmdW5jdGlvbiBnZXQoaWQsIG9ubG9hZCkKewoJdmFyIHggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCXgub3BlbigiR0VUIiwgImh0dHA6Ly9sb2NhbGhvc3Q6NDA0MC9hcGkvZ2V0P2lkPSIraWQpOwoJeC5zZW5kKCk7Cgl4Lm9ubG9hZCA9IGZ1bmN0aW9uKCkKCXsKCQlvbmxvYWQoeC5yZXNwb25zZVRleHQpOwoJfTsKfQoKZnVuY3Rpb24gc2F2ZShkYXRhLCByYXN0ZXIsIG9ubG9hZCkKewoJdmFyIHggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCXgub3BlbigiUE9TVCIsICJodHRwOi8vbG9jYWxob3N0OjQwNDAvYXBpL3VwZGF0ZSIpOwoKCXZhciBib2R5ID0gCgl7CgkJImlkIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnQtZHJhd2luZyIpLAoJCSJkYXRhIjogSlNPTi5zdHJpbmdpZnkoZGF0YSksCgkJInJhc3RlciI6IHJhc3RlcgoJfTsKCgl4LnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpOwoJeC5vbmxvYWQgPSBvbmxvYWQ7Cn0KCmZ1bmN0aW9uIGJpbl90b19oZXgoYmluKQp7Cgl2YXIgaGV4ID0gIiI7Cglmb3IgKHZhciBpPTA7aTxiaW4ubGVuZ3RoO2krKykKCXsKCQl2YXIgYiA9IGJpbltpXTsKCQl2YXIgbnVtYmVyID0gKGIpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOwoJCWlmKCAobnVtYmVyLmxlbmd0aCAlIDIpID4gMCApCgkJCW51bWJlciA9ICIwIiArIG51bWJlcjsKCQloZXggKz0gbnVtYmVyOwoJfQoJcmV0dXJuIGhleDsKfQoKCmZ1bmN0aW9uIGNyb3AoYykKewoJdmFyIFBBRERJTkcgPSAxMDsKCXZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKQoJdmFyIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsMCxjLndpZHRoLCBjLmhlaWdodCkuZGF0YTsKCXZhciBzdGFydCA9IDA7CgoJdmFyIG1pbnggPSA5OTk5OTsKCXZhciBtaW55ID0gOTk5OTk7Cgl2YXIgbWF4eCA9IDA7Cgl2YXIgbWF4eSA9IDA7Cglmb3IgKHZhciBpPTA7aTxkYXRhLmxlbmd0aC80O2krKykKCXsKCQl2YXIgciA9IGRhdGFbaSo0KzBdOwoJCXZhciBnID0gZGF0YVtpKjQrMV07CgkJdmFyIGIgPSBkYXRhW2kqNCsyXTsKCQl2YXIgeCA9aSAlIGMud2lkdGg7CgkJdmFyIHkgPSBNYXRoLmZsb29yKGkgLyBjLndpZHRoKTsKCgkJaWYgKHIgIT0gMjU1ICYmIGcgIT0gMjU1ICYmIGIgIT0gMjU1KQoJCXsKCQkJaWYgKHggPCBtaW54KSBtaW54ID0geDsKCQkJaWYgKHkgPCBtaW55KSBtaW55ID0geTsKCgkJCWlmICh4ID4gbWF4eCkgbWF4eCA9IHg7CgkJCWlmICh5ID4gbWF4eSkgbWF4eSA9IHk7CgoJCX0KCX0KCgltaW54ID0gbWlueCAtIFBBRERJTkc7CgltaW55ID0gbWlueSAtIFBBRERJTkc7CgltYXh4ID0gbWF4eCArIFBBRERJTkc7CgltYXh5ID0gbWF4eSArIFBBRERJTkc7CgoJaWYgKG1pbnggPCAwKQltaW54ID0gMDsKCWlmIChtaW55IDwgMCkJbWlueSA9IDA7CglpZiAobWF4eCA+IGMud2lkdGgpCW1heHggPSBjLndpZHRoOwoJaWYgKG1heHkgPiBjLmhlaWdodCkJbWF4eSA9IGMuaGVpZ2h0OwoKCXZhciBkeCA9IG1heHggLSBtaW54OwoJdmFyIGR5ID0gbWF4eSAtIG1pbnk7CgoJdmFyIG91dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpCglvdXQud2lkdGggPSBkeDsKCW91dC5oZWlnaHQgPSBkeTsKCXZhciBvdXRfY3R4ID0gb3V0LmdldENvbnRleHQoIjJkIikKCglvdXRfY3R4LmRyYXdJbWFnZShjLCBtaW54LCBtaW55LCBkeCwgZHksIDAsIDAsIGR4LCBkeSk7Cgljb25zb2xlLmxvZyhkeCwgZHkpOwoJY29uc29sZS5sb2cobWlueCwgbWlueSwgbWF4eCwgbWF4eSk7CglyZXR1cm4gb3V0Owp9CgpmdW5jdGlvbiBoZXhfdG9fYmluKGhleCkKewoJdmFyIGJpbiA9IG5ldyBVaW50OEFycmF5KGhleC5sZW5ndGggLyAyKTsKCWZvciAodmFyIGk9MDtpPGhleC5sZW5ndGgvMjtpKyspCgl7CgkJdmFyIGggPSBoZXhbaSoyXSArIGhleFtpKjIrMV07CgkJYmluW2ldID0gcGFyc2VJbnQoaCwgMTYpOwoJfQoJcmV0dXJuIGJpbjsKfQoKY29uc3QgQXBwID0gKCkgPT4KewoJY29uc3QgZXhjYWxpZHJhd1JlZiA9IFJlYWN0LnVzZVJlZihudWxsKTsKCWNvbnN0IGV4Y2FsaWRyYXdXcmFwcGVyUmVmID0gUmVhY3QudXNlUmVmKG51bGwpOwoJY29uc3QgW2RpbWVuc2lvbnMsIHNldERpbWVuc2lvbnNdID0gUmVhY3QudXNlU3RhdGUoewoJCXdpZHRoOiB1bmRlZmluZWQsCgkJaGVpZ2h0OiB1bmRlZmluZWQKCX0pOwoKCVJlYWN0LnVzZUVmZmVjdCgoKSA9PiAKCXsKCQlzZXREaW1lbnNpb25zKHsKCQkJd2lkdGg6IGV4Y2FsaWRyYXdXcmFwcGVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsCgkJCWhlaWdodDogZXhjYWxpZHJhd1dyYXBwZXJSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQKCQl9KTsKCgkJdmFyIGlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnQtZHJhd2luZyIpOwoJCWlmIChpZCA9PSBudWxsKQoJCQlyZXR1cm47CgoJCWdldChpZCwgZnVuY3Rpb24oZGF0YSwgZXJyKQoJCXsKCQkJZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CgkJCWRhdGEuY29sbGFib3JhdG9ycyA9IG5ldyBNYXAoKTsKCQkJZGF0YS5hcHBTdGF0ZS53aWR0aCA9IDE5MjA7CgkJCWRhdGEuYXBwU3RhdGUuaGVpZ2h0ID0gMTA4MDsKCQkJdXBkYXRlU2NlbmUoZGF0YSk7CgkJfSk7CgoJCWNvbnN0IG9uUmVzaXplID0gKCkgPT4KCQl7CgkJCXNldERpbWVuc2lvbnMoewoJCQkJd2lkdGg6IGV4Y2FsaWRyYXdXcmFwcGVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsCgkJCQloZWlnaHQ6IGV4Y2FsaWRyYXdXcmFwcGVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0CgkJCX0pOwoJCX07CgoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24oZSkKCQl7CgkJCS8vIGN0cmwtcwoJCQlpZiAoZS5rZXlDb2RlID09IDgzICYmIChuYXZpZ2F0b3IucGxhdGZvcm0ubWF0Y2goIk1hYyIpID8gZS5tZXRhS2V5IDogZS5jdHJsS2V5KSkKCQkJewoJCQkJdmFyIGVsZW1lbnRzID0gZXhjYWxpZHJhd1JlZi5jdXJyZW50LmdldFNjZW5lRWxlbWVudHMoKTsKCQkJCXZhciBhcHAgPSBleGNhbGlkcmF3UmVmLmN1cnJlbnQuZ2V0QXBwU3RhdGUoKTsKCQkJCXZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7CgkJCQljYW52YXMgPSBjcm9wKGNhbnZhcyk7CgkJCQljYW52YXMudG9CbG9iKGZ1bmN0aW9uKGJsb2IpCgkJCQl7CgkJCQkJYmxvYi5hcnJheUJ1ZmZlcigpLnRoZW4oZnVuY3Rpb24oYnVmZmVyKQoJCQkJCXsKCQkJCQkJdmFyIHJhc3RlciA9IGJpbl90b19oZXgobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSkKCQkJCQkJc2F2ZSh7ImVsZW1lbnRzIjplbGVtZW50cywgImFwcFN0YXRlIjogYXBwfSwgcmFzdGVyLCBmdW5jdGlvbigpCgkJCQkJCXsKCQkJCQkJCWNvbnNvbGUubG9nKCJzYXZlZCIpOwoJCQkJCQl9KQoJCQkJCX0pOwoJCQkJfSwgImltYWdlL3BuZyIpOwoKCgkJCQllLnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSkKCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgb25SZXNpemUpOwoJCXJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgb25SZXNpemUpOwoJfSwgW2V4Y2FsaWRyYXdXcmFwcGVyUmVmXSk7CgoJY29uc3QgdXBkYXRlU2NlbmUgPSAoZGF0YSkgPT4KCXsKCQlleGNhbGlkcmF3UmVmLmN1cnJlbnQudXBkYXRlU2NlbmUoZGF0YSk7Cgl9OwoKCXJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLAoJCVJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsCgkJewoJCQljbGFzc05hbWU6ICJleGNhbGlkcmF3LXdyYXBwZXIiLAoJCQlyZWY6IGV4Y2FsaWRyYXdXcmFwcGVyUmVmCgkJfSwKCQlSZWFjdC5jcmVhdGVFbGVtZW50KEV4Y2FsaWRyYXcuZGVmYXVsdCwgewoJCQlyZWY6IGV4Y2FsaWRyYXdSZWYsCgkJCXdpZHRoOiBkaW1lbnNpb25zLndpZHRoLAoJCQloZWlnaHQ6IGRpbWVuc2lvbnMuaGVpZ2h0CgkJfSkKCQkpCgkpOwp9OwoKY29uc3QgZXhjYWxpZHJhd1dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBwIik7ClJlYWN0RE9NLnJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KEFwcCksIGV4Y2FsaWRyYXdXcmFwcGVyKTsKCjwvc2NyaXB0PjwvYm9keT48L2h0bWw+';
const SOURCE_LIST = 'PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+Cgk8bWV0YSBjaGFyc2V0PSJVVEYtOCI+Cgk8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+Cgk8dGl0bGU+RG9jdW1lbnQ8L3RpdGxlPgoJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJib290c3RyYXAuY3NzIj4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iYmctbGlnaHQiPgoJPGRpdiBjbGFzcz0iY29udGFpbmVyIG10LTIiPgoJCTxkaXYgY2xhc3M9InJvdyBjb250ZW50Ij4KCQk8L2Rpdj4KCQk8aHI+CgkJPGRpdiBjbGFzcz0icm93Ij4KCQkJPGRpdiBjbGFzcz0iY29sIj4KCQkJCTxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tbGcgY3JlYXRlIj4gKyBDcmVhdGUgYSBuZXcgc2tldGNoPC9idXR0b24+CgkJCTwvZGl2PgoJCQkKCQk8L2Rpdj4KCTwvZGl2Pgo8c2NyaXB0PgoKdmFyICQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yOwoKZnVuY3Rpb24geGhyKG1ldGhvZCwgYWN0aW9uLCBkYXRhLCBvbmxvYWQpCnsKCXZhciB4ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cgl4Lm9wZW4obWV0aG9kLCJodHRwOi8vbG9jYWxob3N0OjQwNDAvYXBpLyIgKyBhY3Rpb24pOwoJeC5zZW5kKCk7Cgl4Lm9ubG9hZCA9IGZ1bmN0aW9uKCkKCXsKCQlvbmxvYWQoeC5yZXNwb25zZVRleHQpOwkKCX0KfQoKZnVuY3Rpb24gY3JlYXRlKCkKewoJdmFyIHggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCXgub3BlbigiR0VUIiwgImh0dHA6Ly9sb2NhbGhvc3Q6NDA0MC9hcGkvY3JlYXRlIik7Cgl4LnNlbmQoKTsKCXgub25sb2FkID0gZnVuY3Rpb24oKQoJewoJCXdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKCX0KfQoKZnVuY3Rpb24gYXNzaWduX2RlbGV0ZShpZCkKewoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCXZhciB4ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgkJeC5vcGVuKCJQT1NUIiwgImh0dHA6Ly9sb2NhbGhvc3Q6NDA0MC9hcGkvZGVsZXRlIik7CgkJeC5zZW5kKEpTT04uc3RyaW5naWZ5KHsKCQkJImlkIjogaWQsCgkJfSkpOwoJCXgub25sb2FkID0gZnVuY3Rpb24oKQoJCXsKCQkJd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwoJCX0KCX0KfQoKZnVuY3Rpb24gYXNzaWduX3VwZGF0ZShpZCwgaW5wdXQpCnsKCXJldHVybiBmdW5jdGlvbigpIHsKCQl2YXIgeCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoJCXgub3BlbigiUE9TVCIsICJodHRwOi8vbG9jYWxob3N0OjQwNDAvYXBpL3VwZGF0ZSIpOwoJCXguc2VuZChKU09OLnN0cmluZ2lmeSh7CgkJCSJpZCI6IGlkLAoJCQkibmFtZSI6IGlucHV0LnZhbHVlCgkJfSkpOwoJCXgub25sb2FkID0gZnVuY3Rpb24oKQoJCXsKCQkJd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwoJCX0KCX0KfQoKZnVuY3Rpb24gYXNzaWduX2RyYXcoaWQpCnsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY3VycmVudC1kcmF3aW5nIiwgaWQpCgkJd2luZG93LmxvY2F0aW9uID0gIi9kcmF3IjsKCX0KfQoKZnVuY3Rpb24gbWFpbigpCnsKCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jcmVhdGUiKS5vbmNsaWNrID0gY3JlYXRlOwoKCXhocigiR0VUIiwgImxpc3QiLCIiLCBmdW5jdGlvbihkYXRhKQoJewoJCWRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwoJCXJlbmRlcihkYXRhKTsKCX0pCn0KCmZ1bmN0aW9uIHJlbmRlcihkYXRhKQp7Cgl2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jb250ZW50Iik7Cglmb3IgKHZhciBrZXkgaW4gZGF0YSkKCXsKCQkKCQl2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwoJCQoJCQoJCXZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CgkJdGQuaW5uZXJIVE1MID0gYDxpbWcgc3R5bGU9Im9iamVjdC1maXQ6Y292ZXI7IHdpZHRoOiAyNDBweDsgaGVpZ2h0OiAyNDBweDsiIHNyYz0iaHR0cDovL2xvY2FsaG9zdDo0MDQwL3Jhc3Rlci8ke2tleX0ucG5nIj5gCgkJdHIuYXBwZW5kQ2hpbGQodGQpOwoKCQl2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQl0ZC5jbGFzc05hbWUgPSAiY29sLTEyIGNvbC1zbS02IGNvbC1tZC00IGNvbC1sZy0zIGNvbC14bC0yIG10LTQgIgoJCXRkLmlubmVySFRNTCA9CgkJYAoJCQk8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTEgYm9yZGVyIj4gCgkJCQk8ZGl2IGNsYXNzPSJyb3cgdGV4dC1jZW50ZXIiPgoJCQkJCTxkaXYgY2xhc3M9ImNvbCI+CgkJCQkJCTxpbWcgY2xhc3M9InctMTAwIiBzdHlsZT0ib2JqZWN0LWZpdDpjb3ZlcjsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cDovL2xvY2FsaG9zdDo0MDQwL3Jhc3Rlci8ke2tleX0ucG5nIj4KCQkJCQk8L2Rpdj4KCQkJCTwvZGl2PgoJCQkJPGRpdiBjbGFzcz0icm93Ij4KCQkJCQk8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCB3LTEwMCBtdC0yIj4KCQkJCQkJPGlucHV0IGNsYXNzPSJmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iJHtkYXRhW2tleV19Ij4KCQkJCQkJPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBidG4tc20gdXBkYXRlIj5VcGRhdGU8L2J1dHRvbj4KCQkJCQk8L2Rpdj4KCQkJCTwvZGl2PgoKCQkJCTxkaXYgY2xhc3M9InJvdyI+CgkJCQkJPGRpdiBjbGFzcz0iY29sIj4KCQkJCQkJPGRpdiBjbGFzcz0ibXQtMiI+CgkJCQkJCQk8YSBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkiIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6NDA0MC9yYXN0ZXIvJHtrZXl9LnBuZyIgdGFyZ2V0PSJfYmxhbmsiPgoJCQkJCQkJCVBORwoJCQkJCQkJPC9hPgoJCQkJCQkJPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkgZHJhdyI+RHJhdzwvYnV0dG9uPgoJCQkJCQkJPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tZGFuZ2VyIGRlbGV0ZSI+RGVsZXRlPC9idXR0b24+CgkJCQkJCTwvZGl2PgoJCQkJCTwvZGl2PgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCWAKCQl2YXIgaW5wdXQgPSB0ZC5xdWVyeVNlbGVjdG9yKCIuZm9ybS1jb250cm9sIik7CgkJdmFyIHVwZGF0ZV9idG4gPSB0ZC5xdWVyeVNlbGVjdG9yKCIudXBkYXRlIik7CgkJdmFyIGRlbGV0ZV9idG4gPSB0ZC5xdWVyeVNlbGVjdG9yKCIuZGVsZXRlIik7CgkJdmFyIGRyYXdfYnRuID0gdGQucXVlcnlTZWxlY3RvcigiLmRyYXciKTsKCgkJZGVsZXRlX2J0bi5vbmNsaWNrID0gYXNzaWduX2RlbGV0ZShrZXkpOwoJCXVwZGF0ZV9idG4ub25jbGljayA9IGFzc2lnbl91cGRhdGUoa2V5LCBpbnB1dCk7CgkJZHJhd19idG4ub25jbGljayA9IGFzc2lnbl9kcmF3KGtleSk7CgkJdGQucXVlcnlTZWxlY3RvcigiaW1nIikub25jbGljayA9IGFzc2lnbl9kcmF3KGtleSk7CgoJCWNvbnRlbnQuYXBwZW5kQ2hpbGQodGQpOwoJfQp9Cgp3aW5kb3cub25sb2FkID0gbWFpbjsKCgo8L3NjcmlwdD4KCjwvYm9keT4KPC9odG1sPg==';
const SOURCE_BOOTSTRAP = 'QGNoYXJzZXQgIlVURi04IjsvKiEKICogQm9vdHN0cmFwIHY1LjAuMSAoaHR0cHM6Ly9nZXRib290c3RyYXAuY29tLykKICogQ29weXJpZ2h0IDIwMTEtMjAyMSBUaGUgQm9vdHN0cmFwIEF1dGhvcnMKICogQ29weXJpZ2h0IDIwMTEtMjAyMSBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKQogKi86cm9vdHstLWJzLWJsdWU6IzBkNmVmZDstLWJzLWluZGlnbzojNjYxMGYyOy0tYnMtcHVycGxlOiM2ZjQyYzE7LS1icy1waW5rOiNkNjMzODQ7LS1icy1yZWQ6I2RjMzU0NTstLWJzLW9yYW5nZTojZmQ3ZTE0Oy0tYnMteWVsbG93OiNmZmMxMDc7LS1icy1ncmVlbjojMTk4NzU0Oy0tYnMtdGVhbDojMjBjOTk3Oy0tYnMtY3lhbjojMGRjYWYwOy0tYnMtd2hpdGU6I2ZmZjstLWJzLWdyYXk6IzZjNzU3ZDstLWJzLWdyYXktZGFyazojMzQzYTQwOy0tYnMtcHJpbWFyeTojMGQ2ZWZkOy0tYnMtc2Vjb25kYXJ5OiM2Yzc1N2Q7LS1icy1zdWNjZXNzOiMxOTg3NTQ7LS1icy1pbmZvOiMwZGNhZjA7LS1icy13YXJuaW5nOiNmZmMxMDc7LS1icy1kYW5nZXI6I2RjMzU0NTstLWJzLWxpZ2h0OiNmOGY5ZmE7LS1icy1kYXJrOiMyMTI1Mjk7LS1icy1mb250LXNhbnMtc2VyaWY6c3lzdGVtLXVpLC1hcHBsZS1zeXN0ZW0sIlNlZ29lIFVJIixSb2JvdG8sIkhlbHZldGljYSBOZXVlIixBcmlhbCwiTm90byBTYW5zIiwiTGliZXJhdGlvbiBTYW5zIixzYW5zLXNlcmlmLCJBcHBsZSBDb2xvciBFbW9qaSIsIlNlZ29lIFVJIEVtb2ppIiwiU2Vnb2UgVUkgU3ltYm9sIiwiTm90byBDb2xvciBFbW9qaSI7LS1icy1mb250LW1vbm9zcGFjZTpTRk1vbm8tUmVndWxhcixNZW5sbyxNb25hY28sQ29uc29sYXMsIkxpYmVyYXRpb24gTW9ubyIsIkNvdXJpZXIgTmV3Iixtb25vc3BhY2U7LS1icy1ncmFkaWVudDpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDApKX0qLDo6YWZ0ZXIsOjpiZWZvcmV7Ym94LXNpemluZzpib3JkZXItYm94fUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpuby1wcmVmZXJlbmNlKXs6cm9vdHtzY3JvbGwtYmVoYXZpb3I6c21vb3RofX1ib2R5e21hcmdpbjowO2ZvbnQtZmFtaWx5OnZhcigtLWJzLWZvbnQtc2Fucy1zZXJpZik7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjojMjEyNTI5O2JhY2tncm91bmQtY29sb3I6I2ZmZjstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6MTAwJTstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnR9aHJ7bWFyZ2luOjFyZW0gMDtjb2xvcjppbmhlcml0O2JhY2tncm91bmQtY29sb3I6Y3VycmVudENvbG9yO2JvcmRlcjowO29wYWNpdHk6LjI1fWhyOm5vdChbc2l6ZV0pe2hlaWdodDoxcHh9LmgxLC5oMiwuaDMsLmg0LC5oNSwuaDYsaDEsaDIsaDMsaDQsaDUsaDZ7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206LjVyZW07Zm9udC13ZWlnaHQ6NTAwO2xpbmUtaGVpZ2h0OjEuMn0uaDEsaDF7Zm9udC1zaXplOmNhbGMoMS4zNzVyZW0gKyAxLjV2dyl9QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuaDEsaDF7Zm9udC1zaXplOjIuNXJlbX19LmgyLGgye2ZvbnQtc2l6ZTpjYWxjKDEuMzI1cmVtICsgLjl2dyl9QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuaDIsaDJ7Zm9udC1zaXplOjJyZW19fS5oMyxoM3tmb250LXNpemU6Y2FsYygxLjNyZW0gKyAuNnZ3KX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5oMyxoM3tmb250LXNpemU6MS43NXJlbX19Lmg0LGg0e2ZvbnQtc2l6ZTpjYWxjKDEuMjc1cmVtICsgLjN2dyl9QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuaDQsaDR7Zm9udC1zaXplOjEuNXJlbX19Lmg1LGg1e2ZvbnQtc2l6ZToxLjI1cmVtfS5oNixoNntmb250LXNpemU6MXJlbX1we21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjFyZW19YWJicltkYXRhLWJzLW9yaWdpbmFsLXRpdGxlXSxhYmJyW3RpdGxlXXstd2Via2l0LXRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgZG90dGVkO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgZG90dGVkO2N1cnNvcjpoZWxwOy13ZWJraXQtdGV4dC1kZWNvcmF0aW9uLXNraXAtaW5rOm5vbmU7dGV4dC1kZWNvcmF0aW9uLXNraXAtaW5rOm5vbmV9YWRkcmVzc3ttYXJnaW4tYm90dG9tOjFyZW07Zm9udC1zdHlsZTpub3JtYWw7bGluZS1oZWlnaHQ6aW5oZXJpdH1vbCx1bHtwYWRkaW5nLWxlZnQ6MnJlbX1kbCxvbCx1bHttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbToxcmVtfW9sIG9sLG9sIHVsLHVsIG9sLHVsIHVse21hcmdpbi1ib3R0b206MH1kdHtmb250LXdlaWdodDo3MDB9ZGR7bWFyZ2luLWJvdHRvbTouNXJlbTttYXJnaW4tbGVmdDowfWJsb2NrcXVvdGV7bWFyZ2luOjAgMCAxcmVtfWIsc3Ryb25ne2ZvbnQtd2VpZ2h0OmJvbGRlcn0uc21hbGwsc21hbGx7Zm9udC1zaXplOi44NzVlbX0ubWFyayxtYXJre3BhZGRpbmc6LjJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmY2Y4ZTN9c3ViLHN1cHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6Ljc1ZW07bGluZS1oZWlnaHQ6MDt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX1zdWJ7Ym90dG9tOi0uMjVlbX1zdXB7dG9wOi0uNWVtfWF7Y29sb3I6IzBkNmVmZDt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfWE6aG92ZXJ7Y29sb3I6IzBhNThjYX1hOm5vdChbaHJlZl0pOm5vdChbY2xhc3NdKSxhOm5vdChbaHJlZl0pOm5vdChbY2xhc3NdKTpob3Zlcntjb2xvcjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjpub25lfWNvZGUsa2JkLHByZSxzYW1we2ZvbnQtZmFtaWx5OnZhcigtLWJzLWZvbnQtbW9ub3NwYWNlKTtmb250LXNpemU6MWVtO2RpcmVjdGlvbjpsdHI7dW5pY29kZS1iaWRpOmJpZGktb3ZlcnJpZGV9cHJle2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MXJlbTtvdmVyZmxvdzphdXRvO2ZvbnQtc2l6ZTouODc1ZW19cHJlIGNvZGV7Zm9udC1zaXplOmluaGVyaXQ7Y29sb3I6aW5oZXJpdDt3b3JkLWJyZWFrOm5vcm1hbH1jb2Rle2ZvbnQtc2l6ZTouODc1ZW07Y29sb3I6I2Q2MzM4NDt3b3JkLXdyYXA6YnJlYWstd29yZH1hPmNvZGV7Y29sb3I6aW5oZXJpdH1rYmR7cGFkZGluZzouMnJlbSAuNHJlbTtmb250LXNpemU6Ljg3NWVtO2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMjEyNTI5O2JvcmRlci1yYWRpdXM6LjJyZW19a2JkIGtiZHtwYWRkaW5nOjA7Zm9udC1zaXplOjFlbTtmb250LXdlaWdodDo3MDB9ZmlndXJle21hcmdpbjowIDAgMXJlbX1pbWcsc3Zne3ZlcnRpY2FsLWFsaWduOm1pZGRsZX10YWJsZXtjYXB0aW9uLXNpZGU6Ym90dG9tO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZX1jYXB0aW9ue3BhZGRpbmctdG9wOi41cmVtO3BhZGRpbmctYm90dG9tOi41cmVtO2NvbG9yOiM2Yzc1N2Q7dGV4dC1hbGlnbjpsZWZ0fXRoe3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWFsaWduOi13ZWJraXQtbWF0Y2gtcGFyZW50fXRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRye2JvcmRlci1jb2xvcjppbmhlcml0O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MH1sYWJlbHtkaXNwbGF5OmlubGluZS1ibG9ja31idXR0b257Ym9yZGVyLXJhZGl1czowfWJ1dHRvbjpmb2N1czpub3QoOmZvY3VzLXZpc2libGUpe291dGxpbmU6MH1idXR0b24saW5wdXQsb3B0Z3JvdXAsc2VsZWN0LHRleHRhcmVhe21hcmdpbjowO2ZvbnQtZmFtaWx5OmluaGVyaXQ7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH1idXR0b24sc2VsZWN0e3RleHQtdHJhbnNmb3JtOm5vbmV9W3JvbGU9YnV0dG9uXXtjdXJzb3I6cG9pbnRlcn1zZWxlY3R7d29yZC13cmFwOm5vcm1hbH1zZWxlY3Q6ZGlzYWJsZWR7b3BhY2l0eToxfVtsaXN0XTo6LXdlYmtpdC1jYWxlbmRhci1waWNrZXItaW5kaWNhdG9ye2Rpc3BsYXk6bm9uZX1bdHlwZT1idXR0b25dLFt0eXBlPXJlc2V0XSxbdHlwZT1zdWJtaXRdLGJ1dHRvbnstd2Via2l0LWFwcGVhcmFuY2U6YnV0dG9ufVt0eXBlPWJ1dHRvbl06bm90KDpkaXNhYmxlZCksW3R5cGU9cmVzZXRdOm5vdCg6ZGlzYWJsZWQpLFt0eXBlPXN1Ym1pdF06bm90KDpkaXNhYmxlZCksYnV0dG9uOm5vdCg6ZGlzYWJsZWQpe2N1cnNvcjpwb2ludGVyfTo6LW1vei1mb2N1cy1pbm5lcntwYWRkaW5nOjA7Ym9yZGVyLXN0eWxlOm5vbmV9dGV4dGFyZWF7cmVzaXplOnZlcnRpY2FsfWZpZWxkc2V0e21pbi13aWR0aDowO3BhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MH1sZWdlbmR7ZmxvYXQ6bGVmdDt3aWR0aDoxMDAlO3BhZGRpbmc6MDttYXJnaW4tYm90dG9tOi41cmVtO2ZvbnQtc2l6ZTpjYWxjKDEuMjc1cmVtICsgLjN2dyk7bGluZS1oZWlnaHQ6aW5oZXJpdH1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpe2xlZ2VuZHtmb250LXNpemU6MS41cmVtfX1sZWdlbmQrKntjbGVhcjpsZWZ0fTo6LXdlYmtpdC1kYXRldGltZS1lZGl0LWRheS1maWVsZCw6Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC1maWVsZHMtd3JhcHBlciw6Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC1ob3VyLWZpZWxkLDo6LXdlYmtpdC1kYXRldGltZS1lZGl0LW1pbnV0ZSw6Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC1tb250aC1maWVsZCw6Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC10ZXh0LDo6LXdlYmtpdC1kYXRldGltZS1lZGl0LXllYXItZmllbGR7cGFkZGluZzowfTo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbntoZWlnaHQ6YXV0b31bdHlwZT1zZWFyY2hde291dGxpbmUtb2Zmc2V0Oi0ycHg7LXdlYmtpdC1hcHBlYXJhbmNlOnRleHRmaWVsZH06Oi13ZWJraXQtc2VhcmNoLWRlY29yYXRpb257LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmV9Ojotd2Via2l0LWNvbG9yLXN3YXRjaC13cmFwcGVye3BhZGRpbmc6MH06OmZpbGUtc2VsZWN0b3ItYnV0dG9ue2ZvbnQ6aW5oZXJpdH06Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9ue2ZvbnQ6aW5oZXJpdDstd2Via2l0LWFwcGVhcmFuY2U6YnV0dG9ufW91dHB1dHtkaXNwbGF5OmlubGluZS1ibG9ja31pZnJhbWV7Ym9yZGVyOjB9c3VtbWFyeXtkaXNwbGF5Omxpc3QtaXRlbTtjdXJzb3I6cG9pbnRlcn1wcm9ncmVzc3t2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX1baGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5sZWFke2ZvbnQtc2l6ZToxLjI1cmVtO2ZvbnQtd2VpZ2h0OjMwMH0uZGlzcGxheS0xe2ZvbnQtc2l6ZTpjYWxjKDEuNjI1cmVtICsgNC41dncpO2ZvbnQtd2VpZ2h0OjMwMDtsaW5lLWhlaWdodDoxLjJ9QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuZGlzcGxheS0xe2ZvbnQtc2l6ZTo1cmVtfX0uZGlzcGxheS0ye2ZvbnQtc2l6ZTpjYWxjKDEuNTc1cmVtICsgMy45dncpO2ZvbnQtd2VpZ2h0OjMwMDtsaW5lLWhlaWdodDoxLjJ9QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuZGlzcGxheS0ye2ZvbnQtc2l6ZTo0LjVyZW19fS5kaXNwbGF5LTN7Zm9udC1zaXplOmNhbGMoMS41MjVyZW0gKyAzLjN2dyk7Zm9udC13ZWlnaHQ6MzAwO2xpbmUtaGVpZ2h0OjEuMn1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5kaXNwbGF5LTN7Zm9udC1zaXplOjRyZW19fS5kaXNwbGF5LTR7Zm9udC1zaXplOmNhbGMoMS40NzVyZW0gKyAyLjd2dyk7Zm9udC13ZWlnaHQ6MzAwO2xpbmUtaGVpZ2h0OjEuMn1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5kaXNwbGF5LTR7Zm9udC1zaXplOjMuNXJlbX19LmRpc3BsYXktNXtmb250LXNpemU6Y2FsYygxLjQyNXJlbSArIDIuMXZ3KTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6MS4yfUBtZWRpYSAobWluLXdpZHRoOjEyMDBweCl7LmRpc3BsYXktNXtmb250LXNpemU6M3JlbX19LmRpc3BsYXktNntmb250LXNpemU6Y2FsYygxLjM3NXJlbSArIDEuNXZ3KTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6MS4yfUBtZWRpYSAobWluLXdpZHRoOjEyMDBweCl7LmRpc3BsYXktNntmb250LXNpemU6Mi41cmVtfX0ubGlzdC11bnN0eWxlZHtwYWRkaW5nLWxlZnQ6MDtsaXN0LXN0eWxlOm5vbmV9Lmxpc3QtaW5saW5le3BhZGRpbmctbGVmdDowO2xpc3Qtc3R5bGU6bm9uZX0ubGlzdC1pbmxpbmUtaXRlbXtkaXNwbGF5OmlubGluZS1ibG9ja30ubGlzdC1pbmxpbmUtaXRlbTpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1yaWdodDouNXJlbX0uaW5pdGlhbGlzbXtmb250LXNpemU6Ljg3NWVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX0uYmxvY2txdW90ZXttYXJnaW4tYm90dG9tOjFyZW07Zm9udC1zaXplOjEuMjVyZW19LmJsb2NrcXVvdGU+Omxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTowfS5ibG9ja3F1b3RlLWZvb3RlcnttYXJnaW4tdG9wOi0xcmVtO21hcmdpbi1ib3R0b206MXJlbTtmb250LXNpemU6Ljg3NWVtO2NvbG9yOiM2Yzc1N2R9LmJsb2NrcXVvdGUtZm9vdGVyOjpiZWZvcmV7Y29udGVudDoi4oCUICJ9LmltZy1mbHVpZHttYXgtd2lkdGg6MTAwJTtoZWlnaHQ6YXV0b30uaW1nLXRodW1ibmFpbHtwYWRkaW5nOi4yNXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGVlMmU2O2JvcmRlci1yYWRpdXM6LjI1cmVtO21heC13aWR0aDoxMDAlO2hlaWdodDphdXRvfS5maWd1cmV7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmZpZ3VyZS1pbWd7bWFyZ2luLWJvdHRvbTouNXJlbTtsaW5lLWhlaWdodDoxfS5maWd1cmUtY2FwdGlvbntmb250LXNpemU6Ljg3NWVtO2NvbG9yOiM2Yzc1N2R9LmNvbnRhaW5lciwuY29udGFpbmVyLWZsdWlkLC5jb250YWluZXItbGcsLmNvbnRhaW5lci1tZCwuY29udGFpbmVyLXNtLC5jb250YWluZXIteGwsLmNvbnRhaW5lci14eGx7d2lkdGg6MTAwJTtwYWRkaW5nLXJpZ2h0OnZhcigtLWJzLWd1dHRlci14LC43NXJlbSk7cGFkZGluZy1sZWZ0OnZhcigtLWJzLWd1dHRlci14LC43NXJlbSk7bWFyZ2luLXJpZ2h0OmF1dG87bWFyZ2luLWxlZnQ6YXV0b31AbWVkaWEgKG1pbi13aWR0aDo1NzZweCl7LmNvbnRhaW5lciwuY29udGFpbmVyLXNte21heC13aWR0aDo1NDBweH19QG1lZGlhIChtaW4td2lkdGg6NzY4cHgpey5jb250YWluZXIsLmNvbnRhaW5lci1tZCwuY29udGFpbmVyLXNte21heC13aWR0aDo3MjBweH19QG1lZGlhIChtaW4td2lkdGg6OTkycHgpey5jb250YWluZXIsLmNvbnRhaW5lci1sZywuY29udGFpbmVyLW1kLC5jb250YWluZXItc217bWF4LXdpZHRoOjk2MHB4fX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5jb250YWluZXIsLmNvbnRhaW5lci1sZywuY29udGFpbmVyLW1kLC5jb250YWluZXItc20sLmNvbnRhaW5lci14bHttYXgtd2lkdGg6MTE0MHB4fX1AbWVkaWEgKG1pbi13aWR0aDoxNDAwcHgpey5jb250YWluZXIsLmNvbnRhaW5lci1sZywuY29udGFpbmVyLW1kLC5jb250YWluZXItc20sLmNvbnRhaW5lci14bCwuY29udGFpbmVyLXh4bHttYXgtd2lkdGg6MTMyMHB4fX0ucm93ey0tYnMtZ3V0dGVyLXg6MS41cmVtOy0tYnMtZ3V0dGVyLXk6MDtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7bWFyZ2luLXRvcDpjYWxjKHZhcigtLWJzLWd1dHRlci15KSAqIC0xKTttYXJnaW4tcmlnaHQ6Y2FsYyh2YXIoLS1icy1ndXR0ZXIteCkvIC0yKTttYXJnaW4tbGVmdDpjYWxjKHZhcigtLWJzLWd1dHRlci14KS8gLTIpfS5yb3c+KntmbGV4LXNocmluazowO3dpZHRoOjEwMCU7bWF4LXdpZHRoOjEwMCU7cGFkZGluZy1yaWdodDpjYWxjKHZhcigtLWJzLWd1dHRlci14KS8gMik7cGFkZGluZy1sZWZ0OmNhbGModmFyKC0tYnMtZ3V0dGVyLXgpLyAyKTttYXJnaW4tdG9wOnZhcigtLWJzLWd1dHRlci15KX0uY29se2ZsZXg6MSAwIDAlfS5yb3ctY29scy1hdXRvPip7ZmxleDowIDAgYXV0bzt3aWR0aDphdXRvfS5yb3ctY29scy0xPip7ZmxleDowIDAgYXV0bzt3aWR0aDoxMDAlfS5yb3ctY29scy0yPip7ZmxleDowIDAgYXV0bzt3aWR0aDo1MCV9LnJvdy1jb2xzLTM+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjMzLjMzMzMzMzMzMzMlfS5yb3ctY29scy00Pip7ZmxleDowIDAgYXV0bzt3aWR0aDoyNSV9LnJvdy1jb2xzLTU+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjIwJX0ucm93LWNvbHMtNj4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MTYuNjY2NjY2NjY2NyV9LmNvbC1hdXRve2ZsZXg6MCAwIGF1dG87d2lkdGg6YXV0b30uY29sLTF7ZmxleDowIDAgYXV0bzt3aWR0aDo4LjMzMzMzMzMzMzMlfS5jb2wtMntmbGV4OjAgMCBhdXRvO3dpZHRoOjE2LjY2NjY2NjY2NjclfS5jb2wtM3tmbGV4OjAgMCBhdXRvO3dpZHRoOjI1JX0uY29sLTR7ZmxleDowIDAgYXV0bzt3aWR0aDozMy4zMzMzMzMzMzMzJX0uY29sLTV7ZmxleDowIDAgYXV0bzt3aWR0aDo0MS42NjY2NjY2NjY3JX0uY29sLTZ7ZmxleDowIDAgYXV0bzt3aWR0aDo1MCV9LmNvbC03e2ZsZXg6MCAwIGF1dG87d2lkdGg6NTguMzMzMzMzMzMzMyV9LmNvbC04e2ZsZXg6MCAwIGF1dG87d2lkdGg6NjYuNjY2NjY2NjY2NyV9LmNvbC05e2ZsZXg6MCAwIGF1dG87d2lkdGg6NzUlfS5jb2wtMTB7ZmxleDowIDAgYXV0bzt3aWR0aDo4My4zMzMzMzMzMzMzJX0uY29sLTExe2ZsZXg6MCAwIGF1dG87d2lkdGg6OTEuNjY2NjY2NjY2NyV9LmNvbC0xMntmbGV4OjAgMCBhdXRvO3dpZHRoOjEwMCV9Lm9mZnNldC0xe21hcmdpbi1sZWZ0OjguMzMzMzMzMzMzMyV9Lm9mZnNldC0ye21hcmdpbi1sZWZ0OjE2LjY2NjY2NjY2NjclfS5vZmZzZXQtM3ttYXJnaW4tbGVmdDoyNSV9Lm9mZnNldC00e21hcmdpbi1sZWZ0OjMzLjMzMzMzMzMzMzMlfS5vZmZzZXQtNXttYXJnaW4tbGVmdDo0MS42NjY2NjY2NjY3JX0ub2Zmc2V0LTZ7bWFyZ2luLWxlZnQ6NTAlfS5vZmZzZXQtN3ttYXJnaW4tbGVmdDo1OC4zMzMzMzMzMzMzJX0ub2Zmc2V0LTh7bWFyZ2luLWxlZnQ6NjYuNjY2NjY2NjY2NyV9Lm9mZnNldC05e21hcmdpbi1sZWZ0Ojc1JX0ub2Zmc2V0LTEwe21hcmdpbi1sZWZ0OjgzLjMzMzMzMzMzMzMlfS5vZmZzZXQtMTF7bWFyZ2luLWxlZnQ6OTEuNjY2NjY2NjY2NyV9LmctMCwuZ3gtMHstLWJzLWd1dHRlci14OjB9LmctMCwuZ3ktMHstLWJzLWd1dHRlci15OjB9LmctMSwuZ3gtMXstLWJzLWd1dHRlci14OjAuMjVyZW19LmctMSwuZ3ktMXstLWJzLWd1dHRlci15OjAuMjVyZW19LmctMiwuZ3gtMnstLWJzLWd1dHRlci14OjAuNXJlbX0uZy0yLC5neS0yey0tYnMtZ3V0dGVyLXk6MC41cmVtfS5nLTMsLmd4LTN7LS1icy1ndXR0ZXIteDoxcmVtfS5nLTMsLmd5LTN7LS1icy1ndXR0ZXIteToxcmVtfS5nLTQsLmd4LTR7LS1icy1ndXR0ZXIteDoxLjVyZW19LmctNCwuZ3ktNHstLWJzLWd1dHRlci15OjEuNXJlbX0uZy01LC5neC01ey0tYnMtZ3V0dGVyLXg6M3JlbX0uZy01LC5neS01ey0tYnMtZ3V0dGVyLXk6M3JlbX1AbWVkaWEgKG1pbi13aWR0aDo1NzZweCl7LmNvbC1zbXtmbGV4OjEgMCAwJX0ucm93LWNvbHMtc20tYXV0bz4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6YXV0b30ucm93LWNvbHMtc20tMT4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MTAwJX0ucm93LWNvbHMtc20tMj4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6NTAlfS5yb3ctY29scy1zbS0zPip7ZmxleDowIDAgYXV0bzt3aWR0aDozMy4zMzMzMzMzMzMzJX0ucm93LWNvbHMtc20tND4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MjUlfS5yb3ctY29scy1zbS01Pip7ZmxleDowIDAgYXV0bzt3aWR0aDoyMCV9LnJvdy1jb2xzLXNtLTY+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjE2LjY2NjY2NjY2NjclfS5jb2wtc20tYXV0b3tmbGV4OjAgMCBhdXRvO3dpZHRoOmF1dG99LmNvbC1zbS0xe2ZsZXg6MCAwIGF1dG87d2lkdGg6OC4zMzMzMzMzMzMzJX0uY29sLXNtLTJ7ZmxleDowIDAgYXV0bzt3aWR0aDoxNi42NjY2NjY2NjY3JX0uY29sLXNtLTN7ZmxleDowIDAgYXV0bzt3aWR0aDoyNSV9LmNvbC1zbS00e2ZsZXg6MCAwIGF1dG87d2lkdGg6MzMuMzMzMzMzMzMzMyV9LmNvbC1zbS01e2ZsZXg6MCAwIGF1dG87d2lkdGg6NDEuNjY2NjY2NjY2NyV9LmNvbC1zbS02e2ZsZXg6MCAwIGF1dG87d2lkdGg6NTAlfS5jb2wtc20tN3tmbGV4OjAgMCBhdXRvO3dpZHRoOjU4LjMzMzMzMzMzMzMlfS5jb2wtc20tOHtmbGV4OjAgMCBhdXRvO3dpZHRoOjY2LjY2NjY2NjY2NjclfS5jb2wtc20tOXtmbGV4OjAgMCBhdXRvO3dpZHRoOjc1JX0uY29sLXNtLTEwe2ZsZXg6MCAwIGF1dG87d2lkdGg6ODMuMzMzMzMzMzMzMyV9LmNvbC1zbS0xMXtmbGV4OjAgMCBhdXRvO3dpZHRoOjkxLjY2NjY2NjY2NjclfS5jb2wtc20tMTJ7ZmxleDowIDAgYXV0bzt3aWR0aDoxMDAlfS5vZmZzZXQtc20tMHttYXJnaW4tbGVmdDowfS5vZmZzZXQtc20tMXttYXJnaW4tbGVmdDo4LjMzMzMzMzMzMzMlfS5vZmZzZXQtc20tMnttYXJnaW4tbGVmdDoxNi42NjY2NjY2NjY3JX0ub2Zmc2V0LXNtLTN7bWFyZ2luLWxlZnQ6MjUlfS5vZmZzZXQtc20tNHttYXJnaW4tbGVmdDozMy4zMzMzMzMzMzMzJX0ub2Zmc2V0LXNtLTV7bWFyZ2luLWxlZnQ6NDEuNjY2NjY2NjY2NyV9Lm9mZnNldC1zbS02e21hcmdpbi1sZWZ0OjUwJX0ub2Zmc2V0LXNtLTd7bWFyZ2luLWxlZnQ6NTguMzMzMzMzMzMzMyV9Lm9mZnNldC1zbS04e21hcmdpbi1sZWZ0OjY2LjY2NjY2NjY2NjclfS5vZmZzZXQtc20tOXttYXJnaW4tbGVmdDo3NSV9Lm9mZnNldC1zbS0xMHttYXJnaW4tbGVmdDo4My4zMzMzMzMzMzMzJX0ub2Zmc2V0LXNtLTExe21hcmdpbi1sZWZ0OjkxLjY2NjY2NjY2NjclfS5nLXNtLTAsLmd4LXNtLTB7LS1icy1ndXR0ZXIteDowfS5nLXNtLTAsLmd5LXNtLTB7LS1icy1ndXR0ZXIteTowfS5nLXNtLTEsLmd4LXNtLTF7LS1icy1ndXR0ZXIteDowLjI1cmVtfS5nLXNtLTEsLmd5LXNtLTF7LS1icy1ndXR0ZXIteTowLjI1cmVtfS5nLXNtLTIsLmd4LXNtLTJ7LS1icy1ndXR0ZXIteDowLjVyZW19Lmctc20tMiwuZ3ktc20tMnstLWJzLWd1dHRlci15OjAuNXJlbX0uZy1zbS0zLC5neC1zbS0zey0tYnMtZ3V0dGVyLXg6MXJlbX0uZy1zbS0zLC5neS1zbS0zey0tYnMtZ3V0dGVyLXk6MXJlbX0uZy1zbS00LC5neC1zbS00ey0tYnMtZ3V0dGVyLXg6MS41cmVtfS5nLXNtLTQsLmd5LXNtLTR7LS1icy1ndXR0ZXIteToxLjVyZW19Lmctc20tNSwuZ3gtc20tNXstLWJzLWd1dHRlci14OjNyZW19Lmctc20tNSwuZ3ktc20tNXstLWJzLWd1dHRlci15OjNyZW19fUBtZWRpYSAobWluLXdpZHRoOjc2OHB4KXsuY29sLW1ke2ZsZXg6MSAwIDAlfS5yb3ctY29scy1tZC1hdXRvPip7ZmxleDowIDAgYXV0bzt3aWR0aDphdXRvfS5yb3ctY29scy1tZC0xPip7ZmxleDowIDAgYXV0bzt3aWR0aDoxMDAlfS5yb3ctY29scy1tZC0yPip7ZmxleDowIDAgYXV0bzt3aWR0aDo1MCV9LnJvdy1jb2xzLW1kLTM+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjMzLjMzMzMzMzMzMzMlfS5yb3ctY29scy1tZC00Pip7ZmxleDowIDAgYXV0bzt3aWR0aDoyNSV9LnJvdy1jb2xzLW1kLTU+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjIwJX0ucm93LWNvbHMtbWQtNj4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MTYuNjY2NjY2NjY2NyV9LmNvbC1tZC1hdXRve2ZsZXg6MCAwIGF1dG87d2lkdGg6YXV0b30uY29sLW1kLTF7ZmxleDowIDAgYXV0bzt3aWR0aDo4LjMzMzMzMzMzMzMlfS5jb2wtbWQtMntmbGV4OjAgMCBhdXRvO3dpZHRoOjE2LjY2NjY2NjY2NjclfS5jb2wtbWQtM3tmbGV4OjAgMCBhdXRvO3dpZHRoOjI1JX0uY29sLW1kLTR7ZmxleDowIDAgYXV0bzt3aWR0aDozMy4zMzMzMzMzMzMzJX0uY29sLW1kLTV7ZmxleDowIDAgYXV0bzt3aWR0aDo0MS42NjY2NjY2NjY3JX0uY29sLW1kLTZ7ZmxleDowIDAgYXV0bzt3aWR0aDo1MCV9LmNvbC1tZC03e2ZsZXg6MCAwIGF1dG87d2lkdGg6NTguMzMzMzMzMzMzMyV9LmNvbC1tZC04e2ZsZXg6MCAwIGF1dG87d2lkdGg6NjYuNjY2NjY2NjY2NyV9LmNvbC1tZC05e2ZsZXg6MCAwIGF1dG87d2lkdGg6NzUlfS5jb2wtbWQtMTB7ZmxleDowIDAgYXV0bzt3aWR0aDo4My4zMzMzMzMzMzMzJX0uY29sLW1kLTExe2ZsZXg6MCAwIGF1dG87d2lkdGg6OTEuNjY2NjY2NjY2NyV9LmNvbC1tZC0xMntmbGV4OjAgMCBhdXRvO3dpZHRoOjEwMCV9Lm9mZnNldC1tZC0we21hcmdpbi1sZWZ0OjB9Lm9mZnNldC1tZC0xe21hcmdpbi1sZWZ0OjguMzMzMzMzMzMzMyV9Lm9mZnNldC1tZC0ye21hcmdpbi1sZWZ0OjE2LjY2NjY2NjY2NjclfS5vZmZzZXQtbWQtM3ttYXJnaW4tbGVmdDoyNSV9Lm9mZnNldC1tZC00e21hcmdpbi1sZWZ0OjMzLjMzMzMzMzMzMzMlfS5vZmZzZXQtbWQtNXttYXJnaW4tbGVmdDo0MS42NjY2NjY2NjY3JX0ub2Zmc2V0LW1kLTZ7bWFyZ2luLWxlZnQ6NTAlfS5vZmZzZXQtbWQtN3ttYXJnaW4tbGVmdDo1OC4zMzMzMzMzMzMzJX0ub2Zmc2V0LW1kLTh7bWFyZ2luLWxlZnQ6NjYuNjY2NjY2NjY2NyV9Lm9mZnNldC1tZC05e21hcmdpbi1sZWZ0Ojc1JX0ub2Zmc2V0LW1kLTEwe21hcmdpbi1sZWZ0OjgzLjMzMzMzMzMzMzMlfS5vZmZzZXQtbWQtMTF7bWFyZ2luLWxlZnQ6OTEuNjY2NjY2NjY2NyV9LmctbWQtMCwuZ3gtbWQtMHstLWJzLWd1dHRlci14OjB9LmctbWQtMCwuZ3ktbWQtMHstLWJzLWd1dHRlci15OjB9LmctbWQtMSwuZ3gtbWQtMXstLWJzLWd1dHRlci14OjAuMjVyZW19LmctbWQtMSwuZ3ktbWQtMXstLWJzLWd1dHRlci15OjAuMjVyZW19LmctbWQtMiwuZ3gtbWQtMnstLWJzLWd1dHRlci14OjAuNXJlbX0uZy1tZC0yLC5neS1tZC0yey0tYnMtZ3V0dGVyLXk6MC41cmVtfS5nLW1kLTMsLmd4LW1kLTN7LS1icy1ndXR0ZXIteDoxcmVtfS5nLW1kLTMsLmd5LW1kLTN7LS1icy1ndXR0ZXIteToxcmVtfS5nLW1kLTQsLmd4LW1kLTR7LS1icy1ndXR0ZXIteDoxLjVyZW19LmctbWQtNCwuZ3ktbWQtNHstLWJzLWd1dHRlci15OjEuNXJlbX0uZy1tZC01LC5neC1tZC01ey0tYnMtZ3V0dGVyLXg6M3JlbX0uZy1tZC01LC5neS1tZC01ey0tYnMtZ3V0dGVyLXk6M3JlbX19QG1lZGlhIChtaW4td2lkdGg6OTkycHgpey5jb2wtbGd7ZmxleDoxIDAgMCV9LnJvdy1jb2xzLWxnLWF1dG8+KntmbGV4OjAgMCBhdXRvO3dpZHRoOmF1dG99LnJvdy1jb2xzLWxnLTE+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjEwMCV9LnJvdy1jb2xzLWxnLTI+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjUwJX0ucm93LWNvbHMtbGctMz4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MzMuMzMzMzMzMzMzMyV9LnJvdy1jb2xzLWxnLTQ+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjI1JX0ucm93LWNvbHMtbGctNT4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MjAlfS5yb3ctY29scy1sZy02Pip7ZmxleDowIDAgYXV0bzt3aWR0aDoxNi42NjY2NjY2NjY3JX0uY29sLWxnLWF1dG97ZmxleDowIDAgYXV0bzt3aWR0aDphdXRvfS5jb2wtbGctMXtmbGV4OjAgMCBhdXRvO3dpZHRoOjguMzMzMzMzMzMzMyV9LmNvbC1sZy0ye2ZsZXg6MCAwIGF1dG87d2lkdGg6MTYuNjY2NjY2NjY2NyV9LmNvbC1sZy0ze2ZsZXg6MCAwIGF1dG87d2lkdGg6MjUlfS5jb2wtbGctNHtmbGV4OjAgMCBhdXRvO3dpZHRoOjMzLjMzMzMzMzMzMzMlfS5jb2wtbGctNXtmbGV4OjAgMCBhdXRvO3dpZHRoOjQxLjY2NjY2NjY2NjclfS5jb2wtbGctNntmbGV4OjAgMCBhdXRvO3dpZHRoOjUwJX0uY29sLWxnLTd7ZmxleDowIDAgYXV0bzt3aWR0aDo1OC4zMzMzMzMzMzMzJX0uY29sLWxnLTh7ZmxleDowIDAgYXV0bzt3aWR0aDo2Ni42NjY2NjY2NjY3JX0uY29sLWxnLTl7ZmxleDowIDAgYXV0bzt3aWR0aDo3NSV9LmNvbC1sZy0xMHtmbGV4OjAgMCBhdXRvO3dpZHRoOjgzLjMzMzMzMzMzMzMlfS5jb2wtbGctMTF7ZmxleDowIDAgYXV0bzt3aWR0aDo5MS42NjY2NjY2NjY3JX0uY29sLWxnLTEye2ZsZXg6MCAwIGF1dG87d2lkdGg6MTAwJX0ub2Zmc2V0LWxnLTB7bWFyZ2luLWxlZnQ6MH0ub2Zmc2V0LWxnLTF7bWFyZ2luLWxlZnQ6OC4zMzMzMzMzMzMzJX0ub2Zmc2V0LWxnLTJ7bWFyZ2luLWxlZnQ6MTYuNjY2NjY2NjY2NyV9Lm9mZnNldC1sZy0ze21hcmdpbi1sZWZ0OjI1JX0ub2Zmc2V0LWxnLTR7bWFyZ2luLWxlZnQ6MzMuMzMzMzMzMzMzMyV9Lm9mZnNldC1sZy01e21hcmdpbi1sZWZ0OjQxLjY2NjY2NjY2NjclfS5vZmZzZXQtbGctNnttYXJnaW4tbGVmdDo1MCV9Lm9mZnNldC1sZy03e21hcmdpbi1sZWZ0OjU4LjMzMzMzMzMzMzMlfS5vZmZzZXQtbGctOHttYXJnaW4tbGVmdDo2Ni42NjY2NjY2NjY3JX0ub2Zmc2V0LWxnLTl7bWFyZ2luLWxlZnQ6NzUlfS5vZmZzZXQtbGctMTB7bWFyZ2luLWxlZnQ6ODMuMzMzMzMzMzMzMyV9Lm9mZnNldC1sZy0xMXttYXJnaW4tbGVmdDo5MS42NjY2NjY2NjY3JX0uZy1sZy0wLC5neC1sZy0wey0tYnMtZ3V0dGVyLXg6MH0uZy1sZy0wLC5neS1sZy0wey0tYnMtZ3V0dGVyLXk6MH0uZy1sZy0xLC5neC1sZy0xey0tYnMtZ3V0dGVyLXg6MC4yNXJlbX0uZy1sZy0xLC5neS1sZy0xey0tYnMtZ3V0dGVyLXk6MC4yNXJlbX0uZy1sZy0yLC5neC1sZy0yey0tYnMtZ3V0dGVyLXg6MC41cmVtfS5nLWxnLTIsLmd5LWxnLTJ7LS1icy1ndXR0ZXIteTowLjVyZW19LmctbGctMywuZ3gtbGctM3stLWJzLWd1dHRlci14OjFyZW19LmctbGctMywuZ3ktbGctM3stLWJzLWd1dHRlci15OjFyZW19LmctbGctNCwuZ3gtbGctNHstLWJzLWd1dHRlci14OjEuNXJlbX0uZy1sZy00LC5neS1sZy00ey0tYnMtZ3V0dGVyLXk6MS41cmVtfS5nLWxnLTUsLmd4LWxnLTV7LS1icy1ndXR0ZXIteDozcmVtfS5nLWxnLTUsLmd5LWxnLTV7LS1icy1ndXR0ZXIteTozcmVtfX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5jb2wteGx7ZmxleDoxIDAgMCV9LnJvdy1jb2xzLXhsLWF1dG8+KntmbGV4OjAgMCBhdXRvO3dpZHRoOmF1dG99LnJvdy1jb2xzLXhsLTE+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjEwMCV9LnJvdy1jb2xzLXhsLTI+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjUwJX0ucm93LWNvbHMteGwtMz4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MzMuMzMzMzMzMzMzMyV9LnJvdy1jb2xzLXhsLTQ+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjI1JX0ucm93LWNvbHMteGwtNT4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6MjAlfS5yb3ctY29scy14bC02Pip7ZmxleDowIDAgYXV0bzt3aWR0aDoxNi42NjY2NjY2NjY3JX0uY29sLXhsLWF1dG97ZmxleDowIDAgYXV0bzt3aWR0aDphdXRvfS5jb2wteGwtMXtmbGV4OjAgMCBhdXRvO3dpZHRoOjguMzMzMzMzMzMzMyV9LmNvbC14bC0ye2ZsZXg6MCAwIGF1dG87d2lkdGg6MTYuNjY2NjY2NjY2NyV9LmNvbC14bC0ze2ZsZXg6MCAwIGF1dG87d2lkdGg6MjUlfS5jb2wteGwtNHtmbGV4OjAgMCBhdXRvO3dpZHRoOjMzLjMzMzMzMzMzMzMlfS5jb2wteGwtNXtmbGV4OjAgMCBhdXRvO3dpZHRoOjQxLjY2NjY2NjY2NjclfS5jb2wteGwtNntmbGV4OjAgMCBhdXRvO3dpZHRoOjUwJX0uY29sLXhsLTd7ZmxleDowIDAgYXV0bzt3aWR0aDo1OC4zMzMzMzMzMzMzJX0uY29sLXhsLTh7ZmxleDowIDAgYXV0bzt3aWR0aDo2Ni42NjY2NjY2NjY3JX0uY29sLXhsLTl7ZmxleDowIDAgYXV0bzt3aWR0aDo3NSV9LmNvbC14bC0xMHtmbGV4OjAgMCBhdXRvO3dpZHRoOjgzLjMzMzMzMzMzMzMlfS5jb2wteGwtMTF7ZmxleDowIDAgYXV0bzt3aWR0aDo5MS42NjY2NjY2NjY3JX0uY29sLXhsLTEye2ZsZXg6MCAwIGF1dG87d2lkdGg6MTAwJX0ub2Zmc2V0LXhsLTB7bWFyZ2luLWxlZnQ6MH0ub2Zmc2V0LXhsLTF7bWFyZ2luLWxlZnQ6OC4zMzMzMzMzMzMzJX0ub2Zmc2V0LXhsLTJ7bWFyZ2luLWxlZnQ6MTYuNjY2NjY2NjY2NyV9Lm9mZnNldC14bC0ze21hcmdpbi1sZWZ0OjI1JX0ub2Zmc2V0LXhsLTR7bWFyZ2luLWxlZnQ6MzMuMzMzMzMzMzMzMyV9Lm9mZnNldC14bC01e21hcmdpbi1sZWZ0OjQxLjY2NjY2NjY2NjclfS5vZmZzZXQteGwtNnttYXJnaW4tbGVmdDo1MCV9Lm9mZnNldC14bC03e21hcmdpbi1sZWZ0OjU4LjMzMzMzMzMzMzMlfS5vZmZzZXQteGwtOHttYXJnaW4tbGVmdDo2Ni42NjY2NjY2NjY3JX0ub2Zmc2V0LXhsLTl7bWFyZ2luLWxlZnQ6NzUlfS5vZmZzZXQteGwtMTB7bWFyZ2luLWxlZnQ6ODMuMzMzMzMzMzMzMyV9Lm9mZnNldC14bC0xMXttYXJnaW4tbGVmdDo5MS42NjY2NjY2NjY3JX0uZy14bC0wLC5neC14bC0wey0tYnMtZ3V0dGVyLXg6MH0uZy14bC0wLC5neS14bC0wey0tYnMtZ3V0dGVyLXk6MH0uZy14bC0xLC5neC14bC0xey0tYnMtZ3V0dGVyLXg6MC4yNXJlbX0uZy14bC0xLC5neS14bC0xey0tYnMtZ3V0dGVyLXk6MC4yNXJlbX0uZy14bC0yLC5neC14bC0yey0tYnMtZ3V0dGVyLXg6MC41cmVtfS5nLXhsLTIsLmd5LXhsLTJ7LS1icy1ndXR0ZXIteTowLjVyZW19LmcteGwtMywuZ3gteGwtM3stLWJzLWd1dHRlci14OjFyZW19LmcteGwtMywuZ3kteGwtM3stLWJzLWd1dHRlci15OjFyZW19LmcteGwtNCwuZ3gteGwtNHstLWJzLWd1dHRlci14OjEuNXJlbX0uZy14bC00LC5neS14bC00ey0tYnMtZ3V0dGVyLXk6MS41cmVtfS5nLXhsLTUsLmd4LXhsLTV7LS1icy1ndXR0ZXIteDozcmVtfS5nLXhsLTUsLmd5LXhsLTV7LS1icy1ndXR0ZXIteTozcmVtfX1AbWVkaWEgKG1pbi13aWR0aDoxNDAwcHgpey5jb2wteHhse2ZsZXg6MSAwIDAlfS5yb3ctY29scy14eGwtYXV0bz4qe2ZsZXg6MCAwIGF1dG87d2lkdGg6YXV0b30ucm93LWNvbHMteHhsLTE+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjEwMCV9LnJvdy1jb2xzLXh4bC0yPip7ZmxleDowIDAgYXV0bzt3aWR0aDo1MCV9LnJvdy1jb2xzLXh4bC0zPip7ZmxleDowIDAgYXV0bzt3aWR0aDozMy4zMzMzMzMzMzMzJX0ucm93LWNvbHMteHhsLTQ+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjI1JX0ucm93LWNvbHMteHhsLTU+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjIwJX0ucm93LWNvbHMteHhsLTY+KntmbGV4OjAgMCBhdXRvO3dpZHRoOjE2LjY2NjY2NjY2NjclfS5jb2wteHhsLWF1dG97ZmxleDowIDAgYXV0bzt3aWR0aDphdXRvfS5jb2wteHhsLTF7ZmxleDowIDAgYXV0bzt3aWR0aDo4LjMzMzMzMzMzMzMlfS5jb2wteHhsLTJ7ZmxleDowIDAgYXV0bzt3aWR0aDoxNi42NjY2NjY2NjY3JX0uY29sLXh4bC0ze2ZsZXg6MCAwIGF1dG87d2lkdGg6MjUlfS5jb2wteHhsLTR7ZmxleDowIDAgYXV0bzt3aWR0aDozMy4zMzMzMzMzMzMzJX0uY29sLXh4bC01e2ZsZXg6MCAwIGF1dG87d2lkdGg6NDEuNjY2NjY2NjY2NyV9LmNvbC14eGwtNntmbGV4OjAgMCBhdXRvO3dpZHRoOjUwJX0uY29sLXh4bC03e2ZsZXg6MCAwIGF1dG87d2lkdGg6NTguMzMzMzMzMzMzMyV9LmNvbC14eGwtOHtmbGV4OjAgMCBhdXRvO3dpZHRoOjY2LjY2NjY2NjY2NjclfS5jb2wteHhsLTl7ZmxleDowIDAgYXV0bzt3aWR0aDo3NSV9LmNvbC14eGwtMTB7ZmxleDowIDAgYXV0bzt3aWR0aDo4My4zMzMzMzMzMzMzJX0uY29sLXh4bC0xMXtmbGV4OjAgMCBhdXRvO3dpZHRoOjkxLjY2NjY2NjY2NjclfS5jb2wteHhsLTEye2ZsZXg6MCAwIGF1dG87d2lkdGg6MTAwJX0ub2Zmc2V0LXh4bC0we21hcmdpbi1sZWZ0OjB9Lm9mZnNldC14eGwtMXttYXJnaW4tbGVmdDo4LjMzMzMzMzMzMzMlfS5vZmZzZXQteHhsLTJ7bWFyZ2luLWxlZnQ6MTYuNjY2NjY2NjY2NyV9Lm9mZnNldC14eGwtM3ttYXJnaW4tbGVmdDoyNSV9Lm9mZnNldC14eGwtNHttYXJnaW4tbGVmdDozMy4zMzMzMzMzMzMzJX0ub2Zmc2V0LXh4bC01e21hcmdpbi1sZWZ0OjQxLjY2NjY2NjY2NjclfS5vZmZzZXQteHhsLTZ7bWFyZ2luLWxlZnQ6NTAlfS5vZmZzZXQteHhsLTd7bWFyZ2luLWxlZnQ6NTguMzMzMzMzMzMzMyV9Lm9mZnNldC14eGwtOHttYXJnaW4tbGVmdDo2Ni42NjY2NjY2NjY3JX0ub2Zmc2V0LXh4bC05e21hcmdpbi1sZWZ0Ojc1JX0ub2Zmc2V0LXh4bC0xMHttYXJnaW4tbGVmdDo4My4zMzMzMzMzMzMzJX0ub2Zmc2V0LXh4bC0xMXttYXJnaW4tbGVmdDo5MS42NjY2NjY2NjY3JX0uZy14eGwtMCwuZ3gteHhsLTB7LS1icy1ndXR0ZXIteDowfS5nLXh4bC0wLC5neS14eGwtMHstLWJzLWd1dHRlci15OjB9LmcteHhsLTEsLmd4LXh4bC0xey0tYnMtZ3V0dGVyLXg6MC4yNXJlbX0uZy14eGwtMSwuZ3kteHhsLTF7LS1icy1ndXR0ZXIteTowLjI1cmVtfS5nLXh4bC0yLC5neC14eGwtMnstLWJzLWd1dHRlci14OjAuNXJlbX0uZy14eGwtMiwuZ3kteHhsLTJ7LS1icy1ndXR0ZXIteTowLjVyZW19LmcteHhsLTMsLmd4LXh4bC0zey0tYnMtZ3V0dGVyLXg6MXJlbX0uZy14eGwtMywuZ3kteHhsLTN7LS1icy1ndXR0ZXIteToxcmVtfS5nLXh4bC00LC5neC14eGwtNHstLWJzLWd1dHRlci14OjEuNXJlbX0uZy14eGwtNCwuZ3kteHhsLTR7LS1icy1ndXR0ZXIteToxLjVyZW19LmcteHhsLTUsLmd4LXh4bC01ey0tYnMtZ3V0dGVyLXg6M3JlbX0uZy14eGwtNSwuZ3kteHhsLTV7LS1icy1ndXR0ZXIteTozcmVtfX0udGFibGV7LS1icy10YWJsZS1iZzp0cmFuc3BhcmVudDstLWJzLXRhYmxlLWFjY2VudC1iZzp0cmFuc3BhcmVudDstLWJzLXRhYmxlLXN0cmlwZWQtY29sb3I6IzIxMjUyOTstLWJzLXRhYmxlLXN0cmlwZWQtYmc6cmdiYSgwLCAwLCAwLCAwLjA1KTstLWJzLXRhYmxlLWFjdGl2ZS1jb2xvcjojMjEyNTI5Oy0tYnMtdGFibGUtYWN0aXZlLWJnOnJnYmEoMCwgMCwgMCwgMC4xKTstLWJzLXRhYmxlLWhvdmVyLWNvbG9yOiMyMTI1Mjk7LS1icy10YWJsZS1ob3Zlci1iZzpyZ2JhKDAsIDAsIDAsIDAuMDc1KTt3aWR0aDoxMDAlO21hcmdpbi1ib3R0b206MXJlbTtjb2xvcjojMjEyNTI5O3ZlcnRpY2FsLWFsaWduOnRvcDtib3JkZXItY29sb3I6I2RlZTJlNn0udGFibGU+Om5vdChjYXB0aW9uKT4qPip7cGFkZGluZzouNXJlbSAuNXJlbTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWJzLXRhYmxlLWJnKTtib3JkZXItYm90dG9tLXdpZHRoOjFweDtib3gtc2hhZG93Omluc2V0IDAgMCAwIDk5OTlweCB2YXIoLS1icy10YWJsZS1hY2NlbnQtYmcpfS50YWJsZT50Ym9keXt2ZXJ0aWNhbC1hbGlnbjppbmhlcml0fS50YWJsZT50aGVhZHt2ZXJ0aWNhbC1hbGlnbjpib3R0b219LnRhYmxlPjpub3QoOmxhc3QtY2hpbGQpPjpsYXN0LWNoaWxkPip7Ym9yZGVyLWJvdHRvbS1jb2xvcjpjdXJyZW50Q29sb3J9LmNhcHRpb24tdG9we2NhcHRpb24tc2lkZTp0b3B9LnRhYmxlLXNtPjpub3QoY2FwdGlvbik+Kj4qe3BhZGRpbmc6LjI1cmVtIC4yNXJlbX0udGFibGUtYm9yZGVyZWQ+Om5vdChjYXB0aW9uKT4qe2JvcmRlci13aWR0aDoxcHggMH0udGFibGUtYm9yZGVyZWQ+Om5vdChjYXB0aW9uKT4qPip7Ym9yZGVyLXdpZHRoOjAgMXB4fS50YWJsZS1ib3JkZXJsZXNzPjpub3QoY2FwdGlvbik+Kj4qe2JvcmRlci1ib3R0b20td2lkdGg6MH0udGFibGUtc3RyaXBlZD50Ym9keT50cjpudGgtb2YtdHlwZShvZGQpey0tYnMtdGFibGUtYWNjZW50LWJnOnZhcigtLWJzLXRhYmxlLXN0cmlwZWQtYmcpO2NvbG9yOnZhcigtLWJzLXRhYmxlLXN0cmlwZWQtY29sb3IpfS50YWJsZS1hY3RpdmV7LS1icy10YWJsZS1hY2NlbnQtYmc6dmFyKC0tYnMtdGFibGUtYWN0aXZlLWJnKTtjb2xvcjp2YXIoLS1icy10YWJsZS1hY3RpdmUtY29sb3IpfS50YWJsZS1ob3Zlcj50Ym9keT50cjpob3ZlcnstLWJzLXRhYmxlLWFjY2VudC1iZzp2YXIoLS1icy10YWJsZS1ob3Zlci1iZyk7Y29sb3I6dmFyKC0tYnMtdGFibGUtaG92ZXItY29sb3IpfS50YWJsZS1wcmltYXJ5ey0tYnMtdGFibGUtYmc6I2NmZTJmZjstLWJzLXRhYmxlLXN0cmlwZWQtYmc6I2M1ZDdmMjstLWJzLXRhYmxlLXN0cmlwZWQtY29sb3I6IzAwMDstLWJzLXRhYmxlLWFjdGl2ZS1iZzojYmFjYmU2Oy0tYnMtdGFibGUtYWN0aXZlLWNvbG9yOiMwMDA7LS1icy10YWJsZS1ob3Zlci1iZzojYmZkMWVjOy0tYnMtdGFibGUtaG92ZXItY29sb3I6IzAwMDtjb2xvcjojMDAwO2JvcmRlci1jb2xvcjojYmFjYmU2fS50YWJsZS1zZWNvbmRhcnl7LS1icy10YWJsZS1iZzojZTJlM2U1Oy0tYnMtdGFibGUtc3RyaXBlZC1iZzojZDdkOGRhOy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojMDAwOy0tYnMtdGFibGUtYWN0aXZlLWJnOiNjYmNjY2U7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6IzAwMDstLWJzLXRhYmxlLWhvdmVyLWJnOiNkMWQyZDQ7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojMDAwO2NvbG9yOiMwMDA7Ym9yZGVyLWNvbG9yOiNjYmNjY2V9LnRhYmxlLXN1Y2Nlc3N7LS1icy10YWJsZS1iZzojZDFlN2RkOy0tYnMtdGFibGUtc3RyaXBlZC1iZzojYzdkYmQyOy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojMDAwOy0tYnMtdGFibGUtYWN0aXZlLWJnOiNiY2QwYzc7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6IzAwMDstLWJzLXRhYmxlLWhvdmVyLWJnOiNjMWQ2Y2M7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojMDAwO2NvbG9yOiMwMDA7Ym9yZGVyLWNvbG9yOiNiY2QwYzd9LnRhYmxlLWluZm97LS1icy10YWJsZS1iZzojY2ZmNGZjOy0tYnMtdGFibGUtc3RyaXBlZC1iZzojYzVlOGVmOy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojMDAwOy0tYnMtdGFibGUtYWN0aXZlLWJnOiNiYWRjZTM7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6IzAwMDstLWJzLXRhYmxlLWhvdmVyLWJnOiNiZmUyZTk7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojMDAwO2NvbG9yOiMwMDA7Ym9yZGVyLWNvbG9yOiNiYWRjZTN9LnRhYmxlLXdhcm5pbmd7LS1icy10YWJsZS1iZzojZmZmM2NkOy0tYnMtdGFibGUtc3RyaXBlZC1iZzojZjJlN2MzOy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojMDAwOy0tYnMtdGFibGUtYWN0aXZlLWJnOiNlNmRiYjk7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6IzAwMDstLWJzLXRhYmxlLWhvdmVyLWJnOiNlY2UxYmU7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojMDAwO2NvbG9yOiMwMDA7Ym9yZGVyLWNvbG9yOiNlNmRiYjl9LnRhYmxlLWRhbmdlcnstLWJzLXRhYmxlLWJnOiNmOGQ3ZGE7LS1icy10YWJsZS1zdHJpcGVkLWJnOiNlY2NjY2Y7LS1icy10YWJsZS1zdHJpcGVkLWNvbG9yOiMwMDA7LS1icy10YWJsZS1hY3RpdmUtYmc6I2RmYzJjNDstLWJzLXRhYmxlLWFjdGl2ZS1jb2xvcjojMDAwOy0tYnMtdGFibGUtaG92ZXItYmc6I2U1YzdjYTstLWJzLXRhYmxlLWhvdmVyLWNvbG9yOiMwMDA7Y29sb3I6IzAwMDtib3JkZXItY29sb3I6I2RmYzJjNH0udGFibGUtbGlnaHR7LS1icy10YWJsZS1iZzojZjhmOWZhOy0tYnMtdGFibGUtc3RyaXBlZC1iZzojZWNlZGVlOy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojMDAwOy0tYnMtdGFibGUtYWN0aXZlLWJnOiNkZmUwZTE7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6IzAwMDstLWJzLXRhYmxlLWhvdmVyLWJnOiNlNWU2ZTc7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojMDAwO2NvbG9yOiMwMDA7Ym9yZGVyLWNvbG9yOiNkZmUwZTF9LnRhYmxlLWRhcmt7LS1icy10YWJsZS1iZzojMjEyNTI5Oy0tYnMtdGFibGUtc3RyaXBlZC1iZzojMmMzMDM0Oy0tYnMtdGFibGUtc3RyaXBlZC1jb2xvcjojZmZmOy0tYnMtdGFibGUtYWN0aXZlLWJnOiMzNzNiM2U7LS1icy10YWJsZS1hY3RpdmUtY29sb3I6I2ZmZjstLWJzLXRhYmxlLWhvdmVyLWJnOiMzMjM1Mzk7LS1icy10YWJsZS1ob3Zlci1jb2xvcjojZmZmO2NvbG9yOiNmZmY7Ym9yZGVyLWNvbG9yOiMzNzNiM2V9LnRhYmxlLXJlc3BvbnNpdmV7b3ZlcmZsb3cteDphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofUBtZWRpYSAobWF4LXdpZHRoOjU3NS45OHB4KXsudGFibGUtcmVzcG9uc2l2ZS1zbXtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9fUBtZWRpYSAobWF4LXdpZHRoOjc2Ny45OHB4KXsudGFibGUtcmVzcG9uc2l2ZS1tZHtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9fUBtZWRpYSAobWF4LXdpZHRoOjk5MS45OHB4KXsudGFibGUtcmVzcG9uc2l2ZS1sZ3tvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9fUBtZWRpYSAobWF4LXdpZHRoOjExOTkuOThweCl7LnRhYmxlLXJlc3BvbnNpdmUteGx7b3ZlcmZsb3cteDphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofX1AbWVkaWEgKG1heC13aWR0aDoxMzk5Ljk4cHgpey50YWJsZS1yZXNwb25zaXZlLXh4bHtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9fS5mb3JtLWxhYmVse21hcmdpbi1ib3R0b206LjVyZW19LmNvbC1mb3JtLWxhYmVse3BhZGRpbmctdG9wOmNhbGMoLjM3NXJlbSArIDFweCk7cGFkZGluZy1ib3R0b206Y2FsYyguMzc1cmVtICsgMXB4KTttYXJnaW4tYm90dG9tOjA7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6MS41fS5jb2wtZm9ybS1sYWJlbC1sZ3twYWRkaW5nLXRvcDpjYWxjKC41cmVtICsgMXB4KTtwYWRkaW5nLWJvdHRvbTpjYWxjKC41cmVtICsgMXB4KTtmb250LXNpemU6MS4yNXJlbX0uY29sLWZvcm0tbGFiZWwtc217cGFkZGluZy10b3A6Y2FsYyguMjVyZW0gKyAxcHgpO3BhZGRpbmctYm90dG9tOmNhbGMoLjI1cmVtICsgMXB4KTtmb250LXNpemU6Ljg3NXJlbX0uZm9ybS10ZXh0e21hcmdpbi10b3A6LjI1cmVtO2ZvbnQtc2l6ZTouODc1ZW07Y29sb3I6IzZjNzU3ZH0uZm9ybS1jb250cm9se2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVyZW0gLjc1cmVtO2ZvbnQtc2l6ZToxcmVtO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDoxLjU7Y29sb3I6IzIxMjUyOTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7YmFja2dyb3VuZC1jbGlwOnBhZGRpbmctYm94O2JvcmRlcjoxcHggc29saWQgI2NlZDRkYTstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmU7Ym9yZGVyLXJhZGl1czouMjVyZW07dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXR9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmZvcm0tY29udHJvbHt0cmFuc2l0aW9uOm5vbmV9fS5mb3JtLWNvbnRyb2xbdHlwZT1maWxlXXtvdmVyZmxvdzpoaWRkZW59LmZvcm0tY29udHJvbFt0eXBlPWZpbGVdOm5vdCg6ZGlzYWJsZWQpOm5vdChbcmVhZG9ubHldKXtjdXJzb3I6cG9pbnRlcn0uZm9ybS1jb250cm9sOmZvY3Vze2NvbG9yOiMyMTI1Mjk7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci1jb2xvcjojODZiN2ZlO291dGxpbmU6MDtib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEzLDExMCwyNTMsLjI1KX0uZm9ybS1jb250cm9sOjotd2Via2l0LWRhdGUtYW5kLXRpbWUtdmFsdWV7aGVpZ2h0OjEuNWVtfS5mb3JtLWNvbnRyb2w6Oi1tb3otcGxhY2Vob2xkZXJ7Y29sb3I6IzZjNzU3ZDtvcGFjaXR5OjF9LmZvcm0tY29udHJvbDo6cGxhY2Vob2xkZXJ7Y29sb3I6IzZjNzU3ZDtvcGFjaXR5OjF9LmZvcm0tY29udHJvbDpkaXNhYmxlZCwuZm9ybS1jb250cm9sW3JlYWRvbmx5XXtiYWNrZ3JvdW5kLWNvbG9yOiNlOWVjZWY7b3BhY2l0eToxfS5mb3JtLWNvbnRyb2w6OmZpbGUtc2VsZWN0b3ItYnV0dG9ue3BhZGRpbmc6LjM3NXJlbSAuNzVyZW07bWFyZ2luOi0uMzc1cmVtIC0uNzVyZW07LXdlYmtpdC1tYXJnaW4tZW5kOi43NXJlbTttYXJnaW4taW5saW5lLWVuZDouNzVyZW07Y29sb3I6IzIxMjUyOTtiYWNrZ3JvdW5kLWNvbG9yOiNlOWVjZWY7cG9pbnRlci1ldmVudHM6bm9uZTtib3JkZXItY29sb3I6aW5oZXJpdDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjA7Ym9yZGVyLWlubGluZS1lbmQtd2lkdGg6MXB4O2JvcmRlci1yYWRpdXM6MDt0cmFuc2l0aW9uOmNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYmFja2dyb3VuZC1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJvcmRlci1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJveC1zaGFkb3cgLjE1cyBlYXNlLWluLW91dH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuZm9ybS1jb250cm9sOjpmaWxlLXNlbGVjdG9yLWJ1dHRvbnt0cmFuc2l0aW9uOm5vbmV9fS5mb3JtLWNvbnRyb2w6aG92ZXI6bm90KDpkaXNhYmxlZCk6bm90KFtyZWFkb25seV0pOjpmaWxlLXNlbGVjdG9yLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiNkZGUwZTN9LmZvcm0tY29udHJvbDo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b257cGFkZGluZzouMzc1cmVtIC43NXJlbTttYXJnaW46LS4zNzVyZW0gLS43NXJlbTstd2Via2l0LW1hcmdpbi1lbmQ6Ljc1cmVtO21hcmdpbi1pbmxpbmUtZW5kOi43NXJlbTtjb2xvcjojMjEyNTI5O2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjtwb2ludGVyLWV2ZW50czpub25lO2JvcmRlci1jb2xvcjppbmhlcml0O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MDtib3JkZXItaW5saW5lLWVuZC13aWR0aDoxcHg7Ym9yZGVyLXJhZGl1czowOy13ZWJraXQtdHJhbnNpdGlvbjpjb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJhY2tncm91bmQtY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjpjb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJhY2tncm91bmQtY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXR9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmZvcm0tY29udHJvbDo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b257LXdlYmtpdC10cmFuc2l0aW9uOm5vbmU7dHJhbnNpdGlvbjpub25lfX0uZm9ybS1jb250cm9sOmhvdmVyOm5vdCg6ZGlzYWJsZWQpOm5vdChbcmVhZG9ubHldKTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b257YmFja2dyb3VuZC1jb2xvcjojZGRlMGUzfS5mb3JtLWNvbnRyb2wtcGxhaW50ZXh0e2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVyZW0gMDttYXJnaW4tYm90dG9tOjA7bGluZS1oZWlnaHQ6MS41O2NvbG9yOiMyMTI1Mjk7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXI6c29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXdpZHRoOjFweCAwfS5mb3JtLWNvbnRyb2wtcGxhaW50ZXh0LmZvcm0tY29udHJvbC1sZywuZm9ybS1jb250cm9sLXBsYWludGV4dC5mb3JtLWNvbnRyb2wtc217cGFkZGluZy1yaWdodDowO3BhZGRpbmctbGVmdDowfS5mb3JtLWNvbnRyb2wtc217bWluLWhlaWdodDpjYWxjKDEuNWVtICsgLjVyZW0gKyAycHgpO3BhZGRpbmc6LjI1cmVtIC41cmVtO2ZvbnQtc2l6ZTouODc1cmVtO2JvcmRlci1yYWRpdXM6LjJyZW19LmZvcm0tY29udHJvbC1zbTo6ZmlsZS1zZWxlY3Rvci1idXR0b257cGFkZGluZzouMjVyZW0gLjVyZW07bWFyZ2luOi0uMjVyZW0gLS41cmVtOy13ZWJraXQtbWFyZ2luLWVuZDouNXJlbTttYXJnaW4taW5saW5lLWVuZDouNXJlbX0uZm9ybS1jb250cm9sLXNtOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbntwYWRkaW5nOi4yNXJlbSAuNXJlbTttYXJnaW46LS4yNXJlbSAtLjVyZW07LXdlYmtpdC1tYXJnaW4tZW5kOi41cmVtO21hcmdpbi1pbmxpbmUtZW5kOi41cmVtfS5mb3JtLWNvbnRyb2wtbGd7bWluLWhlaWdodDpjYWxjKDEuNWVtICsgMXJlbSArIDJweCk7cGFkZGluZzouNXJlbSAxcmVtO2ZvbnQtc2l6ZToxLjI1cmVtO2JvcmRlci1yYWRpdXM6LjNyZW19LmZvcm0tY29udHJvbC1sZzo6ZmlsZS1zZWxlY3Rvci1idXR0b257cGFkZGluZzouNXJlbSAxcmVtO21hcmdpbjotLjVyZW0gLTFyZW07LXdlYmtpdC1tYXJnaW4tZW5kOjFyZW07bWFyZ2luLWlubGluZS1lbmQ6MXJlbX0uZm9ybS1jb250cm9sLWxnOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbntwYWRkaW5nOi41cmVtIDFyZW07bWFyZ2luOi0uNXJlbSAtMXJlbTstd2Via2l0LW1hcmdpbi1lbmQ6MXJlbTttYXJnaW4taW5saW5lLWVuZDoxcmVtfXRleHRhcmVhLmZvcm0tY29udHJvbHttaW4taGVpZ2h0OmNhbGMoMS41ZW0gKyAuNzVyZW0gKyAycHgpfXRleHRhcmVhLmZvcm0tY29udHJvbC1zbXttaW4taGVpZ2h0OmNhbGMoMS41ZW0gKyAuNXJlbSArIDJweCl9dGV4dGFyZWEuZm9ybS1jb250cm9sLWxne21pbi1oZWlnaHQ6Y2FsYygxLjVlbSArIDFyZW0gKyAycHgpfS5mb3JtLWNvbnRyb2wtY29sb3J7bWF4LXdpZHRoOjNyZW07aGVpZ2h0OmF1dG87cGFkZGluZzouMzc1cmVtfS5mb3JtLWNvbnRyb2wtY29sb3I6bm90KDpkaXNhYmxlZCk6bm90KFtyZWFkb25seV0pe2N1cnNvcjpwb2ludGVyfS5mb3JtLWNvbnRyb2wtY29sb3I6Oi1tb3otY29sb3Itc3dhdGNoe2hlaWdodDoxLjVlbTtib3JkZXItcmFkaXVzOi4yNXJlbX0uZm9ybS1jb250cm9sLWNvbG9yOjotd2Via2l0LWNvbG9yLXN3YXRjaHtoZWlnaHQ6MS41ZW07Ym9yZGVyLXJhZGl1czouMjVyZW19LmZvcm0tc2VsZWN0e2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVyZW0gMi4yNXJlbSAuMzc1cmVtIC43NXJlbTtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O2NvbG9yOiMyMTI1Mjk7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDE2IDE2JyUzZSUzY3BhdGggZmlsbD0nbm9uZScgc3Ryb2tlPSclMjMzNDNhNDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScyJyBkPSdNMiA1bDYgNiA2LTYnLyUzZSUzYy9zdmclM2UiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpyaWdodCAuNzVyZW0gY2VudGVyO2JhY2tncm91bmQtc2l6ZToxNnB4IDEycHg7Ym9yZGVyOjFweCBzb2xpZCAjY2VkNGRhO2JvcmRlci1yYWRpdXM6LjI1cmVtOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZX0uZm9ybS1zZWxlY3Q6Zm9jdXN7Ym9yZGVyLWNvbG9yOiM4NmI3ZmU7b3V0bGluZTowO2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMTMsMTEwLDI1MywuMjUpfS5mb3JtLXNlbGVjdFttdWx0aXBsZV0sLmZvcm0tc2VsZWN0W3NpemVdOm5vdChbc2l6ZT0iMSJdKXtwYWRkaW5nLXJpZ2h0Oi43NXJlbTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9LmZvcm0tc2VsZWN0OmRpc2FibGVke2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZn0uZm9ybS1zZWxlY3Q6LW1vei1mb2N1c3Jpbmd7Y29sb3I6dHJhbnNwYXJlbnQ7dGV4dC1zaGFkb3c6MCAwIDAgIzIxMjUyOX0uZm9ybS1zZWxlY3Qtc217cGFkZGluZy10b3A6LjI1cmVtO3BhZGRpbmctYm90dG9tOi4yNXJlbTtwYWRkaW5nLWxlZnQ6LjVyZW07Zm9udC1zaXplOi44NzVyZW19LmZvcm0tc2VsZWN0LWxne3BhZGRpbmctdG9wOi41cmVtO3BhZGRpbmctYm90dG9tOi41cmVtO3BhZGRpbmctbGVmdDoxcmVtO2ZvbnQtc2l6ZToxLjI1cmVtfS5mb3JtLWNoZWNre2Rpc3BsYXk6YmxvY2s7bWluLWhlaWdodDoxLjVyZW07cGFkZGluZy1sZWZ0OjEuNWVtO21hcmdpbi1ib3R0b206LjEyNXJlbX0uZm9ybS1jaGVjayAuZm9ybS1jaGVjay1pbnB1dHtmbG9hdDpsZWZ0O21hcmdpbi1sZWZ0Oi0xLjVlbX0uZm9ybS1jaGVjay1pbnB1dHt3aWR0aDoxZW07aGVpZ2h0OjFlbTttYXJnaW4tdG9wOi4yNWVtO3ZlcnRpY2FsLWFsaWduOnRvcDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JhY2tncm91bmQtc2l6ZTpjb250YWluO2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMjUpOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtjb2xvci1hZGp1c3Q6ZXhhY3R9LmZvcm0tY2hlY2staW5wdXRbdHlwZT1jaGVja2JveF17Ym9yZGVyLXJhZGl1czouMjVlbX0uZm9ybS1jaGVjay1pbnB1dFt0eXBlPXJhZGlvXXtib3JkZXItcmFkaXVzOjUwJX0uZm9ybS1jaGVjay1pbnB1dDphY3RpdmV7ZmlsdGVyOmJyaWdodG5lc3MoOTAlKX0uZm9ybS1jaGVjay1pbnB1dDpmb2N1c3tib3JkZXItY29sb3I6Izg2YjdmZTtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgxMywxMTAsMjUzLC4yNSl9LmZvcm0tY2hlY2staW5wdXQ6Y2hlY2tlZHtiYWNrZ3JvdW5kLWNvbG9yOiMwZDZlZmQ7Ym9yZGVyLWNvbG9yOiMwZDZlZmR9LmZvcm0tY2hlY2staW5wdXQ6Y2hlY2tlZFt0eXBlPWNoZWNrYm94XXtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyMCAyMCclM2UlM2NwYXRoIGZpbGw9J25vbmUnIHN0cm9rZT0nJTIzZmZmJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMycgZD0nTTYgMTBsMyAzbDYtNicvJTNlJTNjL3N2ZyUzZSIpfS5mb3JtLWNoZWNrLWlucHV0OmNoZWNrZWRbdHlwZT1yYWRpb117YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PSctNCAtNCA4IDgnJTNlJTNjY2lyY2xlIHI9JzInIGZpbGw9JyUyM2ZmZicvJTNlJTNjL3N2ZyUzZSIpfS5mb3JtLWNoZWNrLWlucHV0W3R5cGU9Y2hlY2tib3hdOmluZGV0ZXJtaW5hdGV7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO2JvcmRlci1jb2xvcjojMGQ2ZWZkO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDIwIDIwJyUzZSUzY3BhdGggZmlsbD0nbm9uZScgc3Ryb2tlPSclMjNmZmYnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPSczJyBkPSdNNiAxMGg4Jy8lM2UlM2Mvc3ZnJTNlIil9LmZvcm0tY2hlY2staW5wdXQ6ZGlzYWJsZWR7cG9pbnRlci1ldmVudHM6bm9uZTtmaWx0ZXI6bm9uZTtvcGFjaXR5Oi41fS5mb3JtLWNoZWNrLWlucHV0OmRpc2FibGVkfi5mb3JtLWNoZWNrLWxhYmVsLC5mb3JtLWNoZWNrLWlucHV0W2Rpc2FibGVkXX4uZm9ybS1jaGVjay1sYWJlbHtvcGFjaXR5Oi41fS5mb3JtLXN3aXRjaHtwYWRkaW5nLWxlZnQ6Mi41ZW19LmZvcm0tc3dpdGNoIC5mb3JtLWNoZWNrLWlucHV0e3dpZHRoOjJlbTttYXJnaW4tbGVmdDotMi41ZW07YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PSctNCAtNCA4IDgnJTNlJTNjY2lyY2xlIHI9JzMnIGZpbGw9J3JnYmElMjgwLCAwLCAwLCAwLjI1JTI5Jy8lM2UlM2Mvc3ZnJTNlIik7YmFja2dyb3VuZC1wb3NpdGlvbjpsZWZ0IGNlbnRlcjtib3JkZXItcmFkaXVzOjJlbTt0cmFuc2l0aW9uOmJhY2tncm91bmQtcG9zaXRpb24gLjE1cyBlYXNlLWluLW91dH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuZm9ybS1zd2l0Y2ggLmZvcm0tY2hlY2staW5wdXR7dHJhbnNpdGlvbjpub25lfX0uZm9ybS1zd2l0Y2ggLmZvcm0tY2hlY2staW5wdXQ6Zm9jdXN7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PSctNCAtNCA4IDgnJTNlJTNjY2lyY2xlIHI9JzMnIGZpbGw9JyUyMzg2YjdmZScvJTNlJTNjL3N2ZyUzZSIpfS5mb3JtLXN3aXRjaCAuZm9ybS1jaGVjay1pbnB1dDpjaGVja2Vke2JhY2tncm91bmQtcG9zaXRpb246cmlnaHQgY2VudGVyO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nLTQgLTQgOCA4JyUzZSUzY2NpcmNsZSByPSczJyBmaWxsPSclMjNmZmYnLyUzZSUzYy9zdmclM2UiKX0uZm9ybS1jaGVjay1pbmxpbmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLXJpZ2h0OjFyZW19LmJ0bi1jaGVja3twb3NpdGlvbjphYnNvbHV0ZTtjbGlwOnJlY3QoMCwwLDAsMCk7cG9pbnRlci1ldmVudHM6bm9uZX0uYnRuLWNoZWNrOmRpc2FibGVkKy5idG4sLmJ0bi1jaGVja1tkaXNhYmxlZF0rLmJ0bntwb2ludGVyLWV2ZW50czpub25lO2ZpbHRlcjpub25lO29wYWNpdHk6LjY1fS5mb3JtLXJhbmdle3dpZHRoOjEwMCU7aGVpZ2h0OjEuNXJlbTtwYWRkaW5nOjA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmV9LmZvcm0tcmFuZ2U6Zm9jdXN7b3V0bGluZTowfS5mb3JtLXJhbmdlOmZvY3VzOjotd2Via2l0LXNsaWRlci10aHVtYntib3gtc2hhZG93OjAgMCAwIDFweCAjZmZmLDAgMCAwIC4yNXJlbSByZ2JhKDEzLDExMCwyNTMsLjI1KX0uZm9ybS1yYW5nZTpmb2N1czo6LW1vei1yYW5nZS10aHVtYntib3gtc2hhZG93OjAgMCAwIDFweCAjZmZmLDAgMCAwIC4yNXJlbSByZ2JhKDEzLDExMCwyNTMsLjI1KX0uZm9ybS1yYW5nZTo6LW1vei1mb2N1cy1vdXRlcntib3JkZXI6MH0uZm9ybS1yYW5nZTo6LXdlYmtpdC1zbGlkZXItdGh1bWJ7d2lkdGg6MXJlbTtoZWlnaHQ6MXJlbTttYXJnaW4tdG9wOi0uMjVyZW07YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO2JvcmRlcjowO2JvcmRlci1yYWRpdXM6MXJlbTstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJvcmRlci1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJveC1zaGFkb3cgLjE1cyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXQ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5mb3JtLXJhbmdlOjotd2Via2l0LXNsaWRlci10aHVtYnstd2Via2l0LXRyYW5zaXRpb246bm9uZTt0cmFuc2l0aW9uOm5vbmV9fS5mb3JtLXJhbmdlOjotd2Via2l0LXNsaWRlci10aHVtYjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojYjZkNGZlfS5mb3JtLXJhbmdlOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFja3t3aWR0aDoxMDAlO2hlaWdodDouNXJlbTtjb2xvcjp0cmFuc3BhcmVudDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNkZWUyZTY7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1yYWRpdXM6MXJlbX0uZm9ybS1yYW5nZTo6LW1vei1yYW5nZS10aHVtYnt3aWR0aDoxcmVtO2hlaWdodDoxcmVtO2JhY2tncm91bmQtY29sb3I6IzBkNmVmZDtib3JkZXI6MDtib3JkZXItcmFkaXVzOjFyZW07LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYm9yZGVyLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYm94LXNoYWRvdyAuMTVzIGVhc2UtaW4tb3V0Oy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuZm9ybS1yYW5nZTo6LW1vei1yYW5nZS10aHVtYnstbW96LXRyYW5zaXRpb246bm9uZTt0cmFuc2l0aW9uOm5vbmV9fS5mb3JtLXJhbmdlOjotbW96LXJhbmdlLXRodW1iOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNiNmQ0ZmV9LmZvcm0tcmFuZ2U6Oi1tb3otcmFuZ2UtdHJhY2t7d2lkdGg6MTAwJTtoZWlnaHQ6LjVyZW07Y29sb3I6dHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZGVlMmU2O2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjFyZW19LmZvcm0tcmFuZ2U6ZGlzYWJsZWR7cG9pbnRlci1ldmVudHM6bm9uZX0uZm9ybS1yYW5nZTpkaXNhYmxlZDo6LXdlYmtpdC1zbGlkZXItdGh1bWJ7YmFja2dyb3VuZC1jb2xvcjojYWRiNWJkfS5mb3JtLXJhbmdlOmRpc2FibGVkOjotbW96LXJhbmdlLXRodW1ie2JhY2tncm91bmQtY29sb3I6I2FkYjViZH0uZm9ybS1mbG9hdGluZ3twb3NpdGlvbjpyZWxhdGl2ZX0uZm9ybS1mbG9hdGluZz4uZm9ybS1jb250cm9sLC5mb3JtLWZsb2F0aW5nPi5mb3JtLXNlbGVjdHtoZWlnaHQ6Y2FsYygzLjVyZW0gKyAycHgpO3BhZGRpbmc6MXJlbSAuNzVyZW19LmZvcm0tZmxvYXRpbmc+bGFiZWx7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO2hlaWdodDoxMDAlO3BhZGRpbmc6MXJlbSAuNzVyZW07cG9pbnRlci1ldmVudHM6bm9uZTtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O3RyYW5zZm9ybS1vcmlnaW46MCAwO3RyYW5zaXRpb246b3BhY2l0eSAuMXMgZWFzZS1pbi1vdXQsdHJhbnNmb3JtIC4xcyBlYXNlLWluLW91dH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuZm9ybS1mbG9hdGluZz5sYWJlbHt0cmFuc2l0aW9uOm5vbmV9fS5mb3JtLWZsb2F0aW5nPi5mb3JtLWNvbnRyb2w6Oi1tb3otcGxhY2Vob2xkZXJ7Y29sb3I6dHJhbnNwYXJlbnR9LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDo6cGxhY2Vob2xkZXJ7Y29sb3I6dHJhbnNwYXJlbnR9LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDpub3QoOi1tb3otcGxhY2Vob2xkZXItc2hvd24pe3BhZGRpbmctdG9wOjEuNjI1cmVtO3BhZGRpbmctYm90dG9tOi42MjVyZW19LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDpmb2N1cywuZm9ybS1mbG9hdGluZz4uZm9ybS1jb250cm9sOm5vdCg6cGxhY2Vob2xkZXItc2hvd24pe3BhZGRpbmctdG9wOjEuNjI1cmVtO3BhZGRpbmctYm90dG9tOi42MjVyZW19LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDotd2Via2l0LWF1dG9maWxse3BhZGRpbmctdG9wOjEuNjI1cmVtO3BhZGRpbmctYm90dG9tOi42MjVyZW19LmZvcm0tZmxvYXRpbmc+LmZvcm0tc2VsZWN0e3BhZGRpbmctdG9wOjEuNjI1cmVtO3BhZGRpbmctYm90dG9tOi42MjVyZW19LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDpub3QoOi1tb3otcGxhY2Vob2xkZXItc2hvd24pfmxhYmVse29wYWNpdHk6LjY1O3RyYW5zZm9ybTpzY2FsZSguODUpIHRyYW5zbGF0ZVkoLS41cmVtKSB0cmFuc2xhdGVYKC4xNXJlbSl9LmZvcm0tZmxvYXRpbmc+LmZvcm0tY29udHJvbDpmb2N1c35sYWJlbCwuZm9ybS1mbG9hdGluZz4uZm9ybS1jb250cm9sOm5vdCg6cGxhY2Vob2xkZXItc2hvd24pfmxhYmVsLC5mb3JtLWZsb2F0aW5nPi5mb3JtLXNlbGVjdH5sYWJlbHtvcGFjaXR5Oi42NTt0cmFuc2Zvcm06c2NhbGUoLjg1KSB0cmFuc2xhdGVZKC0uNXJlbSkgdHJhbnNsYXRlWCguMTVyZW0pfS5mb3JtLWZsb2F0aW5nPi5mb3JtLWNvbnRyb2w6LXdlYmtpdC1hdXRvZmlsbH5sYWJlbHtvcGFjaXR5Oi42NTt0cmFuc2Zvcm06c2NhbGUoLjg1KSB0cmFuc2xhdGVZKC0uNXJlbSkgdHJhbnNsYXRlWCguMTVyZW0pfS5pbnB1dC1ncm91cHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6c3RyZXRjaDt3aWR0aDoxMDAlfS5pbnB1dC1ncm91cD4uZm9ybS1jb250cm9sLC5pbnB1dC1ncm91cD4uZm9ybS1zZWxlY3R7cG9zaXRpb246cmVsYXRpdmU7ZmxleDoxIDEgYXV0bzt3aWR0aDoxJTttaW4td2lkdGg6MH0uaW5wdXQtZ3JvdXA+LmZvcm0tY29udHJvbDpmb2N1cywuaW5wdXQtZ3JvdXA+LmZvcm0tc2VsZWN0OmZvY3Vze3otaW5kZXg6M30uaW5wdXQtZ3JvdXAgLmJ0bntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjJ9LmlucHV0LWdyb3VwIC5idG46Zm9jdXN7ei1pbmRleDozfS5pbnB1dC1ncm91cC10ZXh0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzouMzc1cmVtIC43NXJlbTtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O2NvbG9yOiMyMTI1Mjk7dGV4dC1hbGlnbjpjZW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjtib3JkZXI6MXB4IHNvbGlkICNjZWQ0ZGE7Ym9yZGVyLXJhZGl1czouMjVyZW19LmlucHV0LWdyb3VwLWxnPi5idG4sLmlucHV0LWdyb3VwLWxnPi5mb3JtLWNvbnRyb2wsLmlucHV0LWdyb3VwLWxnPi5mb3JtLXNlbGVjdCwuaW5wdXQtZ3JvdXAtbGc+LmlucHV0LWdyb3VwLXRleHR7cGFkZGluZzouNXJlbSAxcmVtO2ZvbnQtc2l6ZToxLjI1cmVtO2JvcmRlci1yYWRpdXM6LjNyZW19LmlucHV0LWdyb3VwLXNtPi5idG4sLmlucHV0LWdyb3VwLXNtPi5mb3JtLWNvbnRyb2wsLmlucHV0LWdyb3VwLXNtPi5mb3JtLXNlbGVjdCwuaW5wdXQtZ3JvdXAtc20+LmlucHV0LWdyb3VwLXRleHR7cGFkZGluZzouMjVyZW0gLjVyZW07Zm9udC1zaXplOi44NzVyZW07Ym9yZGVyLXJhZGl1czouMnJlbX0uaW5wdXQtZ3JvdXAtbGc+LmZvcm0tc2VsZWN0LC5pbnB1dC1ncm91cC1zbT4uZm9ybS1zZWxlY3R7cGFkZGluZy1yaWdodDozcmVtfS5pbnB1dC1ncm91cDpub3QoLmhhcy12YWxpZGF0aW9uKT4uZHJvcGRvd24tdG9nZ2xlOm50aC1sYXN0LWNoaWxkKG4rMyksLmlucHV0LWdyb3VwOm5vdCguaGFzLXZhbGlkYXRpb24pPjpub3QoOmxhc3QtY2hpbGQpOm5vdCguZHJvcGRvd24tdG9nZ2xlKTpub3QoLmRyb3Bkb3duLW1lbnUpe2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MH0uaW5wdXQtZ3JvdXAuaGFzLXZhbGlkYXRpb24+LmRyb3Bkb3duLXRvZ2dsZTpudGgtbGFzdC1jaGlsZChuKzQpLC5pbnB1dC1ncm91cC5oYXMtdmFsaWRhdGlvbj46bnRoLWxhc3QtY2hpbGQobiszKTpub3QoLmRyb3Bkb3duLXRvZ2dsZSk6bm90KC5kcm9wZG93bi1tZW51KXtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjB9LmlucHV0LWdyb3VwPjpub3QoOmZpcnN0LWNoaWxkKTpub3QoLmRyb3Bkb3duLW1lbnUpOm5vdCgudmFsaWQtdG9vbHRpcCk6bm90KC52YWxpZC1mZWVkYmFjayk6bm90KC5pbnZhbGlkLXRvb2x0aXApOm5vdCguaW52YWxpZC1mZWVkYmFjayl7bWFyZ2luLWxlZnQ6LTFweDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowfS52YWxpZC1mZWVkYmFja3tkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJTttYXJnaW4tdG9wOi4yNXJlbTtmb250LXNpemU6Ljg3NWVtO2NvbG9yOiMxOTg3NTR9LnZhbGlkLXRvb2x0aXB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7ei1pbmRleDo1O2Rpc3BsYXk6bm9uZTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOi4yNXJlbSAuNXJlbTttYXJnaW4tdG9wOi4xcmVtO2ZvbnQtc2l6ZTouODc1cmVtO2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1LDEzNSw4NCwuOSk7Ym9yZGVyLXJhZGl1czouMjVyZW19LmlzLXZhbGlkfi52YWxpZC1mZWVkYmFjaywuaXMtdmFsaWR+LnZhbGlkLXRvb2x0aXAsLndhcy12YWxpZGF0ZWQgOnZhbGlkfi52YWxpZC1mZWVkYmFjaywud2FzLXZhbGlkYXRlZCA6dmFsaWR+LnZhbGlkLXRvb2x0aXB7ZGlzcGxheTpibG9ja30uZm9ybS1jb250cm9sLmlzLXZhbGlkLC53YXMtdmFsaWRhdGVkIC5mb3JtLWNvbnRyb2w6dmFsaWR7Ym9yZGVyLWNvbG9yOiMxOTg3NTQ7cGFkZGluZy1yaWdodDpjYWxjKDEuNWVtICsgLjc1cmVtKTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA4IDgnJTNlJTNjcGF0aCBmaWxsPSclMjMxOTg3NTQnIGQ9J00yLjMgNi43M0wuNiA0LjUzYy0uNC0xLjA0LjQ2LTEuNCAxLjEtLjhsMS4xIDEuNCAzLjQtMy44Yy42LS42MyAxLjYtLjI3IDEuMi43bC00IDQuNmMtLjQzLjUtLjguNC0xLjEuMXonLyUzZSUzYy9zdmclM2UiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpyaWdodCBjYWxjKC4zNzVlbSArIC4xODc1cmVtKSBjZW50ZXI7YmFja2dyb3VuZC1zaXplOmNhbGMoLjc1ZW0gKyAuMzc1cmVtKSBjYWxjKC43NWVtICsgLjM3NXJlbSl9LmZvcm0tY29udHJvbC5pcy12YWxpZDpmb2N1cywud2FzLXZhbGlkYXRlZCAuZm9ybS1jb250cm9sOnZhbGlkOmZvY3Vze2JvcmRlci1jb2xvcjojMTk4NzU0O2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjUsMTM1LDg0LC4yNSl9Lndhcy12YWxpZGF0ZWQgdGV4dGFyZWEuZm9ybS1jb250cm9sOnZhbGlkLHRleHRhcmVhLmZvcm0tY29udHJvbC5pcy12YWxpZHtwYWRkaW5nLXJpZ2h0OmNhbGMoMS41ZW0gKyAuNzVyZW0pO2JhY2tncm91bmQtcG9zaXRpb246dG9wIGNhbGMoLjM3NWVtICsgLjE4NzVyZW0pIHJpZ2h0IGNhbGMoLjM3NWVtICsgLjE4NzVyZW0pfS5mb3JtLXNlbGVjdC5pcy12YWxpZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1zZWxlY3Q6dmFsaWR7Ym9yZGVyLWNvbG9yOiMxOTg3NTR9LmZvcm0tc2VsZWN0LmlzLXZhbGlkOm5vdChbbXVsdGlwbGVdKTpub3QoW3NpemVdKSwuZm9ybS1zZWxlY3QuaXMtdmFsaWQ6bm90KFttdWx0aXBsZV0pW3NpemU9IjEiXSwud2FzLXZhbGlkYXRlZCAuZm9ybS1zZWxlY3Q6dmFsaWQ6bm90KFttdWx0aXBsZV0pOm5vdChbc2l6ZV0pLC53YXMtdmFsaWRhdGVkIC5mb3JtLXNlbGVjdDp2YWxpZDpub3QoW211bHRpcGxlXSlbc2l6ZT0iMSJde3BhZGRpbmctcmlnaHQ6NC4xMjVyZW07YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTYgMTYnJTNlJTNjcGF0aCBmaWxsPSdub25lJyBzdHJva2U9JyUyMzM0M2E0MCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzInIGQ9J00yIDVsNiA2IDYtNicvJTNlJTNjL3N2ZyUzZSIpLHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA4IDgnJTNlJTNjcGF0aCBmaWxsPSclMjMxOTg3NTQnIGQ9J00yLjMgNi43M0wuNiA0LjUzYy0uNC0xLjA0LjQ2LTEuNCAxLjEtLjhsMS4xIDEuNCAzLjQtMy44Yy42LS42MyAxLjYtLjI3IDEuMi43bC00IDQuNmMtLjQzLjUtLjguNC0xLjEuMXonLyUzZSUzYy9zdmclM2UiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOnJpZ2h0IC43NXJlbSBjZW50ZXIsY2VudGVyIHJpZ2h0IDIuMjVyZW07YmFja2dyb3VuZC1zaXplOjE2cHggMTJweCxjYWxjKC43NWVtICsgLjM3NXJlbSkgY2FsYyguNzVlbSArIC4zNzVyZW0pfS5mb3JtLXNlbGVjdC5pcy12YWxpZDpmb2N1cywud2FzLXZhbGlkYXRlZCAuZm9ybS1zZWxlY3Q6dmFsaWQ6Zm9jdXN7Ym9yZGVyLWNvbG9yOiMxOTg3NTQ7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgyNSwxMzUsODQsLjI1KX0uZm9ybS1jaGVjay1pbnB1dC5pcy12YWxpZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1jaGVjay1pbnB1dDp2YWxpZHtib3JkZXItY29sb3I6IzE5ODc1NH0uZm9ybS1jaGVjay1pbnB1dC5pcy12YWxpZDpjaGVja2VkLC53YXMtdmFsaWRhdGVkIC5mb3JtLWNoZWNrLWlucHV0OnZhbGlkOmNoZWNrZWR7YmFja2dyb3VuZC1jb2xvcjojMTk4NzU0fS5mb3JtLWNoZWNrLWlucHV0LmlzLXZhbGlkOmZvY3VzLC53YXMtdmFsaWRhdGVkIC5mb3JtLWNoZWNrLWlucHV0OnZhbGlkOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjUsMTM1LDg0LC4yNSl9LmZvcm0tY2hlY2staW5wdXQuaXMtdmFsaWR+LmZvcm0tY2hlY2stbGFiZWwsLndhcy12YWxpZGF0ZWQgLmZvcm0tY2hlY2staW5wdXQ6dmFsaWR+LmZvcm0tY2hlY2stbGFiZWx7Y29sb3I6IzE5ODc1NH0uZm9ybS1jaGVjay1pbmxpbmUgLmZvcm0tY2hlY2staW5wdXR+LnZhbGlkLWZlZWRiYWNre21hcmdpbi1sZWZ0Oi41ZW19LmlucHV0LWdyb3VwIC5mb3JtLWNvbnRyb2wuaXMtdmFsaWQsLmlucHV0LWdyb3VwIC5mb3JtLXNlbGVjdC5pcy12YWxpZCwud2FzLXZhbGlkYXRlZCAuaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbDp2YWxpZCwud2FzLXZhbGlkYXRlZCAuaW5wdXQtZ3JvdXAgLmZvcm0tc2VsZWN0OnZhbGlke3otaW5kZXg6MX0uaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbC5pcy12YWxpZDpmb2N1cywuaW5wdXQtZ3JvdXAgLmZvcm0tc2VsZWN0LmlzLXZhbGlkOmZvY3VzLC53YXMtdmFsaWRhdGVkIC5pbnB1dC1ncm91cCAuZm9ybS1jb250cm9sOnZhbGlkOmZvY3VzLC53YXMtdmFsaWRhdGVkIC5pbnB1dC1ncm91cCAuZm9ybS1zZWxlY3Q6dmFsaWQ6Zm9jdXN7ei1pbmRleDozfS5pbnZhbGlkLWZlZWRiYWNre2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlO21hcmdpbi10b3A6LjI1cmVtO2ZvbnQtc2l6ZTouODc1ZW07Y29sb3I6I2RjMzU0NX0uaW52YWxpZC10b29sdGlwe3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxMDAlO3otaW5kZXg6NTtkaXNwbGF5Om5vbmU7bWF4LXdpZHRoOjEwMCU7cGFkZGluZzouMjVyZW0gLjVyZW07bWFyZ2luLXRvcDouMXJlbTtmb250LXNpemU6Ljg3NXJlbTtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6cmdiYSgyMjAsNTMsNjksLjkpO2JvcmRlci1yYWRpdXM6LjI1cmVtfS5pcy1pbnZhbGlkfi5pbnZhbGlkLWZlZWRiYWNrLC5pcy1pbnZhbGlkfi5pbnZhbGlkLXRvb2x0aXAsLndhcy12YWxpZGF0ZWQgOmludmFsaWR+LmludmFsaWQtZmVlZGJhY2ssLndhcy12YWxpZGF0ZWQgOmludmFsaWR+LmludmFsaWQtdG9vbHRpcHtkaXNwbGF5OmJsb2NrfS5mb3JtLWNvbnRyb2wuaXMtaW52YWxpZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1jb250cm9sOmludmFsaWR7Ym9yZGVyLWNvbG9yOiNkYzM1NDU7cGFkZGluZy1yaWdodDpjYWxjKDEuNWVtICsgLjc1cmVtKTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMiAxMicgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyBmaWxsPSdub25lJyBzdHJva2U9JyUyM2RjMzU0NSclM2UlM2NjaXJjbGUgY3g9JzYnIGN5PSc2JyByPSc0LjUnLyUzZSUzY3BhdGggc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgZD0nTTUuOCAzLjZoLjRMNiA2LjV6Jy8lM2UlM2NjaXJjbGUgY3g9JzYnIGN5PSc4LjInIHI9Jy42JyBmaWxsPSclMjNkYzM1NDUnIHN0cm9rZT0nbm9uZScvJTNlJTNjL3N2ZyUzZSIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnJpZ2h0IGNhbGMoLjM3NWVtICsgLjE4NzVyZW0pIGNlbnRlcjtiYWNrZ3JvdW5kLXNpemU6Y2FsYyguNzVlbSArIC4zNzVyZW0pIGNhbGMoLjc1ZW0gKyAuMzc1cmVtKX0uZm9ybS1jb250cm9sLmlzLWludmFsaWQ6Zm9jdXMsLndhcy12YWxpZGF0ZWQgLmZvcm0tY29udHJvbDppbnZhbGlkOmZvY3Vze2JvcmRlci1jb2xvcjojZGMzNTQ1O2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjIwLDUzLDY5LC4yNSl9Lndhcy12YWxpZGF0ZWQgdGV4dGFyZWEuZm9ybS1jb250cm9sOmludmFsaWQsdGV4dGFyZWEuZm9ybS1jb250cm9sLmlzLWludmFsaWR7cGFkZGluZy1yaWdodDpjYWxjKDEuNWVtICsgLjc1cmVtKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBjYWxjKC4zNzVlbSArIC4xODc1cmVtKSByaWdodCBjYWxjKC4zNzVlbSArIC4xODc1cmVtKX0uZm9ybS1zZWxlY3QuaXMtaW52YWxpZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1zZWxlY3Q6aW52YWxpZHtib3JkZXItY29sb3I6I2RjMzU0NX0uZm9ybS1zZWxlY3QuaXMtaW52YWxpZDpub3QoW211bHRpcGxlXSk6bm90KFtzaXplXSksLmZvcm0tc2VsZWN0LmlzLWludmFsaWQ6bm90KFttdWx0aXBsZV0pW3NpemU9IjEiXSwud2FzLXZhbGlkYXRlZCAuZm9ybS1zZWxlY3Q6aW52YWxpZDpub3QoW211bHRpcGxlXSk6bm90KFtzaXplXSksLndhcy12YWxpZGF0ZWQgLmZvcm0tc2VsZWN0OmludmFsaWQ6bm90KFttdWx0aXBsZV0pW3NpemU9IjEiXXtwYWRkaW5nLXJpZ2h0OjQuMTI1cmVtO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDE2IDE2JyUzZSUzY3BhdGggZmlsbD0nbm9uZScgc3Ryb2tlPSclMjMzNDNhNDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScyJyBkPSdNMiA1bDYgNiA2LTYnLyUzZSUzYy9zdmclM2UiKSx1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMTInIHdpZHRoPScxMicgaGVpZ2h0PScxMicgZmlsbD0nbm9uZScgc3Ryb2tlPSclMjNkYzM1NDUnJTNlJTNjY2lyY2xlIGN4PSc2JyBjeT0nNicgcj0nNC41Jy8lM2UlM2NwYXRoIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIGQ9J001LjggMy42aC40TDYgNi41eicvJTNlJTNjY2lyY2xlIGN4PSc2JyBjeT0nOC4yJyByPScuNicgZmlsbD0nJTIzZGMzNTQ1JyBzdHJva2U9J25vbmUnLyUzZSUzYy9zdmclM2UiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOnJpZ2h0IC43NXJlbSBjZW50ZXIsY2VudGVyIHJpZ2h0IDIuMjVyZW07YmFja2dyb3VuZC1zaXplOjE2cHggMTJweCxjYWxjKC43NWVtICsgLjM3NXJlbSkgY2FsYyguNzVlbSArIC4zNzVyZW0pfS5mb3JtLXNlbGVjdC5pcy1pbnZhbGlkOmZvY3VzLC53YXMtdmFsaWRhdGVkIC5mb3JtLXNlbGVjdDppbnZhbGlkOmZvY3Vze2JvcmRlci1jb2xvcjojZGMzNTQ1O2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjIwLDUzLDY5LC4yNSl9LmZvcm0tY2hlY2staW5wdXQuaXMtaW52YWxpZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1jaGVjay1pbnB1dDppbnZhbGlke2JvcmRlci1jb2xvcjojZGMzNTQ1fS5mb3JtLWNoZWNrLWlucHV0LmlzLWludmFsaWQ6Y2hlY2tlZCwud2FzLXZhbGlkYXRlZCAuZm9ybS1jaGVjay1pbnB1dDppbnZhbGlkOmNoZWNrZWR7YmFja2dyb3VuZC1jb2xvcjojZGMzNTQ1fS5mb3JtLWNoZWNrLWlucHV0LmlzLWludmFsaWQ6Zm9jdXMsLndhcy12YWxpZGF0ZWQgLmZvcm0tY2hlY2staW5wdXQ6aW52YWxpZDpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIyMCw1Myw2OSwuMjUpfS5mb3JtLWNoZWNrLWlucHV0LmlzLWludmFsaWR+LmZvcm0tY2hlY2stbGFiZWwsLndhcy12YWxpZGF0ZWQgLmZvcm0tY2hlY2staW5wdXQ6aW52YWxpZH4uZm9ybS1jaGVjay1sYWJlbHtjb2xvcjojZGMzNTQ1fS5mb3JtLWNoZWNrLWlubGluZSAuZm9ybS1jaGVjay1pbnB1dH4uaW52YWxpZC1mZWVkYmFja3ttYXJnaW4tbGVmdDouNWVtfS5pbnB1dC1ncm91cCAuZm9ybS1jb250cm9sLmlzLWludmFsaWQsLmlucHV0LWdyb3VwIC5mb3JtLXNlbGVjdC5pcy1pbnZhbGlkLC53YXMtdmFsaWRhdGVkIC5pbnB1dC1ncm91cCAuZm9ybS1jb250cm9sOmludmFsaWQsLndhcy12YWxpZGF0ZWQgLmlucHV0LWdyb3VwIC5mb3JtLXNlbGVjdDppbnZhbGlke3otaW5kZXg6Mn0uaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbC5pcy1pbnZhbGlkOmZvY3VzLC5pbnB1dC1ncm91cCAuZm9ybS1zZWxlY3QuaXMtaW52YWxpZDpmb2N1cywud2FzLXZhbGlkYXRlZCAuaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbDppbnZhbGlkOmZvY3VzLC53YXMtdmFsaWRhdGVkIC5pbnB1dC1ncm91cCAuZm9ybS1zZWxlY3Q6aW52YWxpZDpmb2N1c3t6LWluZGV4OjN9LmJ0bntkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O2NvbG9yOiMyMTI1Mjk7dGV4dC1hbGlnbjpjZW50ZXI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dmVydGljYWwtYWxpZ246bWlkZGxlO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7cGFkZGluZzouMzc1cmVtIC43NXJlbTtmb250LXNpemU6MXJlbTtib3JkZXItcmFkaXVzOi4yNXJlbTt0cmFuc2l0aW9uOmNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYmFja2dyb3VuZC1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJvcmRlci1jb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJveC1zaGFkb3cgLjE1cyBlYXNlLWluLW91dH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuYnRue3RyYW5zaXRpb246bm9uZX19LmJ0bjpob3Zlcntjb2xvcjojMjEyNTI5fS5idG4tY2hlY2s6Zm9jdXMrLmJ0biwuYnRuOmZvY3Vze291dGxpbmU6MDtib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEzLDExMCwyNTMsLjI1KX0uYnRuLmRpc2FibGVkLC5idG46ZGlzYWJsZWQsZmllbGRzZXQ6ZGlzYWJsZWQgLmJ0bntwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6LjY1fS5idG4tcHJpbWFyeXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzBkNmVmZDtib3JkZXItY29sb3I6IzBkNmVmZH0uYnRuLXByaW1hcnk6aG92ZXJ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwYjVlZDc7Ym9yZGVyLWNvbG9yOiMwYTU4Y2F9LmJ0bi1jaGVjazpmb2N1cysuYnRuLXByaW1hcnksLmJ0bi1wcmltYXJ5OmZvY3Vze2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMGI1ZWQ3O2JvcmRlci1jb2xvcjojMGE1OGNhO2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoNDksMTMyLDI1MywuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1wcmltYXJ5LC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLXByaW1hcnksLmJ0bi1wcmltYXJ5LmFjdGl2ZSwuYnRuLXByaW1hcnk6YWN0aXZlLC5zaG93Pi5idG4tcHJpbWFyeS5kcm9wZG93bi10b2dnbGV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwYTU4Y2E7Ym9yZGVyLWNvbG9yOiMwYTUzYmV9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1wcmltYXJ5OmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLXByaW1hcnk6Zm9jdXMsLmJ0bi1wcmltYXJ5LmFjdGl2ZTpmb2N1cywuYnRuLXByaW1hcnk6YWN0aXZlOmZvY3VzLC5zaG93Pi5idG4tcHJpbWFyeS5kcm9wZG93bi10b2dnbGU6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSg0OSwxMzIsMjUzLC41KX0uYnRuLXByaW1hcnkuZGlzYWJsZWQsLmJ0bi1wcmltYXJ5OmRpc2FibGVke2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO2JvcmRlci1jb2xvcjojMGQ2ZWZkfS5idG4tc2Vjb25kYXJ5e2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojNmM3NTdkO2JvcmRlci1jb2xvcjojNmM3NTdkfS5idG4tc2Vjb25kYXJ5OmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojNWM2MzZhO2JvcmRlci1jb2xvcjojNTY1ZTY0fS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1zZWNvbmRhcnksLmJ0bi1zZWNvbmRhcnk6Zm9jdXN7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiM1YzYzNmE7Ym9yZGVyLWNvbG9yOiM1NjVlNjQ7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgxMzAsMTM4LDE0NSwuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1zZWNvbmRhcnksLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tc2Vjb25kYXJ5LC5idG4tc2Vjb25kYXJ5LmFjdGl2ZSwuYnRuLXNlY29uZGFyeTphY3RpdmUsLnNob3c+LmJ0bi1zZWNvbmRhcnkuZHJvcGRvd24tdG9nZ2xle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojNTY1ZTY0O2JvcmRlci1jb2xvcjojNTE1ODVlfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tc2Vjb25kYXJ5OmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLXNlY29uZGFyeTpmb2N1cywuYnRuLXNlY29uZGFyeS5hY3RpdmU6Zm9jdXMsLmJ0bi1zZWNvbmRhcnk6YWN0aXZlOmZvY3VzLC5zaG93Pi5idG4tc2Vjb25kYXJ5LmRyb3Bkb3duLXRvZ2dsZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEzMCwxMzgsMTQ1LC41KX0uYnRuLXNlY29uZGFyeS5kaXNhYmxlZCwuYnRuLXNlY29uZGFyeTpkaXNhYmxlZHtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzZjNzU3ZDtib3JkZXItY29sb3I6IzZjNzU3ZH0uYnRuLXN1Y2Nlc3N7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMxOTg3NTQ7Ym9yZGVyLWNvbG9yOiMxOTg3NTR9LmJ0bi1zdWNjZXNzOmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMTU3MzQ3O2JvcmRlci1jb2xvcjojMTQ2YzQzfS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1zdWNjZXNzLC5idG4tc3VjY2Vzczpmb2N1c3tjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzE1NzM0Nztib3JkZXItY29sb3I6IzE0NmM0Mztib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDYwLDE1MywxMTAsLjUpfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tc3VjY2VzcywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1zdWNjZXNzLC5idG4tc3VjY2Vzcy5hY3RpdmUsLmJ0bi1zdWNjZXNzOmFjdGl2ZSwuc2hvdz4uYnRuLXN1Y2Nlc3MuZHJvcGRvd24tdG9nZ2xle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMTQ2YzQzO2JvcmRlci1jb2xvcjojMTM2NTNmfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tc3VjY2Vzczpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1zdWNjZXNzOmZvY3VzLC5idG4tc3VjY2Vzcy5hY3RpdmU6Zm9jdXMsLmJ0bi1zdWNjZXNzOmFjdGl2ZTpmb2N1cywuc2hvdz4uYnRuLXN1Y2Nlc3MuZHJvcGRvd24tdG9nZ2xlOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoNjAsMTUzLDExMCwuNSl9LmJ0bi1zdWNjZXNzLmRpc2FibGVkLC5idG4tc3VjY2VzczpkaXNhYmxlZHtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzE5ODc1NDtib3JkZXItY29sb3I6IzE5ODc1NH0uYnRuLWluZm97Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiMwZGNhZjA7Ym9yZGVyLWNvbG9yOiMwZGNhZjB9LmJ0bi1pbmZvOmhvdmVye2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojMzFkMmYyO2JvcmRlci1jb2xvcjojMjVjZmYyfS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1pbmZvLC5idG4taW5mbzpmb2N1c3tjb2xvcjojMDAwO2JhY2tncm91bmQtY29sb3I6IzMxZDJmMjtib3JkZXItY29sb3I6IzI1Y2ZmMjtib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDExLDE3MiwyMDQsLjUpfS5idG4tY2hlY2s6YWN0aXZlKy5idG4taW5mbywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1pbmZvLC5idG4taW5mby5hY3RpdmUsLmJ0bi1pbmZvOmFjdGl2ZSwuc2hvdz4uYnRuLWluZm8uZHJvcGRvd24tdG9nZ2xle2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojM2RkNWYzO2JvcmRlci1jb2xvcjojMjVjZmYyfS5idG4tY2hlY2s6YWN0aXZlKy5idG4taW5mbzpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1pbmZvOmZvY3VzLC5idG4taW5mby5hY3RpdmU6Zm9jdXMsLmJ0bi1pbmZvOmFjdGl2ZTpmb2N1cywuc2hvdz4uYnRuLWluZm8uZHJvcGRvd24tdG9nZ2xlOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMTEsMTcyLDIwNCwuNSl9LmJ0bi1pbmZvLmRpc2FibGVkLC5idG4taW5mbzpkaXNhYmxlZHtjb2xvcjojMDAwO2JhY2tncm91bmQtY29sb3I6IzBkY2FmMDtib3JkZXItY29sb3I6IzBkY2FmMH0uYnRuLXdhcm5pbmd7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmMxMDc7Ym9yZGVyLWNvbG9yOiNmZmMxMDd9LmJ0bi13YXJuaW5nOmhvdmVye2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojZmZjYTJjO2JvcmRlci1jb2xvcjojZmZjNzIwfS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi13YXJuaW5nLC5idG4td2FybmluZzpmb2N1c3tjb2xvcjojMDAwO2JhY2tncm91bmQtY29sb3I6I2ZmY2EyYztib3JkZXItY29sb3I6I2ZmYzcyMDtib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIxNywxNjQsNiwuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi13YXJuaW5nLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLXdhcm5pbmcsLmJ0bi13YXJuaW5nLmFjdGl2ZSwuYnRuLXdhcm5pbmc6YWN0aXZlLC5zaG93Pi5idG4td2FybmluZy5kcm9wZG93bi10b2dnbGV7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmNkMzk7Ym9yZGVyLWNvbG9yOiNmZmM3MjB9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi13YXJuaW5nOmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLXdhcm5pbmc6Zm9jdXMsLmJ0bi13YXJuaW5nLmFjdGl2ZTpmb2N1cywuYnRuLXdhcm5pbmc6YWN0aXZlOmZvY3VzLC5zaG93Pi5idG4td2FybmluZy5kcm9wZG93bi10b2dnbGU6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgyMTcsMTY0LDYsLjUpfS5idG4td2FybmluZy5kaXNhYmxlZCwuYnRuLXdhcm5pbmc6ZGlzYWJsZWR7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmMxMDc7Ym9yZGVyLWNvbG9yOiNmZmMxMDd9LmJ0bi1kYW5nZXJ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiNkYzM1NDU7Ym9yZGVyLWNvbG9yOiNkYzM1NDV9LmJ0bi1kYW5nZXI6aG92ZXJ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiNiYjJkM2I7Ym9yZGVyLWNvbG9yOiNiMDJhMzd9LmJ0bi1jaGVjazpmb2N1cysuYnRuLWRhbmdlciwuYnRuLWRhbmdlcjpmb2N1c3tjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6I2JiMmQzYjtib3JkZXItY29sb3I6I2IwMmEzNztib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIyNSw4Myw5NywuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1kYW5nZXIsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tZGFuZ2VyLC5idG4tZGFuZ2VyLmFjdGl2ZSwuYnRuLWRhbmdlcjphY3RpdmUsLnNob3c+LmJ0bi1kYW5nZXIuZHJvcGRvd24tdG9nZ2xle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojYjAyYTM3O2JvcmRlci1jb2xvcjojYTUyODM0fS5idG4tY2hlY2s6YWN0aXZlKy5idG4tZGFuZ2VyOmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLWRhbmdlcjpmb2N1cywuYnRuLWRhbmdlci5hY3RpdmU6Zm9jdXMsLmJ0bi1kYW5nZXI6YWN0aXZlOmZvY3VzLC5zaG93Pi5idG4tZGFuZ2VyLmRyb3Bkb3duLXRvZ2dsZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIyNSw4Myw5NywuNSl9LmJ0bi1kYW5nZXIuZGlzYWJsZWQsLmJ0bi1kYW5nZXI6ZGlzYWJsZWR7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiNkYzM1NDU7Ym9yZGVyLWNvbG9yOiNkYzM1NDV9LmJ0bi1saWdodHtjb2xvcjojMDAwO2JhY2tncm91bmQtY29sb3I6I2Y4ZjlmYTtib3JkZXItY29sb3I6I2Y4ZjlmYX0uYnRuLWxpZ2h0OmhvdmVye2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojZjlmYWZiO2JvcmRlci1jb2xvcjojZjlmYWZifS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1saWdodCwuYnRuLWxpZ2h0OmZvY3Vze2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojZjlmYWZiO2JvcmRlci1jb2xvcjojZjlmYWZiO2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjExLDIxMiwyMTMsLjUpfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tbGlnaHQsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tbGlnaHQsLmJ0bi1saWdodC5hY3RpdmUsLmJ0bi1saWdodDphY3RpdmUsLnNob3c+LmJ0bi1saWdodC5kcm9wZG93bi10b2dnbGV7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmOWZhZmI7Ym9yZGVyLWNvbG9yOiNmOWZhZmJ9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1saWdodDpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1saWdodDpmb2N1cywuYnRuLWxpZ2h0LmFjdGl2ZTpmb2N1cywuYnRuLWxpZ2h0OmFjdGl2ZTpmb2N1cywuc2hvdz4uYnRuLWxpZ2h0LmRyb3Bkb3duLXRvZ2dsZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIxMSwyMTIsMjEzLC41KX0uYnRuLWxpZ2h0LmRpc2FibGVkLC5idG4tbGlnaHQ6ZGlzYWJsZWR7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY5ZmE7Ym9yZGVyLWNvbG9yOiNmOGY5ZmF9LmJ0bi1kYXJre2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMjEyNTI5O2JvcmRlci1jb2xvcjojMjEyNTI5fS5idG4tZGFyazpob3Zlcntjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzFjMWYyMztib3JkZXItY29sb3I6IzFhMWUyMX0uYnRuLWNoZWNrOmZvY3VzKy5idG4tZGFyaywuYnRuLWRhcms6Zm9jdXN7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMxYzFmMjM7Ym9yZGVyLWNvbG9yOiMxYTFlMjE7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSg2Niw3MCw3MywuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1kYXJrLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLWRhcmssLmJ0bi1kYXJrLmFjdGl2ZSwuYnRuLWRhcms6YWN0aXZlLC5zaG93Pi5idG4tZGFyay5kcm9wZG93bi10b2dnbGV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMxYTFlMjE7Ym9yZGVyLWNvbG9yOiMxOTFjMWZ9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1kYXJrOmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLWRhcms6Zm9jdXMsLmJ0bi1kYXJrLmFjdGl2ZTpmb2N1cywuYnRuLWRhcms6YWN0aXZlOmZvY3VzLC5zaG93Pi5idG4tZGFyay5kcm9wZG93bi10b2dnbGU6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSg2Niw3MCw3MywuNSl9LmJ0bi1kYXJrLmRpc2FibGVkLC5idG4tZGFyazpkaXNhYmxlZHtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzIxMjUyOTtib3JkZXItY29sb3I6IzIxMjUyOX0uYnRuLW91dGxpbmUtcHJpbWFyeXtjb2xvcjojMGQ2ZWZkO2JvcmRlci1jb2xvcjojMGQ2ZWZkfS5idG4tb3V0bGluZS1wcmltYXJ5OmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO2JvcmRlci1jb2xvcjojMGQ2ZWZkfS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1vdXRsaW5lLXByaW1hcnksLmJ0bi1vdXRsaW5lLXByaW1hcnk6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgxMywxMTAsMjUzLC41KX0uYnRuLWNoZWNrOmFjdGl2ZSsuYnRuLW91dGxpbmUtcHJpbWFyeSwuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLXByaW1hcnksLmJ0bi1vdXRsaW5lLXByaW1hcnkuYWN0aXZlLC5idG4tb3V0bGluZS1wcmltYXJ5LmRyb3Bkb3duLXRvZ2dsZS5zaG93LC5idG4tb3V0bGluZS1wcmltYXJ5OmFjdGl2ZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzBkNmVmZDtib3JkZXItY29sb3I6IzBkNmVmZH0uYnRuLWNoZWNrOmFjdGl2ZSsuYnRuLW91dGxpbmUtcHJpbWFyeTpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLXByaW1hcnk6Zm9jdXMsLmJ0bi1vdXRsaW5lLXByaW1hcnkuYWN0aXZlOmZvY3VzLC5idG4tb3V0bGluZS1wcmltYXJ5LmRyb3Bkb3duLXRvZ2dsZS5zaG93OmZvY3VzLC5idG4tb3V0bGluZS1wcmltYXJ5OmFjdGl2ZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEzLDExMCwyNTMsLjUpfS5idG4tb3V0bGluZS1wcmltYXJ5LmRpc2FibGVkLC5idG4tb3V0bGluZS1wcmltYXJ5OmRpc2FibGVke2NvbG9yOiMwZDZlZmQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uYnRuLW91dGxpbmUtc2Vjb25kYXJ5e2NvbG9yOiM2Yzc1N2Q7Ym9yZGVyLWNvbG9yOiM2Yzc1N2R9LmJ0bi1vdXRsaW5lLXNlY29uZGFyeTpob3Zlcntjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzZjNzU3ZDtib3JkZXItY29sb3I6IzZjNzU3ZH0uYnRuLWNoZWNrOmZvY3VzKy5idG4tb3V0bGluZS1zZWNvbmRhcnksLmJ0bi1vdXRsaW5lLXNlY29uZGFyeTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEwOCwxMTcsMTI1LC41KX0uYnRuLWNoZWNrOmFjdGl2ZSsuYnRuLW91dGxpbmUtc2Vjb25kYXJ5LC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLW91dGxpbmUtc2Vjb25kYXJ5LC5idG4tb3V0bGluZS1zZWNvbmRhcnkuYWN0aXZlLC5idG4tb3V0bGluZS1zZWNvbmRhcnkuZHJvcGRvd24tdG9nZ2xlLnNob3csLmJ0bi1vdXRsaW5lLXNlY29uZGFyeTphY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiM2Yzc1N2Q7Ym9yZGVyLWNvbG9yOiM2Yzc1N2R9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLXNlY29uZGFyeTpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLXNlY29uZGFyeTpmb2N1cywuYnRuLW91dGxpbmUtc2Vjb25kYXJ5LmFjdGl2ZTpmb2N1cywuYnRuLW91dGxpbmUtc2Vjb25kYXJ5LmRyb3Bkb3duLXRvZ2dsZS5zaG93OmZvY3VzLC5idG4tb3V0bGluZS1zZWNvbmRhcnk6YWN0aXZlOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMTA4LDExNywxMjUsLjUpfS5idG4tb3V0bGluZS1zZWNvbmRhcnkuZGlzYWJsZWQsLmJ0bi1vdXRsaW5lLXNlY29uZGFyeTpkaXNhYmxlZHtjb2xvcjojNmM3NTdkO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LmJ0bi1vdXRsaW5lLXN1Y2Nlc3N7Y29sb3I6IzE5ODc1NDtib3JkZXItY29sb3I6IzE5ODc1NH0uYnRuLW91dGxpbmUtc3VjY2Vzczpob3Zlcntjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzE5ODc1NDtib3JkZXItY29sb3I6IzE5ODc1NH0uYnRuLWNoZWNrOmZvY3VzKy5idG4tb3V0bGluZS1zdWNjZXNzLC5idG4tb3V0bGluZS1zdWNjZXNzOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjUsMTM1LDg0LC41KX0uYnRuLWNoZWNrOmFjdGl2ZSsuYnRuLW91dGxpbmUtc3VjY2VzcywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLXN1Y2Nlc3MsLmJ0bi1vdXRsaW5lLXN1Y2Nlc3MuYWN0aXZlLC5idG4tb3V0bGluZS1zdWNjZXNzLmRyb3Bkb3duLXRvZ2dsZS5zaG93LC5idG4tb3V0bGluZS1zdWNjZXNzOmFjdGl2ZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzE5ODc1NDtib3JkZXItY29sb3I6IzE5ODc1NH0uYnRuLWNoZWNrOmFjdGl2ZSsuYnRuLW91dGxpbmUtc3VjY2Vzczpmb2N1cywuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLXN1Y2Nlc3M6Zm9jdXMsLmJ0bi1vdXRsaW5lLXN1Y2Nlc3MuYWN0aXZlOmZvY3VzLC5idG4tb3V0bGluZS1zdWNjZXNzLmRyb3Bkb3duLXRvZ2dsZS5zaG93OmZvY3VzLC5idG4tb3V0bGluZS1zdWNjZXNzOmFjdGl2ZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDI1LDEzNSw4NCwuNSl9LmJ0bi1vdXRsaW5lLXN1Y2Nlc3MuZGlzYWJsZWQsLmJ0bi1vdXRsaW5lLXN1Y2Nlc3M6ZGlzYWJsZWR7Y29sb3I6IzE5ODc1NDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5idG4tb3V0bGluZS1pbmZve2NvbG9yOiMwZGNhZjA7Ym9yZGVyLWNvbG9yOiMwZGNhZjB9LmJ0bi1vdXRsaW5lLWluZm86aG92ZXJ7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiMwZGNhZjA7Ym9yZGVyLWNvbG9yOiMwZGNhZjB9LmJ0bi1jaGVjazpmb2N1cysuYnRuLW91dGxpbmUtaW5mbywuYnRuLW91dGxpbmUtaW5mbzpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDEzLDIwMiwyNDAsLjUpfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tb3V0bGluZS1pbmZvLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLW91dGxpbmUtaW5mbywuYnRuLW91dGxpbmUtaW5mby5hY3RpdmUsLmJ0bi1vdXRsaW5lLWluZm8uZHJvcGRvd24tdG9nZ2xlLnNob3csLmJ0bi1vdXRsaW5lLWluZm86YWN0aXZle2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojMGRjYWYwO2JvcmRlci1jb2xvcjojMGRjYWYwfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tb3V0bGluZS1pbmZvOmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLW91dGxpbmUtaW5mbzpmb2N1cywuYnRuLW91dGxpbmUtaW5mby5hY3RpdmU6Zm9jdXMsLmJ0bi1vdXRsaW5lLWluZm8uZHJvcGRvd24tdG9nZ2xlLnNob3c6Zm9jdXMsLmJ0bi1vdXRsaW5lLWluZm86YWN0aXZlOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMTMsMjAyLDI0MCwuNSl9LmJ0bi1vdXRsaW5lLWluZm8uZGlzYWJsZWQsLmJ0bi1vdXRsaW5lLWluZm86ZGlzYWJsZWR7Y29sb3I6IzBkY2FmMDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5idG4tb3V0bGluZS13YXJuaW5ne2NvbG9yOiNmZmMxMDc7Ym9yZGVyLWNvbG9yOiNmZmMxMDd9LmJ0bi1vdXRsaW5lLXdhcm5pbmc6aG92ZXJ7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmMxMDc7Ym9yZGVyLWNvbG9yOiNmZmMxMDd9LmJ0bi1jaGVjazpmb2N1cysuYnRuLW91dGxpbmUtd2FybmluZywuYnRuLW91dGxpbmUtd2FybmluZzpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDI1NSwxOTMsNywuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLXdhcm5pbmcsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tb3V0bGluZS13YXJuaW5nLC5idG4tb3V0bGluZS13YXJuaW5nLmFjdGl2ZSwuYnRuLW91dGxpbmUtd2FybmluZy5kcm9wZG93bi10b2dnbGUuc2hvdywuYnRuLW91dGxpbmUtd2FybmluZzphY3RpdmV7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmMxMDc7Ym9yZGVyLWNvbG9yOiNmZmMxMDd9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLXdhcm5pbmc6Zm9jdXMsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tb3V0bGluZS13YXJuaW5nOmZvY3VzLC5idG4tb3V0bGluZS13YXJuaW5nLmFjdGl2ZTpmb2N1cywuYnRuLW91dGxpbmUtd2FybmluZy5kcm9wZG93bi10b2dnbGUuc2hvdzpmb2N1cywuYnRuLW91dGxpbmUtd2FybmluZzphY3RpdmU6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgyNTUsMTkzLDcsLjUpfS5idG4tb3V0bGluZS13YXJuaW5nLmRpc2FibGVkLC5idG4tb3V0bGluZS13YXJuaW5nOmRpc2FibGVke2NvbG9yOiNmZmMxMDc7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uYnRuLW91dGxpbmUtZGFuZ2Vye2NvbG9yOiNkYzM1NDU7Ym9yZGVyLWNvbG9yOiNkYzM1NDV9LmJ0bi1vdXRsaW5lLWRhbmdlcjpob3Zlcntjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6I2RjMzU0NTtib3JkZXItY29sb3I6I2RjMzU0NX0uYnRuLWNoZWNrOmZvY3VzKy5idG4tb3V0bGluZS1kYW5nZXIsLmJ0bi1vdXRsaW5lLWRhbmdlcjpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIyMCw1Myw2OSwuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLWRhbmdlciwuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLWRhbmdlciwuYnRuLW91dGxpbmUtZGFuZ2VyLmFjdGl2ZSwuYnRuLW91dGxpbmUtZGFuZ2VyLmRyb3Bkb3duLXRvZ2dsZS5zaG93LC5idG4tb3V0bGluZS1kYW5nZXI6YWN0aXZle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojZGMzNTQ1O2JvcmRlci1jb2xvcjojZGMzNTQ1fS5idG4tY2hlY2s6YWN0aXZlKy5idG4tb3V0bGluZS1kYW5nZXI6Zm9jdXMsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tb3V0bGluZS1kYW5nZXI6Zm9jdXMsLmJ0bi1vdXRsaW5lLWRhbmdlci5hY3RpdmU6Zm9jdXMsLmJ0bi1vdXRsaW5lLWRhbmdlci5kcm9wZG93bi10b2dnbGUuc2hvdzpmb2N1cywuYnRuLW91dGxpbmUtZGFuZ2VyOmFjdGl2ZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDIyMCw1Myw2OSwuNSl9LmJ0bi1vdXRsaW5lLWRhbmdlci5kaXNhYmxlZCwuYnRuLW91dGxpbmUtZGFuZ2VyOmRpc2FibGVke2NvbG9yOiNkYzM1NDU7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uYnRuLW91dGxpbmUtbGlnaHR7Y29sb3I6I2Y4ZjlmYTtib3JkZXItY29sb3I6I2Y4ZjlmYX0uYnRuLW91dGxpbmUtbGlnaHQ6aG92ZXJ7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY5ZmE7Ym9yZGVyLWNvbG9yOiNmOGY5ZmF9LmJ0bi1jaGVjazpmb2N1cysuYnRuLW91dGxpbmUtbGlnaHQsLmJ0bi1vdXRsaW5lLWxpZ2h0OmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMjQ4LDI0OSwyNTAsLjUpfS5idG4tY2hlY2s6YWN0aXZlKy5idG4tb3V0bGluZS1saWdodCwuYnRuLWNoZWNrOmNoZWNrZWQrLmJ0bi1vdXRsaW5lLWxpZ2h0LC5idG4tb3V0bGluZS1saWdodC5hY3RpdmUsLmJ0bi1vdXRsaW5lLWxpZ2h0LmRyb3Bkb3duLXRvZ2dsZS5zaG93LC5idG4tb3V0bGluZS1saWdodDphY3RpdmV7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY5ZmE7Ym9yZGVyLWNvbG9yOiNmOGY5ZmF9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLWxpZ2h0OmZvY3VzLC5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLW91dGxpbmUtbGlnaHQ6Zm9jdXMsLmJ0bi1vdXRsaW5lLWxpZ2h0LmFjdGl2ZTpmb2N1cywuYnRuLW91dGxpbmUtbGlnaHQuZHJvcGRvd24tdG9nZ2xlLnNob3c6Zm9jdXMsLmJ0bi1vdXRsaW5lLWxpZ2h0OmFjdGl2ZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIC4yNXJlbSByZ2JhKDI0OCwyNDksMjUwLC41KX0uYnRuLW91dGxpbmUtbGlnaHQuZGlzYWJsZWQsLmJ0bi1vdXRsaW5lLWxpZ2h0OmRpc2FibGVke2NvbG9yOiNmOGY5ZmE7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uYnRuLW91dGxpbmUtZGFya3tjb2xvcjojMjEyNTI5O2JvcmRlci1jb2xvcjojMjEyNTI5fS5idG4tb3V0bGluZS1kYXJrOmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMjEyNTI5O2JvcmRlci1jb2xvcjojMjEyNTI5fS5idG4tY2hlY2s6Zm9jdXMrLmJ0bi1vdXRsaW5lLWRhcmssLmJ0bi1vdXRsaW5lLWRhcms6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgzMywzNyw0MSwuNSl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLWRhcmssLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tb3V0bGluZS1kYXJrLC5idG4tb3V0bGluZS1kYXJrLmFjdGl2ZSwuYnRuLW91dGxpbmUtZGFyay5kcm9wZG93bi10b2dnbGUuc2hvdywuYnRuLW91dGxpbmUtZGFyazphY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMyMTI1Mjk7Ym9yZGVyLWNvbG9yOiMyMTI1Mjl9LmJ0bi1jaGVjazphY3RpdmUrLmJ0bi1vdXRsaW5lLWRhcms6Zm9jdXMsLmJ0bi1jaGVjazpjaGVja2VkKy5idG4tb3V0bGluZS1kYXJrOmZvY3VzLC5idG4tb3V0bGluZS1kYXJrLmFjdGl2ZTpmb2N1cywuYnRuLW91dGxpbmUtZGFyay5kcm9wZG93bi10b2dnbGUuc2hvdzpmb2N1cywuYnRuLW91dGxpbmUtZGFyazphY3RpdmU6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgzMywzNyw0MSwuNSl9LmJ0bi1vdXRsaW5lLWRhcmsuZGlzYWJsZWQsLmJ0bi1vdXRsaW5lLWRhcms6ZGlzYWJsZWR7Y29sb3I6IzIxMjUyOTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5idG4tbGlua3tmb250LXdlaWdodDo0MDA7Y29sb3I6IzBkNmVmZDt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5idG4tbGluazpob3Zlcntjb2xvcjojMGE1OGNhfS5idG4tbGluay5kaXNhYmxlZCwuYnRuLWxpbms6ZGlzYWJsZWR7Y29sb3I6IzZjNzU3ZH0uYnRuLWdyb3VwLWxnPi5idG4sLmJ0bi1sZ3twYWRkaW5nOi41cmVtIDFyZW07Zm9udC1zaXplOjEuMjVyZW07Ym9yZGVyLXJhZGl1czouM3JlbX0uYnRuLWdyb3VwLXNtPi5idG4sLmJ0bi1zbXtwYWRkaW5nOi4yNXJlbSAuNXJlbTtmb250LXNpemU6Ljg3NXJlbTtib3JkZXItcmFkaXVzOi4ycmVtfS5mYWRle3RyYW5zaXRpb246b3BhY2l0eSAuMTVzIGxpbmVhcn1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuZmFkZXt0cmFuc2l0aW9uOm5vbmV9fS5mYWRlOm5vdCguc2hvdyl7b3BhY2l0eTowfS5jb2xsYXBzZTpub3QoLnNob3cpe2Rpc3BsYXk6bm9uZX0uY29sbGFwc2luZ3toZWlnaHQ6MDtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpoZWlnaHQgLjM1cyBlYXNlfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5jb2xsYXBzaW5ne3RyYW5zaXRpb246bm9uZX19LmRyb3Bkb3duLC5kcm9wZW5kLC5kcm9wc3RhcnQsLmRyb3B1cHtwb3NpdGlvbjpyZWxhdGl2ZX0uZHJvcGRvd24tdG9nZ2xle3doaXRlLXNwYWNlOm5vd3JhcH0uZHJvcGRvd24tdG9nZ2xlOjphZnRlcntkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tbGVmdDouMjU1ZW07dmVydGljYWwtYWxpZ246LjI1NWVtO2NvbnRlbnQ6IiI7Ym9yZGVyLXRvcDouM2VtIHNvbGlkO2JvcmRlci1yaWdodDouM2VtIHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b206MDtib3JkZXItbGVmdDouM2VtIHNvbGlkIHRyYW5zcGFyZW50fS5kcm9wZG93bi10b2dnbGU6ZW1wdHk6OmFmdGVye21hcmdpbi1sZWZ0OjB9LmRyb3Bkb3duLW1lbnV7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDAwO2Rpc3BsYXk6bm9uZTttaW4td2lkdGg6MTByZW07cGFkZGluZzouNXJlbSAwO21hcmdpbjowO2ZvbnQtc2l6ZToxcmVtO2NvbG9yOiMyMTI1Mjk7dGV4dC1hbGlnbjpsZWZ0O2xpc3Qtc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7YmFja2dyb3VuZC1jbGlwOnBhZGRpbmctYm94O2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMTUpO2JvcmRlci1yYWRpdXM6LjI1cmVtfS5kcm9wZG93bi1tZW51W2RhdGEtYnMtcG9wcGVyXXt0b3A6MTAwJTtsZWZ0OjA7bWFyZ2luLXRvcDouMTI1cmVtfS5kcm9wZG93bi1tZW51LXN0YXJ0ey0tYnMtcG9zaXRpb246c3RhcnR9LmRyb3Bkb3duLW1lbnUtc3RhcnRbZGF0YS1icy1wb3BwZXJde3JpZ2h0OmF1dG87bGVmdDowfS5kcm9wZG93bi1tZW51LWVuZHstLWJzLXBvc2l0aW9uOmVuZH0uZHJvcGRvd24tbWVudS1lbmRbZGF0YS1icy1wb3BwZXJde3JpZ2h0OjA7bGVmdDphdXRvfUBtZWRpYSAobWluLXdpZHRoOjU3NnB4KXsuZHJvcGRvd24tbWVudS1zbS1zdGFydHstLWJzLXBvc2l0aW9uOnN0YXJ0fS5kcm9wZG93bi1tZW51LXNtLXN0YXJ0W2RhdGEtYnMtcG9wcGVyXXtyaWdodDphdXRvO2xlZnQ6MH0uZHJvcGRvd24tbWVudS1zbS1lbmR7LS1icy1wb3NpdGlvbjplbmR9LmRyb3Bkb3duLW1lbnUtc20tZW5kW2RhdGEtYnMtcG9wcGVyXXtyaWdodDowO2xlZnQ6YXV0b319QG1lZGlhIChtaW4td2lkdGg6NzY4cHgpey5kcm9wZG93bi1tZW51LW1kLXN0YXJ0ey0tYnMtcG9zaXRpb246c3RhcnR9LmRyb3Bkb3duLW1lbnUtbWQtc3RhcnRbZGF0YS1icy1wb3BwZXJde3JpZ2h0OmF1dG87bGVmdDowfS5kcm9wZG93bi1tZW51LW1kLWVuZHstLWJzLXBvc2l0aW9uOmVuZH0uZHJvcGRvd24tbWVudS1tZC1lbmRbZGF0YS1icy1wb3BwZXJde3JpZ2h0OjA7bGVmdDphdXRvfX1AbWVkaWEgKG1pbi13aWR0aDo5OTJweCl7LmRyb3Bkb3duLW1lbnUtbGctc3RhcnR7LS1icy1wb3NpdGlvbjpzdGFydH0uZHJvcGRvd24tbWVudS1sZy1zdGFydFtkYXRhLWJzLXBvcHBlcl17cmlnaHQ6YXV0bztsZWZ0OjB9LmRyb3Bkb3duLW1lbnUtbGctZW5key0tYnMtcG9zaXRpb246ZW5kfS5kcm9wZG93bi1tZW51LWxnLWVuZFtkYXRhLWJzLXBvcHBlcl17cmlnaHQ6MDtsZWZ0OmF1dG99fUBtZWRpYSAobWluLXdpZHRoOjEyMDBweCl7LmRyb3Bkb3duLW1lbnUteGwtc3RhcnR7LS1icy1wb3NpdGlvbjpzdGFydH0uZHJvcGRvd24tbWVudS14bC1zdGFydFtkYXRhLWJzLXBvcHBlcl17cmlnaHQ6YXV0bztsZWZ0OjB9LmRyb3Bkb3duLW1lbnUteGwtZW5key0tYnMtcG9zaXRpb246ZW5kfS5kcm9wZG93bi1tZW51LXhsLWVuZFtkYXRhLWJzLXBvcHBlcl17cmlnaHQ6MDtsZWZ0OmF1dG99fUBtZWRpYSAobWluLXdpZHRoOjE0MDBweCl7LmRyb3Bkb3duLW1lbnUteHhsLXN0YXJ0ey0tYnMtcG9zaXRpb246c3RhcnR9LmRyb3Bkb3duLW1lbnUteHhsLXN0YXJ0W2RhdGEtYnMtcG9wcGVyXXtyaWdodDphdXRvO2xlZnQ6MH0uZHJvcGRvd24tbWVudS14eGwtZW5key0tYnMtcG9zaXRpb246ZW5kfS5kcm9wZG93bi1tZW51LXh4bC1lbmRbZGF0YS1icy1wb3BwZXJde3JpZ2h0OjA7bGVmdDphdXRvfX0uZHJvcHVwIC5kcm9wZG93bi1tZW51W2RhdGEtYnMtcG9wcGVyXXt0b3A6YXV0bztib3R0b206MTAwJTttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTouMTI1cmVtfS5kcm9wdXAgLmRyb3Bkb3duLXRvZ2dsZTo6YWZ0ZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWxlZnQ6LjI1NWVtO3ZlcnRpY2FsLWFsaWduOi4yNTVlbTtjb250ZW50OiIiO2JvcmRlci10b3A6MDtib3JkZXItcmlnaHQ6LjNlbSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOi4zZW0gc29saWQ7Ym9yZGVyLWxlZnQ6LjNlbSBzb2xpZCB0cmFuc3BhcmVudH0uZHJvcHVwIC5kcm9wZG93bi10b2dnbGU6ZW1wdHk6OmFmdGVye21hcmdpbi1sZWZ0OjB9LmRyb3BlbmQgLmRyb3Bkb3duLW1lbnVbZGF0YS1icy1wb3BwZXJde3RvcDowO3JpZ2h0OmF1dG87bGVmdDoxMDAlO21hcmdpbi10b3A6MDttYXJnaW4tbGVmdDouMTI1cmVtfS5kcm9wZW5kIC5kcm9wZG93bi10b2dnbGU6OmFmdGVye2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0Oi4yNTVlbTt2ZXJ0aWNhbC1hbGlnbjouMjU1ZW07Y29udGVudDoiIjtib3JkZXItdG9wOi4zZW0gc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLWJvdHRvbTouM2VtIHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1sZWZ0Oi4zZW0gc29saWR9LmRyb3BlbmQgLmRyb3Bkb3duLXRvZ2dsZTplbXB0eTo6YWZ0ZXJ7bWFyZ2luLWxlZnQ6MH0uZHJvcGVuZCAuZHJvcGRvd24tdG9nZ2xlOjphZnRlcnt2ZXJ0aWNhbC1hbGlnbjowfS5kcm9wc3RhcnQgLmRyb3Bkb3duLW1lbnVbZGF0YS1icy1wb3BwZXJde3RvcDowO3JpZ2h0OjEwMCU7bGVmdDphdXRvO21hcmdpbi10b3A6MDttYXJnaW4tcmlnaHQ6LjEyNXJlbX0uZHJvcHN0YXJ0IC5kcm9wZG93bi10b2dnbGU6OmFmdGVye2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0Oi4yNTVlbTt2ZXJ0aWNhbC1hbGlnbjouMjU1ZW07Y29udGVudDoiIn0uZHJvcHN0YXJ0IC5kcm9wZG93bi10b2dnbGU6OmFmdGVye2Rpc3BsYXk6bm9uZX0uZHJvcHN0YXJ0IC5kcm9wZG93bi10b2dnbGU6OmJlZm9yZXtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6LjI1NWVtO3ZlcnRpY2FsLWFsaWduOi4yNTVlbTtjb250ZW50OiIiO2JvcmRlci10b3A6LjNlbSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6LjNlbSBzb2xpZDtib3JkZXItYm90dG9tOi4zZW0gc29saWQgdHJhbnNwYXJlbnR9LmRyb3BzdGFydCAuZHJvcGRvd24tdG9nZ2xlOmVtcHR5OjphZnRlcnttYXJnaW4tbGVmdDowfS5kcm9wc3RhcnQgLmRyb3Bkb3duLXRvZ2dsZTo6YmVmb3Jle3ZlcnRpY2FsLWFsaWduOjB9LmRyb3Bkb3duLWRpdmlkZXJ7aGVpZ2h0OjA7bWFyZ2luOi41cmVtIDA7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlci10b3A6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjE1KX0uZHJvcGRvd24taXRlbXtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7cGFkZGluZzouMjVyZW0gMXJlbTtjbGVhcjpib3RoO2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjojMjEyNTI5O3RleHQtYWxpZ246aW5oZXJpdDt0ZXh0LWRlY29yYXRpb246bm9uZTt3aGl0ZS1zcGFjZTpub3dyYXA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXI6MH0uZHJvcGRvd24taXRlbTpmb2N1cywuZHJvcGRvd24taXRlbTpob3Zlcntjb2xvcjojMWUyMTI1O2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZn0uZHJvcGRvd24taXRlbS5hY3RpdmUsLmRyb3Bkb3duLWl0ZW06YWN0aXZle2NvbG9yOiNmZmY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkfS5kcm9wZG93bi1pdGVtLmRpc2FibGVkLC5kcm9wZG93bi1pdGVtOmRpc2FibGVke2NvbG9yOiNhZGI1YmQ7cG9pbnRlci1ldmVudHM6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5kcm9wZG93bi1tZW51LnNob3d7ZGlzcGxheTpibG9ja30uZHJvcGRvd24taGVhZGVye2Rpc3BsYXk6YmxvY2s7cGFkZGluZzouNXJlbSAxcmVtO21hcmdpbi1ib3R0b206MDtmb250LXNpemU6Ljg3NXJlbTtjb2xvcjojNmM3NTdkO3doaXRlLXNwYWNlOm5vd3JhcH0uZHJvcGRvd24taXRlbS10ZXh0e2Rpc3BsYXk6YmxvY2s7cGFkZGluZzouMjVyZW0gMXJlbTtjb2xvcjojMjEyNTI5fS5kcm9wZG93bi1tZW51LWRhcmt7Y29sb3I6I2RlZTJlNjtiYWNrZ3JvdW5kLWNvbG9yOiMzNDNhNDA7Ym9yZGVyLWNvbG9yOnJnYmEoMCwwLDAsLjE1KX0uZHJvcGRvd24tbWVudS1kYXJrIC5kcm9wZG93bi1pdGVte2NvbG9yOiNkZWUyZTZ9LmRyb3Bkb3duLW1lbnUtZGFyayAuZHJvcGRvd24taXRlbTpmb2N1cywuZHJvcGRvd24tbWVudS1kYXJrIC5kcm9wZG93bi1pdGVtOmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC4xNSl9LmRyb3Bkb3duLW1lbnUtZGFyayAuZHJvcGRvd24taXRlbS5hY3RpdmUsLmRyb3Bkb3duLW1lbnUtZGFyayAuZHJvcGRvd24taXRlbTphY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwZDZlZmR9LmRyb3Bkb3duLW1lbnUtZGFyayAuZHJvcGRvd24taXRlbS5kaXNhYmxlZCwuZHJvcGRvd24tbWVudS1kYXJrIC5kcm9wZG93bi1pdGVtOmRpc2FibGVke2NvbG9yOiNhZGI1YmR9LmRyb3Bkb3duLW1lbnUtZGFyayAuZHJvcGRvd24tZGl2aWRlcntib3JkZXItY29sb3I6cmdiYSgwLDAsMCwuMTUpfS5kcm9wZG93bi1tZW51LWRhcmsgLmRyb3Bkb3duLWl0ZW0tdGV4dHtjb2xvcjojZGVlMmU2fS5kcm9wZG93bi1tZW51LWRhcmsgLmRyb3Bkb3duLWhlYWRlcntjb2xvcjojYWRiNWJkfS5idG4tZ3JvdXAsLmJ0bi1ncm91cC12ZXJ0aWNhbHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1mbGV4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0uYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4sLmJ0bi1ncm91cD4uYnRue3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXg6MSAxIGF1dG99LmJ0bi1ncm91cC12ZXJ0aWNhbD4uYnRuLWNoZWNrOmNoZWNrZWQrLmJ0biwuYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4tY2hlY2s6Zm9jdXMrLmJ0biwuYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4uYWN0aXZlLC5idG4tZ3JvdXAtdmVydGljYWw+LmJ0bjphY3RpdmUsLmJ0bi1ncm91cC12ZXJ0aWNhbD4uYnRuOmZvY3VzLC5idG4tZ3JvdXAtdmVydGljYWw+LmJ0bjpob3ZlciwuYnRuLWdyb3VwPi5idG4tY2hlY2s6Y2hlY2tlZCsuYnRuLC5idG4tZ3JvdXA+LmJ0bi1jaGVjazpmb2N1cysuYnRuLC5idG4tZ3JvdXA+LmJ0bi5hY3RpdmUsLmJ0bi1ncm91cD4uYnRuOmFjdGl2ZSwuYnRuLWdyb3VwPi5idG46Zm9jdXMsLmJ0bi1ncm91cD4uYnRuOmhvdmVye3otaW5kZXg6MX0uYnRuLXRvb2xiYXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5idG4tdG9vbGJhciAuaW5wdXQtZ3JvdXB7d2lkdGg6YXV0b30uYnRuLWdyb3VwPi5idG4tZ3JvdXA6bm90KDpmaXJzdC1jaGlsZCksLmJ0bi1ncm91cD4uYnRuOm5vdCg6Zmlyc3QtY2hpbGQpe21hcmdpbi1sZWZ0Oi0xcHh9LmJ0bi1ncm91cD4uYnRuLWdyb3VwOm5vdCg6bGFzdC1jaGlsZCk+LmJ0biwuYnRuLWdyb3VwPi5idG46bm90KDpsYXN0LWNoaWxkKTpub3QoLmRyb3Bkb3duLXRvZ2dsZSl7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5idG4tZ3JvdXA+LmJ0bi1ncm91cDpub3QoOmZpcnN0LWNoaWxkKT4uYnRuLC5idG4tZ3JvdXA+LmJ0bjpudGgtY2hpbGQobiszKSwuYnRuLWdyb3VwPjpub3QoLmJ0bi1jaGVjaykrLmJ0bntib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowfS5kcm9wZG93bi10b2dnbGUtc3BsaXR7cGFkZGluZy1yaWdodDouNTYyNXJlbTtwYWRkaW5nLWxlZnQ6LjU2MjVyZW19LmRyb3Bkb3duLXRvZ2dsZS1zcGxpdDo6YWZ0ZXIsLmRyb3BlbmQgLmRyb3Bkb3duLXRvZ2dsZS1zcGxpdDo6YWZ0ZXIsLmRyb3B1cCAuZHJvcGRvd24tdG9nZ2xlLXNwbGl0OjphZnRlcnttYXJnaW4tbGVmdDowfS5kcm9wc3RhcnQgLmRyb3Bkb3duLXRvZ2dsZS1zcGxpdDo6YmVmb3Jle21hcmdpbi1yaWdodDowfS5idG4tZ3JvdXAtc20+LmJ0bisuZHJvcGRvd24tdG9nZ2xlLXNwbGl0LC5idG4tc20rLmRyb3Bkb3duLXRvZ2dsZS1zcGxpdHtwYWRkaW5nLXJpZ2h0Oi4zNzVyZW07cGFkZGluZy1sZWZ0Oi4zNzVyZW19LmJ0bi1ncm91cC1sZz4uYnRuKy5kcm9wZG93bi10b2dnbGUtc3BsaXQsLmJ0bi1sZysuZHJvcGRvd24tdG9nZ2xlLXNwbGl0e3BhZGRpbmctcmlnaHQ6Ljc1cmVtO3BhZGRpbmctbGVmdDouNzVyZW19LmJ0bi1ncm91cC12ZXJ0aWNhbHtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6ZmxleC1zdGFydDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5idG4tZ3JvdXAtdmVydGljYWw+LmJ0biwuYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4tZ3JvdXB7d2lkdGg6MTAwJX0uYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4tZ3JvdXA6bm90KDpmaXJzdC1jaGlsZCksLmJ0bi1ncm91cC12ZXJ0aWNhbD4uYnRuOm5vdCg6Zmlyc3QtY2hpbGQpe21hcmdpbi10b3A6LTFweH0uYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4tZ3JvdXA6bm90KDpsYXN0LWNoaWxkKT4uYnRuLC5idG4tZ3JvdXAtdmVydGljYWw+LmJ0bjpub3QoOmxhc3QtY2hpbGQpOm5vdCguZHJvcGRvd24tdG9nZ2xlKXtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0uYnRuLWdyb3VwLXZlcnRpY2FsPi5idG4tZ3JvdXA6bm90KDpmaXJzdC1jaGlsZCk+LmJ0biwuYnRuLWdyb3VwLXZlcnRpY2FsPi5idG5+LmJ0bntib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH0ubmF2e2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtwYWRkaW5nLWxlZnQ6MDttYXJnaW4tYm90dG9tOjA7bGlzdC1zdHlsZTpub25lfS5uYXYtbGlua3tkaXNwbGF5OmJsb2NrO3BhZGRpbmc6LjVyZW0gMXJlbTtjb2xvcjojMGQ2ZWZkO3RleHQtZGVjb3JhdGlvbjpub25lO3RyYW5zaXRpb246Y29sb3IgLjE1cyBlYXNlLWluLW91dCxiYWNrZ3JvdW5kLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYm9yZGVyLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXR9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7Lm5hdi1saW5re3RyYW5zaXRpb246bm9uZX19Lm5hdi1saW5rOmZvY3VzLC5uYXYtbGluazpob3Zlcntjb2xvcjojMGE1OGNhfS5uYXYtbGluay5kaXNhYmxlZHtjb2xvcjojNmM3NTdkO3BvaW50ZXItZXZlbnRzOm5vbmU7Y3Vyc29yOmRlZmF1bHR9Lm5hdi10YWJze2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZWUyZTZ9Lm5hdi10YWJzIC5uYXYtbGlua3ttYXJnaW4tYm90dG9tOi0xcHg7YmFja2dyb3VuZDowIDA7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOi4yNXJlbTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czouMjVyZW19Lm5hdi10YWJzIC5uYXYtbGluazpmb2N1cywubmF2LXRhYnMgLm5hdi1saW5rOmhvdmVye2JvcmRlci1jb2xvcjojZTllY2VmICNlOWVjZWYgI2RlZTJlNjtpc29sYXRpb246aXNvbGF0ZX0ubmF2LXRhYnMgLm5hdi1saW5rLmRpc2FibGVke2NvbG9yOiM2Yzc1N2Q7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnR9Lm5hdi10YWJzIC5uYXYtaXRlbS5zaG93IC5uYXYtbGluaywubmF2LXRhYnMgLm5hdi1saW5rLmFjdGl2ZXtjb2xvcjojNDk1MDU3O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItY29sb3I6I2RlZTJlNiAjZGVlMmU2ICNmZmZ9Lm5hdi10YWJzIC5kcm9wZG93bi1tZW51e21hcmdpbi10b3A6LTFweDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH0ubmF2LXBpbGxzIC5uYXYtbGlua3tiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtib3JkZXItcmFkaXVzOi4yNXJlbX0ubmF2LXBpbGxzIC5uYXYtbGluay5hY3RpdmUsLm5hdi1waWxscyAuc2hvdz4ubmF2LWxpbmt7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwZDZlZmR9Lm5hdi1maWxsIC5uYXYtaXRlbSwubmF2LWZpbGw+Lm5hdi1saW5re2ZsZXg6MSAxIGF1dG87dGV4dC1hbGlnbjpjZW50ZXJ9Lm5hdi1qdXN0aWZpZWQgLm5hdi1pdGVtLC5uYXYtanVzdGlmaWVkPi5uYXYtbGlua3tmbGV4LWJhc2lzOjA7ZmxleC1ncm93OjE7dGV4dC1hbGlnbjpjZW50ZXJ9Lm5hdi1maWxsIC5uYXYtaXRlbSAubmF2LWxpbmssLm5hdi1qdXN0aWZpZWQgLm5hdi1pdGVtIC5uYXYtbGlua3t3aWR0aDoxMDAlfS50YWItY29udGVudD4udGFiLXBhbmV7ZGlzcGxheTpub25lfS50YWItY29udGVudD4uYWN0aXZle2Rpc3BsYXk6YmxvY2t9Lm5hdmJhcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmctdG9wOi41cmVtO3BhZGRpbmctYm90dG9tOi41cmVtfS5uYXZiYXI+LmNvbnRhaW5lciwubmF2YmFyPi5jb250YWluZXItZmx1aWQsLm5hdmJhcj4uY29udGFpbmVyLWxnLC5uYXZiYXI+LmNvbnRhaW5lci1tZCwubmF2YmFyPi5jb250YWluZXItc20sLm5hdmJhcj4uY29udGFpbmVyLXhsLC5uYXZiYXI+LmNvbnRhaW5lci14eGx7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDppbmhlcml0O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0ubmF2YmFyLWJyYW5ke3BhZGRpbmctdG9wOi4zMTI1cmVtO3BhZGRpbmctYm90dG9tOi4zMTI1cmVtO21hcmdpbi1yaWdodDoxcmVtO2ZvbnQtc2l6ZToxLjI1cmVtO3RleHQtZGVjb3JhdGlvbjpub25lO3doaXRlLXNwYWNlOm5vd3JhcH0ubmF2YmFyLW5hdntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmctbGVmdDowO21hcmdpbi1ib3R0b206MDtsaXN0LXN0eWxlOm5vbmV9Lm5hdmJhci1uYXYgLm5hdi1saW5re3BhZGRpbmctcmlnaHQ6MDtwYWRkaW5nLWxlZnQ6MH0ubmF2YmFyLW5hdiAuZHJvcGRvd24tbWVudXtwb3NpdGlvbjpzdGF0aWN9Lm5hdmJhci10ZXh0e3BhZGRpbmctdG9wOi41cmVtO3BhZGRpbmctYm90dG9tOi41cmVtfS5uYXZiYXItY29sbGFwc2V7ZmxleC1iYXNpczoxMDAlO2ZsZXgtZ3JvdzoxO2FsaWduLWl0ZW1zOmNlbnRlcn0ubmF2YmFyLXRvZ2dsZXJ7cGFkZGluZzouMjVyZW0gLjc1cmVtO2ZvbnQtc2l6ZToxLjI1cmVtO2xpbmUtaGVpZ2h0OjE7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yYWRpdXM6LjI1cmVtO3RyYW5zaXRpb246Ym94LXNoYWRvdyAuMTVzIGVhc2UtaW4tb3V0fUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5uYXZiYXItdG9nZ2xlcnt0cmFuc2l0aW9uOm5vbmV9fS5uYXZiYXItdG9nZ2xlcjpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZX0ubmF2YmFyLXRvZ2dsZXI6Zm9jdXN7dGV4dC1kZWNvcmF0aW9uOm5vbmU7b3V0bGluZTowO2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtfS5uYXZiYXItdG9nZ2xlci1pY29ue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjEuNWVtO2hlaWdodDoxLjVlbTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JhY2tncm91bmQtc2l6ZToxMDAlfS5uYXZiYXItbmF2LXNjcm9sbHttYXgtaGVpZ2h0OnZhcigtLWJzLXNjcm9sbC1oZWlnaHQsNzV2aCk7b3ZlcmZsb3cteTphdXRvfUBtZWRpYSAobWluLXdpZHRoOjU3NnB4KXsubmF2YmFyLWV4cGFuZC1zbXtmbGV4LXdyYXA6bm93cmFwO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5uYXZiYXItZXhwYW5kLXNtIC5uYXZiYXItbmF2e2ZsZXgtZGlyZWN0aW9uOnJvd30ubmF2YmFyLWV4cGFuZC1zbSAubmF2YmFyLW5hdiAuZHJvcGRvd24tbWVudXtwb3NpdGlvbjphYnNvbHV0ZX0ubmF2YmFyLWV4cGFuZC1zbSAubmF2YmFyLW5hdiAubmF2LWxpbmt7cGFkZGluZy1yaWdodDouNXJlbTtwYWRkaW5nLWxlZnQ6LjVyZW19Lm5hdmJhci1leHBhbmQtc20gLm5hdmJhci1uYXYtc2Nyb2xse292ZXJmbG93OnZpc2libGV9Lm5hdmJhci1leHBhbmQtc20gLm5hdmJhci1jb2xsYXBzZXtkaXNwbGF5OmZsZXghaW1wb3J0YW50O2ZsZXgtYmFzaXM6YXV0b30ubmF2YmFyLWV4cGFuZC1zbSAubmF2YmFyLXRvZ2dsZXJ7ZGlzcGxheTpub25lfX1AbWVkaWEgKG1pbi13aWR0aDo3NjhweCl7Lm5hdmJhci1leHBhbmQtbWR7ZmxleC13cmFwOm5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0ubmF2YmFyLWV4cGFuZC1tZCAubmF2YmFyLW5hdntmbGV4LWRpcmVjdGlvbjpyb3d9Lm5hdmJhci1leHBhbmQtbWQgLm5hdmJhci1uYXYgLmRyb3Bkb3duLW1lbnV7cG9zaXRpb246YWJzb2x1dGV9Lm5hdmJhci1leHBhbmQtbWQgLm5hdmJhci1uYXYgLm5hdi1saW5re3BhZGRpbmctcmlnaHQ6LjVyZW07cGFkZGluZy1sZWZ0Oi41cmVtfS5uYXZiYXItZXhwYW5kLW1kIC5uYXZiYXItbmF2LXNjcm9sbHtvdmVyZmxvdzp2aXNpYmxlfS5uYXZiYXItZXhwYW5kLW1kIC5uYXZiYXItY29sbGFwc2V7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4LWJhc2lzOmF1dG99Lm5hdmJhci1leHBhbmQtbWQgLm5hdmJhci10b2dnbGVye2Rpc3BsYXk6bm9uZX19QG1lZGlhIChtaW4td2lkdGg6OTkycHgpey5uYXZiYXItZXhwYW5kLWxne2ZsZXgtd3JhcDpub3dyYXA7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9Lm5hdmJhci1leHBhbmQtbGcgLm5hdmJhci1uYXZ7ZmxleC1kaXJlY3Rpb246cm93fS5uYXZiYXItZXhwYW5kLWxnIC5uYXZiYXItbmF2IC5kcm9wZG93bi1tZW51e3Bvc2l0aW9uOmFic29sdXRlfS5uYXZiYXItZXhwYW5kLWxnIC5uYXZiYXItbmF2IC5uYXYtbGlua3twYWRkaW5nLXJpZ2h0Oi41cmVtO3BhZGRpbmctbGVmdDouNXJlbX0ubmF2YmFyLWV4cGFuZC1sZyAubmF2YmFyLW5hdi1zY3JvbGx7b3ZlcmZsb3c6dmlzaWJsZX0ubmF2YmFyLWV4cGFuZC1sZyAubmF2YmFyLWNvbGxhcHNle2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7ZmxleC1iYXNpczphdXRvfS5uYXZiYXItZXhwYW5kLWxnIC5uYXZiYXItdG9nZ2xlcntkaXNwbGF5Om5vbmV9fUBtZWRpYSAobWluLXdpZHRoOjEyMDBweCl7Lm5hdmJhci1leHBhbmQteGx7ZmxleC13cmFwOm5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0ubmF2YmFyLWV4cGFuZC14bCAubmF2YmFyLW5hdntmbGV4LWRpcmVjdGlvbjpyb3d9Lm5hdmJhci1leHBhbmQteGwgLm5hdmJhci1uYXYgLmRyb3Bkb3duLW1lbnV7cG9zaXRpb246YWJzb2x1dGV9Lm5hdmJhci1leHBhbmQteGwgLm5hdmJhci1uYXYgLm5hdi1saW5re3BhZGRpbmctcmlnaHQ6LjVyZW07cGFkZGluZy1sZWZ0Oi41cmVtfS5uYXZiYXItZXhwYW5kLXhsIC5uYXZiYXItbmF2LXNjcm9sbHtvdmVyZmxvdzp2aXNpYmxlfS5uYXZiYXItZXhwYW5kLXhsIC5uYXZiYXItY29sbGFwc2V7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4LWJhc2lzOmF1dG99Lm5hdmJhci1leHBhbmQteGwgLm5hdmJhci10b2dnbGVye2Rpc3BsYXk6bm9uZX19QG1lZGlhIChtaW4td2lkdGg6MTQwMHB4KXsubmF2YmFyLWV4cGFuZC14eGx7ZmxleC13cmFwOm5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0ubmF2YmFyLWV4cGFuZC14eGwgLm5hdmJhci1uYXZ7ZmxleC1kaXJlY3Rpb246cm93fS5uYXZiYXItZXhwYW5kLXh4bCAubmF2YmFyLW5hdiAuZHJvcGRvd24tbWVudXtwb3NpdGlvbjphYnNvbHV0ZX0ubmF2YmFyLWV4cGFuZC14eGwgLm5hdmJhci1uYXYgLm5hdi1saW5re3BhZGRpbmctcmlnaHQ6LjVyZW07cGFkZGluZy1sZWZ0Oi41cmVtfS5uYXZiYXItZXhwYW5kLXh4bCAubmF2YmFyLW5hdi1zY3JvbGx7b3ZlcmZsb3c6dmlzaWJsZX0ubmF2YmFyLWV4cGFuZC14eGwgLm5hdmJhci1jb2xsYXBzZXtkaXNwbGF5OmZsZXghaW1wb3J0YW50O2ZsZXgtYmFzaXM6YXV0b30ubmF2YmFyLWV4cGFuZC14eGwgLm5hdmJhci10b2dnbGVye2Rpc3BsYXk6bm9uZX19Lm5hdmJhci1leHBhbmR7ZmxleC13cmFwOm5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0ubmF2YmFyLWV4cGFuZCAubmF2YmFyLW5hdntmbGV4LWRpcmVjdGlvbjpyb3d9Lm5hdmJhci1leHBhbmQgLm5hdmJhci1uYXYgLmRyb3Bkb3duLW1lbnV7cG9zaXRpb246YWJzb2x1dGV9Lm5hdmJhci1leHBhbmQgLm5hdmJhci1uYXYgLm5hdi1saW5re3BhZGRpbmctcmlnaHQ6LjVyZW07cGFkZGluZy1sZWZ0Oi41cmVtfS5uYXZiYXItZXhwYW5kIC5uYXZiYXItbmF2LXNjcm9sbHtvdmVyZmxvdzp2aXNpYmxlfS5uYXZiYXItZXhwYW5kIC5uYXZiYXItY29sbGFwc2V7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4LWJhc2lzOmF1dG99Lm5hdmJhci1leHBhbmQgLm5hdmJhci10b2dnbGVye2Rpc3BsYXk6bm9uZX0ubmF2YmFyLWxpZ2h0IC5uYXZiYXItYnJhbmR7Y29sb3I6cmdiYSgwLDAsMCwuOSl9Lm5hdmJhci1saWdodCAubmF2YmFyLWJyYW5kOmZvY3VzLC5uYXZiYXItbGlnaHQgLm5hdmJhci1icmFuZDpob3Zlcntjb2xvcjpyZ2JhKDAsMCwwLC45KX0ubmF2YmFyLWxpZ2h0IC5uYXZiYXItbmF2IC5uYXYtbGlua3tjb2xvcjpyZ2JhKDAsMCwwLC41NSl9Lm5hdmJhci1saWdodCAubmF2YmFyLW5hdiAubmF2LWxpbms6Zm9jdXMsLm5hdmJhci1saWdodCAubmF2YmFyLW5hdiAubmF2LWxpbms6aG92ZXJ7Y29sb3I6cmdiYSgwLDAsMCwuNyl9Lm5hdmJhci1saWdodCAubmF2YmFyLW5hdiAubmF2LWxpbmsuZGlzYWJsZWR7Y29sb3I6cmdiYSgwLDAsMCwuMyl9Lm5hdmJhci1saWdodCAubmF2YmFyLW5hdiAubmF2LWxpbmsuYWN0aXZlLC5uYXZiYXItbGlnaHQgLm5hdmJhci1uYXYgLnNob3c+Lm5hdi1saW5re2NvbG9yOnJnYmEoMCwwLDAsLjkpfS5uYXZiYXItbGlnaHQgLm5hdmJhci10b2dnbGVye2NvbG9yOnJnYmEoMCwwLDAsLjU1KTtib3JkZXItY29sb3I6cmdiYSgwLDAsMCwuMSl9Lm5hdmJhci1saWdodCAubmF2YmFyLXRvZ2dsZXItaWNvbntiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzY3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzMCAzMCclM2UlM2NwYXRoIHN0cm9rZT0ncmdiYSUyODAsIDAsIDAsIDAuNTUlMjknIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLW1pdGVybGltaXQ9JzEwJyBzdHJva2Utd2lkdGg9JzInIGQ9J000IDdoMjJNNCAxNWgyMk00IDIzaDIyJy8lM2UlM2Mvc3ZnJTNlIil9Lm5hdmJhci1saWdodCAubmF2YmFyLXRleHR7Y29sb3I6cmdiYSgwLDAsMCwuNTUpfS5uYXZiYXItbGlnaHQgLm5hdmJhci10ZXh0IGEsLm5hdmJhci1saWdodCAubmF2YmFyLXRleHQgYTpmb2N1cywubmF2YmFyLWxpZ2h0IC5uYXZiYXItdGV4dCBhOmhvdmVye2NvbG9yOnJnYmEoMCwwLDAsLjkpfS5uYXZiYXItZGFyayAubmF2YmFyLWJyYW5ke2NvbG9yOiNmZmZ9Lm5hdmJhci1kYXJrIC5uYXZiYXItYnJhbmQ6Zm9jdXMsLm5hdmJhci1kYXJrIC5uYXZiYXItYnJhbmQ6aG92ZXJ7Y29sb3I6I2ZmZn0ubmF2YmFyLWRhcmsgLm5hdmJhci1uYXYgLm5hdi1saW5re2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KX0ubmF2YmFyLWRhcmsgLm5hdmJhci1uYXYgLm5hdi1saW5rOmZvY3VzLC5uYXZiYXItZGFyayAubmF2YmFyLW5hdiAubmF2LWxpbms6aG92ZXJ7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuNzUpfS5uYXZiYXItZGFyayAubmF2YmFyLW5hdiAubmF2LWxpbmsuZGlzYWJsZWR7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuMjUpfS5uYXZiYXItZGFyayAubmF2YmFyLW5hdiAubmF2LWxpbmsuYWN0aXZlLC5uYXZiYXItZGFyayAubmF2YmFyLW5hdiAuc2hvdz4ubmF2LWxpbmt7Y29sb3I6I2ZmZn0ubmF2YmFyLWRhcmsgLm5hdmJhci10b2dnbGVye2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KTtib3JkZXItY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuMSl9Lm5hdmJhci1kYXJrIC5uYXZiYXItdG9nZ2xlci1pY29ue2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDMwIDMwJyUzZSUzY3BhdGggc3Ryb2tlPSdyZ2JhJTI4MjU1LCAyNTUsIDI1NSwgMC41NSUyOScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbWl0ZXJsaW1pdD0nMTAnIHN0cm9rZS13aWR0aD0nMicgZD0nTTQgN2gyMk00IDE1aDIyTTQgMjNoMjInLyUzZSUzYy9zdmclM2UiKX0ubmF2YmFyLWRhcmsgLm5hdmJhci10ZXh0e2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KX0ubmF2YmFyLWRhcmsgLm5hdmJhci10ZXh0IGEsLm5hdmJhci1kYXJrIC5uYXZiYXItdGV4dCBhOmZvY3VzLC5uYXZiYXItZGFyayAubmF2YmFyLXRleHQgYTpob3Zlcntjb2xvcjojZmZmfS5jYXJke3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWluLXdpZHRoOjA7d29yZC13cmFwOmJyZWFrLXdvcmQ7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtY2xpcDpib3JkZXItYm94O2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMTI1KTtib3JkZXItcmFkaXVzOi4yNXJlbX0uY2FyZD5ocnttYXJnaW4tcmlnaHQ6MDttYXJnaW4tbGVmdDowfS5jYXJkPi5saXN0LWdyb3Vwe2JvcmRlci10b3A6aW5oZXJpdDtib3JkZXItYm90dG9tOmluaGVyaXR9LmNhcmQ+Lmxpc3QtZ3JvdXA6Zmlyc3QtY2hpbGR7Ym9yZGVyLXRvcC13aWR0aDowO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6Y2FsYyguMjVyZW0gLSAxcHgpO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KX0uY2FyZD4ubGlzdC1ncm91cDpsYXN0LWNoaWxke2JvcmRlci1ib3R0b20td2lkdGg6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCk7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCl9LmNhcmQ+LmNhcmQtaGVhZGVyKy5saXN0LWdyb3VwLC5jYXJkPi5saXN0LWdyb3VwKy5jYXJkLWZvb3Rlcntib3JkZXItdG9wOjB9LmNhcmQtYm9keXtmbGV4OjEgMSBhdXRvO3BhZGRpbmc6MXJlbSAxcmVtfS5jYXJkLXRpdGxle21hcmdpbi1ib3R0b206LjVyZW19LmNhcmQtc3VidGl0bGV7bWFyZ2luLXRvcDotLjI1cmVtO21hcmdpbi1ib3R0b206MH0uY2FyZC10ZXh0Omxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTowfS5jYXJkLWxpbms6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LmNhcmQtbGluaysuY2FyZC1saW5re21hcmdpbi1sZWZ0OjFyZW19LmNhcmQtaGVhZGVye3BhZGRpbmc6LjVyZW0gMXJlbTttYXJnaW4tYm90dG9tOjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wMyk7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgwLDAsMCwuMTI1KX0uY2FyZC1oZWFkZXI6Zmlyc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCkgY2FsYyguMjVyZW0gLSAxcHgpIDAgMH0uY2FyZC1mb290ZXJ7cGFkZGluZzouNXJlbSAxcmVtO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMDMpO2JvcmRlci10b3A6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEyNSl9LmNhcmQtZm9vdGVyOmxhc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czowIDAgY2FsYyguMjVyZW0gLSAxcHgpIGNhbGMoLjI1cmVtIC0gMXB4KX0uY2FyZC1oZWFkZXItdGFic3ttYXJnaW4tcmlnaHQ6LS41cmVtO21hcmdpbi1ib3R0b206LS41cmVtO21hcmdpbi1sZWZ0Oi0uNXJlbTtib3JkZXItYm90dG9tOjB9LmNhcmQtaGVhZGVyLXBpbGxze21hcmdpbi1yaWdodDotLjVyZW07bWFyZ2luLWxlZnQ6LS41cmVtfS5jYXJkLWltZy1vdmVybGF5e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3BhZGRpbmc6MXJlbTtib3JkZXItcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KX0uY2FyZC1pbWcsLmNhcmQtaW1nLWJvdHRvbSwuY2FyZC1pbWctdG9we3dpZHRoOjEwMCV9LmNhcmQtaW1nLC5jYXJkLWltZy10b3B7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCk7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6Y2FsYyguMjVyZW0gLSAxcHgpfS5jYXJkLWltZywuY2FyZC1pbWctYm90dG9te2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KX0uY2FyZC1ncm91cD4uY2FyZHttYXJnaW4tYm90dG9tOi43NXJlbX1AbWVkaWEgKG1pbi13aWR0aDo1NzZweCl7LmNhcmQtZ3JvdXB7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpyb3cgd3JhcH0uY2FyZC1ncm91cD4uY2FyZHtmbGV4OjEgMCAwJTttYXJnaW4tYm90dG9tOjB9LmNhcmQtZ3JvdXA+LmNhcmQrLmNhcmR7bWFyZ2luLWxlZnQ6MDtib3JkZXItbGVmdDowfS5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6bGFzdC1jaGlsZCl7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6bGFzdC1jaGlsZCkgLmNhcmQtaGVhZGVyLC5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6bGFzdC1jaGlsZCkgLmNhcmQtaW1nLXRvcHtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowfS5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6bGFzdC1jaGlsZCkgLmNhcmQtZm9vdGVyLC5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6bGFzdC1jaGlsZCkgLmNhcmQtaW1nLWJvdHRvbXtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6Zmlyc3QtY2hpbGQpe2JvcmRlci10b3AtbGVmdC1yYWRpdXM6MDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjB9LmNhcmQtZ3JvdXA+LmNhcmQ6bm90KDpmaXJzdC1jaGlsZCkgLmNhcmQtaGVhZGVyLC5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6Zmlyc3QtY2hpbGQpIC5jYXJkLWltZy10b3B7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowfS5jYXJkLWdyb3VwPi5jYXJkOm5vdCg6Zmlyc3QtY2hpbGQpIC5jYXJkLWZvb3RlciwuY2FyZC1ncm91cD4uY2FyZDpub3QoOmZpcnN0LWNoaWxkKSAuY2FyZC1pbWctYm90dG9te2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH19LmFjY29yZGlvbi1idXR0b257cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjt3aWR0aDoxMDAlO3BhZGRpbmc6MXJlbSAxLjI1cmVtO2ZvbnQtc2l6ZToxcmVtO2NvbG9yOiMyMTI1Mjk7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MDtib3JkZXItcmFkaXVzOjA7b3ZlcmZsb3ctYW5jaG9yOm5vbmU7dHJhbnNpdGlvbjpjb2xvciAuMTVzIGVhc2UtaW4tb3V0LGJhY2tncm91bmQtY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3JkZXItY29sb3IgLjE1cyBlYXNlLWluLW91dCxib3gtc2hhZG93IC4xNXMgZWFzZS1pbi1vdXQsYm9yZGVyLXJhZGl1cyAuMTVzIGVhc2V9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmFjY29yZGlvbi1idXR0b257dHJhbnNpdGlvbjpub25lfX0uYWNjb3JkaW9uLWJ1dHRvbjpub3QoLmNvbGxhcHNlZCl7Y29sb3I6IzBjNjNlNDtiYWNrZ3JvdW5kLWNvbG9yOiNlN2YxZmY7Ym94LXNoYWRvdzppbnNldCAwIC0xcHggMCByZ2JhKDAsMCwwLC4xMjUpfS5hY2NvcmRpb24tYnV0dG9uOm5vdCguY29sbGFwc2VkKTo6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTYgMTYnIGZpbGw9JyUyMzBjNjNlNCclM2UlM2NwYXRoIGZpbGwtcnVsZT0nZXZlbm9kZCcgZD0nTTEuNjQ2IDQuNjQ2YS41LjUgMCAwIDEgLjcwOCAwTDggMTAuMjkzbDUuNjQ2LTUuNjQ3YS41LjUgMCAwIDEgLjcwOC43MDhsLTYgNmEuNS41IDAgMCAxLS43MDggMGwtNi02YS41LjUgMCAwIDEgMC0uNzA4eicvJTNlJTNjL3N2ZyUzZSIpO3RyYW5zZm9ybTpyb3RhdGUoLTE4MGRlZyl9LmFjY29yZGlvbi1idXR0b246OmFmdGVye2ZsZXgtc2hyaW5rOjA7d2lkdGg6MS4yNXJlbTtoZWlnaHQ6MS4yNXJlbTttYXJnaW4tbGVmdDphdXRvO2NvbnRlbnQ6IiI7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTYgMTYnIGZpbGw9JyUyMzIxMjUyOSclM2UlM2NwYXRoIGZpbGwtcnVsZT0nZXZlbm9kZCcgZD0nTTEuNjQ2IDQuNjQ2YS41LjUgMCAwIDEgLjcwOCAwTDggMTAuMjkzbDUuNjQ2LTUuNjQ3YS41LjUgMCAwIDEgLjcwOC43MDhsLTYgNmEuNS41IDAgMCAxLS43MDggMGwtNi02YS41LjUgMCAwIDEgMC0uNzA4eicvJTNlJTNjL3N2ZyUzZSIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6MS4yNXJlbTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMnMgZWFzZS1pbi1vdXR9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmFjY29yZGlvbi1idXR0b246OmFmdGVye3RyYW5zaXRpb246bm9uZX19LmFjY29yZGlvbi1idXR0b246aG92ZXJ7ei1pbmRleDoyfS5hY2NvcmRpb24tYnV0dG9uOmZvY3Vze3otaW5kZXg6Mztib3JkZXItY29sb3I6Izg2YjdmZTtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgxMywxMTAsMjUzLC4yNSl9LmFjY29yZGlvbi1oZWFkZXJ7bWFyZ2luLWJvdHRvbTowfS5hY2NvcmRpb24taXRlbXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4xMjUpfS5hY2NvcmRpb24taXRlbTpmaXJzdC1vZi10eXBle2JvcmRlci10b3AtbGVmdC1yYWRpdXM6LjI1cmVtO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOi4yNXJlbX0uYWNjb3JkaW9uLWl0ZW06Zmlyc3Qtb2YtdHlwZSAuYWNjb3JkaW9uLWJ1dHRvbntib3JkZXItdG9wLWxlZnQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCl9LmFjY29yZGlvbi1pdGVtOm5vdCg6Zmlyc3Qtb2YtdHlwZSl7Ym9yZGVyLXRvcDowfS5hY2NvcmRpb24taXRlbTpsYXN0LW9mLXR5cGV7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6LjI1cmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjI1cmVtfS5hY2NvcmRpb24taXRlbTpsYXN0LW9mLXR5cGUgLmFjY29yZGlvbi1idXR0b24uY29sbGFwc2Vke2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOmNhbGMoLjI1cmVtIC0gMXB4KX0uYWNjb3JkaW9uLWl0ZW06bGFzdC1vZi10eXBlIC5hY2NvcmRpb24tY29sbGFwc2V7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6LjI1cmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjI1cmVtfS5hY2NvcmRpb24tYm9keXtwYWRkaW5nOjFyZW0gMS4yNXJlbX0uYWNjb3JkaW9uLWZsdXNoIC5hY2NvcmRpb24tY29sbGFwc2V7Ym9yZGVyLXdpZHRoOjB9LmFjY29yZGlvbi1mbHVzaCAuYWNjb3JkaW9uLWl0ZW17Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLWxlZnQ6MDtib3JkZXItcmFkaXVzOjB9LmFjY29yZGlvbi1mbHVzaCAuYWNjb3JkaW9uLWl0ZW06Zmlyc3QtY2hpbGR7Ym9yZGVyLXRvcDowfS5hY2NvcmRpb24tZmx1c2ggLmFjY29yZGlvbi1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbTowfS5hY2NvcmRpb24tZmx1c2ggLmFjY29yZGlvbi1pdGVtIC5hY2NvcmRpb24tYnV0dG9ue2JvcmRlci1yYWRpdXM6MH0uYnJlYWRjcnVtYntkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7cGFkZGluZzowIDA7bWFyZ2luLWJvdHRvbToxcmVtO2xpc3Qtc3R5bGU6bm9uZX0uYnJlYWRjcnVtYi1pdGVtKy5icmVhZGNydW1iLWl0ZW17cGFkZGluZy1sZWZ0Oi41cmVtfS5icmVhZGNydW1iLWl0ZW0rLmJyZWFkY3J1bWItaXRlbTo6YmVmb3Jle2Zsb2F0OmxlZnQ7cGFkZGluZy1yaWdodDouNXJlbTtjb2xvcjojNmM3NTdkO2NvbnRlbnQ6dmFyKC0tYnMtYnJlYWRjcnVtYi1kaXZpZGVyLCAiLyIpfS5icmVhZGNydW1iLWl0ZW0uYWN0aXZle2NvbG9yOiM2Yzc1N2R9LnBhZ2luYXRpb257ZGlzcGxheTpmbGV4O3BhZGRpbmctbGVmdDowO2xpc3Qtc3R5bGU6bm9uZX0ucGFnZS1saW5re3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Y29sb3I6IzBkNmVmZDt0ZXh0LWRlY29yYXRpb246bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGVlMmU2O3RyYW5zaXRpb246Y29sb3IgLjE1cyBlYXNlLWluLW91dCxiYWNrZ3JvdW5kLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYm9yZGVyLWNvbG9yIC4xNXMgZWFzZS1pbi1vdXQsYm94LXNoYWRvdyAuMTVzIGVhc2UtaW4tb3V0fUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5wYWdlLWxpbmt7dHJhbnNpdGlvbjpub25lfX0ucGFnZS1saW5rOmhvdmVye3otaW5kZXg6Mjtjb2xvcjojMGE1OGNhO2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjtib3JkZXItY29sb3I6I2RlZTJlNn0ucGFnZS1saW5rOmZvY3Vze3otaW5kZXg6Mztjb2xvcjojMGE1OGNhO2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgMCAuMjVyZW0gcmdiYSgxMywxMTAsMjUzLC4yNSl9LnBhZ2UtaXRlbTpub3QoOmZpcnN0LWNoaWxkKSAucGFnZS1saW5re21hcmdpbi1sZWZ0Oi0xcHh9LnBhZ2UtaXRlbS5hY3RpdmUgLnBhZ2UtbGlua3t6LWluZGV4OjM7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwZDZlZmQ7Ym9yZGVyLWNvbG9yOiMwZDZlZmR9LnBhZ2UtaXRlbS5kaXNhYmxlZCAucGFnZS1saW5re2NvbG9yOiM2Yzc1N2Q7cG9pbnRlci1ldmVudHM6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyLWNvbG9yOiNkZWUyZTZ9LnBhZ2UtbGlua3twYWRkaW5nOi4zNzVyZW0gLjc1cmVtfS5wYWdlLWl0ZW06Zmlyc3QtY2hpbGQgLnBhZ2UtbGlua3tib3JkZXItdG9wLWxlZnQtcmFkaXVzOi4yNXJlbTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4yNXJlbX0ucGFnZS1pdGVtOmxhc3QtY2hpbGQgLnBhZ2UtbGlua3tib3JkZXItdG9wLXJpZ2h0LXJhZGl1czouMjVyZW07Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6LjI1cmVtfS5wYWdpbmF0aW9uLWxnIC5wYWdlLWxpbmt7cGFkZGluZzouNzVyZW0gMS41cmVtO2ZvbnQtc2l6ZToxLjI1cmVtfS5wYWdpbmF0aW9uLWxnIC5wYWdlLWl0ZW06Zmlyc3QtY2hpbGQgLnBhZ2UtbGlua3tib3JkZXItdG9wLWxlZnQtcmFkaXVzOi4zcmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjNyZW19LnBhZ2luYXRpb24tbGcgLnBhZ2UtaXRlbTpsYXN0LWNoaWxkIC5wYWdlLWxpbmt7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjNyZW07Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6LjNyZW19LnBhZ2luYXRpb24tc20gLnBhZ2UtbGlua3twYWRkaW5nOi4yNXJlbSAuNXJlbTtmb250LXNpemU6Ljg3NXJlbX0ucGFnaW5hdGlvbi1zbSAucGFnZS1pdGVtOmZpcnN0LWNoaWxkIC5wYWdlLWxpbmt7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czouMnJlbTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4ycmVtfS5wYWdpbmF0aW9uLXNtIC5wYWdlLWl0ZW06bGFzdC1jaGlsZCAucGFnZS1saW5re2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOi4ycmVtO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOi4ycmVtfS5iYWRnZXtkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOi4zNWVtIC42NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LXdlaWdodDo3MDA7bGluZS1oZWlnaHQ6MTtjb2xvcjojZmZmO3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZTtib3JkZXItcmFkaXVzOi4yNXJlbX0uYmFkZ2U6ZW1wdHl7ZGlzcGxheTpub25lfS5idG4gLmJhZGdle3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDotMXB4fS5hbGVydHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjFyZW0gMXJlbTttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYWxlcnQtaGVhZGluZ3tjb2xvcjppbmhlcml0fS5hbGVydC1saW5re2ZvbnQtd2VpZ2h0OjcwMH0uYWxlcnQtZGlzbWlzc2libGV7cGFkZGluZy1yaWdodDozcmVtfS5hbGVydC1kaXNtaXNzaWJsZSAuYnRuLWNsb3Nle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7ei1pbmRleDoyO3BhZGRpbmc6MS4yNXJlbSAxcmVtfS5hbGVydC1wcmltYXJ5e2NvbG9yOiMwODQyOTg7YmFja2dyb3VuZC1jb2xvcjojY2ZlMmZmO2JvcmRlci1jb2xvcjojYjZkNGZlfS5hbGVydC1wcmltYXJ5IC5hbGVydC1saW5re2NvbG9yOiMwNjM1N2F9LmFsZXJ0LXNlY29uZGFyeXtjb2xvcjojNDE0NjRiO2JhY2tncm91bmQtY29sb3I6I2UyZTNlNTtib3JkZXItY29sb3I6I2QzZDZkOH0uYWxlcnQtc2Vjb25kYXJ5IC5hbGVydC1saW5re2NvbG9yOiMzNDM4M2N9LmFsZXJ0LXN1Y2Nlc3N7Y29sb3I6IzBmNTEzMjtiYWNrZ3JvdW5kLWNvbG9yOiNkMWU3ZGQ7Ym9yZGVyLWNvbG9yOiNiYWRiY2N9LmFsZXJ0LXN1Y2Nlc3MgLmFsZXJ0LWxpbmt7Y29sb3I6IzBjNDEyOH0uYWxlcnQtaW5mb3tjb2xvcjojMDU1MTYwO2JhY2tncm91bmQtY29sb3I6I2NmZjRmYztib3JkZXItY29sb3I6I2I2ZWZmYn0uYWxlcnQtaW5mbyAuYWxlcnQtbGlua3tjb2xvcjojMDQ0MTRkfS5hbGVydC13YXJuaW5ne2NvbG9yOiM2NjRkMDM7YmFja2dyb3VuZC1jb2xvcjojZmZmM2NkO2JvcmRlci1jb2xvcjojZmZlY2I1fS5hbGVydC13YXJuaW5nIC5hbGVydC1saW5re2NvbG9yOiM1MjNlMDJ9LmFsZXJ0LWRhbmdlcntjb2xvcjojODQyMDI5O2JhY2tncm91bmQtY29sb3I6I2Y4ZDdkYTtib3JkZXItY29sb3I6I2Y1YzJjN30uYWxlcnQtZGFuZ2VyIC5hbGVydC1saW5re2NvbG9yOiM2YTFhMjF9LmFsZXJ0LWxpZ2h0e2NvbG9yOiM2MzY0NjQ7YmFja2dyb3VuZC1jb2xvcjojZmVmZWZlO2JvcmRlci1jb2xvcjojZmRmZGZlfS5hbGVydC1saWdodCAuYWxlcnQtbGlua3tjb2xvcjojNGY1MDUwfS5hbGVydC1kYXJre2NvbG9yOiMxNDE2MTk7YmFja2dyb3VuZC1jb2xvcjojZDNkM2Q0O2JvcmRlci1jb2xvcjojYmNiZWJmfS5hbGVydC1kYXJrIC5hbGVydC1saW5re2NvbG9yOiMxMDEyMTR9QC13ZWJraXQta2V5ZnJhbWVzIHByb2dyZXNzLWJhci1zdHJpcGVzezAle2JhY2tncm91bmQtcG9zaXRpb24teDoxcmVtfX1Aa2V5ZnJhbWVzIHByb2dyZXNzLWJhci1zdHJpcGVzezAle2JhY2tncm91bmQtcG9zaXRpb24teDoxcmVtfX0ucHJvZ3Jlc3N7ZGlzcGxheTpmbGV4O2hlaWdodDoxcmVtO292ZXJmbG93OmhpZGRlbjtmb250LXNpemU6Ljc1cmVtO2JhY2tncm91bmQtY29sb3I6I2U5ZWNlZjtib3JkZXItcmFkaXVzOi4yNXJlbX0ucHJvZ3Jlc3MtYmFye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjtvdmVyZmxvdzpoaWRkZW47Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjt3aGl0ZS1zcGFjZTpub3dyYXA7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO3RyYW5zaXRpb246d2lkdGggLjZzIGVhc2V9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LnByb2dyZXNzLWJhcnt0cmFuc2l0aW9uOm5vbmV9fS5wcm9ncmVzcy1iYXItc3RyaXBlZHtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCg0NWRlZyxyZ2JhKDI1NSwyNTUsMjU1LC4xNSkgMjUlLHRyYW5zcGFyZW50IDI1JSx0cmFuc3BhcmVudCA1MCUscmdiYSgyNTUsMjU1LDI1NSwuMTUpIDUwJSxyZ2JhKDI1NSwyNTUsMjU1LC4xNSkgNzUlLHRyYW5zcGFyZW50IDc1JSx0cmFuc3BhcmVudCk7YmFja2dyb3VuZC1zaXplOjFyZW0gMXJlbX0ucHJvZ3Jlc3MtYmFyLWFuaW1hdGVkey13ZWJraXQtYW5pbWF0aW9uOjFzIGxpbmVhciBpbmZpbml0ZSBwcm9ncmVzcy1iYXItc3RyaXBlczthbmltYXRpb246MXMgbGluZWFyIGluZmluaXRlIHByb2dyZXNzLWJhci1zdHJpcGVzfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5wcm9ncmVzcy1iYXItYW5pbWF0ZWR7LXdlYmtpdC1hbmltYXRpb246bm9uZTthbmltYXRpb246bm9uZX19Lmxpc3QtZ3JvdXB7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwYWRkaW5nLWxlZnQ6MDttYXJnaW4tYm90dG9tOjA7Ym9yZGVyLXJhZGl1czouMjVyZW19Lmxpc3QtZ3JvdXAtbnVtYmVyZWR7bGlzdC1zdHlsZS10eXBlOm5vbmU7Y291bnRlci1yZXNldDpzZWN0aW9ufS5saXN0LWdyb3VwLW51bWJlcmVkPmxpOjpiZWZvcmV7Y29udGVudDpjb3VudGVycyhzZWN0aW9uLCAiLiIpICIuICI7Y291bnRlci1pbmNyZW1lbnQ6c2VjdGlvbn0ubGlzdC1ncm91cC1pdGVtLWFjdGlvbnt3aWR0aDoxMDAlO2NvbG9yOiM0OTUwNTc7dGV4dC1hbGlnbjppbmhlcml0fS5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmZvY3VzLC5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmhvdmVye3otaW5kZXg6MTtjb2xvcjojNDk1MDU3O3RleHQtZGVjb3JhdGlvbjpub25lO2JhY2tncm91bmQtY29sb3I6I2Y4ZjlmYX0ubGlzdC1ncm91cC1pdGVtLWFjdGlvbjphY3RpdmV7Y29sb3I6IzIxMjUyOTtiYWNrZ3JvdW5kLWNvbG9yOiNlOWVjZWZ9Lmxpc3QtZ3JvdXAtaXRlbXtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6LjVyZW0gMXJlbTtjb2xvcjojMjEyNTI5O3RleHQtZGVjb3JhdGlvbjpub25lO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEyNSl9Lmxpc3QtZ3JvdXAtaXRlbTpmaXJzdC1jaGlsZHtib3JkZXItdG9wLWxlZnQtcmFkaXVzOmluaGVyaXQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6aW5oZXJpdH0ubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6aW5oZXJpdDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOmluaGVyaXR9Lmxpc3QtZ3JvdXAtaXRlbS5kaXNhYmxlZCwubGlzdC1ncm91cC1pdGVtOmRpc2FibGVke2NvbG9yOiM2Yzc1N2Q7cG9pbnRlci1ldmVudHM6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9Lmxpc3QtZ3JvdXAtaXRlbS5hY3RpdmV7ei1pbmRleDoyO2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMGQ2ZWZkO2JvcmRlci1jb2xvcjojMGQ2ZWZkfS5saXN0LWdyb3VwLWl0ZW0rLmxpc3QtZ3JvdXAtaXRlbXtib3JkZXItdG9wLXdpZHRoOjB9Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tdG9wOi0xcHg7Ym9yZGVyLXRvcC13aWR0aDoxcHh9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbHtmbGV4LWRpcmVjdGlvbjpyb3d9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbD4ubGlzdC1ncm91cC1pdGVtOmZpcnN0LWNoaWxke2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjI1cmVtO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbD4ubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjI1cmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsPi5saXN0LWdyb3VwLWl0ZW0uYWN0aXZle21hcmdpbi10b3A6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsPi5saXN0LWdyb3VwLWl0ZW0rLmxpc3QtZ3JvdXAtaXRlbXtib3JkZXItdG9wLXdpZHRoOjFweDtib3JkZXItbGVmdC13aWR0aDowfS5saXN0LWdyb3VwLWhvcml6b250YWw+Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tbGVmdDotMXB4O2JvcmRlci1sZWZ0LXdpZHRoOjFweH1AbWVkaWEgKG1pbi13aWR0aDo1NzZweCl7Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1zbXtmbGV4LWRpcmVjdGlvbjpyb3d9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1zbT4ubGlzdC1ncm91cC1pdGVtOmZpcnN0LWNoaWxke2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjI1cmVtO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1zbT4ubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjI1cmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLXNtPi5saXN0LWdyb3VwLWl0ZW0uYWN0aXZle21hcmdpbi10b3A6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLXNtPi5saXN0LWdyb3VwLWl0ZW0rLmxpc3QtZ3JvdXAtaXRlbXtib3JkZXItdG9wLXdpZHRoOjFweDtib3JkZXItbGVmdC13aWR0aDowfS5saXN0LWdyb3VwLWhvcml6b250YWwtc20+Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tbGVmdDotMXB4O2JvcmRlci1sZWZ0LXdpZHRoOjFweH19QG1lZGlhIChtaW4td2lkdGg6NzY4cHgpey5saXN0LWdyb3VwLWhvcml6b250YWwtbWR7ZmxleC1kaXJlY3Rpb246cm93fS5saXN0LWdyb3VwLWhvcml6b250YWwtbWQ+Lmxpc3QtZ3JvdXAtaXRlbTpmaXJzdC1jaGlsZHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4yNXJlbTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowfS5saXN0LWdyb3VwLWhvcml6b250YWwtbWQ+Lmxpc3QtZ3JvdXAtaXRlbTpsYXN0LWNoaWxke2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOi4yNXJlbTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1tZD4ubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tdG9wOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1tZD4ubGlzdC1ncm91cC1pdGVtKy5saXN0LWdyb3VwLWl0ZW17Ym9yZGVyLXRvcC13aWR0aDoxcHg7Ym9yZGVyLWxlZnQtd2lkdGg6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLW1kPi5saXN0LWdyb3VwLWl0ZW0rLmxpc3QtZ3JvdXAtaXRlbS5hY3RpdmV7bWFyZ2luLWxlZnQ6LTFweDtib3JkZXItbGVmdC13aWR0aDoxcHh9fUBtZWRpYSAobWluLXdpZHRoOjk5MnB4KXsubGlzdC1ncm91cC1ob3Jpem9udGFsLWxne2ZsZXgtZGlyZWN0aW9uOnJvd30ubGlzdC1ncm91cC1ob3Jpem9udGFsLWxnPi5saXN0LWdyb3VwLWl0ZW06Zmlyc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czouMjVyZW07Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLWxnPi5saXN0LWdyb3VwLWl0ZW06bGFzdC1jaGlsZHtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czouMjVyZW07Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowfS5saXN0LWdyb3VwLWhvcml6b250YWwtbGc+Lmxpc3QtZ3JvdXAtaXRlbS5hY3RpdmV7bWFyZ2luLXRvcDowfS5saXN0LWdyb3VwLWhvcml6b250YWwtbGc+Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVte2JvcmRlci10b3Atd2lkdGg6MXB4O2JvcmRlci1sZWZ0LXdpZHRoOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC1sZz4ubGlzdC1ncm91cC1pdGVtKy5saXN0LWdyb3VwLWl0ZW0uYWN0aXZle21hcmdpbi1sZWZ0Oi0xcHg7Ym9yZGVyLWxlZnQtd2lkdGg6MXB4fX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5saXN0LWdyb3VwLWhvcml6b250YWwteGx7ZmxleC1kaXJlY3Rpb246cm93fS5saXN0LWdyb3VwLWhvcml6b250YWwteGw+Lmxpc3QtZ3JvdXAtaXRlbTpmaXJzdC1jaGlsZHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4yNXJlbTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowfS5saXN0LWdyb3VwLWhvcml6b250YWwteGw+Lmxpc3QtZ3JvdXAtaXRlbTpsYXN0LWNoaWxke2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOi4yNXJlbTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC14bD4ubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tdG9wOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC14bD4ubGlzdC1ncm91cC1pdGVtKy5saXN0LWdyb3VwLWl0ZW17Ym9yZGVyLXRvcC13aWR0aDoxcHg7Ym9yZGVyLWxlZnQtd2lkdGg6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLXhsPi5saXN0LWdyb3VwLWl0ZW0rLmxpc3QtZ3JvdXAtaXRlbS5hY3RpdmV7bWFyZ2luLWxlZnQ6LTFweDtib3JkZXItbGVmdC13aWR0aDoxcHh9fUBtZWRpYSAobWluLXdpZHRoOjE0MDBweCl7Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC14eGx7ZmxleC1kaXJlY3Rpb246cm93fS5saXN0LWdyb3VwLWhvcml6b250YWwteHhsPi5saXN0LWdyb3VwLWl0ZW06Zmlyc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czouMjVyZW07Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLXh4bD4ubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjI1cmVtO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0ubGlzdC1ncm91cC1ob3Jpem9udGFsLXh4bD4ubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tdG9wOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC14eGw+Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVte2JvcmRlci10b3Atd2lkdGg6MXB4O2JvcmRlci1sZWZ0LXdpZHRoOjB9Lmxpc3QtZ3JvdXAtaG9yaXpvbnRhbC14eGw+Lmxpc3QtZ3JvdXAtaXRlbSsubGlzdC1ncm91cC1pdGVtLmFjdGl2ZXttYXJnaW4tbGVmdDotMXB4O2JvcmRlci1sZWZ0LXdpZHRoOjFweH19Lmxpc3QtZ3JvdXAtZmx1c2h7Ym9yZGVyLXJhZGl1czowfS5saXN0LWdyb3VwLWZsdXNoPi5saXN0LWdyb3VwLWl0ZW17Ym9yZGVyLXdpZHRoOjAgMCAxcHh9Lmxpc3QtZ3JvdXAtZmx1c2g+Lmxpc3QtZ3JvdXAtaXRlbTpsYXN0LWNoaWxke2JvcmRlci1ib3R0b20td2lkdGg6MH0ubGlzdC1ncm91cC1pdGVtLXByaW1hcnl7Y29sb3I6IzA4NDI5ODtiYWNrZ3JvdW5kLWNvbG9yOiNjZmUyZmZ9Lmxpc3QtZ3JvdXAtaXRlbS1wcmltYXJ5Lmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246Zm9jdXMsLmxpc3QtZ3JvdXAtaXRlbS1wcmltYXJ5Lmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246aG92ZXJ7Y29sb3I6IzA4NDI5ODtiYWNrZ3JvdW5kLWNvbG9yOiNiYWNiZTZ9Lmxpc3QtZ3JvdXAtaXRlbS1wcmltYXJ5Lmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb24uYWN0aXZle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMDg0Mjk4O2JvcmRlci1jb2xvcjojMDg0Mjk4fS5saXN0LWdyb3VwLWl0ZW0tc2Vjb25kYXJ5e2NvbG9yOiM0MTQ2NGI7YmFja2dyb3VuZC1jb2xvcjojZTJlM2U1fS5saXN0LWdyb3VwLWl0ZW0tc2Vjb25kYXJ5Lmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246Zm9jdXMsLmxpc3QtZ3JvdXAtaXRlbS1zZWNvbmRhcnkubGlzdC1ncm91cC1pdGVtLWFjdGlvbjpob3Zlcntjb2xvcjojNDE0NjRiO2JhY2tncm91bmQtY29sb3I6I2NiY2NjZX0ubGlzdC1ncm91cC1pdGVtLXNlY29uZGFyeS5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uLmFjdGl2ZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzQxNDY0Yjtib3JkZXItY29sb3I6IzQxNDY0Yn0ubGlzdC1ncm91cC1pdGVtLXN1Y2Nlc3N7Y29sb3I6IzBmNTEzMjtiYWNrZ3JvdW5kLWNvbG9yOiNkMWU3ZGR9Lmxpc3QtZ3JvdXAtaXRlbS1zdWNjZXNzLmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246Zm9jdXMsLmxpc3QtZ3JvdXAtaXRlbS1zdWNjZXNzLmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246aG92ZXJ7Y29sb3I6IzBmNTEzMjtiYWNrZ3JvdW5kLWNvbG9yOiNiY2QwYzd9Lmxpc3QtZ3JvdXAtaXRlbS1zdWNjZXNzLmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb24uYWN0aXZle2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMGY1MTMyO2JvcmRlci1jb2xvcjojMGY1MTMyfS5saXN0LWdyb3VwLWl0ZW0taW5mb3tjb2xvcjojMDU1MTYwO2JhY2tncm91bmQtY29sb3I6I2NmZjRmY30ubGlzdC1ncm91cC1pdGVtLWluZm8ubGlzdC1ncm91cC1pdGVtLWFjdGlvbjpmb2N1cywubGlzdC1ncm91cC1pdGVtLWluZm8ubGlzdC1ncm91cC1pdGVtLWFjdGlvbjpob3Zlcntjb2xvcjojMDU1MTYwO2JhY2tncm91bmQtY29sb3I6I2JhZGNlM30ubGlzdC1ncm91cC1pdGVtLWluZm8ubGlzdC1ncm91cC1pdGVtLWFjdGlvbi5hY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMwNTUxNjA7Ym9yZGVyLWNvbG9yOiMwNTUxNjB9Lmxpc3QtZ3JvdXAtaXRlbS13YXJuaW5ne2NvbG9yOiM2NjRkMDM7YmFja2dyb3VuZC1jb2xvcjojZmZmM2NkfS5saXN0LWdyb3VwLWl0ZW0td2FybmluZy5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmZvY3VzLC5saXN0LWdyb3VwLWl0ZW0td2FybmluZy5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmhvdmVye2NvbG9yOiM2NjRkMDM7YmFja2dyb3VuZC1jb2xvcjojZTZkYmI5fS5saXN0LWdyb3VwLWl0ZW0td2FybmluZy5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uLmFjdGl2ZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzY2NGQwMztib3JkZXItY29sb3I6IzY2NGQwM30ubGlzdC1ncm91cC1pdGVtLWRhbmdlcntjb2xvcjojODQyMDI5O2JhY2tncm91bmQtY29sb3I6I2Y4ZDdkYX0ubGlzdC1ncm91cC1pdGVtLWRhbmdlci5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmZvY3VzLC5saXN0LWdyb3VwLWl0ZW0tZGFuZ2VyLmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246aG92ZXJ7Y29sb3I6Izg0MjAyOTtiYWNrZ3JvdW5kLWNvbG9yOiNkZmMyYzR9Lmxpc3QtZ3JvdXAtaXRlbS1kYW5nZXIubGlzdC1ncm91cC1pdGVtLWFjdGlvbi5hY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiM4NDIwMjk7Ym9yZGVyLWNvbG9yOiM4NDIwMjl9Lmxpc3QtZ3JvdXAtaXRlbS1saWdodHtjb2xvcjojNjM2NDY0O2JhY2tncm91bmQtY29sb3I6I2ZlZmVmZX0ubGlzdC1ncm91cC1pdGVtLWxpZ2h0Lmxpc3QtZ3JvdXAtaXRlbS1hY3Rpb246Zm9jdXMsLmxpc3QtZ3JvdXAtaXRlbS1saWdodC5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmhvdmVye2NvbG9yOiM2MzY0NjQ7YmFja2dyb3VuZC1jb2xvcjojZTVlNWU1fS5saXN0LWdyb3VwLWl0ZW0tbGlnaHQubGlzdC1ncm91cC1pdGVtLWFjdGlvbi5hY3RpdmV7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiM2MzY0NjQ7Ym9yZGVyLWNvbG9yOiM2MzY0NjR9Lmxpc3QtZ3JvdXAtaXRlbS1kYXJre2NvbG9yOiMxNDE2MTk7YmFja2dyb3VuZC1jb2xvcjojZDNkM2Q0fS5saXN0LWdyb3VwLWl0ZW0tZGFyay5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmZvY3VzLC5saXN0LWdyb3VwLWl0ZW0tZGFyay5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uOmhvdmVye2NvbG9yOiMxNDE2MTk7YmFja2dyb3VuZC1jb2xvcjojYmViZWJmfS5saXN0LWdyb3VwLWl0ZW0tZGFyay5saXN0LWdyb3VwLWl0ZW0tYWN0aW9uLmFjdGl2ZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzE0MTYxOTtib3JkZXItY29sb3I6IzE0MTYxOX0uYnRuLWNsb3Nle2JveC1zaXppbmc6Y29udGVudC1ib3g7d2lkdGg6MWVtO2hlaWdodDoxZW07cGFkZGluZzouMjVlbSAuMjVlbTtjb2xvcjojMDAwO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQgdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDE2IDE2JyBmaWxsPSclMjMwMDAnJTNlJTNjcGF0aCBkPSdNLjI5My4yOTNhMSAxIDAgMDExLjQxNCAwTDggNi41ODYgMTQuMjkzLjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDkuNDE0IDhsNi4yOTMgNi4yOTNhMSAxIDAgMDEtMS40MTQgMS40MTRMOCA5LjQxNGwtNi4yOTMgNi4yOTNhMSAxIDAgMDEtMS40MTQtMS40MTRMNi41ODYgOCAuMjkzIDEuNzA3YTEgMSAwIDAxMC0xLjQxNHonLyUzZSUzYy9zdmclM2UiKSBjZW50ZXIvMWVtIGF1dG8gbm8tcmVwZWF0O2JvcmRlcjowO2JvcmRlci1yYWRpdXM6LjI1cmVtO29wYWNpdHk6LjV9LmJ0bi1jbG9zZTpob3Zlcntjb2xvcjojMDAwO3RleHQtZGVjb3JhdGlvbjpub25lO29wYWNpdHk6Ljc1fS5idG4tY2xvc2U6Zm9jdXN7b3V0bGluZTowO2JveC1zaGFkb3c6MCAwIDAgLjI1cmVtIHJnYmEoMTMsMTEwLDI1MywuMjUpO29wYWNpdHk6MX0uYnRuLWNsb3NlLmRpc2FibGVkLC5idG4tY2xvc2U6ZGlzYWJsZWR7cG9pbnRlci1ldmVudHM6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7b3BhY2l0eTouMjV9LmJ0bi1jbG9zZS13aGl0ZXtmaWx0ZXI6aW52ZXJ0KDEpIGdyYXlzY2FsZSgxMDAlKSBicmlnaHRuZXNzKDIwMCUpfS50b2FzdHt3aWR0aDozNTBweDttYXgtd2lkdGg6MTAwJTtmb250LXNpemU6Ljg3NXJlbTtwb2ludGVyLWV2ZW50czphdXRvO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuODUpO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEpO2JveC1zaGFkb3c6MCAuNXJlbSAxcmVtIHJnYmEoMCwwLDAsLjE1KTtib3JkZXItcmFkaXVzOi4yNXJlbX0udG9hc3Q6bm90KC5zaG93aW5nKTpub3QoLnNob3cpe29wYWNpdHk6MH0udG9hc3QuaGlkZXtkaXNwbGF5Om5vbmV9LnRvYXN0LWNvbnRhaW5lcnt3aWR0aDotd2Via2l0LW1heC1jb250ZW50O3dpZHRoOi1tb3otbWF4LWNvbnRlbnQ7d2lkdGg6bWF4LWNvbnRlbnQ7bWF4LXdpZHRoOjEwMCU7cG9pbnRlci1ldmVudHM6bm9uZX0udG9hc3QtY29udGFpbmVyPjpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1ib3R0b206Ljc1cmVtfS50b2FzdC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOi41cmVtIC43NXJlbTtjb2xvcjojNmM3NTdkO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuODUpO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNSk7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czpjYWxjKC4yNXJlbSAtIDFweCk7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6Y2FsYyguMjVyZW0gLSAxcHgpfS50b2FzdC1oZWFkZXIgLmJ0bi1jbG9zZXttYXJnaW4tcmlnaHQ6LS4zNzVyZW07bWFyZ2luLWxlZnQ6Ljc1cmVtfS50b2FzdC1ib2R5e3BhZGRpbmc6Ljc1cmVtO3dvcmQtd3JhcDpicmVhay13b3JkfS5tb2RhbHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7ei1pbmRleDoxMDYwO2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6YXV0bztvdXRsaW5lOjB9Lm1vZGFsLWRpYWxvZ3twb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDphdXRvO21hcmdpbjouNXJlbTtwb2ludGVyLWV2ZW50czpub25lfS5tb2RhbC5mYWRlIC5tb2RhbC1kaWFsb2d7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGVhc2Utb3V0O3RyYW5zZm9ybTp0cmFuc2xhdGUoMCwtNTBweCl9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7Lm1vZGFsLmZhZGUgLm1vZGFsLWRpYWxvZ3t0cmFuc2l0aW9uOm5vbmV9fS5tb2RhbC5zaG93IC5tb2RhbC1kaWFsb2d7dHJhbnNmb3JtOm5vbmV9Lm1vZGFsLm1vZGFsLXN0YXRpYyAubW9kYWwtZGlhbG9ne3RyYW5zZm9ybTpzY2FsZSgxLjAyKX0ubW9kYWwtZGlhbG9nLXNjcm9sbGFibGV7aGVpZ2h0OmNhbGMoMTAwJSAtIDFyZW0pfS5tb2RhbC1kaWFsb2ctc2Nyb2xsYWJsZSAubW9kYWwtY29udGVudHttYXgtaGVpZ2h0OjEwMCU7b3ZlcmZsb3c6aGlkZGVufS5tb2RhbC1kaWFsb2ctc2Nyb2xsYWJsZSAubW9kYWwtYm9keXtvdmVyZmxvdy15OmF1dG99Lm1vZGFsLWRpYWxvZy1jZW50ZXJlZHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO21pbi1oZWlnaHQ6Y2FsYygxMDAlIC0gMXJlbSl9Lm1vZGFsLWNvbnRlbnR7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt3aWR0aDoxMDAlO3BvaW50ZXItZXZlbnRzOmF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO2JvcmRlci1yYWRpdXM6LjNyZW07b3V0bGluZTowfS5tb2RhbC1iYWNrZHJvcHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7ei1pbmRleDoxMDQwO3dpZHRoOjEwMHZ3O2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDB9Lm1vZGFsLWJhY2tkcm9wLmZhZGV7b3BhY2l0eTowfS5tb2RhbC1iYWNrZHJvcC5zaG93e29wYWNpdHk6LjV9Lm1vZGFsLWhlYWRlcntkaXNwbGF5OmZsZXg7ZmxleC1zaHJpbms6MDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxcmVtIDFyZW07Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RlZTJlNjtib3JkZXItdG9wLWxlZnQtcmFkaXVzOmNhbGMoLjNyZW0gLSAxcHgpO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOmNhbGMoLjNyZW0gLSAxcHgpfS5tb2RhbC1oZWFkZXIgLmJ0bi1jbG9zZXtwYWRkaW5nOi41cmVtIC41cmVtO21hcmdpbjotLjVyZW0gLS41cmVtIC0uNXJlbSBhdXRvfS5tb2RhbC10aXRsZXttYXJnaW4tYm90dG9tOjA7bGluZS1oZWlnaHQ6MS41fS5tb2RhbC1ib2R5e3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXg6MSAxIGF1dG87cGFkZGluZzoxcmVtfS5tb2RhbC1mb290ZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2ZsZXgtc2hyaW5rOjA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtwYWRkaW5nOi43NXJlbTtib3JkZXItdG9wOjFweCBzb2xpZCAjZGVlMmU2O2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOmNhbGMoLjNyZW0gLSAxcHgpO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6Y2FsYyguM3JlbSAtIDFweCl9Lm1vZGFsLWZvb3Rlcj4qe21hcmdpbjouMjVyZW19QG1lZGlhIChtaW4td2lkdGg6NTc2cHgpey5tb2RhbC1kaWFsb2d7bWF4LXdpZHRoOjUwMHB4O21hcmdpbjoxLjc1cmVtIGF1dG99Lm1vZGFsLWRpYWxvZy1zY3JvbGxhYmxle2hlaWdodDpjYWxjKDEwMCUgLSAzLjVyZW0pfS5tb2RhbC1kaWFsb2ctY2VudGVyZWR7bWluLWhlaWdodDpjYWxjKDEwMCUgLSAzLjVyZW0pfS5tb2RhbC1zbXttYXgtd2lkdGg6MzAwcHh9fUBtZWRpYSAobWluLXdpZHRoOjk5MnB4KXsubW9kYWwtbGcsLm1vZGFsLXhse21heC13aWR0aDo4MDBweH19QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsubW9kYWwteGx7bWF4LXdpZHRoOjExNDBweH19Lm1vZGFsLWZ1bGxzY3JlZW57d2lkdGg6MTAwdnc7bWF4LXdpZHRoOm5vbmU7aGVpZ2h0OjEwMCU7bWFyZ2luOjB9Lm1vZGFsLWZ1bGxzY3JlZW4gLm1vZGFsLWNvbnRlbnR7aGVpZ2h0OjEwMCU7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czowfS5tb2RhbC1mdWxsc2NyZWVuIC5tb2RhbC1oZWFkZXJ7Ym9yZGVyLXJhZGl1czowfS5tb2RhbC1mdWxsc2NyZWVuIC5tb2RhbC1ib2R5e292ZXJmbG93LXk6YXV0b30ubW9kYWwtZnVsbHNjcmVlbiAubW9kYWwtZm9vdGVye2JvcmRlci1yYWRpdXM6MH1AbWVkaWEgKG1heC13aWR0aDo1NzUuOThweCl7Lm1vZGFsLWZ1bGxzY3JlZW4tc20tZG93bnt3aWR0aDoxMDB2dzttYXgtd2lkdGg6bm9uZTtoZWlnaHQ6MTAwJTttYXJnaW46MH0ubW9kYWwtZnVsbHNjcmVlbi1zbS1kb3duIC5tb2RhbC1jb250ZW50e2hlaWdodDoxMDAlO2JvcmRlcjowO2JvcmRlci1yYWRpdXM6MH0ubW9kYWwtZnVsbHNjcmVlbi1zbS1kb3duIC5tb2RhbC1oZWFkZXJ7Ym9yZGVyLXJhZGl1czowfS5tb2RhbC1mdWxsc2NyZWVuLXNtLWRvd24gLm1vZGFsLWJvZHl7b3ZlcmZsb3cteTphdXRvfS5tb2RhbC1mdWxsc2NyZWVuLXNtLWRvd24gLm1vZGFsLWZvb3Rlcntib3JkZXItcmFkaXVzOjB9fUBtZWRpYSAobWF4LXdpZHRoOjc2Ny45OHB4KXsubW9kYWwtZnVsbHNjcmVlbi1tZC1kb3due3dpZHRoOjEwMHZ3O21heC13aWR0aDpub25lO2hlaWdodDoxMDAlO21hcmdpbjowfS5tb2RhbC1mdWxsc2NyZWVuLW1kLWRvd24gLm1vZGFsLWNvbnRlbnR7aGVpZ2h0OjEwMCU7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czowfS5tb2RhbC1mdWxsc2NyZWVuLW1kLWRvd24gLm1vZGFsLWhlYWRlcntib3JkZXItcmFkaXVzOjB9Lm1vZGFsLWZ1bGxzY3JlZW4tbWQtZG93biAubW9kYWwtYm9keXtvdmVyZmxvdy15OmF1dG99Lm1vZGFsLWZ1bGxzY3JlZW4tbWQtZG93biAubW9kYWwtZm9vdGVye2JvcmRlci1yYWRpdXM6MH19QG1lZGlhIChtYXgtd2lkdGg6OTkxLjk4cHgpey5tb2RhbC1mdWxsc2NyZWVuLWxnLWRvd257d2lkdGg6MTAwdnc7bWF4LXdpZHRoOm5vbmU7aGVpZ2h0OjEwMCU7bWFyZ2luOjB9Lm1vZGFsLWZ1bGxzY3JlZW4tbGctZG93biAubW9kYWwtY29udGVudHtoZWlnaHQ6MTAwJTtib3JkZXI6MDtib3JkZXItcmFkaXVzOjB9Lm1vZGFsLWZ1bGxzY3JlZW4tbGctZG93biAubW9kYWwtaGVhZGVye2JvcmRlci1yYWRpdXM6MH0ubW9kYWwtZnVsbHNjcmVlbi1sZy1kb3duIC5tb2RhbC1ib2R5e292ZXJmbG93LXk6YXV0b30ubW9kYWwtZnVsbHNjcmVlbi1sZy1kb3duIC5tb2RhbC1mb290ZXJ7Ym9yZGVyLXJhZGl1czowfX1AbWVkaWEgKG1heC13aWR0aDoxMTk5Ljk4cHgpey5tb2RhbC1mdWxsc2NyZWVuLXhsLWRvd257d2lkdGg6MTAwdnc7bWF4LXdpZHRoOm5vbmU7aGVpZ2h0OjEwMCU7bWFyZ2luOjB9Lm1vZGFsLWZ1bGxzY3JlZW4teGwtZG93biAubW9kYWwtY29udGVudHtoZWlnaHQ6MTAwJTtib3JkZXI6MDtib3JkZXItcmFkaXVzOjB9Lm1vZGFsLWZ1bGxzY3JlZW4teGwtZG93biAubW9kYWwtaGVhZGVye2JvcmRlci1yYWRpdXM6MH0ubW9kYWwtZnVsbHNjcmVlbi14bC1kb3duIC5tb2RhbC1ib2R5e292ZXJmbG93LXk6YXV0b30ubW9kYWwtZnVsbHNjcmVlbi14bC1kb3duIC5tb2RhbC1mb290ZXJ7Ym9yZGVyLXJhZGl1czowfX1AbWVkaWEgKG1heC13aWR0aDoxMzk5Ljk4cHgpey5tb2RhbC1mdWxsc2NyZWVuLXh4bC1kb3due3dpZHRoOjEwMHZ3O21heC13aWR0aDpub25lO2hlaWdodDoxMDAlO21hcmdpbjowfS5tb2RhbC1mdWxsc2NyZWVuLXh4bC1kb3duIC5tb2RhbC1jb250ZW50e2hlaWdodDoxMDAlO2JvcmRlcjowO2JvcmRlci1yYWRpdXM6MH0ubW9kYWwtZnVsbHNjcmVlbi14eGwtZG93biAubW9kYWwtaGVhZGVye2JvcmRlci1yYWRpdXM6MH0ubW9kYWwtZnVsbHNjcmVlbi14eGwtZG93biAubW9kYWwtYm9keXtvdmVyZmxvdy15OmF1dG99Lm1vZGFsLWZ1bGxzY3JlZW4teHhsLWRvd24gLm1vZGFsLWZvb3Rlcntib3JkZXItcmFkaXVzOjB9fS50b29sdGlwe3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTA4MDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2ZvbnQtZmFtaWx5OnZhcigtLWJzLWZvbnQtc2Fucy1zZXJpZik7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjEuNTt0ZXh0LWFsaWduOmxlZnQ7dGV4dC1hbGlnbjpzdGFydDt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXNoYWRvdzpub25lO3RleHQtdHJhbnNmb3JtOm5vbmU7bGV0dGVyLXNwYWNpbmc6bm9ybWFsO3dvcmQtYnJlYWs6bm9ybWFsO3dvcmQtc3BhY2luZzpub3JtYWw7d2hpdGUtc3BhY2U6bm9ybWFsO2xpbmUtYnJlYWs6YXV0bztmb250LXNpemU6Ljg3NXJlbTt3b3JkLXdyYXA6YnJlYWstd29yZDtvcGFjaXR5OjB9LnRvb2x0aXAuc2hvd3tvcGFjaXR5Oi45fS50b29sdGlwIC50b29sdGlwLWFycm93e3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7d2lkdGg6LjhyZW07aGVpZ2h0Oi40cmVtfS50b29sdGlwIC50b29sdGlwLWFycm93OjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7Y29udGVudDoiIjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXN0eWxlOnNvbGlkfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj10b3BdLC5icy10b29sdGlwLXRvcHtwYWRkaW5nOi40cmVtIDB9LmJzLXRvb2x0aXAtYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePXRvcF0gLnRvb2x0aXAtYXJyb3csLmJzLXRvb2x0aXAtdG9wIC50b29sdGlwLWFycm93e2JvdHRvbTowfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj10b3BdIC50b29sdGlwLWFycm93OjpiZWZvcmUsLmJzLXRvb2x0aXAtdG9wIC50b29sdGlwLWFycm93OjpiZWZvcmV7dG9wOi0xcHg7Ym9yZGVyLXdpZHRoOi40cmVtIC40cmVtIDA7Ym9yZGVyLXRvcC1jb2xvcjojMDAwfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1yaWdodF0sLmJzLXRvb2x0aXAtZW5ke3BhZGRpbmc6MCAuNHJlbX0uYnMtdG9vbHRpcC1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49cmlnaHRdIC50b29sdGlwLWFycm93LC5icy10b29sdGlwLWVuZCAudG9vbHRpcC1hcnJvd3tsZWZ0OjA7d2lkdGg6LjRyZW07aGVpZ2h0Oi44cmVtfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1yaWdodF0gLnRvb2x0aXAtYXJyb3c6OmJlZm9yZSwuYnMtdG9vbHRpcC1lbmQgLnRvb2x0aXAtYXJyb3c6OmJlZm9yZXtyaWdodDotMXB4O2JvcmRlci13aWR0aDouNHJlbSAuNHJlbSAuNHJlbSAwO2JvcmRlci1yaWdodC1jb2xvcjojMDAwfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1ib3R0b21dLC5icy10b29sdGlwLWJvdHRvbXtwYWRkaW5nOi40cmVtIDB9LmJzLXRvb2x0aXAtYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePWJvdHRvbV0gLnRvb2x0aXAtYXJyb3csLmJzLXRvb2x0aXAtYm90dG9tIC50b29sdGlwLWFycm93e3RvcDowfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1ib3R0b21dIC50b29sdGlwLWFycm93OjpiZWZvcmUsLmJzLXRvb2x0aXAtYm90dG9tIC50b29sdGlwLWFycm93OjpiZWZvcmV7Ym90dG9tOi0xcHg7Ym9yZGVyLXdpZHRoOjAgLjRyZW0gLjRyZW07Ym9yZGVyLWJvdHRvbS1jb2xvcjojMDAwfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1sZWZ0XSwuYnMtdG9vbHRpcC1zdGFydHtwYWRkaW5nOjAgLjRyZW19LmJzLXRvb2x0aXAtYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePWxlZnRdIC50b29sdGlwLWFycm93LC5icy10b29sdGlwLXN0YXJ0IC50b29sdGlwLWFycm93e3JpZ2h0OjA7d2lkdGg6LjRyZW07aGVpZ2h0Oi44cmVtfS5icy10b29sdGlwLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1sZWZ0XSAudG9vbHRpcC1hcnJvdzo6YmVmb3JlLC5icy10b29sdGlwLXN0YXJ0IC50b29sdGlwLWFycm93OjpiZWZvcmV7bGVmdDotMXB4O2JvcmRlci13aWR0aDouNHJlbSAwIC40cmVtIC40cmVtO2JvcmRlci1sZWZ0LWNvbG9yOiMwMDB9LnRvb2x0aXAtaW5uZXJ7bWF4LXdpZHRoOjIwMHB4O3BhZGRpbmc6LjI1cmVtIC41cmVtO2NvbG9yOiNmZmY7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjojMDAwO2JvcmRlci1yYWRpdXM6LjI1cmVtfS5wb3BvdmVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt6LWluZGV4OjEwNzA7ZGlzcGxheTpibG9jazttYXgtd2lkdGg6Mjc2cHg7Zm9udC1mYW1pbHk6dmFyKC0tYnMtZm9udC1zYW5zLXNlcmlmKTtmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O3RleHQtYWxpZ246bGVmdDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtc2hhZG93Om5vbmU7dGV4dC10cmFuc2Zvcm06bm9uZTtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt3aGl0ZS1zcGFjZTpub3JtYWw7bGluZS1icmVhazphdXRvO2ZvbnQtc2l6ZTouODc1cmVtO3dvcmQtd3JhcDpicmVhay13b3JkO2JhY2tncm91bmQtY29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNsaXA6cGFkZGluZy1ib3g7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTtib3JkZXItcmFkaXVzOi4zcmVtfS5wb3BvdmVyIC5wb3BvdmVyLWFycm93e3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7d2lkdGg6MXJlbTtoZWlnaHQ6LjVyZW19LnBvcG92ZXIgLnBvcG92ZXItYXJyb3c6OmFmdGVyLC5wb3BvdmVyIC5wb3BvdmVyLWFycm93OjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jaztjb250ZW50OiIiO2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItc3R5bGU6c29saWR9LmJzLXBvcG92ZXItYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePXRvcF0+LnBvcG92ZXItYXJyb3csLmJzLXBvcG92ZXItdG9wPi5wb3BvdmVyLWFycm93e2JvdHRvbTpjYWxjKC0uNXJlbSAtIDFweCl9LmJzLXBvcG92ZXItYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePXRvcF0+LnBvcG92ZXItYXJyb3c6OmJlZm9yZSwuYnMtcG9wb3Zlci10b3A+LnBvcG92ZXItYXJyb3c6OmJlZm9yZXtib3R0b206MDtib3JkZXItd2lkdGg6LjVyZW0gLjVyZW0gMDtib3JkZXItdG9wLWNvbG9yOnJnYmEoMCwwLDAsLjI1KX0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49dG9wXT4ucG9wb3Zlci1hcnJvdzo6YWZ0ZXIsLmJzLXBvcG92ZXItdG9wPi5wb3BvdmVyLWFycm93OjphZnRlcntib3R0b206MXB4O2JvcmRlci13aWR0aDouNXJlbSAuNXJlbSAwO2JvcmRlci10b3AtY29sb3I6I2ZmZn0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49cmlnaHRdPi5wb3BvdmVyLWFycm93LC5icy1wb3BvdmVyLWVuZD4ucG9wb3Zlci1hcnJvd3tsZWZ0OmNhbGMoLS41cmVtIC0gMXB4KTt3aWR0aDouNXJlbTtoZWlnaHQ6MXJlbX0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49cmlnaHRdPi5wb3BvdmVyLWFycm93OjpiZWZvcmUsLmJzLXBvcG92ZXItZW5kPi5wb3BvdmVyLWFycm93OjpiZWZvcmV7bGVmdDowO2JvcmRlci13aWR0aDouNXJlbSAuNXJlbSAuNXJlbSAwO2JvcmRlci1yaWdodC1jb2xvcjpyZ2JhKDAsMCwwLC4yNSl9LmJzLXBvcG92ZXItYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePXJpZ2h0XT4ucG9wb3Zlci1hcnJvdzo6YWZ0ZXIsLmJzLXBvcG92ZXItZW5kPi5wb3BvdmVyLWFycm93OjphZnRlcntsZWZ0OjFweDtib3JkZXItd2lkdGg6LjVyZW0gLjVyZW0gLjVyZW0gMDtib3JkZXItcmlnaHQtY29sb3I6I2ZmZn0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49Ym90dG9tXT4ucG9wb3Zlci1hcnJvdywuYnMtcG9wb3Zlci1ib3R0b20+LnBvcG92ZXItYXJyb3d7dG9wOmNhbGMoLS41cmVtIC0gMXB4KX0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49Ym90dG9tXT4ucG9wb3Zlci1hcnJvdzo6YmVmb3JlLC5icy1wb3BvdmVyLWJvdHRvbT4ucG9wb3Zlci1hcnJvdzo6YmVmb3Jle3RvcDowO2JvcmRlci13aWR0aDowIC41cmVtIC41cmVtIC41cmVtO2JvcmRlci1ib3R0b20tY29sb3I6cmdiYSgwLDAsMCwuMjUpfS5icy1wb3BvdmVyLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1ib3R0b21dPi5wb3BvdmVyLWFycm93OjphZnRlciwuYnMtcG9wb3Zlci1ib3R0b20+LnBvcG92ZXItYXJyb3c6OmFmdGVye3RvcDoxcHg7Ym9yZGVyLXdpZHRoOjAgLjVyZW0gLjVyZW0gLjVyZW07Ym9yZGVyLWJvdHRvbS1jb2xvcjojZmZmfS5icy1wb3BvdmVyLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1ib3R0b21dIC5wb3BvdmVyLWhlYWRlcjo6YmVmb3JlLC5icy1wb3BvdmVyLWJvdHRvbSAucG9wb3Zlci1oZWFkZXI6OmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjUwJTtkaXNwbGF5OmJsb2NrO3dpZHRoOjFyZW07bWFyZ2luLWxlZnQ6LS41cmVtO2NvbnRlbnQ6IiI7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2YwZjBmMH0uYnMtcG9wb3Zlci1hdXRvW2RhdGEtcG9wcGVyLXBsYWNlbWVudF49bGVmdF0+LnBvcG92ZXItYXJyb3csLmJzLXBvcG92ZXItc3RhcnQ+LnBvcG92ZXItYXJyb3d7cmlnaHQ6Y2FsYygtLjVyZW0gLSAxcHgpO3dpZHRoOi41cmVtO2hlaWdodDoxcmVtfS5icy1wb3BvdmVyLWF1dG9bZGF0YS1wb3BwZXItcGxhY2VtZW50Xj1sZWZ0XT4ucG9wb3Zlci1hcnJvdzo6YmVmb3JlLC5icy1wb3BvdmVyLXN0YXJ0Pi5wb3BvdmVyLWFycm93OjpiZWZvcmV7cmlnaHQ6MDtib3JkZXItd2lkdGg6LjVyZW0gMCAuNXJlbSAuNXJlbTtib3JkZXItbGVmdC1jb2xvcjpyZ2JhKDAsMCwwLC4yNSl9LmJzLXBvcG92ZXItYXV0b1tkYXRhLXBvcHBlci1wbGFjZW1lbnRePWxlZnRdPi5wb3BvdmVyLWFycm93OjphZnRlciwuYnMtcG9wb3Zlci1zdGFydD4ucG9wb3Zlci1hcnJvdzo6YWZ0ZXJ7cmlnaHQ6MXB4O2JvcmRlci13aWR0aDouNXJlbSAwIC41cmVtIC41cmVtO2JvcmRlci1sZWZ0LWNvbG9yOiNmZmZ9LnBvcG92ZXItaGVhZGVye3BhZGRpbmc6LjVyZW0gMXJlbTttYXJnaW4tYm90dG9tOjA7Zm9udC1zaXplOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZjBmMGYwO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkOGQ4ZDg7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czpjYWxjKC4zcmVtIC0gMXB4KTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czpjYWxjKC4zcmVtIC0gMXB4KX0ucG9wb3Zlci1oZWFkZXI6ZW1wdHl7ZGlzcGxheTpub25lfS5wb3BvdmVyLWJvZHl7cGFkZGluZzoxcmVtIDFyZW07Y29sb3I6IzIxMjUyOX0uY2Fyb3VzZWx7cG9zaXRpb246cmVsYXRpdmV9LmNhcm91c2VsLnBvaW50ZXItZXZlbnR7dG91Y2gtYWN0aW9uOnBhbi15fS5jYXJvdXNlbC1pbm5lcntwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbn0uY2Fyb3VzZWwtaW5uZXI6OmFmdGVye2Rpc3BsYXk6YmxvY2s7Y2xlYXI6Ym90aDtjb250ZW50OiIifS5jYXJvdXNlbC1pdGVte3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6bm9uZTtmbG9hdDpsZWZ0O3dpZHRoOjEwMCU7bWFyZ2luLXJpZ2h0Oi0xMDAlOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjZzIGVhc2UtaW4tb3V0fUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5jYXJvdXNlbC1pdGVte3RyYW5zaXRpb246bm9uZX19LmNhcm91c2VsLWl0ZW0tbmV4dCwuY2Fyb3VzZWwtaXRlbS1wcmV2LC5jYXJvdXNlbC1pdGVtLmFjdGl2ZXtkaXNwbGF5OmJsb2NrfS5hY3RpdmUuY2Fyb3VzZWwtaXRlbS1lbmQsLmNhcm91c2VsLWl0ZW0tbmV4dDpub3QoLmNhcm91c2VsLWl0ZW0tc3RhcnQpe3RyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpfS5hY3RpdmUuY2Fyb3VzZWwtaXRlbS1zdGFydCwuY2Fyb3VzZWwtaXRlbS1wcmV2Om5vdCguY2Fyb3VzZWwtaXRlbS1lbmQpe3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMDAlKX0uY2Fyb3VzZWwtZmFkZSAuY2Fyb3VzZWwtaXRlbXtvcGFjaXR5OjA7dHJhbnNpdGlvbi1wcm9wZXJ0eTpvcGFjaXR5O3RyYW5zZm9ybTpub25lfS5jYXJvdXNlbC1mYWRlIC5jYXJvdXNlbC1pdGVtLW5leHQuY2Fyb3VzZWwtaXRlbS1zdGFydCwuY2Fyb3VzZWwtZmFkZSAuY2Fyb3VzZWwtaXRlbS1wcmV2LmNhcm91c2VsLWl0ZW0tZW5kLC5jYXJvdXNlbC1mYWRlIC5jYXJvdXNlbC1pdGVtLmFjdGl2ZXt6LWluZGV4OjE7b3BhY2l0eToxfS5jYXJvdXNlbC1mYWRlIC5hY3RpdmUuY2Fyb3VzZWwtaXRlbS1lbmQsLmNhcm91c2VsLWZhZGUgLmFjdGl2ZS5jYXJvdXNlbC1pdGVtLXN0YXJ0e3otaW5kZXg6MDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDBzIC42c31AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246cmVkdWNlKXsuY2Fyb3VzZWwtZmFkZSAuYWN0aXZlLmNhcm91c2VsLWl0ZW0tZW5kLC5jYXJvdXNlbC1mYWRlIC5hY3RpdmUuY2Fyb3VzZWwtaXRlbS1zdGFydHt0cmFuc2l0aW9uOm5vbmV9fS5jYXJvdXNlbC1jb250cm9sLW5leHQsLmNhcm91c2VsLWNvbnRyb2wtcHJldntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDt6LWluZGV4OjE7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjE1JTtwYWRkaW5nOjA7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtvcGFjaXR5Oi41O3RyYW5zaXRpb246b3BhY2l0eSAuMTVzIGVhc2V9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmNhcm91c2VsLWNvbnRyb2wtbmV4dCwuY2Fyb3VzZWwtY29udHJvbC1wcmV2e3RyYW5zaXRpb246bm9uZX19LmNhcm91c2VsLWNvbnRyb2wtbmV4dDpmb2N1cywuY2Fyb3VzZWwtY29udHJvbC1uZXh0OmhvdmVyLC5jYXJvdXNlbC1jb250cm9sLXByZXY6Zm9jdXMsLmNhcm91c2VsLWNvbnRyb2wtcHJldjpob3Zlcntjb2xvcjojZmZmO3RleHQtZGVjb3JhdGlvbjpub25lO291dGxpbmU6MDtvcGFjaXR5Oi45fS5jYXJvdXNlbC1jb250cm9sLXByZXZ7bGVmdDowfS5jYXJvdXNlbC1jb250cm9sLW5leHR7cmlnaHQ6MH0uY2Fyb3VzZWwtY29udHJvbC1uZXh0LWljb24sLmNhcm91c2VsLWNvbnRyb2wtcHJldi1pY29ue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjJyZW07aGVpZ2h0OjJyZW07YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtc2l6ZToxMDAlIDEwMCV9LmNhcm91c2VsLWNvbnRyb2wtcHJldi1pY29ue2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDE2IDE2JyBmaWxsPSclMjNmZmYnJTNlJTNjcGF0aCBkPSdNMTEuMzU0IDEuNjQ2YS41LjUgMCAwIDEgMCAuNzA4TDUuNzA3IDhsNS42NDcgNS42NDZhLjUuNSAwIDAgMS0uNzA4LjcwOGwtNi02YS41LjUgMCAwIDEgMC0uNzA4bDYtNmEuNS41IDAgMCAxIC43MDggMHonLyUzZSUzYy9zdmclM2UiKX0uY2Fyb3VzZWwtY29udHJvbC1uZXh0LWljb257YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTYgMTYnIGZpbGw9JyUyM2ZmZiclM2UlM2NwYXRoIGQ9J000LjY0NiAxLjY0NmEuNS41IDAgMCAxIC43MDggMGw2IDZhLjUuNSAwIDAgMSAwIC43MDhsLTYgNmEuNS41IDAgMCAxLS43MDgtLjcwOEwxMC4yOTMgOCA0LjY0NiAyLjM1NGEuNS41IDAgMCAxIDAtLjcwOHonLyUzZSUzYy9zdmclM2UiKX0uY2Fyb3VzZWwtaW5kaWNhdG9yc3twb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDt6LWluZGV4OjI7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzowO21hcmdpbi1yaWdodDoxNSU7bWFyZ2luLWJvdHRvbToxcmVtO21hcmdpbi1sZWZ0OjE1JTtsaXN0LXN0eWxlOm5vbmV9LmNhcm91c2VsLWluZGljYXRvcnMgW2RhdGEtYnMtdGFyZ2V0XXtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2ZsZXg6MCAxIGF1dG87d2lkdGg6MzBweDtoZWlnaHQ6M3B4O3BhZGRpbmc6MDttYXJnaW4tcmlnaHQ6M3B4O21hcmdpbi1sZWZ0OjNweDt0ZXh0LWluZGVudDotOTk5cHg7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtib3JkZXI6MDtib3JkZXItdG9wOjEwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbToxMHB4IHNvbGlkIHRyYW5zcGFyZW50O29wYWNpdHk6LjU7dHJhbnNpdGlvbjpvcGFjaXR5IC42cyBlYXNlfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5jYXJvdXNlbC1pbmRpY2F0b3JzIFtkYXRhLWJzLXRhcmdldF17dHJhbnNpdGlvbjpub25lfX0uY2Fyb3VzZWwtaW5kaWNhdG9ycyAuYWN0aXZle29wYWNpdHk6MX0uY2Fyb3VzZWwtY2FwdGlvbntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxNSU7Ym90dG9tOjEuMjVyZW07bGVmdDoxNSU7cGFkZGluZy10b3A6MS4yNXJlbTtwYWRkaW5nLWJvdHRvbToxLjI1cmVtO2NvbG9yOiNmZmY7dGV4dC1hbGlnbjpjZW50ZXJ9LmNhcm91c2VsLWRhcmsgLmNhcm91c2VsLWNvbnRyb2wtbmV4dC1pY29uLC5jYXJvdXNlbC1kYXJrIC5jYXJvdXNlbC1jb250cm9sLXByZXYtaWNvbntmaWx0ZXI6aW52ZXJ0KDEpIGdyYXlzY2FsZSgxMDApfS5jYXJvdXNlbC1kYXJrIC5jYXJvdXNlbC1pbmRpY2F0b3JzIFtkYXRhLWJzLXRhcmdldF17YmFja2dyb3VuZC1jb2xvcjojMDAwfS5jYXJvdXNlbC1kYXJrIC5jYXJvdXNlbC1jYXB0aW9ue2NvbG9yOiMwMDB9QC13ZWJraXQta2V5ZnJhbWVzIHNwaW5uZXItYm9yZGVye3Rve3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QGtleWZyYW1lcyBzcGlubmVyLWJvcmRlcnt0b3t0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fS5zcGlubmVyLWJvcmRlcntkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoycmVtO2hlaWdodDoycmVtO3ZlcnRpY2FsLWFsaWduOi0uMTI1ZW07Ym9yZGVyOi4yNWVtIHNvbGlkIGN1cnJlbnRDb2xvcjtib3JkZXItcmlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo1MCU7LXdlYmtpdC1hbmltYXRpb246Ljc1cyBsaW5lYXIgaW5maW5pdGUgc3Bpbm5lci1ib3JkZXI7YW5pbWF0aW9uOi43NXMgbGluZWFyIGluZmluaXRlIHNwaW5uZXItYm9yZGVyfS5zcGlubmVyLWJvcmRlci1zbXt3aWR0aDoxcmVtO2hlaWdodDoxcmVtO2JvcmRlci13aWR0aDouMmVtfUAtd2Via2l0LWtleWZyYW1lcyBzcGlubmVyLWdyb3d7MCV7dHJhbnNmb3JtOnNjYWxlKDApfTUwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOm5vbmV9fUBrZXlmcmFtZXMgc3Bpbm5lci1ncm93ezAle3RyYW5zZm9ybTpzY2FsZSgwKX01MCV7b3BhY2l0eToxO3RyYW5zZm9ybTpub25lfX0uc3Bpbm5lci1ncm93e2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjJyZW07aGVpZ2h0OjJyZW07dmVydGljYWwtYWxpZ246LS4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOmN1cnJlbnRDb2xvcjtib3JkZXItcmFkaXVzOjUwJTtvcGFjaXR5OjA7LXdlYmtpdC1hbmltYXRpb246Ljc1cyBsaW5lYXIgaW5maW5pdGUgc3Bpbm5lci1ncm93O2FuaW1hdGlvbjouNzVzIGxpbmVhciBpbmZpbml0ZSBzcGlubmVyLWdyb3d9LnNwaW5uZXItZ3Jvdy1zbXt3aWR0aDoxcmVtO2hlaWdodDoxcmVtfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5zcGlubmVyLWJvcmRlciwuc3Bpbm5lci1ncm93ey13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjEuNXM7YW5pbWF0aW9uLWR1cmF0aW9uOjEuNXN9fS5vZmZjYW52YXN7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7ei1pbmRleDoxMDUwO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWF4LXdpZHRoOjEwMCU7dmlzaWJpbGl0eTpoaWRkZW47YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtvdXRsaW5lOjA7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGVhc2UtaW4tb3V0fUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjpyZWR1Y2Upey5vZmZjYW52YXN7dHJhbnNpdGlvbjpub25lfX0ub2ZmY2FudmFzLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MXJlbSAxcmVtfS5vZmZjYW52YXMtaGVhZGVyIC5idG4tY2xvc2V7cGFkZGluZzouNXJlbSAuNXJlbTttYXJnaW46LS41cmVtIC0uNXJlbSAtLjVyZW0gYXV0b30ub2ZmY2FudmFzLXRpdGxle21hcmdpbi1ib3R0b206MDtsaW5lLWhlaWdodDoxLjV9Lm9mZmNhbnZhcy1ib2R5e2ZsZXgtZ3JvdzoxO3BhZGRpbmc6MXJlbSAxcmVtO292ZXJmbG93LXk6YXV0b30ub2ZmY2FudmFzLXN0YXJ0e3RvcDowO2xlZnQ6MDt3aWR0aDo0MDBweDtib3JkZXItcmlnaHQ6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMDAlKX0ub2ZmY2FudmFzLWVuZHt0b3A6MDtyaWdodDowO3dpZHRoOjQwMHB4O2JvcmRlci1sZWZ0OjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKX0ub2ZmY2FudmFzLXRvcHt0b3A6MDtyaWdodDowO2xlZnQ6MDtoZWlnaHQ6MzB2aDttYXgtaGVpZ2h0OjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgwLDAsMCwuMik7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMCUpfS5vZmZjYW52YXMtYm90dG9te3JpZ2h0OjA7bGVmdDowO2hlaWdodDozMHZoO21heC1oZWlnaHQ6MTAwJTtib3JkZXItdG9wOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAlKX0ub2ZmY2FudmFzLnNob3d7dHJhbnNmb3JtOm5vbmV9LmNsZWFyZml4OjphZnRlcntkaXNwbGF5OmJsb2NrO2NsZWFyOmJvdGg7Y29udGVudDoiIn0ubGluay1wcmltYXJ5e2NvbG9yOiMwZDZlZmR9LmxpbmstcHJpbWFyeTpmb2N1cywubGluay1wcmltYXJ5OmhvdmVye2NvbG9yOiMwYTU4Y2F9Lmxpbmstc2Vjb25kYXJ5e2NvbG9yOiM2Yzc1N2R9Lmxpbmstc2Vjb25kYXJ5OmZvY3VzLC5saW5rLXNlY29uZGFyeTpob3Zlcntjb2xvcjojNTY1ZTY0fS5saW5rLXN1Y2Nlc3N7Y29sb3I6IzE5ODc1NH0ubGluay1zdWNjZXNzOmZvY3VzLC5saW5rLXN1Y2Nlc3M6aG92ZXJ7Y29sb3I6IzE0NmM0M30ubGluay1pbmZve2NvbG9yOiMwZGNhZjB9LmxpbmstaW5mbzpmb2N1cywubGluay1pbmZvOmhvdmVye2NvbG9yOiMzZGQ1ZjN9Lmxpbmstd2FybmluZ3tjb2xvcjojZmZjMTA3fS5saW5rLXdhcm5pbmc6Zm9jdXMsLmxpbmstd2FybmluZzpob3Zlcntjb2xvcjojZmZjZDM5fS5saW5rLWRhbmdlcntjb2xvcjojZGMzNTQ1fS5saW5rLWRhbmdlcjpmb2N1cywubGluay1kYW5nZXI6aG92ZXJ7Y29sb3I6I2IwMmEzN30ubGluay1saWdodHtjb2xvcjojZjhmOWZhfS5saW5rLWxpZ2h0OmZvY3VzLC5saW5rLWxpZ2h0OmhvdmVye2NvbG9yOiNmOWZhZmJ9LmxpbmstZGFya3tjb2xvcjojMjEyNTI5fS5saW5rLWRhcms6Zm9jdXMsLmxpbmstZGFyazpob3Zlcntjb2xvcjojMWExZTIxfS5yYXRpb3twb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlfS5yYXRpbzo6YmVmb3Jle2Rpc3BsYXk6YmxvY2s7cGFkZGluZy10b3A6dmFyKC0tYnMtYXNwZWN0LXJhdGlvKTtjb250ZW50OiIifS5yYXRpbz4qe3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5yYXRpby0xeDF7LS1icy1hc3BlY3QtcmF0aW86MTAwJX0ucmF0aW8tNHgzey0tYnMtYXNwZWN0LXJhdGlvOmNhbGMoMyAvIDQgKiAxMDAlKX0ucmF0aW8tMTZ4OXstLWJzLWFzcGVjdC1yYXRpbzpjYWxjKDkgLyAxNiAqIDEwMCUpfS5yYXRpby0yMXg5ey0tYnMtYXNwZWN0LXJhdGlvOmNhbGMoOSAvIDIxICogMTAwJSl9LmZpeGVkLXRvcHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtyaWdodDowO2xlZnQ6MDt6LWluZGV4OjEwMzB9LmZpeGVkLWJvdHRvbXtwb3NpdGlvbjpmaXhlZDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDt6LWluZGV4OjEwMzB9LnN0aWNreS10b3B7cG9zaXRpb246LXdlYmtpdC1zdGlja3k7cG9zaXRpb246c3RpY2t5O3RvcDowO3otaW5kZXg6MTAyMH1AbWVkaWEgKG1pbi13aWR0aDo1NzZweCl7LnN0aWNreS1zbS10b3B7cG9zaXRpb246LXdlYmtpdC1zdGlja3k7cG9zaXRpb246c3RpY2t5O3RvcDowO3otaW5kZXg6MTAyMH19QG1lZGlhIChtaW4td2lkdGg6NzY4cHgpey5zdGlja3ktbWQtdG9we3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjEwMjB9fUBtZWRpYSAobWluLXdpZHRoOjk5MnB4KXsuc3RpY2t5LWxnLXRvcHtwb3NpdGlvbjotd2Via2l0LXN0aWNreTtwb3NpdGlvbjpzdGlja3k7dG9wOjA7ei1pbmRleDoxMDIwfX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5zdGlja3kteGwtdG9we3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjEwMjB9fUBtZWRpYSAobWluLXdpZHRoOjE0MDBweCl7LnN0aWNreS14eGwtdG9we3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjEwMjB9fS52aXN1YWxseS1oaWRkZW4sLnZpc3VhbGx5LWhpZGRlbi1mb2N1c2FibGU6bm90KDpmb2N1cyk6bm90KDpmb2N1cy13aXRoaW4pe3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDt3aWR0aDoxcHghaW1wb3J0YW50O2hlaWdodDoxcHghaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7bWFyZ2luOi0xcHghaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnQ7Y2xpcDpyZWN0KDAsMCwwLDApIWltcG9ydGFudDt3aGl0ZS1zcGFjZTpub3dyYXAhaW1wb3J0YW50O2JvcmRlcjowIWltcG9ydGFudH0uc3RyZXRjaGVkLWxpbms6OmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3otaW5kZXg6MTtjb250ZW50OiIifS50ZXh0LXRydW5jYXRle292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcH0uYWxpZ24tYmFzZWxpbmV7dmVydGljYWwtYWxpZ246YmFzZWxpbmUhaW1wb3J0YW50fS5hbGlnbi10b3B7dmVydGljYWwtYWxpZ246dG9wIWltcG9ydGFudH0uYWxpZ24tbWlkZGxle3ZlcnRpY2FsLWFsaWduOm1pZGRsZSFpbXBvcnRhbnR9LmFsaWduLWJvdHRvbXt2ZXJ0aWNhbC1hbGlnbjpib3R0b20haW1wb3J0YW50fS5hbGlnbi10ZXh0LWJvdHRvbXt2ZXJ0aWNhbC1hbGlnbjp0ZXh0LWJvdHRvbSFpbXBvcnRhbnR9LmFsaWduLXRleHQtdG9we3ZlcnRpY2FsLWFsaWduOnRleHQtdG9wIWltcG9ydGFudH0uZmxvYXQtc3RhcnR7ZmxvYXQ6bGVmdCFpbXBvcnRhbnR9LmZsb2F0LWVuZHtmbG9hdDpyaWdodCFpbXBvcnRhbnR9LmZsb2F0LW5vbmV7ZmxvYXQ6bm9uZSFpbXBvcnRhbnR9Lm92ZXJmbG93LWF1dG97b3ZlcmZsb3c6YXV0byFpbXBvcnRhbnR9Lm92ZXJmbG93LWhpZGRlbntvdmVyZmxvdzpoaWRkZW4haW1wb3J0YW50fS5vdmVyZmxvdy12aXNpYmxle292ZXJmbG93OnZpc2libGUhaW1wb3J0YW50fS5vdmVyZmxvdy1zY3JvbGx7b3ZlcmZsb3c6c2Nyb2xsIWltcG9ydGFudH0uZC1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLWlubGluZS1ibG9ja3tkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnR9LmQtYmxvY2t7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LmQtZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLXRhYmxle2Rpc3BsYXk6dGFibGUhaW1wb3J0YW50fS5kLXRhYmxlLXJvd3tkaXNwbGF5OnRhYmxlLXJvdyFpbXBvcnRhbnR9LmQtdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLWZsZXh7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uZC1pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uZC1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnNoYWRvd3tib3gtc2hhZG93OjAgLjVyZW0gMXJlbSByZ2JhKDAsMCwwLC4xNSkhaW1wb3J0YW50fS5zaGFkb3ctc217Ym94LXNoYWRvdzowIC4xMjVyZW0gLjI1cmVtIHJnYmEoMCwwLDAsLjA3NSkhaW1wb3J0YW50fS5zaGFkb3ctbGd7Ym94LXNoYWRvdzowIDFyZW0gM3JlbSByZ2JhKDAsMCwwLC4xNzUpIWltcG9ydGFudH0uc2hhZG93LW5vbmV7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudH0ucG9zaXRpb24tc3RhdGlje3Bvc2l0aW9uOnN0YXRpYyFpbXBvcnRhbnR9LnBvc2l0aW9uLXJlbGF0aXZle3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudH0ucG9zaXRpb24tYWJzb2x1dGV7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50fS5wb3NpdGlvbi1maXhlZHtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnR9LnBvc2l0aW9uLXN0aWNreXtwb3NpdGlvbjotd2Via2l0LXN0aWNreSFpbXBvcnRhbnQ7cG9zaXRpb246c3RpY2t5IWltcG9ydGFudH0udG9wLTB7dG9wOjAhaW1wb3J0YW50fS50b3AtNTB7dG9wOjUwJSFpbXBvcnRhbnR9LnRvcC0xMDB7dG9wOjEwMCUhaW1wb3J0YW50fS5ib3R0b20tMHtib3R0b206MCFpbXBvcnRhbnR9LmJvdHRvbS01MHtib3R0b206NTAlIWltcG9ydGFudH0uYm90dG9tLTEwMHtib3R0b206MTAwJSFpbXBvcnRhbnR9LnN0YXJ0LTB7bGVmdDowIWltcG9ydGFudH0uc3RhcnQtNTB7bGVmdDo1MCUhaW1wb3J0YW50fS5zdGFydC0xMDB7bGVmdDoxMDAlIWltcG9ydGFudH0uZW5kLTB7cmlnaHQ6MCFpbXBvcnRhbnR9LmVuZC01MHtyaWdodDo1MCUhaW1wb3J0YW50fS5lbmQtMTAwe3JpZ2h0OjEwMCUhaW1wb3J0YW50fS50cmFuc2xhdGUtbWlkZGxle3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSFpbXBvcnRhbnR9LnRyYW5zbGF0ZS1taWRkbGUteHt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKSFpbXBvcnRhbnR9LnRyYW5zbGF0ZS1taWRkbGUteXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKSFpbXBvcnRhbnR9LmJvcmRlcntib3JkZXI6MXB4IHNvbGlkICNkZWUyZTYhaW1wb3J0YW50fS5ib3JkZXItMHtib3JkZXI6MCFpbXBvcnRhbnR9LmJvcmRlci10b3B7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RlZTJlNiFpbXBvcnRhbnR9LmJvcmRlci10b3AtMHtib3JkZXItdG9wOjAhaW1wb3J0YW50fS5ib3JkZXItZW5ke2JvcmRlci1yaWdodDoxcHggc29saWQgI2RlZTJlNiFpbXBvcnRhbnR9LmJvcmRlci1lbmQtMHtib3JkZXItcmlnaHQ6MCFpbXBvcnRhbnR9LmJvcmRlci1ib3R0b217Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RlZTJlNiFpbXBvcnRhbnR9LmJvcmRlci1ib3R0b20tMHtib3JkZXItYm90dG9tOjAhaW1wb3J0YW50fS5ib3JkZXItc3RhcnR7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNkZWUyZTYhaW1wb3J0YW50fS5ib3JkZXItc3RhcnQtMHtib3JkZXItbGVmdDowIWltcG9ydGFudH0uYm9yZGVyLXByaW1hcnl7Ym9yZGVyLWNvbG9yOiMwZDZlZmQhaW1wb3J0YW50fS5ib3JkZXItc2Vjb25kYXJ5e2JvcmRlci1jb2xvcjojNmM3NTdkIWltcG9ydGFudH0uYm9yZGVyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiMxOTg3NTQhaW1wb3J0YW50fS5ib3JkZXItaW5mb3tib3JkZXItY29sb3I6IzBkY2FmMCFpbXBvcnRhbnR9LmJvcmRlci13YXJuaW5ne2JvcmRlci1jb2xvcjojZmZjMTA3IWltcG9ydGFudH0uYm9yZGVyLWRhbmdlcntib3JkZXItY29sb3I6I2RjMzU0NSFpbXBvcnRhbnR9LmJvcmRlci1saWdodHtib3JkZXItY29sb3I6I2Y4ZjlmYSFpbXBvcnRhbnR9LmJvcmRlci1kYXJre2JvcmRlci1jb2xvcjojMjEyNTI5IWltcG9ydGFudH0uYm9yZGVyLXdoaXRle2JvcmRlci1jb2xvcjojZmZmIWltcG9ydGFudH0uYm9yZGVyLTF7Ym9yZGVyLXdpZHRoOjFweCFpbXBvcnRhbnR9LmJvcmRlci0ye2JvcmRlci13aWR0aDoycHghaW1wb3J0YW50fS5ib3JkZXItM3tib3JkZXItd2lkdGg6M3B4IWltcG9ydGFudH0uYm9yZGVyLTR7Ym9yZGVyLXdpZHRoOjRweCFpbXBvcnRhbnR9LmJvcmRlci01e2JvcmRlci13aWR0aDo1cHghaW1wb3J0YW50fS53LTI1e3dpZHRoOjI1JSFpbXBvcnRhbnR9LnctNTB7d2lkdGg6NTAlIWltcG9ydGFudH0udy03NXt3aWR0aDo3NSUhaW1wb3J0YW50fS53LTEwMHt3aWR0aDoxMDAlIWltcG9ydGFudH0udy1hdXRve3dpZHRoOmF1dG8haW1wb3J0YW50fS5tdy0xMDB7bWF4LXdpZHRoOjEwMCUhaW1wb3J0YW50fS52dy0xMDB7d2lkdGg6MTAwdnchaW1wb3J0YW50fS5taW4tdnctMTAwe21pbi13aWR0aDoxMDB2dyFpbXBvcnRhbnR9LmgtMjV7aGVpZ2h0OjI1JSFpbXBvcnRhbnR9LmgtNTB7aGVpZ2h0OjUwJSFpbXBvcnRhbnR9LmgtNzV7aGVpZ2h0Ojc1JSFpbXBvcnRhbnR9LmgtMTAwe2hlaWdodDoxMDAlIWltcG9ydGFudH0uaC1hdXRve2hlaWdodDphdXRvIWltcG9ydGFudH0ubWgtMTAwe21heC1oZWlnaHQ6MTAwJSFpbXBvcnRhbnR9LnZoLTEwMHtoZWlnaHQ6MTAwdmghaW1wb3J0YW50fS5taW4tdmgtMTAwe21pbi1oZWlnaHQ6MTAwdmghaW1wb3J0YW50fS5mbGV4LWZpbGx7ZmxleDoxIDEgYXV0byFpbXBvcnRhbnR9LmZsZXgtcm93e2ZsZXgtZGlyZWN0aW9uOnJvdyFpbXBvcnRhbnR9LmZsZXgtY29sdW1ue2ZsZXgtZGlyZWN0aW9uOmNvbHVtbiFpbXBvcnRhbnR9LmZsZXgtcm93LXJldmVyc2V7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LWNvbHVtbi1yZXZlcnNle2ZsZXgtZGlyZWN0aW9uOmNvbHVtbi1yZXZlcnNlIWltcG9ydGFudH0uZmxleC1ncm93LTB7ZmxleC1ncm93OjAhaW1wb3J0YW50fS5mbGV4LWdyb3ctMXtmbGV4LWdyb3c6MSFpbXBvcnRhbnR9LmZsZXgtc2hyaW5rLTB7ZmxleC1zaHJpbms6MCFpbXBvcnRhbnR9LmZsZXgtc2hyaW5rLTF7ZmxleC1zaHJpbms6MSFpbXBvcnRhbnR9LmZsZXgtd3JhcHtmbGV4LXdyYXA6d3JhcCFpbXBvcnRhbnR9LmZsZXgtbm93cmFwe2ZsZXgtd3JhcDpub3dyYXAhaW1wb3J0YW50fS5mbGV4LXdyYXAtcmV2ZXJzZXtmbGV4LXdyYXA6d3JhcC1yZXZlcnNlIWltcG9ydGFudH0uZ2FwLTB7Z2FwOjAhaW1wb3J0YW50fS5nYXAtMXtnYXA6LjI1cmVtIWltcG9ydGFudH0uZ2FwLTJ7Z2FwOi41cmVtIWltcG9ydGFudH0uZ2FwLTN7Z2FwOjFyZW0haW1wb3J0YW50fS5nYXAtNHtnYXA6MS41cmVtIWltcG9ydGFudH0uZ2FwLTV7Z2FwOjNyZW0haW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtc3RhcnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtZW5ke2p1c3RpZnktY29udGVudDpmbGV4LWVuZCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1jZW50ZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlciFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1iZXR3ZWVue2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LWFyb3VuZHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LWV2ZW5seXtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtZXZlbmx5IWltcG9ydGFudH0uYWxpZ24taXRlbXMtc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLWVuZHthbGlnbi1pdGVtczpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLWNlbnRlcnthbGlnbi1pdGVtczpjZW50ZXIhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy1iYXNlbGluZXthbGlnbi1pdGVtczpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXN0cmV0Y2h7YWxpZ24taXRlbXM6c3RyZXRjaCFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQtc3RhcnR7YWxpZ24tY29udGVudDpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24tY29udGVudC1lbmR7YWxpZ24tY29udGVudDpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQtY2VudGVye2FsaWduLWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1iZXR3ZWVue2FsaWduLWNvbnRlbnQ6c3BhY2UtYmV0d2VlbiFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQtYXJvdW5ke2FsaWduLWNvbnRlbnQ6c3BhY2UtYXJvdW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1zdHJldGNoe2FsaWduLWNvbnRlbnQ6c3RyZXRjaCFpbXBvcnRhbnR9LmFsaWduLXNlbGYtYXV0b3thbGlnbi1zZWxmOmF1dG8haW1wb3J0YW50fS5hbGlnbi1zZWxmLXN0YXJ0e2FsaWduLXNlbGY6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLXNlbGYtZW5ke2FsaWduLXNlbGY6ZmxleC1lbmQhaW1wb3J0YW50fS5hbGlnbi1zZWxmLWNlbnRlcnthbGlnbi1zZWxmOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLXNlbGYtYmFzZWxpbmV7YWxpZ24tc2VsZjpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLXNlbGYtc3RyZXRjaHthbGlnbi1zZWxmOnN0cmV0Y2ghaW1wb3J0YW50fS5vcmRlci1maXJzdHtvcmRlcjotMSFpbXBvcnRhbnR9Lm9yZGVyLTB7b3JkZXI6MCFpbXBvcnRhbnR9Lm9yZGVyLTF7b3JkZXI6MSFpbXBvcnRhbnR9Lm9yZGVyLTJ7b3JkZXI6MiFpbXBvcnRhbnR9Lm9yZGVyLTN7b3JkZXI6MyFpbXBvcnRhbnR9Lm9yZGVyLTR7b3JkZXI6NCFpbXBvcnRhbnR9Lm9yZGVyLTV7b3JkZXI6NSFpbXBvcnRhbnR9Lm9yZGVyLWxhc3R7b3JkZXI6NiFpbXBvcnRhbnR9Lm0tMHttYXJnaW46MCFpbXBvcnRhbnR9Lm0tMXttYXJnaW46LjI1cmVtIWltcG9ydGFudH0ubS0ye21hcmdpbjouNXJlbSFpbXBvcnRhbnR9Lm0tM3ttYXJnaW46MXJlbSFpbXBvcnRhbnR9Lm0tNHttYXJnaW46MS41cmVtIWltcG9ydGFudH0ubS01e21hcmdpbjozcmVtIWltcG9ydGFudH0ubS1hdXRve21hcmdpbjphdXRvIWltcG9ydGFudH0ubXgtMHttYXJnaW4tcmlnaHQ6MCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnR9Lm14LTF7bWFyZ2luLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ubXgtMnttYXJnaW4tcmlnaHQ6LjVyZW0haW1wb3J0YW50O21hcmdpbi1sZWZ0Oi41cmVtIWltcG9ydGFudH0ubXgtM3ttYXJnaW4tcmlnaHQ6MXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MXJlbSFpbXBvcnRhbnR9Lm14LTR7bWFyZ2luLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ubXgtNXttYXJnaW4tcmlnaHQ6M3JlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6M3JlbSFpbXBvcnRhbnR9Lm14LWF1dG97bWFyZ2luLXJpZ2h0OmF1dG8haW1wb3J0YW50O21hcmdpbi1sZWZ0OmF1dG8haW1wb3J0YW50fS5teS0we21hcmdpbi10b3A6MCFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubXktMXttYXJnaW4tdG9wOi4yNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5teS0ye21hcmdpbi10b3A6LjVyZW0haW1wb3J0YW50O21hcmdpbi1ib3R0b206LjVyZW0haW1wb3J0YW50fS5teS0ze21hcmdpbi10b3A6MXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubXktNHttYXJnaW4tdG9wOjEuNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5teS01e21hcmdpbi10b3A6M3JlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubXktYXV0b3ttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50O21hcmdpbi1ib3R0b206YXV0byFpbXBvcnRhbnR9Lm10LTB7bWFyZ2luLXRvcDowIWltcG9ydGFudH0ubXQtMXttYXJnaW4tdG9wOi4yNXJlbSFpbXBvcnRhbnR9Lm10LTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnR9Lm10LTN7bWFyZ2luLXRvcDoxcmVtIWltcG9ydGFudH0ubXQtNHttYXJnaW4tdG9wOjEuNXJlbSFpbXBvcnRhbnR9Lm10LTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudH0ubXQtYXV0b3ttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50fS5tZS0we21hcmdpbi1yaWdodDowIWltcG9ydGFudH0ubWUtMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudH0ubWUtMnttYXJnaW4tcmlnaHQ6LjVyZW0haW1wb3J0YW50fS5tZS0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudH0ubWUtNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudH0ubWUtNXttYXJnaW4tcmlnaHQ6M3JlbSFpbXBvcnRhbnR9Lm1lLWF1dG97bWFyZ2luLXJpZ2h0OmF1dG8haW1wb3J0YW50fS5tYi0we21hcmdpbi1ib3R0b206MCFpbXBvcnRhbnR9Lm1iLTF7bWFyZ2luLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5tYi0ye21hcmdpbi1ib3R0b206LjVyZW0haW1wb3J0YW50fS5tYi0ze21hcmdpbi1ib3R0b206MXJlbSFpbXBvcnRhbnR9Lm1iLTR7bWFyZ2luLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5tYi01e21hcmdpbi1ib3R0b206M3JlbSFpbXBvcnRhbnR9Lm1iLWF1dG97bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXMtMHttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXMtMXttYXJnaW4tbGVmdDouMjVyZW0haW1wb3J0YW50fS5tcy0ye21hcmdpbi1sZWZ0Oi41cmVtIWltcG9ydGFudH0ubXMtM3ttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXMtNHttYXJnaW4tbGVmdDoxLjVyZW0haW1wb3J0YW50fS5tcy01e21hcmdpbi1sZWZ0OjNyZW0haW1wb3J0YW50fS5tcy1hdXRve21hcmdpbi1sZWZ0OmF1dG8haW1wb3J0YW50fS5wLTB7cGFkZGluZzowIWltcG9ydGFudH0ucC0xe3BhZGRpbmc6LjI1cmVtIWltcG9ydGFudH0ucC0ye3BhZGRpbmc6LjVyZW0haW1wb3J0YW50fS5wLTN7cGFkZGluZzoxcmVtIWltcG9ydGFudH0ucC00e3BhZGRpbmc6MS41cmVtIWltcG9ydGFudH0ucC01e3BhZGRpbmc6M3JlbSFpbXBvcnRhbnR9LnB4LTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnR9LnB4LTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDouMjVyZW0haW1wb3J0YW50fS5weC0ye3BhZGRpbmctcmlnaHQ6LjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDouNXJlbSFpbXBvcnRhbnR9LnB4LTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MXJlbSFpbXBvcnRhbnR9LnB4LTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxLjVyZW0haW1wb3J0YW50fS5weC01e3BhZGRpbmctcmlnaHQ6M3JlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0OjNyZW0haW1wb3J0YW50fS5weS0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjAhaW1wb3J0YW50fS5weS0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucHktMntwYWRkaW5nLXRvcDouNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206LjVyZW0haW1wb3J0YW50fS5weS0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjFyZW0haW1wb3J0YW50fS5weS00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucHktNXtwYWRkaW5nLXRvcDozcmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTozcmVtIWltcG9ydGFudH0ucHQtMHtwYWRkaW5nLXRvcDowIWltcG9ydGFudH0ucHQtMXtwYWRkaW5nLXRvcDouMjVyZW0haW1wb3J0YW50fS5wdC0ye3BhZGRpbmctdG9wOi41cmVtIWltcG9ydGFudH0ucHQtM3twYWRkaW5nLXRvcDoxcmVtIWltcG9ydGFudH0ucHQtNHtwYWRkaW5nLXRvcDoxLjVyZW0haW1wb3J0YW50fS5wdC01e3BhZGRpbmctdG9wOjNyZW0haW1wb3J0YW50fS5wZS0we3BhZGRpbmctcmlnaHQ6MCFpbXBvcnRhbnR9LnBlLTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50fS5wZS0ye3BhZGRpbmctcmlnaHQ6LjVyZW0haW1wb3J0YW50fS5wZS0ze3BhZGRpbmctcmlnaHQ6MXJlbSFpbXBvcnRhbnR9LnBlLTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5wZS01e3BhZGRpbmctcmlnaHQ6M3JlbSFpbXBvcnRhbnR9LnBiLTB7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnBiLTF7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucGItMntwYWRkaW5nLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9LnBiLTN7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnBiLTR7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucGItNXtwYWRkaW5nLWJvdHRvbTozcmVtIWltcG9ydGFudH0ucHMtMHtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnR9LnBzLTF7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnBzLTJ7cGFkZGluZy1sZWZ0Oi41cmVtIWltcG9ydGFudH0ucHMtM3twYWRkaW5nLWxlZnQ6MXJlbSFpbXBvcnRhbnR9LnBzLTR7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnBzLTV7cGFkZGluZy1sZWZ0OjNyZW0haW1wb3J0YW50fS5mb250LW1vbm9zcGFjZXtmb250LWZhbWlseTp2YXIoLS1icy1mb250LW1vbm9zcGFjZSkhaW1wb3J0YW50fS5mcy0xe2ZvbnQtc2l6ZTpjYWxjKDEuMzc1cmVtICsgMS41dncpIWltcG9ydGFudH0uZnMtMntmb250LXNpemU6Y2FsYygxLjMyNXJlbSArIC45dncpIWltcG9ydGFudH0uZnMtM3tmb250LXNpemU6Y2FsYygxLjNyZW0gKyAuNnZ3KSFpbXBvcnRhbnR9LmZzLTR7Zm9udC1zaXplOmNhbGMoMS4yNzVyZW0gKyAuM3Z3KSFpbXBvcnRhbnR9LmZzLTV7Zm9udC1zaXplOjEuMjVyZW0haW1wb3J0YW50fS5mcy02e2ZvbnQtc2l6ZToxcmVtIWltcG9ydGFudH0uZnN0LWl0YWxpY3tmb250LXN0eWxlOml0YWxpYyFpbXBvcnRhbnR9LmZzdC1ub3JtYWx7Zm9udC1zdHlsZTpub3JtYWwhaW1wb3J0YW50fS5mdy1saWdodHtmb250LXdlaWdodDozMDAhaW1wb3J0YW50fS5mdy1saWdodGVye2ZvbnQtd2VpZ2h0OmxpZ2h0ZXIhaW1wb3J0YW50fS5mdy1ub3JtYWx7Zm9udC13ZWlnaHQ6NDAwIWltcG9ydGFudH0uZnctYm9sZHtmb250LXdlaWdodDo3MDAhaW1wb3J0YW50fS5mdy1ib2xkZXJ7Zm9udC13ZWlnaHQ6Ym9sZGVyIWltcG9ydGFudH0ubGgtMXtsaW5lLWhlaWdodDoxIWltcG9ydGFudH0ubGgtc217bGluZS1oZWlnaHQ6MS4yNSFpbXBvcnRhbnR9LmxoLWJhc2V7bGluZS1oZWlnaHQ6MS41IWltcG9ydGFudH0ubGgtbGd7bGluZS1oZWlnaHQ6MiFpbXBvcnRhbnR9LnRleHQtc3RhcnR7dGV4dC1hbGlnbjpsZWZ0IWltcG9ydGFudH0udGV4dC1lbmR7dGV4dC1hbGlnbjpyaWdodCFpbXBvcnRhbnR9LnRleHQtY2VudGVye3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH0udGV4dC1kZWNvcmF0aW9uLW5vbmV7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fS50ZXh0LWRlY29yYXRpb24tdW5kZXJsaW5le3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUhaW1wb3J0YW50fS50ZXh0LWRlY29yYXRpb24tbGluZS10aHJvdWdoe3RleHQtZGVjb3JhdGlvbjpsaW5lLXRocm91Z2ghaW1wb3J0YW50fS50ZXh0LWxvd2VyY2FzZXt0ZXh0LXRyYW5zZm9ybTpsb3dlcmNhc2UhaW1wb3J0YW50fS50ZXh0LXVwcGVyY2FzZXt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2UhaW1wb3J0YW50fS50ZXh0LWNhcGl0YWxpemV7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZSFpbXBvcnRhbnR9LnRleHQtd3JhcHt3aGl0ZS1zcGFjZTpub3JtYWwhaW1wb3J0YW50fS50ZXh0LW5vd3JhcHt3aGl0ZS1zcGFjZTpub3dyYXAhaW1wb3J0YW50fS50ZXh0LWJyZWFre3dvcmQtd3JhcDpicmVhay13b3JkIWltcG9ydGFudDt3b3JkLWJyZWFrOmJyZWFrLXdvcmQhaW1wb3J0YW50fS50ZXh0LXByaW1hcnl7Y29sb3I6IzBkNmVmZCFpbXBvcnRhbnR9LnRleHQtc2Vjb25kYXJ5e2NvbG9yOiM2Yzc1N2QhaW1wb3J0YW50fS50ZXh0LXN1Y2Nlc3N7Y29sb3I6IzE5ODc1NCFpbXBvcnRhbnR9LnRleHQtaW5mb3tjb2xvcjojMGRjYWYwIWltcG9ydGFudH0udGV4dC13YXJuaW5ne2NvbG9yOiNmZmMxMDchaW1wb3J0YW50fS50ZXh0LWRhbmdlcntjb2xvcjojZGMzNTQ1IWltcG9ydGFudH0udGV4dC1saWdodHtjb2xvcjojZjhmOWZhIWltcG9ydGFudH0udGV4dC1kYXJre2NvbG9yOiMyMTI1MjkhaW1wb3J0YW50fS50ZXh0LXdoaXRle2NvbG9yOiNmZmYhaW1wb3J0YW50fS50ZXh0LWJvZHl7Y29sb3I6IzIxMjUyOSFpbXBvcnRhbnR9LnRleHQtbXV0ZWR7Y29sb3I6IzZjNzU3ZCFpbXBvcnRhbnR9LnRleHQtYmxhY2stNTB7Y29sb3I6cmdiYSgwLDAsMCwuNSkhaW1wb3J0YW50fS50ZXh0LXdoaXRlLTUwe2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjUpIWltcG9ydGFudH0udGV4dC1yZXNldHtjb2xvcjppbmhlcml0IWltcG9ydGFudH0uYmctcHJpbWFyeXtiYWNrZ3JvdW5kLWNvbG9yOiMwZDZlZmQhaW1wb3J0YW50fS5iZy1zZWNvbmRhcnl7YmFja2dyb3VuZC1jb2xvcjojNmM3NTdkIWltcG9ydGFudH0uYmctc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiMxOTg3NTQhaW1wb3J0YW50fS5iZy1pbmZve2JhY2tncm91bmQtY29sb3I6IzBkY2FmMCFpbXBvcnRhbnR9LmJnLXdhcm5pbmd7YmFja2dyb3VuZC1jb2xvcjojZmZjMTA3IWltcG9ydGFudH0uYmctZGFuZ2Vye2JhY2tncm91bmQtY29sb3I6I2RjMzU0NSFpbXBvcnRhbnR9LmJnLWxpZ2h0e2JhY2tncm91bmQtY29sb3I6I2Y4ZjlmYSFpbXBvcnRhbnR9LmJnLWRhcmt7YmFja2dyb3VuZC1jb2xvcjojMjEyNTI5IWltcG9ydGFudH0uYmctYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50fS5iZy13aGl0ZXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50fS5iZy10cmFuc3BhcmVudHtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudH0uYmctZ3JhZGllbnR7YmFja2dyb3VuZC1pbWFnZTp2YXIoLS1icy1ncmFkaWVudCkhaW1wb3J0YW50fS51c2VyLXNlbGVjdC1hbGx7LXdlYmtpdC11c2VyLXNlbGVjdDphbGwhaW1wb3J0YW50Oy1tb3otdXNlci1zZWxlY3Q6YWxsIWltcG9ydGFudDt1c2VyLXNlbGVjdDphbGwhaW1wb3J0YW50fS51c2VyLXNlbGVjdC1hdXRvey13ZWJraXQtdXNlci1zZWxlY3Q6YXV0byFpbXBvcnRhbnQ7LW1vei11c2VyLXNlbGVjdDphdXRvIWltcG9ydGFudDt1c2VyLXNlbGVjdDphdXRvIWltcG9ydGFudH0udXNlci1zZWxlY3Qtbm9uZXstd2Via2l0LXVzZXItc2VsZWN0Om5vbmUhaW1wb3J0YW50Oy1tb3otdXNlci1zZWxlY3Q6bm9uZSFpbXBvcnRhbnQ7dXNlci1zZWxlY3Q6bm9uZSFpbXBvcnRhbnR9LnBlLW5vbmV7cG9pbnRlci1ldmVudHM6bm9uZSFpbXBvcnRhbnR9LnBlLWF1dG97cG9pbnRlci1ldmVudHM6YXV0byFpbXBvcnRhbnR9LnJvdW5kZWR7Ym9yZGVyLXJhZGl1czouMjVyZW0haW1wb3J0YW50fS5yb3VuZGVkLTB7Ym9yZGVyLXJhZGl1czowIWltcG9ydGFudH0ucm91bmRlZC0xe2JvcmRlci1yYWRpdXM6LjJyZW0haW1wb3J0YW50fS5yb3VuZGVkLTJ7Ym9yZGVyLXJhZGl1czouMjVyZW0haW1wb3J0YW50fS5yb3VuZGVkLTN7Ym9yZGVyLXJhZGl1czouM3JlbSFpbXBvcnRhbnR9LnJvdW5kZWQtY2lyY2xle2JvcmRlci1yYWRpdXM6NTAlIWltcG9ydGFudH0ucm91bmRlZC1waWxse2JvcmRlci1yYWRpdXM6NTByZW0haW1wb3J0YW50fS5yb3VuZGVkLXRvcHtib3JkZXItdG9wLWxlZnQtcmFkaXVzOi4yNXJlbSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjI1cmVtIWltcG9ydGFudH0ucm91bmRlZC1lbmR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6LjI1cmVtIWltcG9ydGFudDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czouMjVyZW0haW1wb3J0YW50fS5yb3VuZGVkLWJvdHRvbXtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czouMjVyZW0haW1wb3J0YW50O2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6LjI1cmVtIWltcG9ydGFudH0ucm91bmRlZC1zdGFydHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4yNXJlbSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czouMjVyZW0haW1wb3J0YW50fS52aXNpYmxle3Zpc2liaWxpdHk6dmlzaWJsZSFpbXBvcnRhbnR9LmludmlzaWJsZXt2aXNpYmlsaXR5OmhpZGRlbiFpbXBvcnRhbnR9QG1lZGlhIChtaW4td2lkdGg6NTc2cHgpey5mbG9hdC1zbS1zdGFydHtmbG9hdDpsZWZ0IWltcG9ydGFudH0uZmxvYXQtc20tZW5ke2Zsb2F0OnJpZ2h0IWltcG9ydGFudH0uZmxvYXQtc20tbm9uZXtmbG9hdDpub25lIWltcG9ydGFudH0uZC1zbS1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLXNtLWlubGluZS1ibG9ja3tkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnR9LmQtc20tYmxvY2t7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LmQtc20tZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLXNtLXRhYmxle2Rpc3BsYXk6dGFibGUhaW1wb3J0YW50fS5kLXNtLXRhYmxlLXJvd3tkaXNwbGF5OnRhYmxlLXJvdyFpbXBvcnRhbnR9LmQtc20tdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLXNtLWZsZXh7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uZC1zbS1pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uZC1zbS1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmZsZXgtc20tZmlsbHtmbGV4OjEgMSBhdXRvIWltcG9ydGFudH0uZmxleC1zbS1yb3d7ZmxleC1kaXJlY3Rpb246cm93IWltcG9ydGFudH0uZmxleC1zbS1jb2x1bW57ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudH0uZmxleC1zbS1yb3ctcmV2ZXJzZXtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZSFpbXBvcnRhbnR9LmZsZXgtc20tY29sdW1uLXJldmVyc2V7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LXNtLWdyb3ctMHtmbGV4LWdyb3c6MCFpbXBvcnRhbnR9LmZsZXgtc20tZ3Jvdy0xe2ZsZXgtZ3JvdzoxIWltcG9ydGFudH0uZmxleC1zbS1zaHJpbmstMHtmbGV4LXNocmluazowIWltcG9ydGFudH0uZmxleC1zbS1zaHJpbmstMXtmbGV4LXNocmluazoxIWltcG9ydGFudH0uZmxleC1zbS13cmFwe2ZsZXgtd3JhcDp3cmFwIWltcG9ydGFudH0uZmxleC1zbS1ub3dyYXB7ZmxleC13cmFwOm5vd3JhcCFpbXBvcnRhbnR9LmZsZXgtc20td3JhcC1yZXZlcnNle2ZsZXgtd3JhcDp3cmFwLXJldmVyc2UhaW1wb3J0YW50fS5nYXAtc20tMHtnYXA6MCFpbXBvcnRhbnR9LmdhcC1zbS0xe2dhcDouMjVyZW0haW1wb3J0YW50fS5nYXAtc20tMntnYXA6LjVyZW0haW1wb3J0YW50fS5nYXAtc20tM3tnYXA6MXJlbSFpbXBvcnRhbnR9LmdhcC1zbS00e2dhcDoxLjVyZW0haW1wb3J0YW50fS5nYXAtc20tNXtnYXA6M3JlbSFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1zbS1zdGFydHtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1zbS1lbmR7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXNtLWNlbnRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXNtLWJldHdlZW57anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4haW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtc20tYXJvdW5ke2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtc20tZXZlbmx5e2p1c3RpZnktY29udGVudDpzcGFjZS1ldmVubHkhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy1zbS1zdGFydHthbGlnbi1pdGVtczpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24taXRlbXMtc20tZW5ke2FsaWduLWl0ZW1zOmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24taXRlbXMtc20tY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXNtLWJhc2VsaW5le2FsaWduLWl0ZW1zOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24taXRlbXMtc20tc3RyZXRjaHthbGlnbi1pdGVtczpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1zbS1zdGFydHthbGlnbi1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LXNtLWVuZHthbGlnbi1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1zbS1jZW50ZXJ7YWxpZ24tY29udGVudDpjZW50ZXIhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LXNtLWJldHdlZW57YWxpZ24tY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1zbS1hcm91bmR7YWxpZ24tY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LXNtLXN0cmV0Y2h7YWxpZ24tY29udGVudDpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tc2VsZi1zbS1hdXRve2FsaWduLXNlbGY6YXV0byFpbXBvcnRhbnR9LmFsaWduLXNlbGYtc20tc3RhcnR7YWxpZ24tc2VsZjpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24tc2VsZi1zbS1lbmR7YWxpZ24tc2VsZjpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLXNlbGYtc20tY2VudGVye2FsaWduLXNlbGY6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tc2VsZi1zbS1iYXNlbGluZXthbGlnbi1zZWxmOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24tc2VsZi1zbS1zdHJldGNoe2FsaWduLXNlbGY6c3RyZXRjaCFpbXBvcnRhbnR9Lm9yZGVyLXNtLWZpcnN0e29yZGVyOi0xIWltcG9ydGFudH0ub3JkZXItc20tMHtvcmRlcjowIWltcG9ydGFudH0ub3JkZXItc20tMXtvcmRlcjoxIWltcG9ydGFudH0ub3JkZXItc20tMntvcmRlcjoyIWltcG9ydGFudH0ub3JkZXItc20tM3tvcmRlcjozIWltcG9ydGFudH0ub3JkZXItc20tNHtvcmRlcjo0IWltcG9ydGFudH0ub3JkZXItc20tNXtvcmRlcjo1IWltcG9ydGFudH0ub3JkZXItc20tbGFzdHtvcmRlcjo2IWltcG9ydGFudH0ubS1zbS0we21hcmdpbjowIWltcG9ydGFudH0ubS1zbS0xe21hcmdpbjouMjVyZW0haW1wb3J0YW50fS5tLXNtLTJ7bWFyZ2luOi41cmVtIWltcG9ydGFudH0ubS1zbS0ze21hcmdpbjoxcmVtIWltcG9ydGFudH0ubS1zbS00e21hcmdpbjoxLjVyZW0haW1wb3J0YW50fS5tLXNtLTV7bWFyZ2luOjNyZW0haW1wb3J0YW50fS5tLXNtLWF1dG97bWFyZ2luOmF1dG8haW1wb3J0YW50fS5teC1zbS0we21hcmdpbi1yaWdodDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXgtc20tMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDouMjVyZW0haW1wb3J0YW50fS5teC1zbS0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5teC1zbS0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXgtc20tNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxLjVyZW0haW1wb3J0YW50fS5teC1zbS01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDozcmVtIWltcG9ydGFudH0ubXgtc20tYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9Lm15LXNtLTB7bWFyZ2luLXRvcDowIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50fS5teS1zbS0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm15LXNtLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm15LXNtLTN7bWFyZ2luLXRvcDoxcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjFyZW0haW1wb3J0YW50fS5teS1zbS00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm15LXNtLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjNyZW0haW1wb3J0YW50fS5teS1zbS1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXQtc20tMHttYXJnaW4tdG9wOjAhaW1wb3J0YW50fS5tdC1zbS0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudH0ubXQtc20tMnttYXJnaW4tdG9wOi41cmVtIWltcG9ydGFudH0ubXQtc20tM3ttYXJnaW4tdG9wOjFyZW0haW1wb3J0YW50fS5tdC1zbS00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudH0ubXQtc20tNXttYXJnaW4tdG9wOjNyZW0haW1wb3J0YW50fS5tdC1zbS1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnR9Lm1lLXNtLTB7bWFyZ2luLXJpZ2h0OjAhaW1wb3J0YW50fS5tZS1zbS0xe21hcmdpbi1yaWdodDouMjVyZW0haW1wb3J0YW50fS5tZS1zbS0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnR9Lm1lLXNtLTN7bWFyZ2luLXJpZ2h0OjFyZW0haW1wb3J0YW50fS5tZS1zbS00e21hcmdpbi1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5tZS1zbS01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudH0ubWUtc20tYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnR9Lm1iLXNtLTB7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubWItc20tMXttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm1iLXNtLTJ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm1iLXNtLTN7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubWItc20tNHttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm1iLXNtLTV7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubWItc20tYXV0b3ttYXJnaW4tYm90dG9tOmF1dG8haW1wb3J0YW50fS5tcy1zbS0we21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50fS5tcy1zbS0xe21hcmdpbi1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9Lm1zLXNtLTJ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5tcy1zbS0ze21hcmdpbi1sZWZ0OjFyZW0haW1wb3J0YW50fS5tcy1zbS00e21hcmdpbi1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9Lm1zLXNtLTV7bWFyZ2luLWxlZnQ6M3JlbSFpbXBvcnRhbnR9Lm1zLXNtLWF1dG97bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9LnAtc20tMHtwYWRkaW5nOjAhaW1wb3J0YW50fS5wLXNtLTF7cGFkZGluZzouMjVyZW0haW1wb3J0YW50fS5wLXNtLTJ7cGFkZGluZzouNXJlbSFpbXBvcnRhbnR9LnAtc20tM3twYWRkaW5nOjFyZW0haW1wb3J0YW50fS5wLXNtLTR7cGFkZGluZzoxLjVyZW0haW1wb3J0YW50fS5wLXNtLTV7cGFkZGluZzozcmVtIWltcG9ydGFudH0ucHgtc20tMHtwYWRkaW5nLXJpZ2h0OjAhaW1wb3J0YW50O3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHgtc20tMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnB4LXNtLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi41cmVtIWltcG9ydGFudH0ucHgtc20tM3twYWRkaW5nLXJpZ2h0OjFyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHgtc20tNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnB4LXNtLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnB5LXNtLTB7cGFkZGluZy10b3A6MCFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnB5LXNtLTF7cGFkZGluZy10b3A6LjI1cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5weS1zbS0ye3BhZGRpbmctdG9wOi41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9LnB5LXNtLTN7cGFkZGluZy10b3A6MXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnB5LXNtLTR7cGFkZGluZy10b3A6MS41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5weS1zbS01e3BhZGRpbmctdG9wOjNyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wdC1zbS0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50fS5wdC1zbS0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnR9LnB0LXNtLTJ7cGFkZGluZy10b3A6LjVyZW0haW1wb3J0YW50fS5wdC1zbS0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50fS5wdC1zbS00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnR9LnB0LXNtLTV7cGFkZGluZy10b3A6M3JlbSFpbXBvcnRhbnR9LnBlLXNtLTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudH0ucGUtc20tMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnR9LnBlLXNtLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnR9LnBlLXNtLTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudH0ucGUtc20tNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnR9LnBlLXNtLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudH0ucGItc20tMHtwYWRkaW5nLWJvdHRvbTowIWltcG9ydGFudH0ucGItc20tMXtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5wYi1zbS0ye3BhZGRpbmctYm90dG9tOi41cmVtIWltcG9ydGFudH0ucGItc20tM3twYWRkaW5nLWJvdHRvbToxcmVtIWltcG9ydGFudH0ucGItc20tNHtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5wYi1zbS01e3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wcy1zbS0we3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHMtc20tMXtwYWRkaW5nLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ucHMtc20tMntwYWRkaW5nLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5wcy1zbS0ze3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHMtc20tNHtwYWRkaW5nLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ucHMtc20tNXtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnRleHQtc20tc3RhcnR7dGV4dC1hbGlnbjpsZWZ0IWltcG9ydGFudH0udGV4dC1zbS1lbmR7dGV4dC1hbGlnbjpyaWdodCFpbXBvcnRhbnR9LnRleHQtc20tY2VudGVye3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH19QG1lZGlhIChtaW4td2lkdGg6NzY4cHgpey5mbG9hdC1tZC1zdGFydHtmbG9hdDpsZWZ0IWltcG9ydGFudH0uZmxvYXQtbWQtZW5ke2Zsb2F0OnJpZ2h0IWltcG9ydGFudH0uZmxvYXQtbWQtbm9uZXtmbG9hdDpub25lIWltcG9ydGFudH0uZC1tZC1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLW1kLWlubGluZS1ibG9ja3tkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnR9LmQtbWQtYmxvY2t7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LmQtbWQtZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLW1kLXRhYmxle2Rpc3BsYXk6dGFibGUhaW1wb3J0YW50fS5kLW1kLXRhYmxlLXJvd3tkaXNwbGF5OnRhYmxlLXJvdyFpbXBvcnRhbnR9LmQtbWQtdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLW1kLWZsZXh7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uZC1tZC1pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uZC1tZC1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmZsZXgtbWQtZmlsbHtmbGV4OjEgMSBhdXRvIWltcG9ydGFudH0uZmxleC1tZC1yb3d7ZmxleC1kaXJlY3Rpb246cm93IWltcG9ydGFudH0uZmxleC1tZC1jb2x1bW57ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudH0uZmxleC1tZC1yb3ctcmV2ZXJzZXtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZSFpbXBvcnRhbnR9LmZsZXgtbWQtY29sdW1uLXJldmVyc2V7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LW1kLWdyb3ctMHtmbGV4LWdyb3c6MCFpbXBvcnRhbnR9LmZsZXgtbWQtZ3Jvdy0xe2ZsZXgtZ3JvdzoxIWltcG9ydGFudH0uZmxleC1tZC1zaHJpbmstMHtmbGV4LXNocmluazowIWltcG9ydGFudH0uZmxleC1tZC1zaHJpbmstMXtmbGV4LXNocmluazoxIWltcG9ydGFudH0uZmxleC1tZC13cmFwe2ZsZXgtd3JhcDp3cmFwIWltcG9ydGFudH0uZmxleC1tZC1ub3dyYXB7ZmxleC13cmFwOm5vd3JhcCFpbXBvcnRhbnR9LmZsZXgtbWQtd3JhcC1yZXZlcnNle2ZsZXgtd3JhcDp3cmFwLXJldmVyc2UhaW1wb3J0YW50fS5nYXAtbWQtMHtnYXA6MCFpbXBvcnRhbnR9LmdhcC1tZC0xe2dhcDouMjVyZW0haW1wb3J0YW50fS5nYXAtbWQtMntnYXA6LjVyZW0haW1wb3J0YW50fS5nYXAtbWQtM3tnYXA6MXJlbSFpbXBvcnRhbnR9LmdhcC1tZC00e2dhcDoxLjVyZW0haW1wb3J0YW50fS5nYXAtbWQtNXtnYXA6M3JlbSFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1tZC1zdGFydHtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1tZC1lbmR7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LW1kLWNlbnRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LW1kLWJldHdlZW57anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4haW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtbWQtYXJvdW5ke2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtbWQtZXZlbmx5e2p1c3RpZnktY29udGVudDpzcGFjZS1ldmVubHkhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy1tZC1zdGFydHthbGlnbi1pdGVtczpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24taXRlbXMtbWQtZW5ke2FsaWduLWl0ZW1zOmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24taXRlbXMtbWQtY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLW1kLWJhc2VsaW5le2FsaWduLWl0ZW1zOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24taXRlbXMtbWQtc3RyZXRjaHthbGlnbi1pdGVtczpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1tZC1zdGFydHthbGlnbi1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LW1kLWVuZHthbGlnbi1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1tZC1jZW50ZXJ7YWxpZ24tY29udGVudDpjZW50ZXIhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LW1kLWJldHdlZW57YWxpZ24tY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1tZC1hcm91bmR7YWxpZ24tY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LW1kLXN0cmV0Y2h7YWxpZ24tY29udGVudDpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tc2VsZi1tZC1hdXRve2FsaWduLXNlbGY6YXV0byFpbXBvcnRhbnR9LmFsaWduLXNlbGYtbWQtc3RhcnR7YWxpZ24tc2VsZjpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24tc2VsZi1tZC1lbmR7YWxpZ24tc2VsZjpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLXNlbGYtbWQtY2VudGVye2FsaWduLXNlbGY6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tc2VsZi1tZC1iYXNlbGluZXthbGlnbi1zZWxmOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24tc2VsZi1tZC1zdHJldGNoe2FsaWduLXNlbGY6c3RyZXRjaCFpbXBvcnRhbnR9Lm9yZGVyLW1kLWZpcnN0e29yZGVyOi0xIWltcG9ydGFudH0ub3JkZXItbWQtMHtvcmRlcjowIWltcG9ydGFudH0ub3JkZXItbWQtMXtvcmRlcjoxIWltcG9ydGFudH0ub3JkZXItbWQtMntvcmRlcjoyIWltcG9ydGFudH0ub3JkZXItbWQtM3tvcmRlcjozIWltcG9ydGFudH0ub3JkZXItbWQtNHtvcmRlcjo0IWltcG9ydGFudH0ub3JkZXItbWQtNXtvcmRlcjo1IWltcG9ydGFudH0ub3JkZXItbWQtbGFzdHtvcmRlcjo2IWltcG9ydGFudH0ubS1tZC0we21hcmdpbjowIWltcG9ydGFudH0ubS1tZC0xe21hcmdpbjouMjVyZW0haW1wb3J0YW50fS5tLW1kLTJ7bWFyZ2luOi41cmVtIWltcG9ydGFudH0ubS1tZC0ze21hcmdpbjoxcmVtIWltcG9ydGFudH0ubS1tZC00e21hcmdpbjoxLjVyZW0haW1wb3J0YW50fS5tLW1kLTV7bWFyZ2luOjNyZW0haW1wb3J0YW50fS5tLW1kLWF1dG97bWFyZ2luOmF1dG8haW1wb3J0YW50fS5teC1tZC0we21hcmdpbi1yaWdodDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXgtbWQtMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDouMjVyZW0haW1wb3J0YW50fS5teC1tZC0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5teC1tZC0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXgtbWQtNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxLjVyZW0haW1wb3J0YW50fS5teC1tZC01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDozcmVtIWltcG9ydGFudH0ubXgtbWQtYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9Lm15LW1kLTB7bWFyZ2luLXRvcDowIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50fS5teS1tZC0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm15LW1kLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm15LW1kLTN7bWFyZ2luLXRvcDoxcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjFyZW0haW1wb3J0YW50fS5teS1tZC00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm15LW1kLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjNyZW0haW1wb3J0YW50fS5teS1tZC1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXQtbWQtMHttYXJnaW4tdG9wOjAhaW1wb3J0YW50fS5tdC1tZC0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudH0ubXQtbWQtMnttYXJnaW4tdG9wOi41cmVtIWltcG9ydGFudH0ubXQtbWQtM3ttYXJnaW4tdG9wOjFyZW0haW1wb3J0YW50fS5tdC1tZC00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudH0ubXQtbWQtNXttYXJnaW4tdG9wOjNyZW0haW1wb3J0YW50fS5tdC1tZC1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnR9Lm1lLW1kLTB7bWFyZ2luLXJpZ2h0OjAhaW1wb3J0YW50fS5tZS1tZC0xe21hcmdpbi1yaWdodDouMjVyZW0haW1wb3J0YW50fS5tZS1tZC0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnR9Lm1lLW1kLTN7bWFyZ2luLXJpZ2h0OjFyZW0haW1wb3J0YW50fS5tZS1tZC00e21hcmdpbi1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5tZS1tZC01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudH0ubWUtbWQtYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnR9Lm1iLW1kLTB7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubWItbWQtMXttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm1iLW1kLTJ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm1iLW1kLTN7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubWItbWQtNHttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm1iLW1kLTV7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubWItbWQtYXV0b3ttYXJnaW4tYm90dG9tOmF1dG8haW1wb3J0YW50fS5tcy1tZC0we21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50fS5tcy1tZC0xe21hcmdpbi1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9Lm1zLW1kLTJ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5tcy1tZC0ze21hcmdpbi1sZWZ0OjFyZW0haW1wb3J0YW50fS5tcy1tZC00e21hcmdpbi1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9Lm1zLW1kLTV7bWFyZ2luLWxlZnQ6M3JlbSFpbXBvcnRhbnR9Lm1zLW1kLWF1dG97bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9LnAtbWQtMHtwYWRkaW5nOjAhaW1wb3J0YW50fS5wLW1kLTF7cGFkZGluZzouMjVyZW0haW1wb3J0YW50fS5wLW1kLTJ7cGFkZGluZzouNXJlbSFpbXBvcnRhbnR9LnAtbWQtM3twYWRkaW5nOjFyZW0haW1wb3J0YW50fS5wLW1kLTR7cGFkZGluZzoxLjVyZW0haW1wb3J0YW50fS5wLW1kLTV7cGFkZGluZzozcmVtIWltcG9ydGFudH0ucHgtbWQtMHtwYWRkaW5nLXJpZ2h0OjAhaW1wb3J0YW50O3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHgtbWQtMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnB4LW1kLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi41cmVtIWltcG9ydGFudH0ucHgtbWQtM3twYWRkaW5nLXJpZ2h0OjFyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHgtbWQtNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnB4LW1kLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnB5LW1kLTB7cGFkZGluZy10b3A6MCFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnB5LW1kLTF7cGFkZGluZy10b3A6LjI1cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5weS1tZC0ye3BhZGRpbmctdG9wOi41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9LnB5LW1kLTN7cGFkZGluZy10b3A6MXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnB5LW1kLTR7cGFkZGluZy10b3A6MS41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5weS1tZC01e3BhZGRpbmctdG9wOjNyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wdC1tZC0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50fS5wdC1tZC0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnR9LnB0LW1kLTJ7cGFkZGluZy10b3A6LjVyZW0haW1wb3J0YW50fS5wdC1tZC0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50fS5wdC1tZC00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnR9LnB0LW1kLTV7cGFkZGluZy10b3A6M3JlbSFpbXBvcnRhbnR9LnBlLW1kLTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudH0ucGUtbWQtMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnR9LnBlLW1kLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnR9LnBlLW1kLTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudH0ucGUtbWQtNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnR9LnBlLW1kLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudH0ucGItbWQtMHtwYWRkaW5nLWJvdHRvbTowIWltcG9ydGFudH0ucGItbWQtMXtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5wYi1tZC0ye3BhZGRpbmctYm90dG9tOi41cmVtIWltcG9ydGFudH0ucGItbWQtM3twYWRkaW5nLWJvdHRvbToxcmVtIWltcG9ydGFudH0ucGItbWQtNHtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5wYi1tZC01e3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wcy1tZC0we3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHMtbWQtMXtwYWRkaW5nLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ucHMtbWQtMntwYWRkaW5nLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5wcy1tZC0ze3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHMtbWQtNHtwYWRkaW5nLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ucHMtbWQtNXtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnRleHQtbWQtc3RhcnR7dGV4dC1hbGlnbjpsZWZ0IWltcG9ydGFudH0udGV4dC1tZC1lbmR7dGV4dC1hbGlnbjpyaWdodCFpbXBvcnRhbnR9LnRleHQtbWQtY2VudGVye3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH19QG1lZGlhIChtaW4td2lkdGg6OTkycHgpey5mbG9hdC1sZy1zdGFydHtmbG9hdDpsZWZ0IWltcG9ydGFudH0uZmxvYXQtbGctZW5ke2Zsb2F0OnJpZ2h0IWltcG9ydGFudH0uZmxvYXQtbGctbm9uZXtmbG9hdDpub25lIWltcG9ydGFudH0uZC1sZy1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLWxnLWlubGluZS1ibG9ja3tkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnR9LmQtbGctYmxvY2t7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LmQtbGctZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLWxnLXRhYmxle2Rpc3BsYXk6dGFibGUhaW1wb3J0YW50fS5kLWxnLXRhYmxlLXJvd3tkaXNwbGF5OnRhYmxlLXJvdyFpbXBvcnRhbnR9LmQtbGctdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLWxnLWZsZXh7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uZC1sZy1pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uZC1sZy1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmZsZXgtbGctZmlsbHtmbGV4OjEgMSBhdXRvIWltcG9ydGFudH0uZmxleC1sZy1yb3d7ZmxleC1kaXJlY3Rpb246cm93IWltcG9ydGFudH0uZmxleC1sZy1jb2x1bW57ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudH0uZmxleC1sZy1yb3ctcmV2ZXJzZXtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZSFpbXBvcnRhbnR9LmZsZXgtbGctY29sdW1uLXJldmVyc2V7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LWxnLWdyb3ctMHtmbGV4LWdyb3c6MCFpbXBvcnRhbnR9LmZsZXgtbGctZ3Jvdy0xe2ZsZXgtZ3JvdzoxIWltcG9ydGFudH0uZmxleC1sZy1zaHJpbmstMHtmbGV4LXNocmluazowIWltcG9ydGFudH0uZmxleC1sZy1zaHJpbmstMXtmbGV4LXNocmluazoxIWltcG9ydGFudH0uZmxleC1sZy13cmFwe2ZsZXgtd3JhcDp3cmFwIWltcG9ydGFudH0uZmxleC1sZy1ub3dyYXB7ZmxleC13cmFwOm5vd3JhcCFpbXBvcnRhbnR9LmZsZXgtbGctd3JhcC1yZXZlcnNle2ZsZXgtd3JhcDp3cmFwLXJldmVyc2UhaW1wb3J0YW50fS5nYXAtbGctMHtnYXA6MCFpbXBvcnRhbnR9LmdhcC1sZy0xe2dhcDouMjVyZW0haW1wb3J0YW50fS5nYXAtbGctMntnYXA6LjVyZW0haW1wb3J0YW50fS5nYXAtbGctM3tnYXA6MXJlbSFpbXBvcnRhbnR9LmdhcC1sZy00e2dhcDoxLjVyZW0haW1wb3J0YW50fS5nYXAtbGctNXtnYXA6M3JlbSFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1sZy1zdGFydHtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC1sZy1lbmR7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LWxnLWNlbnRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LWxnLWJldHdlZW57anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4haW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtbGctYXJvdW5ke2p1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQtbGctZXZlbmx5e2p1c3RpZnktY29udGVudDpzcGFjZS1ldmVubHkhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy1sZy1zdGFydHthbGlnbi1pdGVtczpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24taXRlbXMtbGctZW5ke2FsaWduLWl0ZW1zOmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24taXRlbXMtbGctY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLWxnLWJhc2VsaW5le2FsaWduLWl0ZW1zOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24taXRlbXMtbGctc3RyZXRjaHthbGlnbi1pdGVtczpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1sZy1zdGFydHthbGlnbi1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LWxnLWVuZHthbGlnbi1jb250ZW50OmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1sZy1jZW50ZXJ7YWxpZ24tY29udGVudDpjZW50ZXIhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LWxnLWJldHdlZW57YWxpZ24tY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uYWxpZ24tY29udGVudC1sZy1hcm91bmR7YWxpZ24tY29udGVudDpzcGFjZS1hcm91bmQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LWxnLXN0cmV0Y2h7YWxpZ24tY29udGVudDpzdHJldGNoIWltcG9ydGFudH0uYWxpZ24tc2VsZi1sZy1hdXRve2FsaWduLXNlbGY6YXV0byFpbXBvcnRhbnR9LmFsaWduLXNlbGYtbGctc3RhcnR7YWxpZ24tc2VsZjpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24tc2VsZi1sZy1lbmR7YWxpZ24tc2VsZjpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLXNlbGYtbGctY2VudGVye2FsaWduLXNlbGY6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tc2VsZi1sZy1iYXNlbGluZXthbGlnbi1zZWxmOmJhc2VsaW5lIWltcG9ydGFudH0uYWxpZ24tc2VsZi1sZy1zdHJldGNoe2FsaWduLXNlbGY6c3RyZXRjaCFpbXBvcnRhbnR9Lm9yZGVyLWxnLWZpcnN0e29yZGVyOi0xIWltcG9ydGFudH0ub3JkZXItbGctMHtvcmRlcjowIWltcG9ydGFudH0ub3JkZXItbGctMXtvcmRlcjoxIWltcG9ydGFudH0ub3JkZXItbGctMntvcmRlcjoyIWltcG9ydGFudH0ub3JkZXItbGctM3tvcmRlcjozIWltcG9ydGFudH0ub3JkZXItbGctNHtvcmRlcjo0IWltcG9ydGFudH0ub3JkZXItbGctNXtvcmRlcjo1IWltcG9ydGFudH0ub3JkZXItbGctbGFzdHtvcmRlcjo2IWltcG9ydGFudH0ubS1sZy0we21hcmdpbjowIWltcG9ydGFudH0ubS1sZy0xe21hcmdpbjouMjVyZW0haW1wb3J0YW50fS5tLWxnLTJ7bWFyZ2luOi41cmVtIWltcG9ydGFudH0ubS1sZy0ze21hcmdpbjoxcmVtIWltcG9ydGFudH0ubS1sZy00e21hcmdpbjoxLjVyZW0haW1wb3J0YW50fS5tLWxnLTV7bWFyZ2luOjNyZW0haW1wb3J0YW50fS5tLWxnLWF1dG97bWFyZ2luOmF1dG8haW1wb3J0YW50fS5teC1sZy0we21hcmdpbi1yaWdodDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXgtbGctMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDouMjVyZW0haW1wb3J0YW50fS5teC1sZy0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5teC1sZy0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXgtbGctNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxLjVyZW0haW1wb3J0YW50fS5teC1sZy01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDozcmVtIWltcG9ydGFudH0ubXgtbGctYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9Lm15LWxnLTB7bWFyZ2luLXRvcDowIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50fS5teS1sZy0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm15LWxnLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm15LWxnLTN7bWFyZ2luLXRvcDoxcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjFyZW0haW1wb3J0YW50fS5teS1sZy00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm15LWxnLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjNyZW0haW1wb3J0YW50fS5teS1sZy1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXQtbGctMHttYXJnaW4tdG9wOjAhaW1wb3J0YW50fS5tdC1sZy0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudH0ubXQtbGctMnttYXJnaW4tdG9wOi41cmVtIWltcG9ydGFudH0ubXQtbGctM3ttYXJnaW4tdG9wOjFyZW0haW1wb3J0YW50fS5tdC1sZy00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudH0ubXQtbGctNXttYXJnaW4tdG9wOjNyZW0haW1wb3J0YW50fS5tdC1sZy1hdXRve21hcmdpbi10b3A6YXV0byFpbXBvcnRhbnR9Lm1lLWxnLTB7bWFyZ2luLXJpZ2h0OjAhaW1wb3J0YW50fS5tZS1sZy0xe21hcmdpbi1yaWdodDouMjVyZW0haW1wb3J0YW50fS5tZS1sZy0ye21hcmdpbi1yaWdodDouNXJlbSFpbXBvcnRhbnR9Lm1lLWxnLTN7bWFyZ2luLXJpZ2h0OjFyZW0haW1wb3J0YW50fS5tZS1sZy00e21hcmdpbi1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5tZS1sZy01e21hcmdpbi1yaWdodDozcmVtIWltcG9ydGFudH0ubWUtbGctYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnR9Lm1iLWxnLTB7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubWItbGctMXttYXJnaW4tYm90dG9tOi4yNXJlbSFpbXBvcnRhbnR9Lm1iLWxnLTJ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm1iLWxnLTN7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubWItbGctNHttYXJnaW4tYm90dG9tOjEuNXJlbSFpbXBvcnRhbnR9Lm1iLWxnLTV7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubWItbGctYXV0b3ttYXJnaW4tYm90dG9tOmF1dG8haW1wb3J0YW50fS5tcy1sZy0we21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50fS5tcy1sZy0xe21hcmdpbi1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9Lm1zLWxnLTJ7bWFyZ2luLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5tcy1sZy0ze21hcmdpbi1sZWZ0OjFyZW0haW1wb3J0YW50fS5tcy1sZy00e21hcmdpbi1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9Lm1zLWxnLTV7bWFyZ2luLWxlZnQ6M3JlbSFpbXBvcnRhbnR9Lm1zLWxnLWF1dG97bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9LnAtbGctMHtwYWRkaW5nOjAhaW1wb3J0YW50fS5wLWxnLTF7cGFkZGluZzouMjVyZW0haW1wb3J0YW50fS5wLWxnLTJ7cGFkZGluZzouNXJlbSFpbXBvcnRhbnR9LnAtbGctM3twYWRkaW5nOjFyZW0haW1wb3J0YW50fS5wLWxnLTR7cGFkZGluZzoxLjVyZW0haW1wb3J0YW50fS5wLWxnLTV7cGFkZGluZzozcmVtIWltcG9ydGFudH0ucHgtbGctMHtwYWRkaW5nLXJpZ2h0OjAhaW1wb3J0YW50O3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHgtbGctMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnB4LWxnLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0Oi41cmVtIWltcG9ydGFudH0ucHgtbGctM3twYWRkaW5nLXJpZ2h0OjFyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHgtbGctNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnB4LWxnLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnB5LWxnLTB7cGFkZGluZy10b3A6MCFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnB5LWxnLTF7cGFkZGluZy10b3A6LjI1cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5weS1sZy0ye3BhZGRpbmctdG9wOi41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9LnB5LWxnLTN7cGFkZGluZy10b3A6MXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnB5LWxnLTR7cGFkZGluZy10b3A6MS41cmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5weS1sZy01e3BhZGRpbmctdG9wOjNyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wdC1sZy0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50fS5wdC1sZy0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnR9LnB0LWxnLTJ7cGFkZGluZy10b3A6LjVyZW0haW1wb3J0YW50fS5wdC1sZy0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50fS5wdC1sZy00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnR9LnB0LWxnLTV7cGFkZGluZy10b3A6M3JlbSFpbXBvcnRhbnR9LnBlLWxnLTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudH0ucGUtbGctMXtwYWRkaW5nLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnR9LnBlLWxnLTJ7cGFkZGluZy1yaWdodDouNXJlbSFpbXBvcnRhbnR9LnBlLWxnLTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudH0ucGUtbGctNHtwYWRkaW5nLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnR9LnBlLWxnLTV7cGFkZGluZy1yaWdodDozcmVtIWltcG9ydGFudH0ucGItbGctMHtwYWRkaW5nLWJvdHRvbTowIWltcG9ydGFudH0ucGItbGctMXtwYWRkaW5nLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5wYi1sZy0ye3BhZGRpbmctYm90dG9tOi41cmVtIWltcG9ydGFudH0ucGItbGctM3twYWRkaW5nLWJvdHRvbToxcmVtIWltcG9ydGFudH0ucGItbGctNHtwYWRkaW5nLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5wYi1sZy01e3BhZGRpbmctYm90dG9tOjNyZW0haW1wb3J0YW50fS5wcy1sZy0we3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHMtbGctMXtwYWRkaW5nLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ucHMtbGctMntwYWRkaW5nLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5wcy1sZy0ze3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHMtbGctNHtwYWRkaW5nLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ucHMtbGctNXtwYWRkaW5nLWxlZnQ6M3JlbSFpbXBvcnRhbnR9LnRleHQtbGctc3RhcnR7dGV4dC1hbGlnbjpsZWZ0IWltcG9ydGFudH0udGV4dC1sZy1lbmR7dGV4dC1hbGlnbjpyaWdodCFpbXBvcnRhbnR9LnRleHQtbGctY2VudGVye3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH19QG1lZGlhIChtaW4td2lkdGg6MTIwMHB4KXsuZmxvYXQteGwtc3RhcnR7ZmxvYXQ6bGVmdCFpbXBvcnRhbnR9LmZsb2F0LXhsLWVuZHtmbG9hdDpyaWdodCFpbXBvcnRhbnR9LmZsb2F0LXhsLW5vbmV7ZmxvYXQ6bm9uZSFpbXBvcnRhbnR9LmQteGwtaW5saW5le2Rpc3BsYXk6aW5saW5lIWltcG9ydGFudH0uZC14bC1pbmxpbmUtYmxvY2t7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50fS5kLXhsLWJsb2Nre2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fS5kLXhsLWdyaWR7ZGlzcGxheTpncmlkIWltcG9ydGFudH0uZC14bC10YWJsZXtkaXNwbGF5OnRhYmxlIWltcG9ydGFudH0uZC14bC10YWJsZS1yb3d7ZGlzcGxheTp0YWJsZS1yb3chaW1wb3J0YW50fS5kLXhsLXRhYmxlLWNlbGx7ZGlzcGxheTp0YWJsZS1jZWxsIWltcG9ydGFudH0uZC14bC1mbGV4e2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnR9LmQteGwtaW5saW5lLWZsZXh7ZGlzcGxheTppbmxpbmUtZmxleCFpbXBvcnRhbnR9LmQteGwtbm9uZXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5mbGV4LXhsLWZpbGx7ZmxleDoxIDEgYXV0byFpbXBvcnRhbnR9LmZsZXgteGwtcm93e2ZsZXgtZGlyZWN0aW9uOnJvdyFpbXBvcnRhbnR9LmZsZXgteGwtY29sdW1ue2ZsZXgtZGlyZWN0aW9uOmNvbHVtbiFpbXBvcnRhbnR9LmZsZXgteGwtcm93LXJldmVyc2V7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LXhsLWNvbHVtbi1yZXZlcnNle2ZsZXgtZGlyZWN0aW9uOmNvbHVtbi1yZXZlcnNlIWltcG9ydGFudH0uZmxleC14bC1ncm93LTB7ZmxleC1ncm93OjAhaW1wb3J0YW50fS5mbGV4LXhsLWdyb3ctMXtmbGV4LWdyb3c6MSFpbXBvcnRhbnR9LmZsZXgteGwtc2hyaW5rLTB7ZmxleC1zaHJpbms6MCFpbXBvcnRhbnR9LmZsZXgteGwtc2hyaW5rLTF7ZmxleC1zaHJpbms6MSFpbXBvcnRhbnR9LmZsZXgteGwtd3JhcHtmbGV4LXdyYXA6d3JhcCFpbXBvcnRhbnR9LmZsZXgteGwtbm93cmFwe2ZsZXgtd3JhcDpub3dyYXAhaW1wb3J0YW50fS5mbGV4LXhsLXdyYXAtcmV2ZXJzZXtmbGV4LXdyYXA6d3JhcC1yZXZlcnNlIWltcG9ydGFudH0uZ2FwLXhsLTB7Z2FwOjAhaW1wb3J0YW50fS5nYXAteGwtMXtnYXA6LjI1cmVtIWltcG9ydGFudH0uZ2FwLXhsLTJ7Z2FwOi41cmVtIWltcG9ydGFudH0uZ2FwLXhsLTN7Z2FwOjFyZW0haW1wb3J0YW50fS5nYXAteGwtNHtnYXA6MS41cmVtIWltcG9ydGFudH0uZ2FwLXhsLTV7Z2FwOjNyZW0haW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQteGwtc3RhcnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQteGwtZW5ke2p1c3RpZnktY29udGVudDpmbGV4LWVuZCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC14bC1jZW50ZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlciFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC14bC1iZXR3ZWVue2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXhsLWFyb3VuZHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXhsLWV2ZW5seXtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtZXZlbmx5IWltcG9ydGFudH0uYWxpZ24taXRlbXMteGwtc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXhsLWVuZHthbGlnbi1pdGVtczpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXhsLWNlbnRlcnthbGlnbi1pdGVtczpjZW50ZXIhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy14bC1iYXNlbGluZXthbGlnbi1pdGVtczpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXhsLXN0cmV0Y2h7YWxpZ24taXRlbXM6c3RyZXRjaCFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQteGwtc3RhcnR7YWxpZ24tY29udGVudDpmbGV4LXN0YXJ0IWltcG9ydGFudH0uYWxpZ24tY29udGVudC14bC1lbmR7YWxpZ24tY29udGVudDpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQteGwtY2VudGVye2FsaWduLWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tY29udGVudC14bC1iZXR3ZWVue2FsaWduLWNvbnRlbnQ6c3BhY2UtYmV0d2VlbiFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQteGwtYXJvdW5ke2FsaWduLWNvbnRlbnQ6c3BhY2UtYXJvdW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC14bC1zdHJldGNoe2FsaWduLWNvbnRlbnQ6c3RyZXRjaCFpbXBvcnRhbnR9LmFsaWduLXNlbGYteGwtYXV0b3thbGlnbi1zZWxmOmF1dG8haW1wb3J0YW50fS5hbGlnbi1zZWxmLXhsLXN0YXJ0e2FsaWduLXNlbGY6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLXNlbGYteGwtZW5ke2FsaWduLXNlbGY6ZmxleC1lbmQhaW1wb3J0YW50fS5hbGlnbi1zZWxmLXhsLWNlbnRlcnthbGlnbi1zZWxmOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLXNlbGYteGwtYmFzZWxpbmV7YWxpZ24tc2VsZjpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLXNlbGYteGwtc3RyZXRjaHthbGlnbi1zZWxmOnN0cmV0Y2ghaW1wb3J0YW50fS5vcmRlci14bC1maXJzdHtvcmRlcjotMSFpbXBvcnRhbnR9Lm9yZGVyLXhsLTB7b3JkZXI6MCFpbXBvcnRhbnR9Lm9yZGVyLXhsLTF7b3JkZXI6MSFpbXBvcnRhbnR9Lm9yZGVyLXhsLTJ7b3JkZXI6MiFpbXBvcnRhbnR9Lm9yZGVyLXhsLTN7b3JkZXI6MyFpbXBvcnRhbnR9Lm9yZGVyLXhsLTR7b3JkZXI6NCFpbXBvcnRhbnR9Lm9yZGVyLXhsLTV7b3JkZXI6NSFpbXBvcnRhbnR9Lm9yZGVyLXhsLWxhc3R7b3JkZXI6NiFpbXBvcnRhbnR9Lm0teGwtMHttYXJnaW46MCFpbXBvcnRhbnR9Lm0teGwtMXttYXJnaW46LjI1cmVtIWltcG9ydGFudH0ubS14bC0ye21hcmdpbjouNXJlbSFpbXBvcnRhbnR9Lm0teGwtM3ttYXJnaW46MXJlbSFpbXBvcnRhbnR9Lm0teGwtNHttYXJnaW46MS41cmVtIWltcG9ydGFudH0ubS14bC01e21hcmdpbjozcmVtIWltcG9ydGFudH0ubS14bC1hdXRve21hcmdpbjphdXRvIWltcG9ydGFudH0ubXgteGwtMHttYXJnaW4tcmlnaHQ6MCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnR9Lm14LXhsLTF7bWFyZ2luLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ubXgteGwtMnttYXJnaW4tcmlnaHQ6LjVyZW0haW1wb3J0YW50O21hcmdpbi1sZWZ0Oi41cmVtIWltcG9ydGFudH0ubXgteGwtM3ttYXJnaW4tcmlnaHQ6MXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MXJlbSFpbXBvcnRhbnR9Lm14LXhsLTR7bWFyZ2luLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ubXgteGwtNXttYXJnaW4tcmlnaHQ6M3JlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6M3JlbSFpbXBvcnRhbnR9Lm14LXhsLWF1dG97bWFyZ2luLXJpZ2h0OmF1dG8haW1wb3J0YW50O21hcmdpbi1sZWZ0OmF1dG8haW1wb3J0YW50fS5teS14bC0we21hcmdpbi10b3A6MCFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubXkteGwtMXttYXJnaW4tdG9wOi4yNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5teS14bC0ye21hcmdpbi10b3A6LjVyZW0haW1wb3J0YW50O21hcmdpbi1ib3R0b206LjVyZW0haW1wb3J0YW50fS5teS14bC0ze21hcmdpbi10b3A6MXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubXkteGwtNHttYXJnaW4tdG9wOjEuNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5teS14bC01e21hcmdpbi10b3A6M3JlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubXkteGwtYXV0b3ttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50O21hcmdpbi1ib3R0b206YXV0byFpbXBvcnRhbnR9Lm10LXhsLTB7bWFyZ2luLXRvcDowIWltcG9ydGFudH0ubXQteGwtMXttYXJnaW4tdG9wOi4yNXJlbSFpbXBvcnRhbnR9Lm10LXhsLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnR9Lm10LXhsLTN7bWFyZ2luLXRvcDoxcmVtIWltcG9ydGFudH0ubXQteGwtNHttYXJnaW4tdG9wOjEuNXJlbSFpbXBvcnRhbnR9Lm10LXhsLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudH0ubXQteGwtYXV0b3ttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50fS5tZS14bC0we21hcmdpbi1yaWdodDowIWltcG9ydGFudH0ubWUteGwtMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudH0ubWUteGwtMnttYXJnaW4tcmlnaHQ6LjVyZW0haW1wb3J0YW50fS5tZS14bC0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudH0ubWUteGwtNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudH0ubWUteGwtNXttYXJnaW4tcmlnaHQ6M3JlbSFpbXBvcnRhbnR9Lm1lLXhsLWF1dG97bWFyZ2luLXJpZ2h0OmF1dG8haW1wb3J0YW50fS5tYi14bC0we21hcmdpbi1ib3R0b206MCFpbXBvcnRhbnR9Lm1iLXhsLTF7bWFyZ2luLWJvdHRvbTouMjVyZW0haW1wb3J0YW50fS5tYi14bC0ye21hcmdpbi1ib3R0b206LjVyZW0haW1wb3J0YW50fS5tYi14bC0ze21hcmdpbi1ib3R0b206MXJlbSFpbXBvcnRhbnR9Lm1iLXhsLTR7bWFyZ2luLWJvdHRvbToxLjVyZW0haW1wb3J0YW50fS5tYi14bC01e21hcmdpbi1ib3R0b206M3JlbSFpbXBvcnRhbnR9Lm1iLXhsLWF1dG97bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXMteGwtMHttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXMteGwtMXttYXJnaW4tbGVmdDouMjVyZW0haW1wb3J0YW50fS5tcy14bC0ye21hcmdpbi1sZWZ0Oi41cmVtIWltcG9ydGFudH0ubXMteGwtM3ttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXMteGwtNHttYXJnaW4tbGVmdDoxLjVyZW0haW1wb3J0YW50fS5tcy14bC01e21hcmdpbi1sZWZ0OjNyZW0haW1wb3J0YW50fS5tcy14bC1hdXRve21hcmdpbi1sZWZ0OmF1dG8haW1wb3J0YW50fS5wLXhsLTB7cGFkZGluZzowIWltcG9ydGFudH0ucC14bC0xe3BhZGRpbmc6LjI1cmVtIWltcG9ydGFudH0ucC14bC0ye3BhZGRpbmc6LjVyZW0haW1wb3J0YW50fS5wLXhsLTN7cGFkZGluZzoxcmVtIWltcG9ydGFudH0ucC14bC00e3BhZGRpbmc6MS41cmVtIWltcG9ydGFudH0ucC14bC01e3BhZGRpbmc6M3JlbSFpbXBvcnRhbnR9LnB4LXhsLTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnR9LnB4LXhsLTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDouMjVyZW0haW1wb3J0YW50fS5weC14bC0ye3BhZGRpbmctcmlnaHQ6LjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDouNXJlbSFpbXBvcnRhbnR9LnB4LXhsLTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MXJlbSFpbXBvcnRhbnR9LnB4LXhsLTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxLjVyZW0haW1wb3J0YW50fS5weC14bC01e3BhZGRpbmctcmlnaHQ6M3JlbSFpbXBvcnRhbnQ7cGFkZGluZy1sZWZ0OjNyZW0haW1wb3J0YW50fS5weS14bC0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjAhaW1wb3J0YW50fS5weS14bC0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucHkteGwtMntwYWRkaW5nLXRvcDouNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206LjVyZW0haW1wb3J0YW50fS5weS14bC0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjFyZW0haW1wb3J0YW50fS5weS14bC00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucHkteGwtNXtwYWRkaW5nLXRvcDozcmVtIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTozcmVtIWltcG9ydGFudH0ucHQteGwtMHtwYWRkaW5nLXRvcDowIWltcG9ydGFudH0ucHQteGwtMXtwYWRkaW5nLXRvcDouMjVyZW0haW1wb3J0YW50fS5wdC14bC0ye3BhZGRpbmctdG9wOi41cmVtIWltcG9ydGFudH0ucHQteGwtM3twYWRkaW5nLXRvcDoxcmVtIWltcG9ydGFudH0ucHQteGwtNHtwYWRkaW5nLXRvcDoxLjVyZW0haW1wb3J0YW50fS5wdC14bC01e3BhZGRpbmctdG9wOjNyZW0haW1wb3J0YW50fS5wZS14bC0we3BhZGRpbmctcmlnaHQ6MCFpbXBvcnRhbnR9LnBlLXhsLTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50fS5wZS14bC0ye3BhZGRpbmctcmlnaHQ6LjVyZW0haW1wb3J0YW50fS5wZS14bC0ze3BhZGRpbmctcmlnaHQ6MXJlbSFpbXBvcnRhbnR9LnBlLXhsLTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5wZS14bC01e3BhZGRpbmctcmlnaHQ6M3JlbSFpbXBvcnRhbnR9LnBiLXhsLTB7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnBiLXhsLTF7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucGIteGwtMntwYWRkaW5nLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9LnBiLXhsLTN7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnBiLXhsLTR7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucGIteGwtNXtwYWRkaW5nLWJvdHRvbTozcmVtIWltcG9ydGFudH0ucHMteGwtMHtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnR9LnBzLXhsLTF7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnBzLXhsLTJ7cGFkZGluZy1sZWZ0Oi41cmVtIWltcG9ydGFudH0ucHMteGwtM3twYWRkaW5nLWxlZnQ6MXJlbSFpbXBvcnRhbnR9LnBzLXhsLTR7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnBzLXhsLTV7cGFkZGluZy1sZWZ0OjNyZW0haW1wb3J0YW50fS50ZXh0LXhsLXN0YXJ0e3RleHQtYWxpZ246bGVmdCFpbXBvcnRhbnR9LnRleHQteGwtZW5ke3RleHQtYWxpZ246cmlnaHQhaW1wb3J0YW50fS50ZXh0LXhsLWNlbnRlcnt0ZXh0LWFsaWduOmNlbnRlciFpbXBvcnRhbnR9fUBtZWRpYSAobWluLXdpZHRoOjE0MDBweCl7LmZsb2F0LXh4bC1zdGFydHtmbG9hdDpsZWZ0IWltcG9ydGFudH0uZmxvYXQteHhsLWVuZHtmbG9hdDpyaWdodCFpbXBvcnRhbnR9LmZsb2F0LXh4bC1ub25le2Zsb2F0Om5vbmUhaW1wb3J0YW50fS5kLXh4bC1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLXh4bC1pbmxpbmUtYmxvY2t7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50fS5kLXh4bC1ibG9ja3tkaXNwbGF5OmJsb2NrIWltcG9ydGFudH0uZC14eGwtZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLXh4bC10YWJsZXtkaXNwbGF5OnRhYmxlIWltcG9ydGFudH0uZC14eGwtdGFibGUtcm93e2Rpc3BsYXk6dGFibGUtcm93IWltcG9ydGFudH0uZC14eGwtdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLXh4bC1mbGV4e2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnR9LmQteHhsLWlubGluZS1mbGV4e2Rpc3BsYXk6aW5saW5lLWZsZXghaW1wb3J0YW50fS5kLXh4bC1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmZsZXgteHhsLWZpbGx7ZmxleDoxIDEgYXV0byFpbXBvcnRhbnR9LmZsZXgteHhsLXJvd3tmbGV4LWRpcmVjdGlvbjpyb3chaW1wb3J0YW50fS5mbGV4LXh4bC1jb2x1bW57ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudH0uZmxleC14eGwtcm93LXJldmVyc2V7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2UhaW1wb3J0YW50fS5mbGV4LXh4bC1jb2x1bW4tcmV2ZXJzZXtmbGV4LWRpcmVjdGlvbjpjb2x1bW4tcmV2ZXJzZSFpbXBvcnRhbnR9LmZsZXgteHhsLWdyb3ctMHtmbGV4LWdyb3c6MCFpbXBvcnRhbnR9LmZsZXgteHhsLWdyb3ctMXtmbGV4LWdyb3c6MSFpbXBvcnRhbnR9LmZsZXgteHhsLXNocmluay0we2ZsZXgtc2hyaW5rOjAhaW1wb3J0YW50fS5mbGV4LXh4bC1zaHJpbmstMXtmbGV4LXNocmluazoxIWltcG9ydGFudH0uZmxleC14eGwtd3JhcHtmbGV4LXdyYXA6d3JhcCFpbXBvcnRhbnR9LmZsZXgteHhsLW5vd3JhcHtmbGV4LXdyYXA6bm93cmFwIWltcG9ydGFudH0uZmxleC14eGwtd3JhcC1yZXZlcnNle2ZsZXgtd3JhcDp3cmFwLXJldmVyc2UhaW1wb3J0YW50fS5nYXAteHhsLTB7Z2FwOjAhaW1wb3J0YW50fS5nYXAteHhsLTF7Z2FwOi4yNXJlbSFpbXBvcnRhbnR9LmdhcC14eGwtMntnYXA6LjVyZW0haW1wb3J0YW50fS5nYXAteHhsLTN7Z2FwOjFyZW0haW1wb3J0YW50fS5nYXAteHhsLTR7Z2FwOjEuNXJlbSFpbXBvcnRhbnR9LmdhcC14eGwtNXtnYXA6M3JlbSFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC14eGwtc3RhcnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQteHhsLWVuZHtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQhaW1wb3J0YW50fS5qdXN0aWZ5LWNvbnRlbnQteHhsLWNlbnRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXh4bC1iZXR3ZWVue2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uanVzdGlmeS1jb250ZW50LXh4bC1hcm91bmR7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZCFpbXBvcnRhbnR9Lmp1c3RpZnktY29udGVudC14eGwtZXZlbmx5e2p1c3RpZnktY29udGVudDpzcGFjZS1ldmVubHkhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy14eGwtc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXh4bC1lbmR7YWxpZ24taXRlbXM6ZmxleC1lbmQhaW1wb3J0YW50fS5hbGlnbi1pdGVtcy14eGwtY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXh4bC1iYXNlbGluZXthbGlnbi1pdGVtczpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLWl0ZW1zLXh4bC1zdHJldGNoe2FsaWduLWl0ZW1zOnN0cmV0Y2ghaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LXh4bC1zdGFydHthbGlnbi1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50fS5hbGlnbi1jb250ZW50LXh4bC1lbmR7YWxpZ24tY29udGVudDpmbGV4LWVuZCFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQteHhsLWNlbnRlcnthbGlnbi1jb250ZW50OmNlbnRlciFpbXBvcnRhbnR9LmFsaWduLWNvbnRlbnQteHhsLWJldHdlZW57YWxpZ24tY29udGVudDpzcGFjZS1iZXR3ZWVuIWltcG9ydGFudH0uYWxpZ24tY29udGVudC14eGwtYXJvdW5ke2FsaWduLWNvbnRlbnQ6c3BhY2UtYXJvdW5kIWltcG9ydGFudH0uYWxpZ24tY29udGVudC14eGwtc3RyZXRjaHthbGlnbi1jb250ZW50OnN0cmV0Y2ghaW1wb3J0YW50fS5hbGlnbi1zZWxmLXh4bC1hdXRve2FsaWduLXNlbGY6YXV0byFpbXBvcnRhbnR9LmFsaWduLXNlbGYteHhsLXN0YXJ0e2FsaWduLXNlbGY6ZmxleC1zdGFydCFpbXBvcnRhbnR9LmFsaWduLXNlbGYteHhsLWVuZHthbGlnbi1zZWxmOmZsZXgtZW5kIWltcG9ydGFudH0uYWxpZ24tc2VsZi14eGwtY2VudGVye2FsaWduLXNlbGY6Y2VudGVyIWltcG9ydGFudH0uYWxpZ24tc2VsZi14eGwtYmFzZWxpbmV7YWxpZ24tc2VsZjpiYXNlbGluZSFpbXBvcnRhbnR9LmFsaWduLXNlbGYteHhsLXN0cmV0Y2h7YWxpZ24tc2VsZjpzdHJldGNoIWltcG9ydGFudH0ub3JkZXIteHhsLWZpcnN0e29yZGVyOi0xIWltcG9ydGFudH0ub3JkZXIteHhsLTB7b3JkZXI6MCFpbXBvcnRhbnR9Lm9yZGVyLXh4bC0xe29yZGVyOjEhaW1wb3J0YW50fS5vcmRlci14eGwtMntvcmRlcjoyIWltcG9ydGFudH0ub3JkZXIteHhsLTN7b3JkZXI6MyFpbXBvcnRhbnR9Lm9yZGVyLXh4bC00e29yZGVyOjQhaW1wb3J0YW50fS5vcmRlci14eGwtNXtvcmRlcjo1IWltcG9ydGFudH0ub3JkZXIteHhsLWxhc3R7b3JkZXI6NiFpbXBvcnRhbnR9Lm0teHhsLTB7bWFyZ2luOjAhaW1wb3J0YW50fS5tLXh4bC0xe21hcmdpbjouMjVyZW0haW1wb3J0YW50fS5tLXh4bC0ye21hcmdpbjouNXJlbSFpbXBvcnRhbnR9Lm0teHhsLTN7bWFyZ2luOjFyZW0haW1wb3J0YW50fS5tLXh4bC00e21hcmdpbjoxLjVyZW0haW1wb3J0YW50fS5tLXh4bC01e21hcmdpbjozcmVtIWltcG9ydGFudH0ubS14eGwtYXV0b3ttYXJnaW46YXV0byFpbXBvcnRhbnR9Lm14LXh4bC0we21hcmdpbi1yaWdodDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudH0ubXgteHhsLTF7bWFyZ2luLXJpZ2h0Oi4yNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6LjI1cmVtIWltcG9ydGFudH0ubXgteHhsLTJ7bWFyZ2luLXJpZ2h0Oi41cmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDouNXJlbSFpbXBvcnRhbnR9Lm14LXh4bC0ze21hcmdpbi1yaWdodDoxcmVtIWltcG9ydGFudDttYXJnaW4tbGVmdDoxcmVtIWltcG9ydGFudH0ubXgteHhsLTR7bWFyZ2luLXJpZ2h0OjEuNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MS41cmVtIWltcG9ydGFudH0ubXgteHhsLTV7bWFyZ2luLXJpZ2h0OjNyZW0haW1wb3J0YW50O21hcmdpbi1sZWZ0OjNyZW0haW1wb3J0YW50fS5teC14eGwtYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6YXV0byFpbXBvcnRhbnR9Lm15LXh4bC0we21hcmdpbi10b3A6MCFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTowIWltcG9ydGFudH0ubXkteHhsLTF7bWFyZ2luLXRvcDouMjVyZW0haW1wb3J0YW50O21hcmdpbi1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ubXkteHhsLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm15LXh4bC0ze21hcmdpbi10b3A6MXJlbSFpbXBvcnRhbnQ7bWFyZ2luLWJvdHRvbToxcmVtIWltcG9ydGFudH0ubXkteHhsLTR7bWFyZ2luLXRvcDoxLjVyZW0haW1wb3J0YW50O21hcmdpbi1ib3R0b206MS41cmVtIWltcG9ydGFudH0ubXkteHhsLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjNyZW0haW1wb3J0YW50fS5teS14eGwtYXV0b3ttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50O21hcmdpbi1ib3R0b206YXV0byFpbXBvcnRhbnR9Lm10LXh4bC0we21hcmdpbi10b3A6MCFpbXBvcnRhbnR9Lm10LXh4bC0xe21hcmdpbi10b3A6LjI1cmVtIWltcG9ydGFudH0ubXQteHhsLTJ7bWFyZ2luLXRvcDouNXJlbSFpbXBvcnRhbnR9Lm10LXh4bC0ze21hcmdpbi10b3A6MXJlbSFpbXBvcnRhbnR9Lm10LXh4bC00e21hcmdpbi10b3A6MS41cmVtIWltcG9ydGFudH0ubXQteHhsLTV7bWFyZ2luLXRvcDozcmVtIWltcG9ydGFudH0ubXQteHhsLWF1dG97bWFyZ2luLXRvcDphdXRvIWltcG9ydGFudH0ubWUteHhsLTB7bWFyZ2luLXJpZ2h0OjAhaW1wb3J0YW50fS5tZS14eGwtMXttYXJnaW4tcmlnaHQ6LjI1cmVtIWltcG9ydGFudH0ubWUteHhsLTJ7bWFyZ2luLXJpZ2h0Oi41cmVtIWltcG9ydGFudH0ubWUteHhsLTN7bWFyZ2luLXJpZ2h0OjFyZW0haW1wb3J0YW50fS5tZS14eGwtNHttYXJnaW4tcmlnaHQ6MS41cmVtIWltcG9ydGFudH0ubWUteHhsLTV7bWFyZ2luLXJpZ2h0OjNyZW0haW1wb3J0YW50fS5tZS14eGwtYXV0b3ttYXJnaW4tcmlnaHQ6YXV0byFpbXBvcnRhbnR9Lm1iLXh4bC0we21hcmdpbi1ib3R0b206MCFpbXBvcnRhbnR9Lm1iLXh4bC0xe21hcmdpbi1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ubWIteHhsLTJ7bWFyZ2luLWJvdHRvbTouNXJlbSFpbXBvcnRhbnR9Lm1iLXh4bC0ze21hcmdpbi1ib3R0b206MXJlbSFpbXBvcnRhbnR9Lm1iLXh4bC00e21hcmdpbi1ib3R0b206MS41cmVtIWltcG9ydGFudH0ubWIteHhsLTV7bWFyZ2luLWJvdHRvbTozcmVtIWltcG9ydGFudH0ubWIteHhsLWF1dG97bWFyZ2luLWJvdHRvbTphdXRvIWltcG9ydGFudH0ubXMteHhsLTB7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnR9Lm1zLXh4bC0xe21hcmdpbi1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9Lm1zLXh4bC0ye21hcmdpbi1sZWZ0Oi41cmVtIWltcG9ydGFudH0ubXMteHhsLTN7bWFyZ2luLWxlZnQ6MXJlbSFpbXBvcnRhbnR9Lm1zLXh4bC00e21hcmdpbi1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9Lm1zLXh4bC01e21hcmdpbi1sZWZ0OjNyZW0haW1wb3J0YW50fS5tcy14eGwtYXV0b3ttYXJnaW4tbGVmdDphdXRvIWltcG9ydGFudH0ucC14eGwtMHtwYWRkaW5nOjAhaW1wb3J0YW50fS5wLXh4bC0xe3BhZGRpbmc6LjI1cmVtIWltcG9ydGFudH0ucC14eGwtMntwYWRkaW5nOi41cmVtIWltcG9ydGFudH0ucC14eGwtM3twYWRkaW5nOjFyZW0haW1wb3J0YW50fS5wLXh4bC00e3BhZGRpbmc6MS41cmVtIWltcG9ydGFudH0ucC14eGwtNXtwYWRkaW5nOjNyZW0haW1wb3J0YW50fS5weC14eGwtMHtwYWRkaW5nLXJpZ2h0OjAhaW1wb3J0YW50O3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHgteHhsLTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDouMjVyZW0haW1wb3J0YW50fS5weC14eGwtMntwYWRkaW5nLXJpZ2h0Oi41cmVtIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6LjVyZW0haW1wb3J0YW50fS5weC14eGwtM3twYWRkaW5nLXJpZ2h0OjFyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHgteHhsLTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDoxLjVyZW0haW1wb3J0YW50fS5weC14eGwtNXtwYWRkaW5nLXJpZ2h0OjNyZW0haW1wb3J0YW50O3BhZGRpbmctbGVmdDozcmVtIWltcG9ydGFudH0ucHkteHhsLTB7cGFkZGluZy10b3A6MCFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MCFpbXBvcnRhbnR9LnB5LXh4bC0xe3BhZGRpbmctdG9wOi4yNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucHkteHhsLTJ7cGFkZGluZy10b3A6LjVyZW0haW1wb3J0YW50O3BhZGRpbmctYm90dG9tOi41cmVtIWltcG9ydGFudH0ucHkteHhsLTN7cGFkZGluZy10b3A6MXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MXJlbSFpbXBvcnRhbnR9LnB5LXh4bC00e3BhZGRpbmctdG9wOjEuNXJlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucHkteHhsLTV7cGFkZGluZy10b3A6M3JlbSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206M3JlbSFpbXBvcnRhbnR9LnB0LXh4bC0we3BhZGRpbmctdG9wOjAhaW1wb3J0YW50fS5wdC14eGwtMXtwYWRkaW5nLXRvcDouMjVyZW0haW1wb3J0YW50fS5wdC14eGwtMntwYWRkaW5nLXRvcDouNXJlbSFpbXBvcnRhbnR9LnB0LXh4bC0ze3BhZGRpbmctdG9wOjFyZW0haW1wb3J0YW50fS5wdC14eGwtNHtwYWRkaW5nLXRvcDoxLjVyZW0haW1wb3J0YW50fS5wdC14eGwtNXtwYWRkaW5nLXRvcDozcmVtIWltcG9ydGFudH0ucGUteHhsLTB7cGFkZGluZy1yaWdodDowIWltcG9ydGFudH0ucGUteHhsLTF7cGFkZGluZy1yaWdodDouMjVyZW0haW1wb3J0YW50fS5wZS14eGwtMntwYWRkaW5nLXJpZ2h0Oi41cmVtIWltcG9ydGFudH0ucGUteHhsLTN7cGFkZGluZy1yaWdodDoxcmVtIWltcG9ydGFudH0ucGUteHhsLTR7cGFkZGluZy1yaWdodDoxLjVyZW0haW1wb3J0YW50fS5wZS14eGwtNXtwYWRkaW5nLXJpZ2h0OjNyZW0haW1wb3J0YW50fS5wYi14eGwtMHtwYWRkaW5nLWJvdHRvbTowIWltcG9ydGFudH0ucGIteHhsLTF7cGFkZGluZy1ib3R0b206LjI1cmVtIWltcG9ydGFudH0ucGIteHhsLTJ7cGFkZGluZy1ib3R0b206LjVyZW0haW1wb3J0YW50fS5wYi14eGwtM3twYWRkaW5nLWJvdHRvbToxcmVtIWltcG9ydGFudH0ucGIteHhsLTR7cGFkZGluZy1ib3R0b206MS41cmVtIWltcG9ydGFudH0ucGIteHhsLTV7cGFkZGluZy1ib3R0b206M3JlbSFpbXBvcnRhbnR9LnBzLXh4bC0we3BhZGRpbmctbGVmdDowIWltcG9ydGFudH0ucHMteHhsLTF7cGFkZGluZy1sZWZ0Oi4yNXJlbSFpbXBvcnRhbnR9LnBzLXh4bC0ye3BhZGRpbmctbGVmdDouNXJlbSFpbXBvcnRhbnR9LnBzLXh4bC0ze3BhZGRpbmctbGVmdDoxcmVtIWltcG9ydGFudH0ucHMteHhsLTR7cGFkZGluZy1sZWZ0OjEuNXJlbSFpbXBvcnRhbnR9LnBzLXh4bC01e3BhZGRpbmctbGVmdDozcmVtIWltcG9ydGFudH0udGV4dC14eGwtc3RhcnR7dGV4dC1hbGlnbjpsZWZ0IWltcG9ydGFudH0udGV4dC14eGwtZW5ke3RleHQtYWxpZ246cmlnaHQhaW1wb3J0YW50fS50ZXh0LXh4bC1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50fX1AbWVkaWEgKG1pbi13aWR0aDoxMjAwcHgpey5mcy0xe2ZvbnQtc2l6ZToyLjVyZW0haW1wb3J0YW50fS5mcy0ye2ZvbnQtc2l6ZToycmVtIWltcG9ydGFudH0uZnMtM3tmb250LXNpemU6MS43NXJlbSFpbXBvcnRhbnR9LmZzLTR7Zm9udC1zaXplOjEuNXJlbSFpbXBvcnRhbnR9fUBtZWRpYSBwcmludHsuZC1wcmludC1pbmxpbmV7ZGlzcGxheTppbmxpbmUhaW1wb3J0YW50fS5kLXByaW50LWlubGluZS1ibG9ja3tkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnR9LmQtcHJpbnQtYmxvY2t7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LmQtcHJpbnQtZ3JpZHtkaXNwbGF5OmdyaWQhaW1wb3J0YW50fS5kLXByaW50LXRhYmxle2Rpc3BsYXk6dGFibGUhaW1wb3J0YW50fS5kLXByaW50LXRhYmxlLXJvd3tkaXNwbGF5OnRhYmxlLXJvdyFpbXBvcnRhbnR9LmQtcHJpbnQtdGFibGUtY2VsbHtkaXNwbGF5OnRhYmxlLWNlbGwhaW1wb3J0YW50fS5kLXByaW50LWZsZXh7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uZC1wcmludC1pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uZC1wcmludC1ub25le2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9fQovKiMgc291cmNlTWFwcGluZ1VSTD1ib290c3RyYXAubWluLmNzcy5tYXAgKi8=';

const SOURCE_INDEX = 'PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgo8dGl0bGU+U2tldGNoZXM8L3RpdGxlPgo8c3R5bGU+Cip7CgltYXJnaW46IDA7CglwYWRkaW5nOiAwOwoJZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCAnT3BlbiBTYW5zJywgJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjsKfQppbWd7CglmbG9hdDpsZWZ0OwoJb2JqZWN0LWZpdDpjb3ZlcjsKCXdpZHRoOjI1MHB4OwoJaGVpZ2h0OiAyNTBweDsKfQkJCjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+e3tSRVBMQUNFfX08L2JvZHk+CjwvaHRtbD4=';

start();

function write_list(l)
{
	FS.writeFileSync("./data.json", JSON.stringify(l), "utf8");
}

function read_list()
{
	return JSON.parse(FS.readFileSync("./data.json", "utf8"));
}

function is_valid(obj)
{
	var fields = ["elements", "appState", "name"];
	for(var i=0;i<fields.length;i++)
		if (typeof[obj[fields[i]]] == "undefined")
			return false;

	return valid;
}

function onlist(q, res)
{
	var list = read_list();
	H.end(res, 200, JSON.stringify(list));
}

function oncreate(q, res)
{
	q = H.parse_fields(q, res, {}, {})
	if (!q)
		return;

	var list = read_list();
	var id = random_str(16);
	list[id] = "New sketch";

	var empty_raster = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"
	data_url_to_file(empty_raster, "./raster/"+id);

	var empty_data = JSON.stringify({elements: [],appState: {}});
	FS.writeFileSync("./data/"+id+".json", empty_data, "utf8");

	write_list(list);
	render_index_html();
	H.end(res, 200, "");
}

function data_url_to_file(str, path)
{
	var regex = /^data:.+\/(.+);base64,(.*)$/;
	var matches = str.match(regex);
	var ext = matches[1];
	var data = matches[2];
	var buffer = Buffer.from(data, 'base64');
	FS.writeFileSync(path + '.' + ext, buffer);
}

function onget(q, res)
{
	var mandatory = { "id": "string" }
	q = H.parse_fields(q, res, mandatory, {})
	if (!q)
		return;	


	var r = FS.readFileSync("./data/"+q.id+".json", "utf8");
	H.end(res, 200, r);
}

function onupdate(q, res)
{
	var mandatory = { "id": "string" }
	var optional = 
	{
		"name": "string",
		"data": "string",
		"raster": "string",
		"thumb": "string"
	}

	q = H.parse_fields(q, res, mandatory, optional)
	if (!q)
		return;

	if (typeof q.name != "undefined")
	{
		var list = read_list();
		list[q.id] = q.name;
		console.log(q.name);
		write_list(list);
		render_index_html();
	}

	if (typeof q.raster != "undefined")
		FS.writeFileSync("./raster/"+q.id+".png", hex_to_bin(q.raster));

	if (typeof q.thumb != "undefined")
		FS.writeFileSync("./thumb/"+q.id+".jpeg", q.thumb);

	if (typeof q.data != "undefined")
		FS.writeFileSync("./data/"+q.id+".json", q.data, "utf8");
	
	H.end(res, 200, "");
}

function onfile(q, res, token, req)
{
	var map = 
	{
		"/bootstrap.css": [SOURCE_BOOTSTRAP,"text/css"],
		"/": [SOURCE_LIST,"text/html"],
		"/draw": [SOURCE_DRAW,"text/html"],
		"/draw.js": [SOURCE_DRAW_JS,"text/javascript"]
	}

	var url = req.getUrl();
	var r = map[url]

	if (typeof r != "undefined")
		H.end(res, 200, to_utf8(r[0]), r[1]);
	else
		H.end(res, 200, url);

}

function onraster(q, res, token, req)
{
	var url = req.getUrl();
	var p = url.split("/")
	var name = p[p.length - 1];
	if (FS.existsSync("./raster/"+name))
	{
		var buffer = FS.readFileSync("./raster/"+name)
		H.end(res, 200, buffer, "image/png");
	}
	else
		H.end(res, 404, url);
}

function bin_to_hex(bin)
{
	var hex = "";
	for (var i=0;i<bin.length;i++)
	{
		var b = bin[i];
		var number = (b).toString(16).toUpperCase();
		if( (number.length % 2) > 0 )
			number = "0" + number;
		hex += number;
	}
	return hex;
}

function hex_to_bin(hex)
{
	var bin = new Uint8Array(hex.length / 2);
	for (var i=0;i<hex.length/2;i++)
	{
		var h = hex[i*2] + hex[i*2+1];
		bin[i] = parseInt(h, 16);
	}
	return bin;
}


function ondelete(q, res)
{
	var mandatory = { "id": "string" }
	q = H.parse_fields(q, res, mandatory, {})
	if (!q)
		return;

	var list = read_list();
	delete list[q.id];
	write_list(list);
	render_index_html();

	try{
		FS.unlinkSync("./raster/"+q.id+".png");
		FS.unlinkSync("./thumb/"+q.id+".jpeg");
		FS.unlinkSync("./data/"+q.id+".json");
	} catch(e){}
	
	H.end(res, 200, "");
}

function start()
{
	if (!FS.existsSync("./data/"))
	{
		FS.mkdirSync("./data/");
		console.log("created folder " + "./data/")
	}
		

	if (!FS.existsSync("./raster/"))
	{
		FS.mkdirSync("./raster/");
		console.log("created folder " + "./raster/")
	}
		

	if (!FS.existsSync("./data.json"))
	{
		FS.writeFileSync("./data.json","{}","utf8");
		console.log("created file " + "./data.json")
	}


	H.enable_cors();
	H.get("/api/get", onget);
	H.get("/api/list", onlist);
	H.get("/api/create", oncreate);
	H.post("/api/update", onupdate);
	H.post("/api/delete", ondelete);
	H.get("/raster/*", onraster);
	H.get("/*", onfile);
	H.start(4040);
	render_index_html();
}

function to_utf8(source)
{
	return Buffer.from(source, 'base64').toString('utf8');
}

function render_index_html()
{
	var index = to_utf8(SOURCE_INDEX);
	
	var list = read_list();
	var s = "";
	for (var key in list)
	{
		s += `	<a style="padding: 10px; border: solid 1px #eee; float:left;width:250px;" title="${list[key]}" target="_blank" href="raster/${key}.png">
				<div style="text-align:center; width:250px; float:left;">${list[key]}</div>
				<img src="raster/${key}.png">
			</a>`
	}
	index = index.replace("{{REPLACE}}", s);
	FS.writeFileSync("./index.html", index, "utf8");
}


function random_str(l)
{
	function r(){ return Math.floor(Math.random() * 16); }
	var s = ""
	for (var i=0;i<l;i++)
	{
		s += r().toString(16);
	}

	return s;
}
